"use strict";(self.webpackChunklocums_project=self.webpackChunklocums_project||[]).push([[179],{6304:(It,Le,z)=>{z.d(Le,{Dh:()=>We,GT:()=>Te,cc:()=>$e,hO:()=>nt,on:()=>Q,pX:()=>ge,xv:()=>xe});var u=z(5879),K=z(120),G=z(2793);It=z.hmd(It);const ae=["ngOnDestroy"],ge=(it,Bt,Mt,_e={})=>new Proxy(it,{get:(Ve,me)=>Mt.runOutsideAngular(()=>{var Re;if(it[me])return!(null===(Re=_e?.spy)||void 0===Re)&&Re.get&&_e.spy.get(me,it[me]),it[me];if(ae.indexOf(me)>-1)return()=>{};const qe=Bt.toPromise().then(ot=>{const At=ot&&ot[me];return"function"==typeof At?At.bind(ot):At&&At.then?At.then(vt=>Mt.run(()=>vt)):Mt.run(()=>At)});return new Proxy(()=>{},{get:(ot,At)=>qe[At],apply:(ot,At,vt)=>qe.then(Nn=>{var bi;const er=Nn&&Nn(...vt);return!(null===(bi=_e?.spy)||void 0===bi)&&bi.apply&&_e.spy.apply(me,vt,er),er})})})}),Te=(it,Bt)=>{Bt.forEach(Mt=>{Object.getOwnPropertyNames(Mt.prototype||Mt).forEach(_e=>{Object.defineProperty(it.prototype,_e,Object.getOwnPropertyDescriptor(Mt.prototype||Mt,_e))})})};class Oe{constructor(Bt){return Bt}}const We=new u.OlP("angularfire2.app.options"),xe=new u.OlP("angularfire2.app.name");function Q(it,Bt,Mt){const Ve="object"==typeof Mt&&Mt||{};Ve.name=Ve.name||"string"==typeof Mt&&Mt||"[DEFAULT]";const Re=K.Z.apps.filter(qe=>qe&&qe.name===Ve.name)[0]||Bt.runOutsideAngular(()=>K.Z.initializeApp(it,Ve));try{JSON.stringify(it)!==JSON.stringify(Re.options)&&ee("error",`${Re.name} Firebase App already initialized with different options${It.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Oe(Re)}const ee=(it,...Bt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[it](...Bt)},he={provide:Oe,useFactory:Q,deps:[We,u.R0b,[new u.FiY,xe]]};let nt=(()=>{class it{constructor(Mt){K.Z.registerVersion("angularfire",G.q4.full,"core"),K.Z.registerVersion("angularfire",G.q4.full,"app-compat"),K.Z.registerVersion("angular",u.q4F.full,Mt.toString())}static initializeApp(Mt,_e){return{ngModule:it,providers:[{provide:We,useValue:Mt},{provide:xe,useValue:_e}]}}}return it.\u0275fac=function(Mt){return new(Mt||it)(u.LFG(u.Lbi))},it.\u0275mod=u.oAB({type:it}),it.\u0275inj=u.cJS({providers:[he]}),it})();function $e(it,Bt,Mt,_e,Ve){const[,me,Re]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===it)||[];if(me)return function ht(it,Bt){try{return it.toString()===Bt.toString()}catch{return it===Bt}}(Ve,Re)||(pt("error",`${Bt} was already initialized on the ${Mt} Firebase App with different settings.${Ye?" You may need to reload as Firebase is not HMR aware.":""}`),pt("warn",{is:Ve,was:Re})),me;{const qe=_e();return globalThis.\u0275AngularfireInstanceCache.push([it,qe,Ve]),qe}}const Ye=!!It.hot,pt=(it,...Bt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[it](...Bt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(It,Le,z)=>{z.d(Le,{q4:()=>Lc,iC:()=>bs,HU:()=>Kl,vb:()=>ys,JM:()=>al});var u=z(5879),K=z(4097),G=z(5861),ae=z(534),ge=z(9058),Te=z(4537),Oe=z(7879);const We=(I,O)=>O.some(L=>I instanceof L);let xe,Q;const nt=new WeakMap,$e=new WeakMap,ht=new WeakMap,Ye=new WeakMap,pt=new WeakMap;let Mt={get(I,O,L){if(I instanceof IDBTransaction){if("done"===O)return $e.get(I);if("objectStoreNames"===O)return I.objectStoreNames||ht.get(I);if("store"===O)return L.objectStoreNames[1]?void 0:L.objectStore(L.objectStoreNames[0])}return Re(I[O])},set:(I,O,L)=>(I[O]=L,!0),has:(I,O)=>I instanceof IDBTransaction&&("done"===O||"store"===O)||O in I};function me(I){return"function"==typeof I?function Ve(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...O){return I.apply(qe(this),O),Re(nt.get(this))}:function(...O){return Re(I.apply(qe(this),O))}:function(O,...L){const Z=I.call(qe(this),O,...L);return ht.set(Z,O.sort?O.sort():[O]),Re(Z)}}(I):(I instanceof IDBTransaction&&function Bt(I){if($e.has(I))return;const O=new Promise((L,Z)=>{const ne=()=>{I.removeEventListener("complete",se),I.removeEventListener("error",Ae),I.removeEventListener("abort",Ae)},se=()=>{L(),ne()},Ae=()=>{Z(I.error||new DOMException("AbortError","AbortError")),ne()};I.addEventListener("complete",se),I.addEventListener("error",Ae),I.addEventListener("abort",Ae)});$e.set(I,O)}(I),We(I,function ee(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Mt):I)}function Re(I){if(I instanceof IDBRequest)return function it(I){const O=new Promise((L,Z)=>{const ne=()=>{I.removeEventListener("success",se),I.removeEventListener("error",Ae)},se=()=>{L(Re(I.result)),ne()},Ae=()=>{Z(I.error),ne()};I.addEventListener("success",se),I.addEventListener("error",Ae)});return O.then(L=>{L instanceof IDBCursor&&nt.set(L,I)}).catch(()=>{}),pt.set(O,I),O}(I);if(Ye.has(I))return Ye.get(I);const O=me(I);return O!==I&&(Ye.set(I,O),pt.set(O,I)),O}const qe=I=>pt.get(I),vt=["get","getKey","getAll","getAllKeys","count"],Nn=["put","add","delete","clear"],bi=new Map;function er(I,O){if(!(I instanceof IDBDatabase)||O in I||"string"!=typeof O)return;if(bi.get(O))return bi.get(O);const L=O.replace(/FromIndex$/,""),Z=O!==L,ne=Nn.includes(L);if(!(L in(Z?IDBIndex:IDBObjectStore).prototype)||!ne&&!vt.includes(L))return;const se=function(){var Ae=(0,G.Z)(function*(mt,...ft){const Nt=this.transaction(mt,ne?"readwrite":"readonly");let sn=Nt.store;return Z&&(sn=sn.index(ft.shift())),(yield Promise.all([sn[L](...ft),ne&&Nt.done]))[0]});return function(ft){return Ae.apply(this,arguments)}}();return bi.set(O,se),se}!function _e(I){Mt=I(Mt)}(I=>({...I,get:(O,L,Z)=>er(O,L)||I.get(O,L,Z),has:(O,L)=>!!er(O,L)||I.has(O,L)}));const Do="@firebase/installations",Ce="0.6.4",Fe=1e4,je=`w:${Ce}`,et="FIS_v2",dt="https://firebaseinstallations.googleapis.com/v1",ct=36e5,Dt=new ge.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ot(I){return I instanceof ge.ZR&&I.code.includes("request-failed")}function Vn({projectId:I}){return`${dt}/projects/${I}/installations`}function Fn(I){return{token:I.token,requestStatus:2,expiresIn:de(I.expiresIn),creationTime:Date.now()}}function bn(I,O){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,G.Z)(function*(I,O){const Z=(yield O.json()).error;return Dt.create("request-failed",{requestName:I,serverCode:Z.code,serverMessage:Z.message,serverStatus:Z.status})})).apply(this,arguments)}function Gi({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function wi(I){return Je.apply(this,arguments)}function Je(){return(Je=(0,G.Z)(function*(I){const O=yield I();return O.status>=500&&O.status<600?I():O})).apply(this,arguments)}function de(I){return Number(I.replace("s","000"))}function He(){return(He=(0,G.Z)(function*({appConfig:I,heartbeatServiceProvider:O},{fid:L}){const Z=Vn(I),ne=Gi(I),se=O.getImmediate({optional:!0});if(se){const Nt=yield se.getHeartbeatsHeader();Nt&&ne.append("x-firebase-client",Nt)}const mt={method:"POST",headers:ne,body:JSON.stringify({fid:L,authVersion:et,appId:I.appId,sdkVersion:je})},ft=yield wi(()=>fetch(Z,mt));if(ft.ok){const Nt=yield ft.json();return{fid:Nt.fid||L,registrationStatus:2,refreshToken:Nt.refreshToken,authToken:Fn(Nt.authToken)}}throw yield bn("Create Installation",ft)})).apply(this,arguments)}function rt(I){return new Promise(O=>{setTimeout(O,I)})}const Qn=/^[cdef][\w-]{21}$/,Ke="";function ut(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const L=function yt(I){return function _t(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Qn.test(L)?L:Ke}catch{return Ke}}function wn(I){return`${I.appName}!${I.appId}`}const si=new Map;function pn(I,O){const L=wn(I);ao(L,O),function nn(I,O){const L=function on(){return!Ln&&"BroadcastChannel"in self&&(Ln=new BroadcastChannel("[Firebase] FID Change"),Ln.onmessage=I=>{ao(I.data.key,I.data.fid)}),Ln}();L&&L.postMessage({key:I,fid:O}),function Xn(){0===si.size&&Ln&&(Ln.close(),Ln=null)}()}(L,O)}function ao(I,O){const L=si.get(I);if(L)for(const Z of L)Z(O)}let Ln=null;const Gr="firebase-installations-database",$r=1,wr="firebase-installations-store";let Si=null;function xi(){return Si||(Si=function ot(I,O,{blocked:L,upgrade:Z,blocking:ne,terminated:se}={}){const Ae=indexedDB.open(I,O),mt=Re(Ae);return Z&&Ae.addEventListener("upgradeneeded",ft=>{Z(Re(Ae.result),ft.oldVersion,ft.newVersion,Re(Ae.transaction))}),L&&Ae.addEventListener("blocked",()=>L()),mt.then(ft=>{se&&ft.addEventListener("close",()=>se()),ne&&ft.addEventListener("versionchange",()=>ne())}).catch(()=>{}),mt}(Gr,$r,{upgrade:(I,O)=>{0===O&&I.createObjectStore(wr)}})),Si}function tr(I,O){return di.apply(this,arguments)}function di(){return(di=(0,G.Z)(function*(I,O){const L=wn(I),ne=(yield xi()).transaction(wr,"readwrite"),se=ne.objectStore(wr),Ae=yield se.get(L);return yield se.put(O,L),yield ne.done,(!Ae||Ae.fid!==O.fid)&&pn(I,O.fid),O})).apply(this,arguments)}function zr(I){return jn.apply(this,arguments)}function jn(){return(jn=(0,G.Z)(function*(I){const O=wn(I),Z=(yield xi()).transaction(wr,"readwrite");yield Z.objectStore(wr).delete(O),yield Z.done})).apply(this,arguments)}function lo(I,O){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,G.Z)(function*(I,O){const L=wn(I),ne=(yield xi()).transaction(wr,"readwrite"),se=ne.objectStore(wr),Ae=yield se.get(L),mt=O(Ae);return void 0===mt?yield se.delete(L):yield se.put(mt,L),yield ne.done,mt&&(!Ae||Ae.fid!==mt.fid)&&pn(I,mt.fid),mt})).apply(this,arguments)}function te(I){return J.apply(this,arguments)}function J(){return J=(0,G.Z)(function*(I){let O;const L=yield lo(I.appConfig,Z=>{const ne=function $(I){return Ht(I||{fid:ut(),registrationStatus:0})}(Z),se=function q(I,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(Dt.create("app-offline"))};const L={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},Z=function H(I,O){return le.apply(this,arguments)}(I,L);return{installationEntry:L,registrationPromise:Z}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:Pe(I)}:{installationEntry:O}}(I,ne);return O=se.registrationPromise,se.installationEntry});return L.fid===Ke?{installationEntry:yield O}:{installationEntry:L,registrationPromise:O}}),J.apply(this,arguments)}function le(){return le=(0,G.Z)(function*(I,O){try{const L=yield function Se(I,O){return He.apply(this,arguments)}(I,O);return tr(I.appConfig,L)}catch(L){throw Ot(L)&&409===L.customData.serverCode?yield zr(I.appConfig):yield tr(I.appConfig,{fid:O.fid,registrationStatus:0}),L}}),le.apply(this,arguments)}function Pe(I){return gt.apply(this,arguments)}function gt(){return(gt=(0,G.Z)(function*(I){let O=yield Vt(I.appConfig);for(;1===O.registrationStatus;)yield rt(100),O=yield Vt(I.appConfig);if(0===O.registrationStatus){const{installationEntry:L,registrationPromise:Z}=yield te(I);return Z||L}return O})).apply(this,arguments)}function Vt(I){return lo(I,O=>{if(!O)throw Dt.create("installation-not-found");return Ht(O)})}function Ht(I){return function kt(I){return 1===I.registrationStatus&&I.registrationTime+Fe<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Un(){return(Un=(0,G.Z)(function*({appConfig:I,heartbeatServiceProvider:O},L){const Z=function hn(I,{fid:O}){return`${Vn(I)}/${O}/authTokens:generate`}(I,L),ne=function $n(I,{refreshToken:O}){const L=Gi(I);return L.append("Authorization",function oe(I){return`${et} ${I}`}(O)),L}(I,L),se=O.getImmediate({optional:!0});if(se){const Nt=yield se.getHeartbeatsHeader();Nt&&ne.append("x-firebase-client",Nt)}const mt={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:je,appId:I.appId}})},ft=yield wi(()=>fetch(Z,mt));if(ft.ok)return Fn(yield ft.json());throw yield bn("Generate Auth Token",ft)})).apply(this,arguments)}function $i(I){return ar.apply(this,arguments)}function ar(){return ar=(0,G.Z)(function*(I,O=!1){let L;const Z=yield lo(I.appConfig,se=>{if(!Qt(se))throw Dt.create("not-registered");const Ae=se.authToken;if(!O&&function xn(I){return 2===I.requestStatus&&!function Ii(I){const O=Date.now();return O<I.creationTime||I.creationTime+I.expiresIn<O+ct}(I)}(Ae))return se;if(1===Ae.requestStatus)return L=function Ne(I,O){return pe.apply(this,arguments)}(I,O),se;{if(!navigator.onLine)throw Dt.create("app-offline");const mt=function ai(I){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:O})}(se);return L=function xt(I,O){return rn.apply(this,arguments)}(I,mt),mt}});return L?yield L:Z.authToken}),ar.apply(this,arguments)}function pe(){return(pe=(0,G.Z)(function*(I,O){let L=yield Xe(I.appConfig);for(;1===L.authToken.requestStatus;)yield rt(100),L=yield Xe(I.appConfig);const Z=L.authToken;return 0===Z.requestStatus?$i(I,O):Z})).apply(this,arguments)}function Xe(I){return lo(I,O=>{if(!Qt(O))throw Dt.create("not-registered");return function co(I){return 1===I.requestStatus&&I.requestTime+Fe<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function rn(){return rn=(0,G.Z)(function*(I,O){try{const L=yield function en(I,O){return Un.apply(this,arguments)}(I,O),Z=Object.assign(Object.assign({},O),{authToken:L});return yield tr(I.appConfig,Z),L}catch(L){if(!Ot(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const Z=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield tr(I.appConfig,Z)}else yield zr(I.appConfig);throw L}}),rn.apply(this,arguments)}function Qt(I){return void 0!==I&&2===I.registrationStatus}function Fa(){return(Fa=(0,G.Z)(function*(I){const O=I,{installationEntry:L,registrationPromise:Z}=yield te(O);return Z?Z.catch(console.error):$i(O).catch(console.error),L.fid})).apply(this,arguments)}function kr(){return kr=(0,G.Z)(function*(I,O=!1){const L=I;return yield function Id(I){return la.apply(this,arguments)}(L),(yield $i(L,O)).token}),kr.apply(this,arguments)}function la(){return(la=(0,G.Z)(function*(I){const{registrationPromise:O}=yield te(I);O&&(yield O)})).apply(this,arguments)}function ca(I){return Dt.create("missing-app-config-values",{valueName:I})}const Md="installations",Df=I=>{const O=I.getProvider("app").getImmediate(),L=function uu(I){if(!I||!I.options)throw ca("App Configuration");if(!I.name)throw ca("App Name");const O=["projectId","apiKey","appId"];for(const L of O)if(!I.options[L])throw ca(L);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(O);return{app:O,appConfig:L,heartbeatServiceProvider:(0,ae._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},Ua=I=>{const O=I.getProvider("app").getImmediate(),L=(0,ae._getProvider)(O,Md).getImmediate();return{getId:()=>function Ps(I){return Fa.apply(this,arguments)}(L),getToken:ne=>function mc(I){return kr.apply(this,arguments)}(L,ne)}};(function xd(){(0,ae._registerComponent)(new Te.wA(Md,Df,"PUBLIC")),(0,ae._registerComponent)(new Te.wA("installations-internal",Ua,"PRIVATE"))})(),(0,ae.registerVersion)(Do,Ce),(0,ae.registerVersion)(Do,Ce,"esm2017");const Al="@firebase/remote-config",Jn=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ja{constructor(O,L,Z,ne){this.client=O,this.storage=L,this.storageCache=Z,this.logger=ne}isCachedDataFresh(O,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Z=Date.now()-L,ne=Z<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Z}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${ne}.`),ne}fetch(O){var L=this;return(0,G.Z)(function*(){const[Z,ne]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(ne&&L.isCachedDataFresh(O.cacheMaxAgeMillis,Z))return ne;O.eTag=ne&&ne.eTag;const se=yield L.client.fetch(O),Ae=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Ae.push(L.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Ae),se})()}}function vc(I=navigator){return I.languages&&I.languages[0]||I.language}class Us{constructor(O,L,Z,ne,se,Ae){this.firebaseInstallations=O,this.sdkVersion=L,this.namespace=Z,this.projectId=ne,this.apiKey=se,this.appId=Ae}fetch(O){var L=this;return(0,G.Z)(function*(){const[Z,ne]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},ft={sdk_version:L.sdkVersion,app_instance_id:Z,app_instance_id_token:ne,app_id:L.appId,language_code:vc()},Nt={method:"POST",headers:mt,body:JSON.stringify(ft)},sn=fetch(Ae,Nt),Xt=new Promise((Vr,Xs)=>{O.signal.addEventListener(()=>{const Ru=new Error("The operation was aborted.");Ru.name="AbortError",Xs(Ru)})});let Hr;try{yield Promise.race([sn,Xt]),Hr=yield sn}catch(Vr){let Xs="fetch-client-network";throw"AbortError"===Vr?.name&&(Xs="fetch-timeout"),Jn.create(Xs,{originalErrorMessage:Vr?.message})}let Di=Hr.status;const Qs=Hr.headers.get("ETag")||void 0;let ya,ws;if(200===Hr.status){let Vr;try{Vr=yield Hr.json()}catch(Xs){throw Jn.create("fetch-client-parse",{originalErrorMessage:Xs?.message})}ya=Vr.entries,ws=Vr.state}if("INSTANCE_STATE_UNSPECIFIED"===ws?Di=500:"NO_CHANGE"===ws?Di=304:("NO_TEMPLATE"===ws||"EMPTY_CONFIG"===ws)&&(ya={}),304!==Di&&200!==Di)throw Jn.create("fetch-status",{httpStatus:Di});return{status:Di,eTag:Qs,config:ya}})()}}class ua{constructor(O,L){this.client=O,this.storage=L}fetch(O){var L=this;return(0,G.Z)(function*(){const Z=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(O,Z)})()}attemptFetch(O,{throttleEndTimeMillis:L,backoffCount:Z}){var ne=this;return(0,G.Z)(function*(){yield function li(I,O){return new Promise((L,Z)=>{const ne=Math.max(O-Date.now(),0),se=setTimeout(L,ne);I.addEventListener(()=>{clearTimeout(se),Z(Jn.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,L);try{const se=yield ne.client.fetch(O);return yield ne.storage.deleteThrottleMetadata(),se}catch(se){if(!function Ga(I){if(!(I instanceof ge.ZR&&I.customData))return!1;const O=Number(I.customData.httpStatus);return 429===O||500===O||503===O||504===O}(se))throw se;const Ae={throttleEndTimeMillis:Date.now()+(0,ge.$s)(Z),backoffCount:Z+1};return yield ne.storage.setThrottleMetadata(Ae),ne.attemptFetch(O,Ae)}})()}}class Od{constructor(O,L,Z,ne,se){this.app=O,this._client=L,this._storageCache=Z,this._storage=ne,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zr(I,O){const L=I.target.error||void 0;return Jn.create(O,{originalErrorMessage:L&&L?.message})}const ir="app_namespace_store";class z_{constructor(O,L,Z,ne=function Cn(){return new Promise((I,O)=>{try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=Z=>{O(Zr(Z,"storage-open"))},L.onsuccess=Z=>{I(Z.target.result)},L.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(ir,{keyPath:"compositeKey"})}}catch(L){O(Jn.create("storage-open",{originalErrorMessage:L?.message}))}})}()){this.appId=O,this.appName=L,this.namespace=Z,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var L=this;return(0,G.Z)(function*(){const Z=yield L.openDbPromise;return new Promise((ne,se)=>{const mt=Z.transaction([ir],"readonly").objectStore(ir),ft=L.createCompositeKey(O);try{const Nt=mt.get(ft);Nt.onerror=sn=>{se(Zr(sn,"storage-get"))},Nt.onsuccess=sn=>{const Xt=sn.target.result;ne(Xt?Xt.value:void 0)}}catch(Nt){se(Jn.create("storage-get",{originalErrorMessage:Nt?.message}))}})})()}set(O,L){var Z=this;return(0,G.Z)(function*(){const ne=yield Z.openDbPromise;return new Promise((se,Ae)=>{const ft=ne.transaction([ir],"readwrite").objectStore(ir),Nt=Z.createCompositeKey(O);try{const sn=ft.put({compositeKey:Nt,value:L});sn.onerror=Xt=>{Ae(Zr(Xt,"storage-set"))},sn.onsuccess=()=>{se()}}catch(sn){Ae(Jn.create("storage-set",{originalErrorMessage:sn?.message}))}})})()}delete(O){var L=this;return(0,G.Z)(function*(){const Z=yield L.openDbPromise;return new Promise((ne,se)=>{const mt=Z.transaction([ir],"readwrite").objectStore(ir),ft=L.createCompositeKey(O);try{const Nt=mt.delete(ft);Nt.onerror=sn=>{se(Zr(sn,"storage-delete"))},Nt.onsuccess=()=>{ne()}}catch(Nt){se(Jn.create("storage-delete",{originalErrorMessage:Nt?.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class _c{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,G.Z)(function*(){const L=O.storage.getLastFetchStatus(),Z=O.storage.getLastSuccessfulFetchTimestampMillis(),ne=O.storage.getActiveConfig(),se=yield L;se&&(O.lastFetchStatus=se);const Ae=yield Z;Ae&&(O.lastSuccessfulFetchTimestampMillis=Ae);const mt=yield ne;mt&&(O.activeConfig=mt)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function Hs(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,G.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}!function Rd(){(0,ae._registerComponent)(new Te.wA("remote-config",function I(O,{instanceIdentifier:L}){const Z=O.getProvider("app").getImmediate(),ne=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Jn.create("registration-window");if(!(0,ge.hl)())throw Jn.create("indexed-db-unavailable");const{projectId:se,apiKey:Ae,appId:mt}=Z.options;if(!se)throw Jn.create("registration-project-id");if(!Ae)throw Jn.create("registration-api-key");if(!mt)throw Jn.create("registration-app-id");const ft=new z_(mt,Z.name,L=L||"firebase"),Nt=new _c(ft),sn=new Oe.Yd(Al);sn.logLevel=Oe.in.ERROR;const Xt=new Us(ne,ae.SDK_VERSION,L,se,Ae,mt),Hr=new ua(Xt,ft),Di=new ja(Hr,ft,Nt,sn),Qs=new Od(Z,Di,Nt,ft,sn);return function dn(I){const O=(0,ge.m9)(I);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Qs),Qs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Al,"0.4.4"),(0,ae.registerVersion)(Al,"0.4.4","esm2017")}();const ri=(I,O)=>O.some(L=>I instanceof L);let kd,lr;const jo=new WeakMap,$a=new WeakMap,rr=new WeakMap,xl=new WeakMap,yc=new WeakMap;let bc={get(I,O,L){if(I instanceof IDBTransaction){if("done"===O)return $a.get(I);if("objectStoreNames"===O)return I.objectStoreNames||rr.get(I);if("store"===O)return L.objectStoreNames[1]?void 0:L.objectStore(L.objectStoreNames[0])}return uo(I[O])},set:(I,O,L)=>(I[O]=L,!0),has:(I,O)=>I instanceof IDBTransaction&&("done"===O||"store"===O)||O in I};function Fg(I){return"function"==typeof I?function Pg(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fu(){return lr||(lr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...O){return I.apply(Lg(this),O),uo(jo.get(this))}:function(...O){return uo(I.apply(Lg(this),O))}:function(O,...L){const Z=I.call(Lg(this),O,...L);return rr.set(Z,O.sort?O.sort():[O]),uo(Z)}}(I):(I instanceof IDBTransaction&&function kg(I){if($a.has(I))return;const O=new Promise((L,Z)=>{const ne=()=>{I.removeEventListener("complete",se),I.removeEventListener("error",Ae),I.removeEventListener("abort",Ae)},se=()=>{L(),ne()},Ae=()=>{Z(I.error||new DOMException("AbortError","AbortError")),ne()};I.addEventListener("complete",se),I.addEventListener("error",Ae),I.addEventListener("abort",Ae)});$a.set(I,O)}(I),ri(I,function Ci(){return kd||(kd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,bc):I)}function uo(I){if(I instanceof IDBRequest)return function Tf(I){const O=new Promise((L,Z)=>{const ne=()=>{I.removeEventListener("success",se),I.removeEventListener("error",Ae)},se=()=>{L(uo(I.result)),ne()},Ae=()=>{Z(I.error),ne()};I.addEventListener("success",se),I.addEventListener("error",Ae)});return O.then(L=>{L instanceof IDBCursor&&jo.set(L,I)}).catch(()=>{}),yc.set(O,I),O}(I);if(xl.has(I))return xl.get(I);const O=Fg(I);return O!==I&&(xl.set(I,O),yc.set(O,I)),O}const Lg=I=>yc.get(I);function Pd(I,O,{blocked:L,upgrade:Z,blocking:ne,terminated:se}={}){const Ae=indexedDB.open(I,O),mt=uo(Ae);return Z&&Ae.addEventListener("upgradeneeded",ft=>{Z(uo(Ae.result),ft.oldVersion,ft.newVersion,uo(Ae.transaction))}),L&&Ae.addEventListener("blocked",()=>L()),mt.then(ft=>{se&&ft.addEventListener("close",()=>se()),ne&&ft.addEventListener("versionchange",()=>ne())}).catch(()=>{}),mt}function Go(I,{blocked:O}={}){const L=indexedDB.deleteDatabase(I);return O&&L.addEventListener("blocked",()=>O()),uo(L).then(()=>{})}const Ol=["get","getKey","getAll","getAllKeys","count"],wc=["put","add","delete","clear"],Sf=new Map;function Ug(I,O){if(!(I instanceof IDBDatabase)||O in I||"string"!=typeof O)return;if(Sf.get(O))return Sf.get(O);const L=O.replace(/FromIndex$/,""),Z=O!==L,ne=wc.includes(L);if(!(L in(Z?IDBIndex:IDBObjectStore).prototype)||!ne&&!Ol.includes(L))return;const se=function(){var Ae=(0,G.Z)(function*(mt,...ft){const Nt=this.transaction(mt,ne?"readwrite":"readonly");let sn=Nt.store;return Z&&(sn=sn.index(ft.shift())),(yield Promise.all([sn[L](...ft),ne&&Nt.done]))[0]});return function(ft){return Ae.apply(this,arguments)}}();return Sf.set(O,se),se}!function za(I){bc=I(bc)}(I=>({...I,get:(O,L,Z)=>Ug(O,L)||I.get(O,L,Z),has:(O,L)=>!!Ug(O,L)||I.has(O,L)}));const Bg="/firebase-messaging-sw.js",Hg="/firebase-cloud-messaging-push-scope",Vs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",If="https://fcmregistrations.googleapis.com/v1",pu="google.c.a.c_id",Ai="google.c.a.c_l",Fd="google.c.a.ts";var ha=(()=>((ha=ha||{}).PUSH_RECEIVED="push-received",ha.NOTIFICATION_CLICKED="notification-clicked",ha))();function $o(I){const O=new Uint8Array(I);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gu(I){const L=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Z=atob(L),ne=new Uint8Array(Z.length);for(let se=0;se<Z.length;++se)ne[se]=Z.charCodeAt(se);return ne}const Wa="fcm_token_details_db",Af=5,Ld="fcm_token_object_Store";function qa(){return qa=(0,G.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Wa))return null;let O=null;return(yield Pd(Wa,Af,{upgrade:(Z=(0,G.Z)(function*(ne,se,Ae,mt){var ft;if(se<2||!ne.objectStoreNames.contains(Ld))return;const Nt=mt.objectStore(Ld),sn=yield Nt.index("fcmSenderId").get(I);if(yield Nt.clear(),sn)if(2===se){const Xt=sn;if(!Xt.auth||!Xt.p256dh||!Xt.endpoint)return;O={token:Xt.fcmToken,createTime:null!==(ft=Xt.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:Xt.auth,p256dh:Xt.p256dh,endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:"string"==typeof Xt.vapidKey?Xt.vapidKey:$o(Xt.vapidKey)}}}else if(3===se){const Xt=sn;O={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:$o(Xt.auth),p256dh:$o(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:$o(Xt.vapidKey)}}}else if(4===se){const Xt=sn;O={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:$o(Xt.auth),p256dh:$o(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:$o(Xt.vapidKey)}}}}),function(se,Ae,mt,ft){return Z.apply(this,arguments)})})).close(),yield Go(Wa),yield Go("fcm_vapid_details_db"),yield Go("undefined"),function ho(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:O}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}(O)?O:null;var Z}),qa.apply(this,arguments)}const Za="firebase-messaging-database",fi=1,Ur="firebase-messaging-store";let Ud=null;function Ya(){return Ud||(Ud=Pd(Za,fi,{upgrade:(I,O)=>{0===O&&I.createObjectStore(Ur)}})),Ud}function Ka(I){return hs.apply(this,arguments)}function hs(){return hs=(0,G.Z)(function*(I){const O=_u(I),Z=yield(yield Ya()).transaction(Ur).objectStore(Ur).get(O);if(Z)return Z;{const ne=yield function W_(I){return qa.apply(this,arguments)}(I.appConfig.senderId);if(ne)return yield Rl(I,ne),ne}}),hs.apply(this,arguments)}function Rl(I,O){return mu.apply(this,arguments)}function mu(){return(mu=(0,G.Z)(function*(I,O){const L=_u(I),ne=(yield Ya()).transaction(Ur,"readwrite");return yield ne.objectStore(Ur).put(O,L),yield ne.done,O})).apply(this,arguments)}function Gs(){return(Gs=(0,G.Z)(function*(I){const O=_u(I),Z=(yield Ya()).transaction(Ur,"readwrite");yield Z.objectStore(Ur).delete(O),yield Z.done})).apply(this,arguments)}function _u({appConfig:I}){return I.appId}const cr=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nf(I,O){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,G.Z)(function*(I,O){const L=yield Cc(I),Z=xf(O),ne={method:"POST",headers:L,body:JSON.stringify(Z)};let se;try{se=yield(yield fetch(fs(I.appConfig),ne)).json()}catch(Ae){throw cr.create("token-subscribe-failed",{errorInfo:Ae?.toString()})}if(se.error)throw cr.create("token-subscribe-failed",{errorInfo:se.error.message});if(!se.token)throw cr.create("token-subscribe-no-token");return se.token})).apply(this,arguments)}function fa(){return(fa=(0,G.Z)(function*(I,O){const L=yield Cc(I),Z=xf(O.subscriptionOptions),ne={method:"PATCH",headers:L,body:JSON.stringify(Z)};let se;try{se=yield(yield fetch(`${fs(I.appConfig)}/${O.token}`,ne)).json()}catch(Ae){throw cr.create("token-update-failed",{errorInfo:Ae?.toString()})}if(se.error)throw cr.create("token-update-failed",{errorInfo:se.error.message});if(!se.token)throw cr.create("token-update-no-token");return se.token})).apply(this,arguments)}function yu(I,O){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,G.Z)(function*(I,O){const Z={method:"DELETE",headers:yield Cc(I)};try{const se=yield(yield fetch(`${fs(I.appConfig)}/${O}`,Z)).json();if(se.error)throw cr.create("token-unsubscribe-failed",{errorInfo:se.error.message})}catch(ne){throw cr.create("token-unsubscribe-failed",{errorInfo:ne?.toString()})}})).apply(this,arguments)}function fs({projectId:I}){return`${If}/projects/${I}/registrations`}function Cc(I){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,G.Z)(function*({appConfig:I,installations:O}){const L=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function xf({p256dh:I,auth:O,endpoint:L,vapidKey:Z}){const ne={web:{endpoint:L,auth:O,p256dh:I}};return Z!==Vs&&(ne.web.applicationPubKey=Z),ne}const bu=6048e5;function Dc(){return Dc=(0,G.Z)(function*(I){const O=yield function Sc(I,O){return Ja.apply(this,arguments)}(I.swRegistration,I.vapidKey),L={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:O.endpoint,auth:$o(O.getKey("auth")),p256dh:$o(O.getKey("p256dh"))},Z=yield Ka(I.firebaseDependencies);if(Z){if(function zi(I,O){return O.vapidKey===I.vapidKey&&O.endpoint===I.endpoint&&O.auth===I.auth&&O.p256dh===I.p256dh}(Z.subscriptionOptions,L))return Date.now()>=Z.createTime+bu?function ps(I,O){return Ll.apply(this,arguments)}(I,{token:Z.token,createTime:Date.now(),subscriptionOptions:L}):Z.token;try{yield yu(I.firebaseDependencies,Z.token)}catch(ne){console.warn(ne)}return Hd(I.firebaseDependencies,L)}return Hd(I.firebaseDependencies,L)}),Dc.apply(this,arguments)}function Tc(){return Tc=(0,G.Z)(function*(I){const O=yield Ka(I.firebaseDependencies);O&&(yield yu(I.firebaseDependencies,O.token),yield function vu(I){return Gs.apply(this,arguments)}(I.firebaseDependencies));const L=yield I.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()}),Tc.apply(this,arguments)}function Ll(){return Ll=(0,G.Z)(function*(I,O){try{const L=yield function Bd(I,O){return fa.apply(this,arguments)}(I.firebaseDependencies,O),Z=Object.assign(Object.assign({},O),{token:L,createTime:Date.now()});return yield Rl(I.firebaseDependencies,Z),L}catch(L){throw yield function Ec(I){return Tc.apply(this,arguments)}(I),L}}),Ll.apply(this,arguments)}function Hd(I,O){return zn.apply(this,arguments)}function zn(){return(zn=(0,G.Z)(function*(I,O){const Z={token:yield Nf(I,O),createTime:Date.now(),subscriptionOptions:O};return yield Rl(I,Z),Z.token})).apply(this,arguments)}function Ja(){return(Ja=(0,G.Z)(function*(I,O){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gu(O)})})).apply(this,arguments)}function Qa(I){const O={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Vd(I,O){if(!O.notification)return;I.notification={};const L=O.notification.title;L&&(I.notification.title=L);const Z=O.notification.body;Z&&(I.notification.body=Z);const ne=O.notification.image;ne&&(I.notification.image=ne);const se=O.notification.icon;se&&(I.notification.icon=se)}(O,I),function So(I,O){O.data&&(I.data=O.data)}(O,I),function Yr(I,O){var L,Z,ne,se,Ae;if(!(O.fcmOptions||null!==(L=O.notification)&&void 0!==L&&L.click_action))return;I.fcmOptions={};const mt=null!==(ne=null===(Z=O.fcmOptions)||void 0===Z?void 0:Z.link)&&void 0!==ne?ne:null===(se=O.notification)||void 0===se?void 0:se.click_action;mt&&(I.fcmOptions.link=mt);const ft=null===(Ae=O.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;ft&&(I.fcmOptions.analyticsLabel=ft)}(O,I),O}function jd(I,O){const L=[];for(let Z=0;Z<I.length;Z++)L.push(I.charAt(Z)),Z<O.length&&L.push(O.charAt(Z));return L.join("")}function Io(I){return cr.create("missing-app-config-values",{valueName:I})}jd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),jd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bl{constructor(O,L,Z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function Ul(I){if(!I||!I.options)throw Io("App Configuration Object");if(!I.name)throw Io("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:L}=I;for(const Z of O)if(!L[Z])throw Io(Z);return{appName:I.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:ne,installations:L,analyticsProvider:Z}}_delete(){return Promise.resolve()}}function pa(){return(pa=(0,G.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Bg,{scope:Hg}),I.swRegistration.update().catch(()=>{})}catch(O){throw cr.create("failed-service-worker-registration",{browserErrorMessage:O?.message})}})).apply(this,arguments)}function $s(){return($s=(0,G.Z)(function*(I,O){if(!O&&!I.swRegistration&&(yield function Ic(I){return pa.apply(this,arguments)}(I)),O||!I.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw cr.create("invalid-sw-registration");I.swRegistration=O}})).apply(this,arguments)}function Yt(){return(Yt=(0,G.Z)(function*(I,O){O?I.vapidKey=O:I.vapidKey||(I.vapidKey=Vs)})).apply(this,arguments)}function $d(){return $d=(0,G.Z)(function*(I,O){if(!navigator)throw cr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw cr.create("permission-blocked");return yield function Gd(I,O){return Yt.apply(this,arguments)}(I,O?.vapidKey),yield function Ac(I,O){return $s.apply(this,arguments)}(I,O?.serviceWorkerRegistration),function Of(I){return Dc.apply(this,arguments)}(I)}),$d.apply(this,arguments)}function Hl(){return(Hl=(0,G.Z)(function*(I,O,L){const Z=function Rf(I){switch(I){case ha.NOTIFICATION_CLICKED:return"notification_open";case ha.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(O);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(Z,{message_id:L[pu],message_name:L[Ai],message_time:L[Fd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zo(){return zo=(0,G.Z)(function*(I,O){const L=O.data;if(!L.isFirebaseMessaging)return;I.onMessageHandler&&L.messageType===ha.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Qa(L)):I.onMessageHandler.next(Qa(L)));const Z=L.data;(function wu(I){return"object"==typeof I&&!!I&&pu in I})(Z)&&"1"===Z["google.c.a.e"]&&(yield function zd(I,O,L){return Hl.apply(this,arguments)}(I,L.messageType,Z))}),zo.apply(this,arguments)}const Nc="@firebase/messaging",Vg=I=>{const O=new Bl(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function zs(I,O){return zo.apply(this,arguments)}(O,L)),O},qd=I=>{const O=I.getProvider("messaging").getImmediate();return{getToken:Z=>function Cu(I,O){return $d.apply(this,arguments)}(O,Z)}};function Ze(){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,G.Z)(function*(){try{yield(0,ge.eu)()}catch{return!1}return typeof window<"u"&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kf(){(0,ae._registerComponent)(new Te.wA("messaging",Vg,"PUBLIC")),(0,ae._registerComponent)(new Te.wA("messaging-internal",qd,"PRIVATE")),(0,ae.registerVersion)(Nc,"0.12.4"),(0,ae.registerVersion)(Nc,"0.12.4","esm2017")}();const gs="analytics",Yd="firebase_id",Kd="origin",Er=6e4,qo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Eu="https://www.googletagmanager.com/gtag/js",pi=new Oe.Yd("@firebase/analytics"),Wi=new ge.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Gl(I){if(!I.startsWith(Eu)){const O=Wi.create("invalid-gtag-resource",{gtagURL:I});return pi.warn(O.message),""}return I}function Pf(I){return Promise.all(I.map(O=>O.catch(L=>L)))}function Xa(){return(Xa=(0,G.Z)(function*(I,O,L,Z,ne,se){const Ae=Z[ne];try{if(Ae)yield O[Ae];else{const ft=(yield Pf(L)).find(Nt=>Nt.measurementId===ne);ft&&(yield O[ft.appId])}}catch(mt){pi.error(mt)}I("config",ne,se)})).apply(this,arguments)}function $l(){return($l=(0,G.Z)(function*(I,O,L,Z,ne){try{let se=[];if(ne&&ne.send_to){let Ae=ne.send_to;Array.isArray(Ae)||(Ae=[Ae]);const mt=yield Pf(L);for(const ft of Ae){const Nt=mt.find(Xt=>Xt.measurementId===ft),sn=Nt&&O[Nt.appId];if(!sn){se=[];break}se.push(sn)}}0===se.length&&(se=Object.values(O)),yield Promise.all(se),I("event",Z,ne||{})}catch(se){pi.error(se)}})).apply(this,arguments)}const Ff=30,Ti=new class Qd{constructor(O={},L=1e3){this.throttleMetadata=O,this.intervalMillis=L}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,L){this.throttleMetadata[O]=L}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function $g(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ws(){return(Ws=(0,G.Z)(function*(I){var O;const{appId:L,apiKey:Z}=I,ne={method:"GET",headers:$g(Z)},se=qo.replace("{app-id}",L),Ae=yield fetch(se,ne);if(200!==Ae.status&&304!==Ae.status){let mt="";try{const ft=yield Ae.json();null!==(O=ft.error)&&void 0!==O&&O.message&&(mt=ft.error.message)}catch{}throw Wi.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:mt})}return Ae.json()})).apply(this,arguments)}function Xd(){return(Xd=(0,G.Z)(function*(I,O=Ti,L){const{appId:Z,apiKey:ne,measurementId:se}=I.options;if(!Z)throw Wi.create("no-app-id");if(!ne){if(se)return{measurementId:se,appId:Z};throw Wi.create("no-api-key")}const Ae=O.getThrottleMetadata(Z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mt=new xc;return setTimeout((0,G.Z)(function*(){mt.abort()}),void 0!==L?L:Er),Lf({appId:Z,apiKey:ne,measurementId:se},Ae,mt,O)})).apply(this,arguments)}function Lf(I,O,L){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,G.Z)(function*(I,{throttleEndTimeMillis:O,backoffCount:L},Z,ne=Ti){var se;const{appId:Ae,measurementId:mt}=I;try{yield function zg(I,O){return new Promise((L,Z)=>{const ne=Math.max(O-Date.now(),0),se=setTimeout(L,ne);I.addEventListener(()=>{clearTimeout(se),Z(Wi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(Z,O)}catch(ft){if(mt)return pi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:Ae,measurementId:mt};throw ft}try{const ft=yield function dr(I){return Ws.apply(this,arguments)}(I);return ne.deleteThrottleMetadata(Ae),ft}catch(ft){const Nt=ft;if(!function Wl(I){if(!(I instanceof ge.ZR&&I.customData))return!1;const O=Number(I.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Nt)){if(ne.deleteThrottleMetadata(Ae),mt)return pi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Nt?.message}]`),{appId:Ae,measurementId:mt};throw ft}const sn=503===Number(null===(se=Nt?.customData)||void 0===se?void 0:se.httpStatus)?(0,ge.$s)(L,ne.intervalMillis,Ff):(0,ge.$s)(L,ne.intervalMillis),Xt={throttleEndTimeMillis:Date.now()+sn,backoffCount:L+1};return ne.setThrottleMetadata(Ae,Xt),pi.debug(`Calling attemptFetch again in ${sn} millis`),Lf(I,Xt,Z,ne)}}),Nu.apply(this,arguments)}class xc{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let ms,th;function eh(){return(eh=(0,G.Z)(function*(I,O,L,Z,ne){if(ne&&ne.global)I("event",L,Z);else{const se=yield O;I("event",L,Object.assign(Object.assign({},Z),{send_to:se}))}})).apply(this,arguments)}function kc(){return(kc=(0,G.Z)(function*(){if(!(0,ge.hl)())return pi.warn(Wi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ge.eu)()}catch(I){return pi.warn(Wi.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function nl(){return nl=(0,G.Z)(function*(I,O,L,Z,ne,se,Ae){var mt;const ft=function ci(I){return Xd.apply(this,arguments)}(I);ft.then(Di=>{L[Di.measurementId]=Di.appId,I.options.measurementId&&Di.measurementId!==I.options.measurementId&&pi.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Di.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Di=>pi.error(Di)),O.push(ft);const Nt=function Hf(){return kc.apply(this,arguments)}().then(Di=>{if(Di)return Z.getId()}),[sn,Xt]=yield Promise.all([ft,Nt]);(function Au(I){const O=window.document.getElementsByTagName("script");for(const L of Object.values(O))if(L.src&&L.src.includes(Eu)&&L.src.includes(I))return L;return null})(se)||function Tu(I,O){const L=function Mc(I,O){let L;return window.trustedTypes&&(L=window.trustedTypes.createPolicy(I,O)),L}("firebase-js-sdk-policy",{createScriptURL:Gl}),Z=document.createElement("script"),ne=`${Eu}?l=${I}&id=${O}`;Z.src=L?L?.createScriptURL(ne):ne,Z.async=!0,document.head.appendChild(Z)}(se,sn.measurementId),th&&(ne("consent","default",th),function Rc(I){th=I}(void 0)),ne("js",new Date);const Hr=null!==(mt=Ae?.config)&&void 0!==mt?mt:{};return Hr[Kd]="firebase",Hr.update=!0,null!=Xt&&(Hr[Yd]=Xt),ne("config",sn.measurementId,Hr),ms&&(ne("set",ms),function Bf(I){ms=I}(void 0)),sn.measurementId}),nl.apply(this,arguments)}class Lt{constructor(O){this.app=O}_delete(){return delete Kr[this.app.options.appId],Promise.resolve()}}let Kr={},Pc=[];const ma={};let qi,Ao,fo="dataLayer",va=!1;function Vf(I,O,L){!function No(){const I=[];if((0,ge.ru)()&&I.push("This is a browser extension environment."),(0,ge.zI)()||I.push("Cookies are not available."),I.length>0){const O=I.map((Z,ne)=>`(${ne+1}) ${Z}`).join(" "),L=Wi.create("invalid-analytics-context",{errorInfo:O});pi.warn(L.message)}}();const Z=I.options.appId;if(!Z)throw Wi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Wi.create("no-api-key");pi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kr[Z])throw Wi.create("already-exists",{id:Z});if(!va){!function Su(I){let O=[];Array.isArray(window[I])?O=window[I]:window[I]=O}(fo);const{wrappedGtag:se,gtagCore:Ae}=function el(I,O,L,Z,ne){let se=function(...Ae){window[Z].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(se=window[ne]),window[ne]=function Jd(I,O,L,Z){function se(){return se=(0,G.Z)(function*(Ae,...mt){try{if("event"===Ae){const[ft,Nt]=mt;yield function ga(I,O,L,Z,ne){return $l.apply(this,arguments)}(I,O,L,ft,Nt)}else if("config"===Ae){const[ft,Nt]=mt;yield function Iu(I,O,L,Z,ne,se){return Xa.apply(this,arguments)}(I,O,L,Z,ft,Nt)}else if("consent"===Ae){const[ft]=mt;I("consent","update",ft)}else if("get"===Ae){const[ft,Nt,sn]=mt;I("get",ft,Nt,sn)}else if("set"===Ae){const[ft]=mt;I("set",ft)}else I(Ae,...mt)}catch(ft){pi.error(ft)}}),se.apply(this,arguments)}return function ne(Ae){return se.apply(this,arguments)}}(se,I,O,L),{gtagCore:se,wrappedGtag:window[ne]}}(Kr,Pc,ma,fo,"gtag");Ao=se,qi=Ae,va=!0}return Kr[Z]=function Mu(I,O,L,Z,ne,se,Ae){return nl.apply(this,arguments)}(I,Pc,ma,O,qi,fo,L),new Lt(I)}function Fc(){return _s.apply(this,arguments)}function _s(){return(_s=(0,G.Z)(function*(){if((0,ge.ru)()||!(0,ge.zI)()||!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}const ei="@firebase/analytics";!function ki(){(0,ae._registerComponent)(new Te.wA(gs,(O,{options:L})=>Vf(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,ae._registerComponent)(new Te.wA("analytics-internal",function I(O){try{const L=O.getProvider(gs).getImmediate();return{logEvent:(Z,ne,se)=>function ol(I,O,L,Z){I=(0,ge.m9)(I),function Yo(I,O,L,Z,ne){return eh.apply(this,arguments)}(Ao,Kr[I.app.options.appId],O,L,Z).catch(ne=>pi.error(ne))}(L,Z,ne,se)}}catch(L){throw Wi.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,ae.registerVersion)(ei,"0.10.0"),(0,ae.registerVersion)(ei,"0.10.0","esm2017")}();var Ko=z(1954),Pi=z(2631);const ih=new class sl extends Pi.v{}(class Wn extends Ko.o{constructor(O,L){super(O,L),this.scheduler=O,this.work=L}schedule(O,L=0){return L>0?super.schedule(O,L):(this.delay=L,this.state=O,this.scheduler.flush(this),this)}execute(O,L){return L>0||this.closed?super.execute(O,L):this._execute(O,L)}requestAsyncId(O,L,Z=0){return null!=Z&&Z>0||null==Z&&this.delay>0?super.requestAsyncId(O,L,Z):(O.flush(this),0)}});var Jo=z(6321),Xr=z(9397),gi=z(5137),Sr=z(3093);const Lc=new u.GfV("7.6.1"),Zs="__angularfire_symbol__analyticsIsSupportedValue",Br="__angularfire_symbol__analyticsIsSupported",rh="__angularfire_symbol__remoteConfigIsSupportedValue",Uc="__angularfire_symbol__remoteConfigIsSupported",Ys="__angularfire_symbol__messagingIsSupportedValue",cn="__angularfire_symbol__messagingIsSupported";function al(I,O,L){if(O){if(1===O.length)return O[0];const se=O.filter(Ae=>Ae.app===L);if(1===se.length)return se[0]}return L.container.getProvider(I).getImmediate({optional:!0})}globalThis[Br]||(globalThis[Br]=Fc().then(I=>globalThis[Zs]=I).catch(()=>globalThis[Zs]=!1)),globalThis[cn]||(globalThis[cn]=Ze().then(I=>globalThis[Ys]=I).catch(()=>globalThis[Ys]=!1)),globalThis[Uc]||(globalThis[Uc]=Hs().then(I=>globalThis[rh]=I).catch(()=>globalThis[rh]=!1));const ys=(I,O)=>{const L=O?[O]:(0,K.C6)(),Z=[];return L.forEach(ne=>{ne.container.getProvider(I).instances.forEach(Ae=>{Z.includes(Ae)||Z.push(Ae)})}),Z};function ll(){}class mi{constructor(O,L=ih){this.zone=O,this.delegate=L}now(){return this.delegate.now()}schedule(O,L,Z){const ne=this.zone;return this.delegate.schedule(function(Ae){ne.runGuarded(()=>{O.apply(this,[Ae])})},L,Z)}}class Js{constructor(O){this.zone=O,this.task=null}call(O,L){const Z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ll,{},ll,ll)),L.pipe((0,Xr.b)({next:Z,complete:Z,error:Z})).subscribe(O).add(Z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Kl=(()=>{class I{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new mi(Zone.current)),this.insideAngular=L.run(()=>new mi(Zone.current,Jo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(L){return new(L||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Qo(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function bs(I){return Qo(),function Hc(I){return function(L){return(L=L.lift(new Js(I.ngZone))).pipe((0,gi.R)(I.outsideAngular),(0,Sr.Q)(I.insideAngular))}}(Qo())(I)}},2659:(It,Le,z)=>{z.d(Le,{$:()=>Rl,A:()=>et,D:()=>zt,I:()=>Fr,J:()=>Lr,L:()=>Ci,N:()=>Ii,P:()=>ol,Q:()=>Pd,R:()=>No,U:()=>Sf,V:()=>Ug,W:()=>Bg,X:()=>wc,Y:()=>pu,Z:()=>Ai,_:()=>$o,a:()=>el,a0:()=>vu,a1:()=>_u,a2:()=>Mf,a3:()=>Cc,a4:()=>xf,a5:()=>Of,a6:()=>Ec,a7:()=>ps,a8:()=>Hd,a9:()=>Sc,aA:()=>Je,aB:()=>L,aC:()=>Qt,aD:()=>ai,aE:()=>Hc,aF:()=>Yl,aG:()=>q_,aH:()=>yn,aL:()=>zl,aO:()=>Vs,aa:()=>Ja,ab:()=>Qa,ac:()=>Vd,ad:()=>jd,ae:()=>Io,af:()=>Ic,ai:()=>Gd,aj:()=>Cu,ak:()=>$d,an:()=>W_,ao:()=>kf,aq:()=>Kd,ar:()=>Pf,as:()=>oe,at:()=>La,au:()=>la,av:()=>bn,aw:()=>Fu,ax:()=>Ae,ay:()=>$_,az:()=>Jt,b:()=>$l,c:()=>ih,d:()=>gi,e:()=>Jo,f:()=>ys,g:()=>eo,h:()=>Js,i:()=>Tr,j:()=>Ou,k:()=>Jg,l:()=>_s,m:()=>ny,p:()=>Ce,r:()=>jf,s:()=>_a,u:()=>nh});var u=z(5861),K=z(9058),G=z(534);function Oe(D,m){var y={};for(var T in D)Object.prototype.hasOwnProperty.call(D,T)&&m.indexOf(T)<0&&(y[T]=D[T]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(T=Object.getOwnPropertySymbols(D);k<T.length;k++)m.indexOf(T[k])<0&&Object.prototype.propertyIsEnumerable.call(D,T[k])&&(y[T[k]]=D[T[k]])}return y}var bi=z(7879),er=z(4537);const Ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},et={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const zt=function dt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Zt=function ct(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ii=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ot=new bi.Yd("@firebase/auth");function Fn(D,...m){Ot.logLevel<=bi.in.ERROR&&Ot.error(`Auth (${G.SDK_VERSION}): ${D}`,...m)}function bn(D,...m){throw wi(D,...m)}function Jt(D,...m){return wi(D,...m)}function Gi(D,m,y){const T=Object.assign(Object.assign({},Zt()),{[m]:y});return new K.LL("auth","Firebase",T).create(m,{appName:D.name})}function $n(D,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&bn(D,"argument-error"),Gi(D,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wi(D,...m){if("string"!=typeof D){const y=m[0],T=[...m.slice(1)];return T[0]&&(T[0].appName=D.name),D._errorFactory.create(y,...T)}return ii.create(D,...m)}function Je(D,m,...y){if(!D)throw wi(m,...y)}function de(D){const m="INTERNAL ASSERTION FAILED: "+D;throw Fn(m),new Error(m)}function oe(D,m){D||de(m)}function Se(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function He(){return"http:"===rt()||"https:"===rt()}function rt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Ke{constructor(m,y){this.shortDelay=m,this.longDelay=y,oe(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function _t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(He()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ut(D,m){oe(D.emulator,"Emulator should always be set here");const{url:y}=D.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class yt{static initialize(m,y,T){this.fetchImpl=m,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},si=new Ke(3e4,6e4);function pn(D,m){return D.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:D.tenantId}):m}function Rt(D,m,y,T){return An.apply(this,arguments)}function An(){return(An=(0,u.Z)(function*(D,m,y,T,k={}){return ao(D,k,(0,u.Z)(function*(){let U={},X={};T&&("GET"===m?X=T:U={body:JSON.stringify(T)});const fe=(0,K.xO)(Object.assign({key:D.config.apiKey},X)).slice(1),st=yield D._getAdditionalHeaders();return st["Content-Type"]="application/json",D.languageCode&&(st["X-Firebase-Locale"]=D.languageCode),yt.fetch()(Xn(D,D.config.apiHost,y,fe),Object.assign({method:m,headers:st,referrerPolicy:"no-referrer"},U))}))})).apply(this,arguments)}function ao(D,m,y){return nn.apply(this,arguments)}function nn(){return(nn=(0,u.Z)(function*(D,m,y){D._canInitEmulator=!1;const T=Object.assign(Object.assign({},wn),m);try{const k=new Gr(D),U=yield Promise.race([y(),k.promise]);k.clearNetworkTimeout();const X=yield U.json();if("needConfirmation"in X)throw $r(D,"account-exists-with-different-credential",X);if(U.ok&&!("errorMessage"in X))return X;{const fe=U.ok?X.errorMessage:X.error.message,[st,Ge]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw $r(D,"credential-already-in-use",X);if("EMAIL_EXISTS"===st)throw $r(D,"email-already-in-use",X);if("USER_DISABLED"===st)throw $r(D,"user-disabled",X);const Et=T[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw Gi(D,Et,Ge);bn(D,Et)}}catch(k){if(k instanceof K.ZR)throw k;bn(D,"network-request-failed",{message:String(k)})}})).apply(this,arguments)}function Ln(D,m,y,T){return on.apply(this,arguments)}function on(){return(on=(0,u.Z)(function*(D,m,y,T,k={}){const U=yield Rt(D,m,y,T,k);return"mfaPendingCredential"in U&&bn(D,"multi-factor-auth-required",{_serverResponse:U}),U})).apply(this,arguments)}function Xn(D,m,y,T){const k=`${m}${y}?${T}`;return D.config.emulator?ut(D.config,k):`${D.config.apiScheme}://${k}`}class Gr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T(Jt(this.auth,"network-request-failed")),si.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $r(D,m,y){const T={appName:D.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const k=Jt(D,m,T);return k.customData._tokenResponse=y,k}function Si(){return(Si=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function tr(){return(tr=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function zr(){return(zr=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function jn(D){if(D)try{const m=new Date(Number(D));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function te(){return(te=(0,u.Z)(function*(D,m=!1){const y=(0,K.m9)(D),T=yield y.getIdToken(m),k=$(T);Je(k&&k.exp&&k.auth_time&&k.iat,y.auth,"internal-error");const U="object"==typeof k.firebase?k.firebase:void 0,X=U?.sign_in_provider;return{claims:k,token:T,authTime:jn(J(k.auth_time)),issuedAtTime:jn(J(k.iat)),expirationTime:jn(J(k.exp)),signInProvider:X||null,signInSecondFactor:U?.sign_in_second_factor||null}})).apply(this,arguments)}function J(D){return 1e3*Number(D)}function $(D){const[m,y,T]=D.split(".");if(void 0===m||void 0===y||void 0===T)return Fn("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,K.tV)(y);return k?JSON.parse(k):(Fn("Failed to decode base64 JWT payload"),null)}catch(k){return Fn("Caught error parsing JWT payload as JSON",k?.toString()),null}}function H(D,m){return le.apply(this,arguments)}function le(){return(le=(0,u.Z)(function*(D,m,y=!1){if(y)return m;try{return yield m}catch(T){throw T instanceof K.ZR&&function Pe({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(T)&&D.auth.currentUser===D&&(yield D.auth.signOut()),T}})).apply(this,arguments)}class gt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const k=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),T)}iteration(){var m=this;return(0,u.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&m.schedule(!0))}m.schedule()})()}}class Vt{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=jn(this.lastLoginAt),this.creationTime=jn(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ht(D){return kt.apply(this,arguments)}function kt(){return kt=(0,u.Z)(function*(D){var m;const y=D.auth,T=yield D.getIdToken(),k=yield H(D,function di(D,m){return zr.apply(this,arguments)}(y,{idToken:T}));Je(k?.users.length,y,"internal-error");const U=k.users[0];D._notifyReloadListener(U);const X=null!==(m=U.providerUserInfo)&&void 0!==m&&m.length?function $i(D){return D.map(m=>{var{providerId:y}=m,T=Oe(m,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(U.providerUserInfo):[],fe=function hn(D,m){return[...D.filter(T=>!m.some(k=>k.providerId===T.providerId)),...m]}(D.providerData,X),Et=!!D.isAnonymous&&!(D.email&&U.passwordHash||fe?.length),gn={uid:U.localId,displayName:U.displayName||null,photoURL:U.photoUrl||null,email:U.email||null,emailVerified:U.emailVerified||!1,phoneNumber:U.phoneNumber||null,tenantId:U.tenantId||null,providerData:fe,metadata:new Vt(U.createdAt,U.lastLoginAt),isAnonymous:Et};Object.assign(D,gn)}),kt.apply(this,arguments)}function Un(){return(Un=(0,u.Z)(function*(D){const m=(0,K.m9)(D);yield Ht(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Ne(){return(Ne=(0,u.Z)(function*(D,m){const y=yield ao(D,{},(0,u.Z)(function*(){const T=(0,K.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:k,apiKey:U}=D.config,X=Xn(D,k,"/v1/token",`key=${U}`),fe=yield D._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",yt.fetch()(X,{method:"POST",headers:fe,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class pe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Je(m.idToken,"internal-error"),Je(typeof m.idToken<"u","internal-error"),Je(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function q(D){const m=$(D);return Je(m,"internal-error"),Je(typeof m.exp<"u","internal-error"),Je(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var T=this;return(0,u.Z)(function*(){return Je(!T.accessToken||T.refreshToken,m,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(m,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var T=this;return(0,u.Z)(function*(){const{accessToken:k,refreshToken:U,expiresIn:X}=yield function ar(D,m){return Ne.apply(this,arguments)}(m,y);T.updateTokensAndExpiration(k,U,Number(X))})()}updateTokensAndExpiration(m,y,T){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(m,y){const{refreshToken:T,accessToken:k,expirationTime:U}=y,X=new pe;return T&&(Je("string"==typeof T,"internal-error",{appName:m}),X.refreshToken=T),k&&(Je("string"==typeof k,"internal-error",{appName:m}),X.accessToken=k),U&&(Je("number"==typeof U,"internal-error",{appName:m}),X.expirationTime=U),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new pe,this.toJSON())}_performRefresh(){return de("not implemented")}}function Xe(D,m){Je("string"==typeof D||typeof D>"u","internal-error",{appName:m})}class xt{constructor(m){var{uid:y,auth:T,stsTokenManager:k}=m,U=Oe(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=U.displayName||null,this.email=U.email||null,this.emailVerified=U.emailVerified||!1,this.phoneNumber=U.phoneNumber||null,this.photoURL=U.photoURL||null,this.isAnonymous=U.isAnonymous||!1,this.tenantId=U.tenantId||null,this.providerData=U.providerData?[...U.providerData]:[],this.metadata=new Vt(U.createdAt||void 0,U.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,u.Z)(function*(){const T=yield H(y,y.stsTokenManager.getToken(y.auth,m));return Je(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(m){return function Mn(D){return te.apply(this,arguments)}(this,m)}reload(){return function en(D){return Un.apply(this,arguments)}(this)}_assign(m){this!==m&&(Je(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const y=new xt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(m){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var T=this;return(0,u.Z)(function*(){let k=!1;m.idToken&&m.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(m),k=!0),y&&(yield Ht(T)),yield T.auth._persistUserIfCurrent(T),k&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var m=this;return(0,u.Z)(function*(){const y=yield m.getIdToken();return yield H(m,function wr(D,m){return Si.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var T,k,U,X,fe,st,Ge,Et;const gn=null!==(T=y.displayName)&&void 0!==T?T:void 0,Gn=null!==(k=y.email)&&void 0!==k?k:void 0,Zi=null!==(U=y.phoneNumber)&&void 0!==U?U:void 0,wa=null!==(X=y.photoURL)&&void 0!==X?X:void 0,Gc=null!==(fe=y.tenantId)&&void 0!==fe?fe:void 0,pr=null!==(st=y._redirectEventId)&&void 0!==st?st:void 0,Xo=null!==(Ge=y.createdAt)&&void 0!==Ge?Ge:void 0,dl=null!==(Et=y.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:$c,emailVerified:gr,isAnonymous:zc,providerData:Ca,stsTokenManager:ch}=y;Je($c&&ch,m,"internal-error");const iy=pe.fromJSON(this.name,ch);Je("string"==typeof $c,m,"internal-error"),Xe(gn,m.name),Xe(Gn,m.name),Je("boolean"==typeof gr,m,"internal-error"),Je("boolean"==typeof zc,m,"internal-error"),Xe(Zi,m.name),Xe(wa,m.name),Xe(Gc,m.name),Xe(pr,m.name),Xe(Xo,m.name),Xe(dl,m.name);const tc=new xt({uid:$c,auth:m,email:Gn,emailVerified:gr,displayName:gn,isAnonymous:zc,photoURL:wa,phoneNumber:Zi,tenantId:Gc,stsTokenManager:iy,createdAt:Xo,lastLoginAt:dl});return Ca&&Array.isArray(Ca)&&(tc.providerData=Ca.map(em=>Object.assign({},em))),pr&&(tc._redirectEventId=pr),tc}static _fromIdTokenResponse(m,y,T=!1){return(0,u.Z)(function*(){const k=new pe;k.updateFromServerResponse(y);const U=new xt({uid:y.localId,auth:m,stsTokenManager:k,isAnonymous:T});return yield Ht(U),U})()}}const rn=new Map;function Qt(D){oe(D instanceof Function,"Expected a class definition");let m=rn.get(D);return m?(oe(m instanceof D,"Instance stored in cache mismatched with class"),m):(m=new D,rn.set(D,m),m)}const Ii=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,T){var k=this;return(0,u.Z)(function*(){k.storage[y]=T})()}_get(y){var T=this;return(0,u.Z)(function*(){const k=T.storage[y];return void 0===k?null:k})()}_remove(y){var T=this;return(0,u.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return D.type="NONE",D})();function ai(D,m,y){return`firebase:${D}:${m}:${y}`}class co{constructor(m,y,T){this.persistence=m,this.auth=y,this.userKey=T;const{config:k,name:U}=this.auth;this.fullUserKey=ai(this.userKey,k.apiKey,U),this.fullPersistenceKey=ai("persistence",k.apiKey,U),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?xt._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,u.Z)(function*(){if(y.persistence===m)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,T="authUser"){return(0,u.Z)(function*(){if(!y.length)return new co(Qt(Ii),m,T);const k=(yield Promise.all(y.map(function(){var Ge=(0,u.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let U=k[0]||Qt(Ii);const X=ai(T,m.config.apiKey,m.name);let fe=null;for(const Ge of y)try{const Et=yield Ge._get(X);if(Et){const gn=xt._fromJSON(m,Et);Ge!==U&&(fe=gn),U=Ge;break}}catch{}const st=k.filter(Ge=>Ge._shouldAllowMigration);return U._shouldAllowMigration&&st.length?(U=st[0],fe&&(yield U._set(X,fe.toJSON())),yield Promise.all(y.map(function(){var Ge=(0,u.Z)(function*(Et){if(Et!==U)try{yield Et._remove(X)}catch{}});return function(Et){return Ge.apply(this,arguments)}}())),new co(U,m,T)):new co(U,m,T)})()}}function Ps(D){const m=D.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Id(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Fa(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Ad(m))return"Blackberry";if(Pr(m))return"Webos";if(mc(m))return"Safari";if((m.includes("chrome/")||kr(m))&&!m.includes("edge/"))return"Chrome";if(la(m))return"Android";{const T=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function Fa(D=(0,K.z$)()){return/firefox\//i.test(D)}function mc(D=(0,K.z$)()){const m=D.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function kr(D=(0,K.z$)()){return/crios\//i.test(D)}function Id(D=(0,K.z$)()){return/iemobile/i.test(D)}function la(D=(0,K.z$)()){return/android/i.test(D)}function Ad(D=(0,K.z$)()){return/blackberry/i.test(D)}function Pr(D=(0,K.z$)()){return/webos/i.test(D)}function La(D=(0,K.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function $_(D=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}function Nd(D=(0,K.z$)()){return La(D)||la(D)||Pr(D)||Ad(D)||/windows phone/i.test(D)||Id(D)}function ca(D,m=[]){let y;switch(D){case"Browser":y=Ps((0,K.z$)());break;case"Worker":y=`${Ps((0,K.z$)())}-${D}`;break;default:y=D}const T=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${G.SDK_VERSION}/${T}`}function du(){return(du=(0,u.Z)(function*(D){return(yield Rt(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Df(D,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,u.Z)(function*(D,m){return Rt(D,"GET","/v2/recaptchaConfig",pn(D,m))})).apply(this,arguments)}function xd(D){return void 0!==D&&void 0!==D.getResponse}function Al(D){return void 0!==D&&void 0!==D.enterprise}class us{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function un(D){return new Promise((m,y)=>{const T=document.createElement("script");T.setAttribute("src",D),T.onload=m,T.onerror=k=>{const U=Jt("internal-error");U.customData=k,y(U)},T.type="text/javascript",T.charset="UTF-8",function Ef(){var D,m;return null!==(m=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==m?m:document}().appendChild(T)})}function nr(D){return`__${D}${Math.floor(1e6*Math.random())}`}class Fs{constructor(m){this.type="recaptcha-enterprise",this.auth=yn(m)}verify(m="verify",y=!1){var T=this;return(0,u.Z)(function*(){function U(){return U=(0,u.Z)(function*(fe){if(!y){if(null==fe.tenantId&&null!=fe._agentRecaptchaConfig)return fe._agentRecaptchaConfig.siteKey;if(null!=fe.tenantId&&void 0!==fe._tenantRecaptchaConfigs[fe.tenantId])return fe._tenantRecaptchaConfigs[fe.tenantId].siteKey}return new Promise(function(){var st=(0,u.Z)(function*(Ge,Et){Df(fe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(gn=>{if(void 0!==gn.recaptchaKey){const Gn=new us(gn);return null==fe.tenantId?fe._agentRecaptchaConfig=Gn:fe._tenantRecaptchaConfigs[fe.tenantId]=Gn,Ge(Gn.siteKey)}Et(new Error("recaptcha Enterprise site key undefined"))}).catch(gn=>{Et(gn)})});return function(Ge,Et){return st.apply(this,arguments)}}())}),U.apply(this,arguments)}function X(fe,st,Ge){const Et=window.grecaptcha;Al(Et)?Et.enterprise.ready(()=>{Et.enterprise.execute(fe,{action:m}).then(gn=>{st(gn)}).catch(()=>{st("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((fe,st)=>{(function k(fe){return U.apply(this,arguments)})(T.auth).then(Ge=>{if(!y&&Al(window.grecaptcha))X(Ge,fe,st);else{if(typeof window>"u")return void st(new Error("RecaptchaVerifier is only supported in browser"));un("https://www.google.com/recaptcha/enterprise.js?render="+Ge).then(()=>{X(Ge,fe,st)}).catch(Et=>{st(Et)})}}).catch(Ge=>{st(Ge)})})})()}}function Ho(D,m,y){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,u.Z)(function*(D,m,y,T=!1){const k=new Fs(D);let U;try{U=yield k.verify(y)}catch{U=yield k.verify(y,!0)}const X=Object.assign({},m);return Object.assign(X,T?{captchaResp:U}:{captchaResponse:U}),Object.assign(X,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(X,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),X})).apply(this,arguments)}class hu{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const T=U=>new Promise((X,fe)=>{try{X(m(U))}catch(st){fe(st)}});T.onAbort=y,this.queue.push(T);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,u.Z)(function*(){if(y.auth.currentUser===m)return;const T=[];try{for(const k of y.queue)yield k(m),k.onAbort&&T.push(k.onAbort)}catch(k){T.reverse();for(const U of T)try{U()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}class Rg{constructor(m,y,T,k){this.app=m,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=T,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wt(this),this.idTokenSubscription=new wt(this),this.beforeStateQueue=new hu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ii,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(m,y){var T=this;return y&&(this._popupRedirectResolver=Qt(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var k,U;if(!T._deleted&&(T.persistenceManager=yield co.create(T,m),!T._deleted)){if(null!==(k=T._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(U=T.currentUser)||void 0===U?void 0:U.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,u.Z)(function*(){var T;const k=yield y.assertedPersistence.getCurrentUser();let U=k,X=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const fe=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,st=U?._redirectEventId,Ge=yield y.tryRedirectSignIn(m);(!fe||fe===st)&&Ge?.user&&(U=Ge.user,X=!0)}if(!U)return y.directlySetCurrentUser(null);if(!U._redirectEventId){if(X)try{yield y.beforeStateQueue.runMiddleware(U)}catch(fe){U=k,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(fe))}return U?y.reloadAndSetCurrentUserOrClear(U):y.directlySetCurrentUser(null)}return Je(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===U._redirectEventId?y.directlySetCurrentUser(U):y.reloadAndSetCurrentUserOrClear(U)})()}tryRedirectSignIn(m){var y=this;return(0,u.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,u.Z)(function*(){try{yield Ht(m)}catch(T){if("auth/network-request-failed"!==T?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Qn(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,u.Z)(function*(){const T=m?(0,K.m9)(m):null;return T&&Je(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(m,y=!1){var T=this;return(0,u.Z)(function*(){if(!T._deleted)return m&&Je(T.tenantId===m.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(m)),T.queue((0,u.Z)(function*(){yield T.directlySetCurrentUser(m),T.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(Qt(m))}))}initializeRecaptchaConfig(){var m=this;return(0,u.Z)(function*(){const y=yield Df(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new us(y);null==m.tenantId?m._agentRecaptchaConfig=T:m._tenantRecaptchaConfigs[m.tenantId]=T,T.emailPasswordEnabled&&new Fs(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new K.LL("auth","Firebase",m())}onAuthStateChanged(m,y,T){return this.registerStateListener(this.authStateSubscription,m,y,T)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,T){return this.registerStateListener(this.idTokenSubscription,m,y,T)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var T=this;return(0,u.Z)(function*(){const k=yield T.getOrInitRedirectPersistenceManager(y);return null===m?k.removeCurrentUser():k.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const T=m&&Qt(m)||y._popupRedirectResolver;Je(T,y,"argument-error"),y.redirectPersistenceManager=yield co.create(y,[Qt(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,u.Z)(function*(){var T,k;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===m?y._currentUser:(null===(k=y.redirectUser)||void 0===k?void 0:k._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,u.Z)(function*(){if(m===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,T,k){if(this._deleted)return()=>{};const U="function"==typeof y?y:y.next.bind(y),X=this._isInitialized?Promise.resolve():this._initializationPromise;return Je(X,this,"internal-error"),X.then(()=>U(this.currentUser)),"function"==typeof y?m.addObserver(y,T,k):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==m&&y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh(),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=ca(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var y;const T={"X-Client-Version":m.clientVersion};m.app.options.appId&&(T["X-Firebase-gmpid"]=m.app.options.appId);const k=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();k&&(T["X-Firebase-Client"]=k);const U=yield m._getAppCheckToken();return U&&(T["X-Firebase-AppCheck"]=U),T})()}_getAppCheckToken(){var m=this;return(0,u.Z)(function*(){var y;const T=yield null===(y=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return T?.error&&function Vn(D,...m){Ot.logLevel<=bi.in.WARN&&Ot.warn(`Auth (${G.SDK_VERSION}): ${D}`,...m)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function yn(D){return(0,K.m9)(D)}class wt{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,K.ne)(y=>this.observer=y)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fr(D,m,y){const T=yn(D);Je(T._canInitEmulator,T,"emulator-config-failed"),Je(/^https?:\/\//.test(m),T,"invalid-emulator-scheme");const k=!!y?.disableWarnings,U=Nl(m),{host:X,port:fe}=function Dr(D){const m=Nl(D),y=/(\/\/)?([^?#/]+)/.exec(D.substr(m.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(T);if(k){const U=k[1];return{host:U,port:Va(T.substr(U.length+1))}}{const[U,X]=T.split(":");return{host:U,port:Va(X)}}}(m);T.config.emulator={url:`${U}//${X}${null===fe?"":`:${fe}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:X,port:fe,protocol:U.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function Oi(){function D(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}function Nl(D){const m=D.indexOf(":");return m<0?"":D.substr(0,m+1)}function Va(D){if(!D)return null;const m=Number(D);return isNaN(m)?null:m}class Lr{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return de("not implemented")}_getIdTokenResponse(m){return de("not implemented")}_linkToIdToken(m,y){return de("not implemented")}_getReauthenticationResolver(m){return de("not implemented")}}function Ls(D,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:resetPassword",pn(D,m))})).apply(this,arguments)}function ja(D,m){return vc.apply(this,arguments)}function vc(){return(vc=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:update",pn(D,m))})).apply(this,arguments)}function Ga(D,m){return ua.apply(this,arguments)}function ua(){return(ua=(0,u.Z)(function*(D,m){return Ln(D,"POST","/v1/accounts:signInWithPassword",pn(D,m))})).apply(this,arguments)}function qr(D,m){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:sendOobCode",pn(D,m))})).apply(this,arguments)}function Zr(){return(Zr=(0,u.Z)(function*(D,m){return qr(D,m)})).apply(this,arguments)}function ir(D,m){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,u.Z)(function*(D,m){return qr(D,m)})).apply(this,arguments)}function ds(D,m){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,u.Z)(function*(D,m){return qr(D,m)})).apply(this,arguments)}function _c(){return(_c=(0,u.Z)(function*(D,m){return qr(D,m)})).apply(this,arguments)}function Eo(){return(Eo=(0,u.Z)(function*(D,m){return Ln(D,"POST","/v1/accounts:signInWithEmailLink",pn(D,m))})).apply(this,arguments)}function Hs(){return(Hs=(0,u.Z)(function*(D,m){return Ln(D,"POST","/v1/accounts:signInWithEmailLink",pn(D,m))})).apply(this,arguments)}class Vo extends Lr{constructor(m,y,T,k=null){super("password",T),this._email=m,this._password=y,this._tenantId=k}static _fromEmailAndPassword(m,y){return new Vo(m,y,"password")}static _fromEmailAndCode(m,y,T=null){return new Vo(m,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,u.Z)(function*(){var T;switch(y.signInMethod){case"password":const k={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=m._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const U=yield Ho(m,k,"signInWithPassword");return Ga(m,U)}return Ga(m,k).catch(function(){var U=(0,u.Z)(function*(X){if("auth/missing-recaptcha-token"===X.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const fe=yield Ho(m,k,"signInWithPassword");return Ga(m,fe)}return Promise.reject(X)});return function(X){return U.apply(this,arguments)}}());case"emailLink":return function Rd(D,m){return Eo.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:bn(m,"internal-error")}})()}_linkToIdToken(m,y){var T=this;return(0,u.Z)(function*(){switch(T.signInMethod){case"password":return ja(m,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function da(D,m){return Hs.apply(this,arguments)}(m,{idToken:y,email:T._email,oobCode:T._password});default:bn(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function ri(D,m){return kd.apply(this,arguments)}function kd(){return(kd=(0,u.Z)(function*(D,m){return Ln(D,"POST","/v1/accounts:signInWithIdp",pn(D,m))})).apply(this,arguments)}class Ci extends Lr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new Ci(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):bn("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:T,signInMethod:k}=y,U=Oe(y,["providerId","signInMethod"]);if(!T||!k)return null;const X=new Ci(T,k);return X.idToken=U.idToken||void 0,X.accessToken=U.accessToken||void 0,X.secret=U.secret,X.nonce=U.nonce,X.pendingToken=U.pendingToken||null,X}_getIdTokenResponse(m){return ri(m,this.buildRequest())}_linkToIdToken(m,y){const T=this.buildRequest();return T.idToken=y,ri(m,T)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,ri(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,K.xO)(y)}return m}}function jo(){return(jo=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:sendVerificationCode",pn(D,m))})).apply(this,arguments)}function rr(){return(rr=(0,u.Z)(function*(D,m){return Ln(D,"POST","/v1/accounts:signInWithPhoneNumber",pn(D,m))})).apply(this,arguments)}function yc(){return(yc=(0,u.Z)(function*(D,m){const y=yield Ln(D,"POST","/v1/accounts:signInWithPhoneNumber",pn(D,m));if(y.temporaryProof)throw $r(D,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Tf={USER_NOT_FOUND:"user-not-found"};function bc(){return(bc=(0,u.Z)(function*(D,m){return Ln(D,"POST","/v1/accounts:signInWithPhoneNumber",pn(D,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Tf)})).apply(this,arguments)}class za extends Lr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new za({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new za({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function $a(D,m){return rr.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function xl(D,m){return yc.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function kg(D,m){return bc.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:T,verificationCode:k}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:T,code:k}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:T,phoneNumber:k,temporaryProof:U}=m;return T||y||k||U?new za({verificationId:y,verificationCode:T,phoneNumber:k,temporaryProof:U}):null}}class uo{constructor(m){var y,T,k,U,X,fe;const st=(0,K.zd)((0,K.pd)(m)),Ge=null!==(y=st.apiKey)&&void 0!==y?y:null,Et=null!==(T=st.oobCode)&&void 0!==T?T:null,gn=function Pg(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=st.mode)&&void 0!==k?k:null);Je(Ge&&Et&&gn,"argument-error"),this.apiKey=Ge,this.operation=gn,this.code=Et,this.continueUrl=null!==(U=st.continueUrl)&&void 0!==U?U:null,this.languageCode=null!==(X=st.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(fe=st.tenantId)&&void 0!==fe?fe:null}static parseLink(m){const y=function Fg(D){const m=(0,K.zd)((0,K.pd)(D)).link,y=m?(0,K.zd)((0,K.pd)(m)).deep_link_id:null,T=(0,K.zd)((0,K.pd)(D)).deep_link_id;return(T?(0,K.zd)((0,K.pd)(T)).link:null)||T||y||m||D}(m);try{return new uo(y)}catch{return null}}}let Pd=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(y,T){return Vo._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const k=uo.parseLink(T);return Je(k,"argument-error"),Vo._fromEmailAndCode(y,k.code,k.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Go{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ol extends Go{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class wc extends Ol{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return Je("providerId"in y&&"signInMethod"in y,"argument-error"),Ci._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Je(m.idToken||m.accessToken,"argument-error"),Ci._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return wc.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return wc.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:k,pendingToken:U,nonce:X,providerId:fe}=m;if(!T&&!k&&!y&&!U||!fe)return null;try{return new wc(fe)._credential({idToken:y,accessToken:T,nonce:X,pendingToken:U})}catch{return null}}}let Sf=(()=>{class D extends Ol{constructor(){super("facebook.com")}static credential(y){return Ci._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return D.credential(y.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Ug=(()=>{class D extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return Ci._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:k}=y;if(!T&&!k)return null;try{return D.credential(T,k)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),Bg=(()=>{class D extends Ol{constructor(){super("github.com")}static credential(y){return Ci._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return D.credential(y.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Vs extends Lr{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return ri(m,this.buildRequest())}_linkToIdToken(m,y){const T=this.buildRequest();return T.idToken=y,ri(m,T)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,ri(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:T,signInMethod:k,pendingToken:U}=y;return T&&k&&U&&T===k?new Vs(T,U):null}static _create(m,y){return new Vs(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pu extends Go{constructor(m){Je(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return pu.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return pu.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=Vs.fromJSON(m);return Je(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:T}=m;if(!y||!T)return null;try{return Vs._create(T,y)}catch{return null}}}let Ai=(()=>{class D extends Ol{constructor(){super("twitter.com")}static credential(y,T){return Ci._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:k}=y;if(!T||!k)return null;try{return D.credential(T,k)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Fd(D,m){return js.apply(this,arguments)}function js(){return(js=(0,u.Z)(function*(D,m){return Ln(D,"POST","/v1/accounts:signUp",pn(D,m))})).apply(this,arguments)}class To{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,T,k=!1){return(0,u.Z)(function*(){const U=yield xt._fromIdTokenResponse(m,T,k),X=ha(T);return new To({user:U,providerId:X,_tokenResponse:T,operationType:y})})()}static _forOperation(m,y,T){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(T,!0);const k=ha(T);return new To({user:m,providerId:k,_tokenResponse:T,operationType:y})})()}}function ha(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function $o(D){return gu.apply(this,arguments)}function gu(){return(gu=(0,u.Z)(function*(D){var m;const y=yn(D);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new To({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield Fd(y,{returnSecureToken:!0}),k=yield To._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser(k.user),k})).apply(this,arguments)}class Wa extends K.ZR{constructor(m,y,T,k){var U;super(y.code,y.message),this.operationType=T,this.user=k,Object.setPrototypeOf(this,Wa.prototype),this.customData={appName:m.name,tenantId:null!==(U=m.tenantId)&&void 0!==U?U:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(m,y,T,k){return new Wa(m,y,T,k)}}function Af(D,m,y,T){return("reauthenticate"===m?y._getReauthenticationResolver(D):y._getIdTokenResponse(D)).catch(U=>{throw"auth/multi-factor-auth-required"===U.code?Wa._fromErrorAndOperation(D,U,m,T):U})}function Ld(D){return new Set(D.map(({providerId:m})=>m).filter(m=>!!m))}function W_(D,m){return qa.apply(this,arguments)}function qa(){return qa=(0,u.Z)(function*(D,m){const y=(0,K.m9)(D);yield fi(!0,y,m);const{providerUserInfo:T}=yield function xi(D,m){return tr.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),k=Ld(T||[]);return y.providerData=y.providerData.filter(U=>k.has(U.providerId)),k.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),qa.apply(this,arguments)}function ho(D,m){return Za.apply(this,arguments)}function Za(){return(Za=(0,u.Z)(function*(D,m,y=!1){const T=yield H(D,m._linkToIdToken(D.auth,yield D.getIdToken()),y);return To._forOperation(D,"link",T)})).apply(this,arguments)}function fi(D,m,y){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,u.Z)(function*(D,m,y){yield Ht(m);const k=!1===D?"provider-already-linked":"no-such-provider";Je(Ld(m.providerData).has(y)===D,m.auth,k)})).apply(this,arguments)}function Ud(D,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(D,m,y=!1){const{auth:T}=D,k="reauthenticate";try{const U=yield H(D,Af(T,k,m,D),y);Je(U.idToken,T,"internal-error");const X=$(U.idToken);Je(X,T,"internal-error");const{sub:fe}=X;return Je(D.uid===fe,T,"user-mismatch"),To._forOperation(D,k,U)}catch(U){throw"auth/user-not-found"===U?.code&&bn(T,"user-mismatch"),U}})).apply(this,arguments)}function Ka(D,m){return hs.apply(this,arguments)}function hs(){return(hs=(0,u.Z)(function*(D,m,y=!1){const T="signIn",k=yield Af(D,T,m),U=yield To._fromIdTokenResponse(D,T,k);return y||(yield D._updateCurrentUser(U.user)),U})).apply(this,arguments)}function Rl(D,m){return mu.apply(this,arguments)}function mu(){return(mu=(0,u.Z)(function*(D,m){return Ka(yn(D),m)})).apply(this,arguments)}function vu(D,m){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,u.Z)(function*(D,m){const y=(0,K.m9)(D);return yield fi(!1,y,m.providerId),ho(y,m)})).apply(this,arguments)}function _u(D,m){return kl.apply(this,arguments)}function kl(){return(kl=(0,u.Z)(function*(D,m){return Ud((0,K.m9)(D),m)})).apply(this,arguments)}function Nf(){return(Nf=(0,u.Z)(function*(D,m){return Ln(D,"POST","/v1/accounts:signInWithCustomToken",pn(D,m))})).apply(this,arguments)}function Mf(D,m){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,u.Z)(function*(D,m){const y=yn(D),T=yield function cr(D,m){return Nf.apply(this,arguments)}(y,{token:m,returnSecureToken:!0}),k=yield To._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(k.user),k}),Bd.apply(this,arguments)}class fa{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?yu._fromServerResponse(m,y):"totpInfo"in y?Pl._fromServerResponse(m,y):bn(m,"internal-error")}}class yu extends fa{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new yu(y)}}class Pl extends fa{constructor(m){super("totp",m)}static _fromServerResponse(m,y){return new Pl(y)}}function fs(D,m,y){var T;Je((null===(T=y.url)||void 0===T?void 0:T.length)>0,D,"invalid-continue-uri"),Je(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Je(y.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(Je(y.android.packageName.length>0,D,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function Cc(D,m,y){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,u.Z)(function*(D,m,y){var T;const k=yn(D),U={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=k._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const X=yield Ho(k,U,"getOobCode",!0);y&&fs(k,X,y),yield ir(k,X)}else y&&fs(k,U,y),yield ir(k,U).catch(function(){var X=(0,u.Z)(function*(fe){if("auth/missing-recaptcha-token"!==fe.code)return Promise.reject(fe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const st=yield Ho(k,U,"getOobCode",!0);y&&fs(k,st,y),yield ir(k,st)}});return function(fe){return X.apply(this,arguments)}}())}),Fl.apply(this,arguments)}function xf(D,m,y){return bu.apply(this,arguments)}function bu(){return(bu=(0,u.Z)(function*(D,m,y){yield Ls((0,K.m9)(D),{oobCode:m,newPassword:y})})).apply(this,arguments)}function Of(D,m){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,u.Z)(function*(D,m){yield function Us(D,m){return li.apply(this,arguments)}((0,K.m9)(D),{oobCode:m})}),Dc.apply(this,arguments)}function Ec(D,m){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,u.Z)(function*(D,m){const y=(0,K.m9)(D),T=yield Ls(y,{oobCode:m}),k=T.requestType;switch(Je(k,y,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Je(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Je(T.mfaInfo,y,"internal-error");default:Je(T.email,y,"internal-error")}let U=null;return T.mfaInfo&&(U=fa._fromServerResponse(yn(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:U},operation:k}})).apply(this,arguments)}function ps(D,m){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,u.Z)(function*(D,m){const{data:y}=yield Ec((0,K.m9)(D),m);return y.email})).apply(this,arguments)}function Hd(D,m,y){return zn.apply(this,arguments)}function zn(){return zn=(0,u.Z)(function*(D,m,y){var T;const k=yn(D),U={returnSecureToken:!0,email:m,password:y,clientType:"CLIENT_TYPE_WEB"};let X;if(null!==(T=k._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const Ge=yield Ho(k,U,"signUpPassword");X=Fd(k,Ge)}else X=Fd(k,U).catch(function(){var Ge=(0,u.Z)(function*(Et){if("auth/missing-recaptcha-token"===Et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const gn=yield Ho(k,U,"signUpPassword");return Fd(k,gn)}return Promise.reject(Et)});return function(Et){return Ge.apply(this,arguments)}}());const fe=yield X.catch(Ge=>Promise.reject(Ge)),st=yield To._fromIdTokenResponse(k,"signIn",fe);return yield k._updateCurrentUser(st.user),st}),zn.apply(this,arguments)}function Sc(D,m,y){return Rl((0,K.m9)(D),Pd.credential(m,y))}function Ja(D,m,y){return zi.apply(this,arguments)}function zi(){return zi=(0,u.Z)(function*(D,m,y){var T;const k=yn(D),U={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function X(fe,st){Je(st.handleCodeInApp,k,"argument-error"),st&&fs(k,fe,st)}if(null!==(T=k._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const fe=yield Ho(k,U,"getOobCode",!0);X(fe,y),yield ds(k,fe)}else X(U,y),yield ds(k,U).catch(function(){var fe=(0,u.Z)(function*(st){if("auth/missing-recaptcha-token"!==st.code)return Promise.reject(st);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield Ho(k,U,"getOobCode",!0);X(Ge,y),yield ds(k,Ge)}});return function(st){return fe.apply(this,arguments)}}())}),zi.apply(this,arguments)}function Qa(D,m){const y=uo.parseLink(m);return"EMAIL_SIGNIN"===y?.operation}function Vd(D,m,y){return So.apply(this,arguments)}function So(){return(So=(0,u.Z)(function*(D,m,y){const T=(0,K.m9)(D),k=Pd.credentialWithLink(m,y||Se());return Je(k._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Rl(T,k)})).apply(this,arguments)}function wu(){return(wu=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:createAuthUri",pn(D,m))})).apply(this,arguments)}function jd(D,m){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,u.Z)(function*(D,m){const T={identifier:m,continueUri:He()?Se():"http://localhost"},{signinMethods:k}=yield function Yr(D,m){return wu.apply(this,arguments)}((0,K.m9)(D),T);return k||[]}),Ul.apply(this,arguments)}function Io(D,m){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,u.Z)(function*(D,m){const y=(0,K.m9)(D),k={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};m&&fs(y.auth,k,m);const{email:U}=yield function Od(D,m){return Zr.apply(this,arguments)}(y.auth,k);U!==D.email&&(yield D.reload())}),Bl.apply(this,arguments)}function Ic(D,m,y){return pa.apply(this,arguments)}function pa(){return pa=(0,u.Z)(function*(D,m,y){const T=(0,K.m9)(D),U={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:m};y&&fs(T.auth,U,y);const{email:X}=yield function z_(D,m){return _c.apply(this,arguments)}(T.auth,U);X!==D.email&&(yield D.reload())}),pa.apply(this,arguments)}function $s(){return($s=(0,u.Z)(function*(D,m){return Rt(D,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Gd(D,m){return Yt.apply(this,arguments)}function Yt(){return Yt=(0,u.Z)(function*(D,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const T=(0,K.m9)(D),U={idToken:yield T.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},X=yield H(T,function Ac(D,m){return $s.apply(this,arguments)}(T.auth,U));T.displayName=X.displayName||null,T.photoURL=X.photoUrl||null;const fe=T.providerData.find(({providerId:st})=>"password"===st);fe&&(fe.displayName=T.displayName,fe.photoURL=T.photoURL),yield T._updateTokensIfNecessary(X)}),Yt.apply(this,arguments)}function Cu(D,m){return zd((0,K.m9)(D),m,null)}function $d(D,m){return zd((0,K.m9)(D),null,m)}function zd(D,m,y){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,u.Z)(function*(D,m,y){const{auth:T}=D,U={idToken:yield D.getIdToken(),returnSecureToken:!0};m&&(U.email=m),y&&(U.password=y);const X=yield H(D,ja(T,U));yield D._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class zs{constructor(m,y,T={}){this.isNewUser=m,this.providerId=y,this.profile=T}}class zo extends zs{constructor(m,y,T,k){super(m,y,T),this.username=k}}class Nc extends zs{constructor(m,y){super(m,"facebook.com",y)}}class Wd extends zo{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Vg extends zs{constructor(m,y){super(m,"google.com",y)}}class qd extends zo{constructor(m,y,T){super(m,"twitter.com",y,T)}}function kf(D){const{user:m,_tokenResponse:y}=D;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Rf(D){var m,y;if(!D)return null;const{providerId:T}=D,k=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},U=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!T&&D?.idToken){const X=null===(y=null===(m=$(D.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(X)return new zs(U,"anonymous"!==X&&"custom"!==X?X:null)}if(!T)return null;switch(T){case"facebook.com":return new Nc(U,k);case"github.com":return new Wd(U,k);case"google.com":return new Vg(U,k);case"twitter.com":return new qd(U,k,D.screenName||null);case"custom":case"anonymous":return new zs(U,null);default:return new zs(U,T,k)}}(y)}class gs{constructor(m,y,T){this.type=m,this.credential=y,this.auth=T}static _fromIdtoken(m,y){return new gs("enroll",m,y)}static _fromMfaPendingCredential(m){return new gs("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,T;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return gs._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(T=m.multiFactorSession)&&void 0!==T&&T.idToken)return gs._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Yd{constructor(m,y,T){this.session=m,this.hints=y,this.signInResolver=T}static _fromError(m,y){const T=yn(m),k=y.customData._serverResponse,U=(k.mfaInfo||[]).map(fe=>fa._fromServerResponse(T,fe));Je(k.mfaPendingCredential,T,"internal-error");const X=gs._fromMfaPendingCredential(k.mfaPendingCredential);return new Yd(X,U,function(){var fe=(0,u.Z)(function*(st){const Ge=yield st._process(T,X);delete k.mfaInfo,delete k.mfaPendingCredential;const Et=Object.assign(Object.assign({},k),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(y.operationType){case"signIn":const gn=yield To._fromIdTokenResponse(T,y.operationType,Et);return yield T._updateCurrentUser(gn.user),gn;case"reauthenticate":return Je(y.user,T,"internal-error"),To._forOperation(y.user,y.operationType,Et);default:bn(T,"internal-error")}});return function(st){return fe.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,u.Z)(function*(){return y.signInResolver(m)})()}}function Kd(D,m){var y;const T=(0,K.m9)(D),k=m;return Je(m.customData.operationType,T,"argument-error"),Je(null===(y=k.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),Yd._fromError(T,k)}class Wi{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>fa._fromServerResponse(m.auth,T)))})}static _fromUser(m){return new Wi(m)}getSession(){var m=this;return(0,u.Z)(function*(){return gs._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,y){var T=this;return(0,u.Z)(function*(){const k=m,U=yield T.getSession(),X=yield H(T.user,k._process(T.user.auth,U,y));return yield T.user._updateTokensIfNecessary(X),T.user.reload()})()}unenroll(m){var y=this;return(0,u.Z)(function*(){const T="string"==typeof m?m:m.uid,k=yield y.user.getIdToken();try{const U=yield H(y.user,function Zo(D,m){return Rt(D,"POST","/v2/accounts/mfaEnrollment:withdraw",pn(D,m))}(y.user.auth,{idToken:k,mfaEnrollmentId:T}));y.enrolledFactors=y.enrolledFactors.filter(({uid:X})=>X!==T),yield y.user._updateTokensIfNecessary(U),yield y.user.reload()}catch(U){throw U}})()}}const Gl=new WeakMap;function Pf(D){const m=(0,K.m9)(D);return Gl.has(m)||Gl.set(m,Wi._fromUser(m)),Gl.get(m)}const Mc="__sak";class Tu{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Mc,"1"),this.storage.removeItem(Mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const $l=(()=>{class D extends Tu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Su(){const D=(0,K.z$)();return mc(D)||La(D)}()&&function uu(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Nd(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const k=this.storage.getItem(T),U=this.localCache[T];k!==U&&y(T,U,k)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((fe,st,Ge)=>{this.notifyListeners(fe,Ge)});const k=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(k);if(y.newValue!==fe)null!==y.newValue?this.storage.setItem(k,y.newValue):this.storage.removeItem(k);else if(this.localCache[k]===y.newValue&&!T)return}const U=()=>{const fe=this.storage.getItem(k);!T&&this.localCache[k]===fe||this.notifyListeners(k,fe)},X=this.storage.getItem(k);!function Og(){return(0,K.w1)()&&10===document.documentMode}()||X===y.newValue||y.newValue===y.oldValue?U():setTimeout(U,10)}notifyListeners(y,T){this.localCache[y]=T;const k=this.listeners[y];if(k)for(const U of Array.from(k))U(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var k=()=>super._set,U=this;return(0,u.Z)(function*(){yield k().call(U,y,T),U.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,k=this;return(0,u.Z)(function*(){const U=yield T().call(k,y);return k.localCache[y]=JSON.stringify(U),U})()}_remove(y){var T=()=>super._remove,k=this;return(0,u.Z)(function*(){yield T().call(k,y),delete k.localCache[y]})()}}return D.type="LOCAL",D})(),el=(()=>{class D extends Tu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return D.type="SESSION",D})();let Ff=(()=>{class D{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(U=>U.isListeningto(y));if(T)return T;const k=new D(y);return this.receivers.push(k),k}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,u.Z)(function*(){const k=y,{eventId:U,eventType:X,data:fe}=k.data,st=T.handlersMap[X];if(!st?.size)return;k.ports[0].postMessage({status:"ack",eventId:U,eventType:X});const Ge=Array.from(st).map(function(){var gn=(0,u.Z)(function*(Gn){return Gn(k.origin,fe)});return function(Gn){return gn.apply(this,arguments)}}()),Et=yield function Au(D){return Promise.all(D.map(function(){var m=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return m.apply(this,arguments)}}()))}(Ge);k.ports[0].postMessage({status:"done",eventId:U,eventType:X,response:Et})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function zl(D="",m=10){let y="";for(let T=0;T<m;T++)y+=Math.floor(10*Math.random());return D+y}class Qd{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,T=50){var k=this;return(0,u.Z)(function*(){const U=typeof MessageChannel<"u"?new MessageChannel:null;if(!U)throw new Error("connection_unavailable");let X,fe;return new Promise((st,Ge)=>{const Et=zl("",20);U.port1.start();const gn=setTimeout(()=>{Ge(new Error("unsupported_event"))},T);fe={messageChannel:U,onMessage(Gn){const Zi=Gn;if(Zi.data.eventId===Et)switch(Zi.data.status){case"ack":clearTimeout(gn),X=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),st(Zi.data.response);break;default:clearTimeout(gn),clearTimeout(X),Ge(new Error("invalid_response"))}}},k.handlers.add(fe),U.port1.addEventListener("message",fe.onMessage),k.target.postMessage({eventType:m,eventId:Et,data:y},[U.port2])}).finally(()=>{fe&&k.removeMessageHandler(fe)})})()}}function Ti(){return window}function dr(){return typeof Ti().WorkerGlobalScope<"u"&&"function"==typeof Ti().importScripts}function ci(){return(ci=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Nu="firebaseLocalStorageDb",Wl="firebaseLocalStorage",xc="fbase_key";class ms{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Yo(D,m){return D.transaction([Wl],m?"readwrite":"readonly").objectStore(Wl)}function ql(){const D=indexedDB.open(Nu,1);return new Promise((m,y)=>{D.addEventListener("error",()=>{y(D.error)}),D.addEventListener("upgradeneeded",()=>{const T=D.result;try{T.createObjectStore(Wl,{keyPath:xc})}catch(k){y(k)}}),D.addEventListener("success",(0,u.Z)(function*(){const T=D.result;T.objectStoreNames.contains(Wl)?m(T):(T.close(),yield function eh(){const D=indexedDB.deleteDatabase(Nu);return new ms(D).toPromise()}(),m(yield ql()))}))})}function tl(D,m,y){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,u.Z)(function*(D,m,y){const T=Yo(D,!0).put({[xc]:m,value:y});return new ms(T).toPromise()})).apply(this,arguments)}function Ri(){return(Ri=(0,u.Z)(function*(D,m){const y=Yo(D,!1).get(m),T=yield new ms(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function hr(D,m){const y=Yo(D,!0).delete(m);return new ms(y).toPromise()}const Tr=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield ql()),y.db})()}_withRetries(y){var T=this;return(0,u.Z)(function*(){let k=0;for(;;)try{const U=yield T._openDb();return yield y(U)}catch(U){if(k++>3)throw U;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return dr()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=Ff._getInstance(function Lf(){return dr()?self:null}()),y.receiver._subscribe("keyChanged",function(){var T=(0,u.Z)(function*(k,U){return{keyProcessed:(yield y._poll()).includes(U.key)}});return function(k,U){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,u.Z)(function*(k,U){return["keyChanged"]});return function(k,U){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var T,k;if(y.activeServiceWorker=yield function Ws(){return ci.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Qd(y.activeServiceWorker);const U=yield y.sender._send("ping",{},800);U&&null!==(T=U[0])&&void 0!==T&&T.fulfilled&&null!==(k=U[0])&&void 0!==k&&k.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,u.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Xd(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield ql();return yield tl(y,Mc,"1"),yield hr(y,Mc),!0}catch{}return!1})()}_withPendingWrite(y){var T=this;return(0,u.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var k=this;return(0,u.Z)(function*(){return k._withPendingWrite((0,u.Z)(function*(){return yield k._withRetries(U=>tl(U,y,T)),k.localCache[y]=T,k.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,u.Z)(function*(){const k=yield T._withRetries(U=>function Oc(D,m){return Ri.apply(this,arguments)}(U,y));return T.localCache[y]=k,k})()}_remove(y){var T=this;return(0,u.Z)(function*(){return T._withPendingWrite((0,u.Z)(function*(){return yield T._withRetries(k=>hr(k,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const T=yield y._withRetries(X=>{const fe=Yo(X,!1).getAll();return new ms(fe).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const k=[],U=new Set;for(const{fbase_key:X,value:fe}of T)U.add(X),JSON.stringify(y.localCache[X])!==JSON.stringify(fe)&&(y.notifyListeners(X,fe),k.push(X));for(const X of Object.keys(y.localCache))y.localCache[X]&&!U.has(X)&&(y.notifyListeners(X,null),k.push(X));return k})()}notifyListeners(y,T){this.localCache[y]=T;const k=this.listeners[y];if(k)for(const U of Array.from(k))U(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})(),Mu=1e12;class nl{constructor(m){this.auth=m,this.counter=Mu,this._widgets=new Map}render(m,y){const T=this.counter;return this._widgets.set(T,new Lt(m,this.auth.name,y||{})),this.counter++,T}reset(m){var y;const T=m||Mu;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(m){var y;return(null===(y=this._widgets.get(m||Mu))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,u.Z)(function*(){var T;return null===(T=y._widgets.get(m||Mu))||void 0===T||T.execute(),""})()}}class Lt{constructor(m,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof m?document.getElementById(m):m;Je(k,"argument-error",{appName:y}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Kr(D){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<D;T++)m.push(y.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Pc=nr("rcb"),ma=new Ke(3e4,6e4);class il{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Ti().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return Je(function qi(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(y),m,"argument-error"),this.shouldResolveImmediately(y)&&xd(Ti().grecaptcha)?Promise.resolve(Ti().grecaptcha):new Promise((T,k)=>{const U=Ti().setTimeout(()=>{k(Jt(m,"network-request-failed"))},ma.get());Ti()[Pc]=()=>{Ti().clearTimeout(U),delete Ti()[Pc];const fe=Ti().grecaptcha;if(!fe||!xd(fe))return void k(Jt(m,"internal-error"));const st=fe.render;fe.render=(Ge,Et)=>{const gn=st(Ge,Et);return this.counter++,gn},this.hostLanguage=y,T(fe)},un(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:Pc,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(U),k(Jt(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=Ti().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ao{load(m){return(0,u.Z)(function*(){return new nl(m)})()}clearedOneInstance(){}}const va="recaptcha",Wg={theme:"light",type:"image"};class No{constructor(m,y=Object.assign({},Wg),T){this.parameters=y,this.type=va,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(T),this.isInvisible="invisible"===this.parameters.size,Je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof m?document.getElementById(m):m;Je(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ao:new il,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),T=m.getAssertedRecaptcha();return T.getResponse(y)||new Promise(U=>{const X=fe=>{fe&&(m.tokenChangeListeners.delete(X),U(fe))};m.tokenChangeListeners.add(X),m.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Je(!this.parameters.sitekey,this.auth,"argument-error"),Je(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof m)m(y);else if("string"==typeof m){const T=Ti()[m];"function"==typeof T&&T(y)}}}assertNotDestroyed(){Je(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){Je(He()&&!dr(),m.auth,"internal-error"),yield function Vf(){let D=null;return new Promise(m=>{"complete"!==document.readyState?(D=()=>m(),window.addEventListener("load",D)):m()}).catch(m=>{throw D&&window.removeEventListener("load",D),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function Md(D){return du.apply(this,arguments)}(m.auth);Je(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return Je(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vs{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=za._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function _a(D,m,y){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,u.Z)(function*(D,m,y){const T=yn(D),k=yield qs(T,m,(0,K.m9)(y));return new vs(k,U=>Rl(T,U))})).apply(this,arguments)}function _s(D,m,y){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,u.Z)(function*(D,m,y){const T=(0,K.m9)(D);yield fi(!1,T,"phone");const k=yield qs(T.auth,m,(0,K.m9)(y));return new vs(k,U=>vu(T,U))})).apply(this,arguments)}function jf(D,m,y){return rl.apply(this,arguments)}function rl(){return(rl=(0,u.Z)(function*(D,m,y){const T=(0,K.m9)(D),k=yield qs(T.auth,m,(0,K.m9)(y));return new vs(k,U=>_u(T,U))})).apply(this,arguments)}function qs(D,m,y){return po.apply(this,arguments)}function po(){return po=(0,u.Z)(function*(D,m,y){var T;const k=yield y.verify();try{let U;if(Je("string"==typeof k,D,"argument-error"),Je(y.type===va,D,"argument-error"),U="string"==typeof m?{phoneNumber:m}:m,"session"in U){const X=U.session;if("phoneNumber"in U)return Je("enroll"===X.type,D,"internal-error"),(yield function Er(D,m){return Rt(D,"POST","/v2/accounts/mfaEnrollment:start",pn(D,m))}(D,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:U.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{Je("signin"===X.type,D,"internal-error");const fe=(null===(T=U.multiFactorHint)||void 0===T?void 0:T.uid)||U.multiFactorUid;return Je(fe,D,"missing-multi-factor-info"),(yield function th(D,m){return Rt(D,"POST","/v2/accounts/mfaSignIn:start",pn(D,m))}(D,{mfaPendingCredential:X.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield function fu(D,m){return jo.apply(this,arguments)}(D,{phoneNumber:U.phoneNumber,recaptchaToken:k});return X}}finally{y._reset()}}),po.apply(this,arguments)}function nh(D,m){return fr.apply(this,arguments)}function fr(){return(fr=(0,u.Z)(function*(D,m){yield ho((0,K.m9)(D),m)})).apply(this,arguments)}let ol=(()=>{class D{constructor(y){this.providerId=D.PROVIDER_ID,this.auth=yn(y)}verifyPhoneNumber(y,T){return qs(this.auth,y,(0,K.m9)(T))}static credential(y,T){return za._fromVerification(y,T)}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:k}=y;return T&&k?za._fromTokenResponse(T,k):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Qr(D,m){return m?Qt(m):(Je(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class ei extends Lr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return ri(m,this._buildIdpRequest())}_linkToIdToken(m,y){return ri(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return ri(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function ti(D){return Ka(D.auth,new ei(D),D.bypassAuthState)}function ki(D){const{auth:m,user:y}=D;return Je(y,m,"internal-error"),Ud(y,new ei(D),D.bypassAuthState)}function Ko(D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,u.Z)(function*(D){const{auth:m,user:y}=D;return Je(y,m,"internal-error"),ho(y,new ei(D),D.bypassAuthState)})).apply(this,arguments)}class Pi{constructor(m,y,T,k,U=!1){this.auth=m,this.resolver=T,this.user=k,this.bypassAuthState=U,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,u.Z)(function*(T,k){m.pendingPromise={resolve:T,reject:k};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(U){m.reject(U)}});return function(T,k){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,u.Z)(function*(){const{urlResponse:T,sessionId:k,postBody:U,tenantId:X,error:fe,type:st}=m;if(fe)return void y.reject(fe);const Ge={auth:y.auth,requestUri:T,sessionId:k,tenantId:X||void 0,postBody:U||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(st)(Ge))}catch(Et){y.reject(Et)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return ti;case"linkViaPopup":case"linkViaRedirect":return Ko;case"reauthViaPopup":case"reauthViaRedirect":return ki;default:bn(this.auth,"internal-error")}}resolve(m){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sl=new Ke(2e3,1e4);function ih(D,m,y){return xu.apply(this,arguments)}function xu(){return(xu=(0,u.Z)(function*(D,m,y){const T=yn(D);$n(D,m,Go);const k=Qr(T,y);return new Lc(T,"signInViaPopup",m,k).executeNotNull()})).apply(this,arguments)}function Jo(D,m,y){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(D,m,y){const T=(0,K.m9)(D);$n(T.auth,m,Go);const k=Qr(T.auth,y);return new Lc(T.auth,"reauthViaPopup",m,k,T).executeNotNull()})).apply(this,arguments)}function gi(D,m,y){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,u.Z)(function*(D,m,y){const T=(0,K.m9)(D);$n(T.auth,m,Go);const k=Qr(T.auth,y);return new Lc(T.auth,"linkViaPopup",m,k,T).executeNotNull()})).apply(this,arguments)}let Lc=(()=>{class D extends Pi{constructor(y,T,k,U,X){super(y,T,U,X),this.provider=k,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const T=yield y.execute();return Je(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,u.Z)(function*(){oe(1===y.filter.length,"Popup operations only handle one event");const T=zl();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch(k=>{y.reject(k)}),y.resolver._isIframeWebStorageSupported(y.auth,k=>{k||y.reject(Jt(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,k;this.pollId=null!==(k=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,sl.get())};y()}}return D.currentPopupAction=null,D})();const Zs="pendingRedirect",Br=new Map;class rh extends Pi{constructor(m,y,T=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,u.Z)(function*(){let T=Br.get(y.auth._key());if(!T){try{const U=(yield function Uc(D,m){return Ys.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;T=()=>Promise.resolve(U)}catch(k){T=()=>Promise.reject(k)}Br.set(y.auth._key(),T)}return y.bypassAuthState||Br.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,T=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(T,m);if("unknown"!==m.type){if(m.eventId){const k=yield T.auth._redirectUserForId(m.eventId);if(k)return T.user=k,y().call(T,m);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Ys(){return(Ys=(0,u.Z)(function*(D,m){const y=al(m),T=qg(D);if(!(yield T._isAvailable()))return!1;const k="true"===(yield T._get(y));return yield T._remove(y),k})).apply(this,arguments)}function cn(D,m){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,u.Z)(function*(D,m){return qg(D)._set(al(m),"true")})).apply(this,arguments)}function q_(){Br.clear()}function Yl(D,m){Br.set(D._key(),m)}function qg(D){return Qt(D._redirectPersistence)}function al(D){return ai(Zs,D.config.apiKey,D.name)}function ys(D,m,y){return function ll(D,m,y){return mi.apply(this,arguments)}(D,m,y)}function mi(){return(mi=(0,u.Z)(function*(D,m,y){const T=yn(D);$n(D,m,Go),yield T._initializationPromise;const k=Qr(T,y);return yield cn(k,T),k._openRedirect(T,m,"signInViaRedirect")})).apply(this,arguments)}function Js(D,m,y){return function Kl(D,m,y){return Qo.apply(this,arguments)}(D,m,y)}function Qo(){return(Qo=(0,u.Z)(function*(D,m,y){const T=(0,K.m9)(D);$n(T.auth,m,Go),yield T.auth._initializationPromise;const k=Qr(T.auth,y);yield cn(k,T.auth);const U=yield cl(T);return k._openRedirect(T.auth,m,"reauthViaRedirect",U)})).apply(this,arguments)}function eo(D,m,y){return function Mo(D,m,y){return Bc.apply(this,arguments)}(D,m,y)}function Bc(){return(Bc=(0,u.Z)(function*(D,m,y){const T=(0,K.m9)(D);$n(T.auth,m,Go),yield T.auth._initializationPromise;const k=Qr(T.auth,y);yield fi(!1,T,m.providerId),yield cn(k,T.auth);const U=yield cl(T);return k._openRedirect(T.auth,m,"linkViaRedirect",U)})).apply(this,arguments)}function Ou(D,m){return bs.apply(this,arguments)}function bs(){return(bs=(0,u.Z)(function*(D,m){return yield yn(D)._initializationPromise,Hc(D,m,!1)})).apply(this,arguments)}function Hc(D,m){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,u.Z)(function*(D,m,y=!1){const T=yn(D),k=Qr(T,m),X=yield new rh(T,k,y).execute();return X&&!y&&(delete X.user._redirectEventId,yield T._persistUserIfCurrent(X.user),yield T._setRedirectUser(null,m)),X})).apply(this,arguments)}function cl(D){return I.apply(this,arguments)}function I(){return(I=(0,u.Z)(function*(D){const m=zl(`${D.uid}:::`);return D._redirectEventId=m,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),m})).apply(this,arguments)}class L{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(m,T)&&(y=!0,this.sendToConsumer(m,T),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function se(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ne(D);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var T;if(m.error&&!ne(m)){const k=(null===(T=m.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError(Jt(this.auth,k))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const T=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&T}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z(m))}saveEventToCache(m){this.cachedEventUids.add(Z(m)),this.lastProcessedEventTime=Date.now()}}function Z(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(m=>m).join("-")}function ne({type:D,error:m}){return"unknown"===D&&"auth/no-auth-event"===m?.code}function Ae(D){return mt.apply(this,arguments)}function mt(){return(mt=(0,u.Z)(function*(D,m={}){return Rt(D,"GET","/v1/projects",m)})).apply(this,arguments)}const ft=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nt=/^https?/;function Xt(){return(Xt=(0,u.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:m}=yield Ae(D);for(const y of m)try{if(Hr(y))return}catch{}bn(D,"unauthorized-domain")})).apply(this,arguments)}function Hr(D){const m=Se(),{protocol:y,hostname:T}=new URL(m);if(D.startsWith("chrome-extension://")){const X=new URL(D);return""===X.hostname&&""===T?"chrome-extension:"===y&&D.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&X.hostname===T}if(!Nt.test(y))return!1;if(ft.test(D))return T===D;const k=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(T)}const Di=new Ke(3e4,6e4);function Qs(){const D=Ti().___jsl;if(D?.H)for(const m of Object.keys(D.H))if(D.H[m].r=D.H[m].r||[],D.H[m].L=D.H[m].L||[],D.H[m].r=[...D.H[m].L],D.CP)for(let y=0;y<D.CP.length;y++)D.CP[y]=null}let ws=null;const Xs=new Ke(5e3,15e3),Ru="__/auth/iframe",ku="emulator/auth/iframe",oh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z_(D){const m=D.config;Je(m.authDomain,D,"auth-domain-config-required");const y=m.emulator?ut(m,ku):`https://${D.config.authDomain}/${Ru}`,T={apiKey:m.apiKey,appName:D.name,v:G.SDK_VERSION},k=Zg.get(D.config.apiHost);k&&(T.eid=k);const U=D._getFrameworks();return U.length&&(T.fw=U.join(",")),`${y}?${(0,K.xO)(T).slice(1)}`}function ul(){return ul=(0,u.Z)(function*(D){const m=yield function Vr(D){return ws=ws||function ya(D){return new Promise((m,y)=>{var T,k,U;function X(){Qs(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Qs(),y(Jt(D,"network-request-failed"))},timeout:Di.get()})}if(null!==(k=null===(T=Ti().gapi)||void 0===T?void 0:T.iframes)&&void 0!==k&&k.Iframe)m(gapi.iframes.getContext());else{if(null===(U=Ti().gapi)||void 0===U||!U.load){const fe=nr("iframefcb");return Ti()[fe]=()=>{gapi.load?X():y(Jt(D,"network-request-failed"))},un(`https://apis.google.com/js/api.js?onload=${fe}`).catch(st=>y(st))}X()}}).catch(m=>{throw ws=null,m})}(D),ws}(D),y=Ti().gapi;return Je(y,D,"internal-error"),m.open({where:document.body,url:Z_(D),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oh,dontclear:!0},T=>new Promise(function(){var k=(0,u.Z)(function*(U,X){yield T.restyle({setHideOnLeave:!1});const fe=Jt(D,"network-request-failed"),st=Ti().setTimeout(()=>{X(fe)},Xs.get());function Ge(){Ti().clearTimeout(st),U(T)}T.ping(Ge).then(Ge,()=>{X(fe)})});return function(U,X){return k.apply(this,arguments)}}()))}),ul.apply(this,arguments)}const Pu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ql{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Kg="__/auth/handler",Xl="emulator/auth/handler",Vc=encodeURIComponent("fac");function Fu(D,m,y,T,k,U){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,u.Z)(function*(D,m,y,T,k,U){Je(D.config.authDomain,D,"auth-domain-config-required"),Je(D.config.apiKey,D,"invalid-api-key");const X={apiKey:D.config.apiKey,appName:D.name,authType:y,redirectUrl:T,v:G.SDK_VERSION,eventId:k};if(m instanceof Go){m.setDefaultLanguage(D.languageCode),X.providerId=m.providerId||"",(0,K.xb)(m.getCustomParameters())||(X.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Et,gn]of Object.entries(U||{}))X[Et]=gn}if(m instanceof Ol){const Et=m.getScopes().filter(gn=>""!==gn);Et.length>0&&(X.scopes=Et.join(","))}D.tenantId&&(X.tid=D.tenantId);const fe=X;for(const Et of Object.keys(fe))void 0===fe[Et]&&delete fe[Et];const st=yield D._getAppCheckToken(),Ge=st?`#${Vc}=${encodeURIComponent(st)}`:"";return`${function ey({config:D}){return D.emulator?ut(D,Xl):`https://${D.authDomain}/${Kg}`}(D)}?${(0,K.xO)(fe).slice(1)}${Ge}`})).apply(this,arguments)}const sh="webStorageSupport",Jg=class $f{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=el,this._completeRedirectFn=Hc,this._overrideRedirectResult=Yl}_openPopup(m,y,T,k){var U=this;return(0,u.Z)(function*(){var X;oe(null===(X=U.eventManagers[m._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const fe=yield Fu(m,y,T,Se(),k);return function X_(D,m,y,T=500,k=600){const U=Math.max((window.screen.availHeight-k)/2,0).toString(),X=Math.max((window.screen.availWidth-T)/2,0).toString();let fe="";const st=Object.assign(Object.assign({},Pu),{width:T.toString(),height:k.toString(),top:U,left:X}),Ge=(0,K.z$)().toLowerCase();y&&(fe=kr(Ge)?"_blank":y),Fa(Ge)&&(m=m||"http://localhost",st.scrollbars="yes");const Et=Object.entries(st).reduce((Gn,[Zi,wa])=>`${Gn}${Zi}=${wa},`,"");if(function Cr(D=(0,K.z$)()){var m;return La(D)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Ge)&&"_self"!==fe)return function Yg(D,m){const y=document.createElement("a");y.href=D,y.target=m;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(m||"",fe),new Ql(null);const gn=window.open(m||"",fe,Et);Je(gn,D,"popup-blocked");try{gn.focus()}catch{}return new Ql(gn)}(m,fe,zl())})()}_openRedirect(m,y,T,k){var U=this;return(0,u.Z)(function*(){return yield U._originValidation(m),function $g(D){Ti().location.href=D}(yield Fu(m,y,T,Se(),k)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:k,promise:U}=this.eventManagers[y];return k?Promise.resolve(k):(oe(U,"If manager is not set, promise should be"),U)}const T=this.initAndGetManager(m);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(m){var y=this;return(0,u.Z)(function*(){const T=yield function Y_(D){return ul.apply(this,arguments)}(m),k=new L(m);return T.register("authEvent",U=>(Je(U?.authEvent,m,"invalid-auth-event"),{status:k.onEvent(U.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:k},y.iframes[m._key()]=T,k})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(sh,{type:sh},k=>{var U;const X=null===(U=k?.[0])||void 0===U?void 0:U[sh];void 0!==X&&y(!!X),bn(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function sn(D){return Xt.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return Nd()||mc()||La()}};class ty{constructor(m){this.factorId=m}_process(m,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,T);case"signin":return this._finalizeSignIn(m,y.credential);default:return de("unexpected MultiFactorSessionType")}}}class Uu extends ty{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Uu(m)}_finalizeEnroll(m,y,T){return function qo(D,m){return Rt(D,"POST","/v2/accounts/mfaEnrollment:finalize",pn(D,m))}(m,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function Rc(D,m){return Rt(D,"POST","/v2/accounts/mfaSignIn:finalize",pn(D,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ny=(()=>{class D{constructor(){}static assertion(y){return Uu._fromCredential(y)}}return D.FACTOR_ID="phone",D})();var Qg="@firebase/auth";class ah{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(T=>{m(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);y&&(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,K.Pz)("authIdTokenMaxAge"),function jc(D){(0,G._registerComponent)(new er.wA("auth",(m,{options:y})=>{const T=m.getProvider("app").getImmediate(),k=m.getProvider("heartbeat"),U=m.getProvider("app-check-internal"),{apiKey:X,authDomain:fe}=T.options;Je(X&&!X.includes(":"),"invalid-api-key",{appName:T.name});const st={apiKey:X,authDomain:fe,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ca(D)},Ge=new Rg(T,k,U,st);return function hi(D,m){const y=m?.persistence||[],T=(Array.isArray(y)?y:[y]).map(Qt);m?.errorMap&&D._updateErrorMap(m.errorMap),D._initializeWithPersistence(T,m?.popupRedirectResolver)}(Ge,y),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,T)=>{m.getProvider("auth-internal").initialize()})),(0,G._registerComponent)(new er.wA("auth-internal",m=>{const y=yn(m.getProvider("auth").getImmediate());return new ah(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,G.registerVersion)(Qg,"0.23.2",function ea(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,G.registerVersion)(Qg,"0.23.2","esm2017")}("Browser")},9058:(It,Le,z)=>{z.d(Le,{$s:()=>zr,BH:()=>me,G6:()=>je,L:()=>xe,LL:()=>ii,Pz:()=>Ve,Sg:()=>Re,UG:()=>At,US:()=>Te,ZB:()=>he,ZR:()=>Zt,aH:()=>_e,b$:()=>bi,eu:()=>dt,hl:()=>et,jU:()=>vt,m9:()=>Mn,ne:()=>wn,pd:()=>ut,r3:()=>Je,ru:()=>Nn,tV:()=>Q,uI:()=>ot,vZ:()=>He,w1:()=>Do,xO:()=>Qn,xb:()=>oe,z$:()=>qe,zI:()=>ct,zd:()=>Ke});const ae=function(te){const J=[];let $=0;for(let q=0;q<te.length;q++){let H=te.charCodeAt(q);H<128?J[$++]=H:H<2048?(J[$++]=H>>6|192,J[$++]=63&H|128):55296==(64512&H)&&q+1<te.length&&56320==(64512&te.charCodeAt(q+1))?(H=65536+((1023&H)<<10)+(1023&te.charCodeAt(++q)),J[$++]=H>>18|240,J[$++]=H>>12&63|128,J[$++]=H>>6&63|128,J[$++]=63&H|128):(J[$++]=H>>12|224,J[$++]=H>>6&63|128,J[$++]=63&H|128)}return J},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,J){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=J?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let H=0;H<te.length;H+=3){const le=te[H],Pe=H+1<te.length,gt=Pe?te[H+1]:0,Vt=H+2<te.length,Ht=Vt?te[H+2]:0;let Un=(15&gt)<<2|Ht>>6,hn=63&Ht;Vt||(hn=64,Pe||(Un=64)),q.push($[le>>2],$[(3&le)<<4|gt>>4],$[Un],$[hn])}return q.join("")},encodeString(te,J){return this.HAS_NATIVE_SUPPORT&&!J?btoa(te):this.encodeByteArray(ae(te),J)},decodeString(te,J){return this.HAS_NATIVE_SUPPORT&&!J?atob(te):function(te){const J=[];let $=0,q=0;for(;$<te.length;){const H=te[$++];if(H<128)J[q++]=String.fromCharCode(H);else if(H>191&&H<224){const le=te[$++];J[q++]=String.fromCharCode((31&H)<<6|63&le)}else if(H>239&&H<365){const Vt=((7&H)<<18|(63&te[$++])<<12|(63&te[$++])<<6|63&te[$++])-65536;J[q++]=String.fromCharCode(55296+(Vt>>10)),J[q++]=String.fromCharCode(56320+(1023&Vt))}else{const le=te[$++],Pe=te[$++];J[q++]=String.fromCharCode((15&H)<<12|(63&le)<<6|63&Pe)}}return J.join("")}(this.decodeStringToByteArray(te,J))},decodeStringToByteArray(te,J){this.init_();const $=J?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let H=0;H<te.length;){const le=$[te.charAt(H++)],gt=H<te.length?$[te.charAt(H)]:0;++H;const Ht=H<te.length?$[te.charAt(H)]:64;++H;const en=H<te.length?$[te.charAt(H)]:64;if(++H,null==le||null==gt||null==Ht||null==en)throw new Oe;q.push(le<<2|gt>>4),64!==Ht&&(q.push(gt<<4&240|Ht>>2),64!==en&&q.push(Ht<<6&192|en))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}};class Oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(te){return function(te){const J=ae(te);return Te.encodeByteArray(J,!0)}(te).replace(/\./g,"")},Q=function(te){try{return Te.decodeString(te,!0)}catch(J){console.error("base64Decode failed: ",J)}return null};function he(te,J){if(!(J instanceof Object))return J;switch(J.constructor){case Date:return new Date(J.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return J}for(const $ in J)!J.hasOwnProperty($)||!nt($)||(te[$]=he(te[$],J[$]));return te}function nt(te){return"__proto__"!==te}const it=()=>{try{return function $e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const te=process.env.__FIREBASE_DEFAULTS__;return te?JSON.parse(te):void 0})()||(()=>{if(typeof document>"u")return;let te;try{te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const J=te&&Q(te[1]);return J&&JSON.parse(J)})()}catch(te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${te}`)}},_e=()=>{var te;return null===(te=it())||void 0===te?void 0:te.config},Ve=te=>{var J;return null===(J=it())||void 0===J?void 0:J[`_${te}`]};class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((J,$)=>{this.resolve=J,this.reject=$})}wrapCallback(J){return($,q)=>{$?this.reject($):this.resolve(q),"function"==typeof J&&(this.promise.catch(()=>{}),1===J.length?J($):J($,q))}}}function Re(te,J){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=J||"demo-project",H=te.iat||0,le=te.sub||te.user_id;if(!le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:H,exp:H+3600,auth_time:H,sub:le,user_id:le,firebase:{sign_in_provider:"custom",identities:{}}},te);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(Pe)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function At(){var te;const J=null===(te=it())||void 0===te?void 0:te.forceEnvironment;if("node"===J)return!0;if("browser"===J)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function vt(){return"object"==typeof self&&self.self===self}function Nn(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function bi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Do(){const te=qe();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function je(){return!At()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function et(){try{return"object"==typeof indexedDB}catch{return!1}}function dt(){return new Promise((te,J)=>{try{let $=!0;const q="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(q);H.onsuccess=()=>{H.result.close(),$||self.indexedDB.deleteDatabase(q),te(!0)},H.onupgradeneeded=()=>{$=!1},H.onerror=()=>{var le;J((null===(le=H.error)||void 0===le?void 0:le.message)||"")}}catch($){J($)}})}function ct(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Zt extends Error{constructor(J,$,q){super($),this.code=J,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ii.prototype.create)}}class ii{constructor(J,$,q){this.service=J,this.serviceName=$,this.errors=q}create(J,...$){const q=$[0]||{},H=`${this.service}/${J}`,le=this.errors[J],Pe=le?function Dt(te,J){return te.replace(Ot,($,q)=>{const H=J[q];return null!=H?String(H):`<${q}?>`})}(le,q):"Error";return new Zt(H,`${this.serviceName}: ${Pe} (${H}).`,q)}}const Ot=/\{\$([^}]+)}/g;function Je(te,J){return Object.prototype.hasOwnProperty.call(te,J)}function oe(te){for(const J in te)if(Object.prototype.hasOwnProperty.call(te,J))return!1;return!0}function He(te,J){if(te===J)return!0;const $=Object.keys(te),q=Object.keys(J);for(const H of $){if(!q.includes(H))return!1;const le=te[H],Pe=J[H];if(rt(le)&&rt(Pe)){if(!He(le,Pe))return!1}else if(le!==Pe)return!1}for(const H of q)if(!$.includes(H))return!1;return!0}function rt(te){return null!==te&&"object"==typeof te}function Qn(te){const J=[];for(const[$,q]of Object.entries(te))Array.isArray(q)?q.forEach(H=>{J.push(encodeURIComponent($)+"="+encodeURIComponent(H))}):J.push(encodeURIComponent($)+"="+encodeURIComponent(q));return J.length?"&"+J.join("&"):""}function Ke(te){const J={};return te.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[H,le]=q.split("=");J[decodeURIComponent(H)]=decodeURIComponent(le)}}),J}function ut(te){const J=te.indexOf("?");if(!J)return"";const $=te.indexOf("#",J);return te.substring(J,$>0?$:void 0)}function wn(te,J){const $=new si(te,J);return $.subscribe.bind($)}class si{constructor(J,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{J(this)}).catch(q=>{this.error(q)})}next(J){this.forEachObserver($=>{$.next(J)})}error(J){this.forEachObserver($=>{$.error(J)}),this.close(J)}complete(){this.forEachObserver(J=>{J.complete()}),this.close()}subscribe(J,$,q){let H;if(void 0===J&&void 0===$&&void 0===q)throw new Error("Missing Observer.");H=function Rt(te,J){if("object"!=typeof te||null===te)return!1;for(const $ of J)if($ in te&&"function"==typeof te[$])return!0;return!1}(J,["next","error","complete"])?J:{next:J,error:$,complete:q},void 0===H.next&&(H.next=An),void 0===H.error&&(H.error=An),void 0===H.complete&&(H.complete=An);const le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),le}unsubscribeOne(J){void 0===this.observers||void 0===this.observers[J]||(delete this.observers[J],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(J){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,J)}sendOne(J,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[J])try{$(this.observers[J])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(J){this.finalized||(this.finalized=!0,void 0!==J&&(this.finalError=J),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}const Si=1e3,xi=2,tr=144e5,di=.5;function zr(te,J=Si,$=xi){const q=J*Math.pow($,te),H=Math.round(di*q*(Math.random()-.5)*2);return Math.min(tr,q+H)}function Mn(te){return te&&te._delegate?te._delegate:te}},7197:(It,Le,z)=>{var u=z(5879);let K=null;function G(){return K}class ge{}const Te=new u.OlP("DocumentToken");let Oe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(xe)},providedIn:"platform"}),n})();const We=new u.OlP("Location Initialized");let xe=(()=>{class n extends Oe{constructor(){super(),this._doc=(0,u.f3M)(Te),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(e){const i=G().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=G().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,o){this._history.pushState(e,i,o)}replaceState(e,i,o){this._history.replaceState(e,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function Q(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function ee(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function he(n){return n&&"?"!==n[0]?"?"+n:n}let nt=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(ht)},providedIn:"root"}),n})();const $e=new u.OlP("appBaseHref");let ht=(()=>{class n extends nt{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(Te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Q(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+he(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${i}${o}`:i}pushState(e,i,o,r){const l=this.prepareExternalUrl(o+he(r));this._platformLocation.pushState(e,i,l)}replaceState(e,i,o,r){const l=this.prepareExternalUrl(o+he(r));this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Oe),u.LFG($e,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ye=(()=>{class n extends nt{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Q(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,o,r){let l=this.prepareExternalUrl(o+he(r));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(e,i,l)}replaceState(e,i,o,r){let l=this.prepareExternalUrl(o+he(r));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Oe),u.LFG($e,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),pt=(()=>{class n{constructor(e){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function _e(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(ee(Mt(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+he(i))}normalize(e){return n.stripTrailingSlash(function Bt(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,Mt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",o=null){this._locationStrategy.pushState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+he(i)),o)}replaceState(e,i="",o=null){this._locationStrategy.replaceState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+he(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(o=>o(e,i))}subscribe(e,i,o){return this._subject.subscribe({next:e,error:i,complete:o})}}return n.normalizeQueryParams=he,n.joinWithSlash=Q,n.stripTrailingSlash=ee,n.\u0275fac=function(e){return new(e||n)(u.LFG(nt))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function it(){return new pt((0,u.LFG)(nt))}()},providedIn:"root"}),n})();function Mt(n){return n.replace(/\/index.html$/,"")}function Ps(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[o,r]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(o.trim()===t)return decodeURIComponent(r)}return null}class Ad{constructor(t,e,i,o){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pr=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,o){this._viewContainer=e,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((o,r,l)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new Ad(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===r?void 0:r);else if(null!==r){const d=i.get(r);i.move(d,l),La(d,o)}});for(let o=0,r=i.length;o<r;o++){const d=i.get(o).context;d.index=o,d.count=r,d.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{La(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function La(n,t){n.context.$implicit=t.item}let Cr=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Og,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Nd("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Nd("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Og{constructor(){this.$implicit=null,this.ngIf=null}}function Nd(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(t)}'.`)}class nr{createSubscription(t,e){return(0,u.rg0)(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){(0,u.rg0)(()=>t.unsubscribe())}}class Jn{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const Ba=new Jn,Wr=new nr;let Fs=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,u.QGY)(e))return Ba;if((0,u.F4k)(e))return Wr;throw function un(n,t){return new u.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),qr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function ds(n){return"server"===n}let Rd=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Eo((0,u.LFG)(Te),window)}),n})();class Eo{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Hs(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const r=o.shadowRoot;if(r){const l=r.getElementById(t)||r.querySelector(`[name="${t}"]`);if(l)return l}o=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],o-r[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=da(this.window.history)||da(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function da(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ri{}class Ja extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class zi extends Ja{static makeCurrent(){!function ae(n){K||(K=n)}(new zi)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Vd(){return Qa=Qa||document.querySelector("base"),Qa?Qa.getAttribute("href"):null}();return null==e?null:function Yr(n){So=So||document.createElement("a"),So.setAttribute("href",n);const t=So.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Qa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Ps(document.cookie,t)}}let So,Qa=null,jd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ul=new u.OlP("EventManagerPlugins");let Io=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,o){return this._findPluginFor(i).addEventListener(e,i,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(r=>r.supports(e)),!i)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(e,i),i}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Ul),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Bl{constructor(t){this._doc=t}}const Ic="ng-app-id";let pa=(()=>{class n{constructor(e,i,o,r={}){this.doc=e,this.appId=i,this.nonce=o,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ds(r),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(o=>o.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${Ic}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(o=>{null!=o.textContent&&i.set(o.textContent,o)}),i}return null}changeUsageCount(e,i){const o=this.styleRef;if(o.has(e)){const r=o.get(e);return r.usage+=i,r.usage}return o.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const o=this.styleNodesInDOM,r=o?.get(i);if(r?.parentNode===e)return o.delete(i),r.removeAttribute(Ic),r;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(Ic,this.appId),l}}addStyleToHost(e,i){const o=this.getStyleElement(e,i);e.appendChild(o);const r=this.styleRef,l=r.get(i)?.elements;l?l.push(o):r.set(i,{elements:[o],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Te),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ac={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$s=/%COMP%/g,zd=new u.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function zs(n,t){return t.map(e=>e.replace($s,n))}let zo=(()=>{class n{constructor(e,i,o,r,l,d,f,g=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestory=r,this.doc=l,this.platformId=d,this.ngZone=f,this.nonce=g,this.rendererByCompId=new Map,this.platformIsServer=ds(d),this.defaultRenderer=new Nc(e,l,f,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===u.ifc.ShadowDom&&(i={...i,encapsulation:u.ifc.Emulated});const o=this.getOrCreateRenderer(e,i);return o instanceof Dn?o.applyToHost(e):o instanceof Ze&&o.applyStyles(),o}getOrCreateRenderer(e,i){const o=this.rendererByCompId;let r=o.get(i.id);if(!r){const l=this.doc,d=this.ngZone,f=this.eventManager,g=this.sharedStylesHost,_=this.removeStylesOnCompDestory,w=this.platformIsServer;switch(i.encapsulation){case u.ifc.Emulated:r=new Dn(f,g,i,this.appId,_,l,d,w);break;case u.ifc.ShadowDom:return new kf(f,g,e,i,l,d,this.nonce,w);default:r=new Ze(f,g,i,_,l,d,w)}r.onDestroy=()=>o.delete(i.id),o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Io),u.LFG(pa),u.LFG(u.AFp),u.LFG(zd),u.LFG(Te),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Nc{constructor(t,e,i,o){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Ac[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(qd(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(qd(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new u.vHH(5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,o){if(o){e=o+":"+e;const r=Ac[o];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const o=Ac[i];o?t.removeAttributeNS(o,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,o){o&(u.JOm.DashCase|u.JOm.Important)?t.style.setProperty(e,i,o&u.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&u.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=G().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function qd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class kf extends Nc{constructor(t,e,i,o,r,l,d,f){super(t,r,l,f),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const g=zs(o.id,o.styles);for(const _ of g){const w=document.createElement("style");d&&w.setAttribute("nonce",d),w.textContent=_,this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ze extends Nc{constructor(t,e,i,o,r,l,d,f){super(t,r,l,d),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=f?zs(f,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Dn extends Ze{constructor(t,e,i,o,r,l,d,f){const g=o+"-"+i.id;super(t,e,i,r,l,d,f,g),this.contentAttr=function Hl(n){return"_ngcontent-%COMP%".replace($s,n)}(g),this.hostAttr=function Rf(n){return"_nghost-%COMP%".replace($s,n)}(g)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let Zd=(()=>{class n extends Bl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,o){return e.addEventListener(i,o,!1),()=>this.removeEventListener(e,i,o)}removeEventListener(e,i,o){return e.removeEventListener(i,o)}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Vl=["alt","control","meta","shift"],ur={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Du=(()=>{class n extends Bl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,o){const r=n.parseEventName(i),l=n.eventCallback(r.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>G().onAndCancel(e,r.domEventName,l))}static parseEventName(e){const i=e.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const r=n._normalizeKey(i.pop());let l="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),l="code."),Vl.forEach(g=>{const _=i.indexOf(g);_>-1&&(i.splice(_,1),l+=g+".")}),l+=r,0!=i.length||0===r.length)return null;const f={};return f.domEventName=o,f.fullKey=l,f}static matchEventFullKeyCode(e,i){let o=ur[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(o=e.code,r="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Vl.forEach(l=>{l!==o&&(0,jg[l])(e)&&(r+=l+".")}),r+=o,r===i)}static eventCallback(e,i,o){return r=>{n.matchEventFullKeyCode(r,e)&&o.runGuarded(()=>i(r))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Yd(){zi.makeCurrent()},multi:!0},{provide:Te,useFactory:function Er(){return(0,u.RDi)(document),document},deps:[]}]),pi=new u.OlP(""),Zo=[{provide:u.rWj,useClass:class wu{addToWindow(t){u.dqk.getAngularTestability=(i,o=!0)=>{const r=t.findTestabilityInTree(i,o);if(null==r)throw new u.vHH(5103,!1);return r},u.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const o=u.dqk.getAllAngularTestabilities();let r=o.length,l=!1;const d=function(f){l=l||f,r--,0==r&&i(l)};o.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?G().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Wi=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Kd(){return new u.qLn},deps:[]},{provide:Ul,useClass:Zd,multi:!0,deps:[Te,u.R0b,u.Lbi]},{provide:Ul,useClass:Du,multi:!0,deps:[Te]},zo,pa,Io,{provide:u.FYo,useExisting:zo},{provide:ri,useClass:jd,deps:[]},[]];let Gl=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:u.AFp,useValue:e.appId}]}}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(pi,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...Wi,...Zo],imports:[qr,u.hGG]}),n})(),Iu=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Te))},n.\u0275prov=u.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Su(){return new Iu((0,u.LFG)(Te))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var Ri=z(5592),hr=z(4674),Rn=z(2459),Ut=z(2096),Tr=z(5619);const{isArray:th}=Array,{getPrototypeOf:Rc,prototype:Bf,keys:Hf}=Object;function kc(n){if(1===n.length){const t=n[0];if(th(t))return{args:t,keys:null};if(function Mu(n){return n&&"object"==typeof n&&Rc(n)===Bf}(t)){const e=Hf(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var nl=z(2737),Lt=z(7398);const{isArray:Kr}=Array;function ma(n){return(0,Lt.U)(t=>function Pc(n,t){return Kr(t)?n(...t):n(t)}(n,t))}var fo=z(9940);function il(n,t){return n.reduce((e,i,o)=>(e[i]=t[o],e),{})}var qi=z(8251),Ao=z(7103);function va(...n){const t=(0,fo.yG)(n),e=(0,fo.jO)(n),{args:i,keys:o}=kc(n);if(0===i.length)return(0,Rn.D)([],t);const r=new Ri.y(function Wg(n,t,e=nl.y){return i=>{No(t,()=>{const{length:o}=n,r=new Array(o);let l=o,d=o;for(let f=0;f<o;f++)No(t,()=>{const g=(0,Rn.D)(n[f],t);let _=!1;g.subscribe((0,qi.x)(i,w=>{r[f]=w,_||(_=!0,d--),d||i.next(e(r.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,t,o?l=>il(o,l):nl.y));return e?r.pipe(ma(e)):r}function No(n,t,e){n?(0,Ao.f)(e,n,t):t()}const vs=(0,z(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var _a=z(7537);function _s(...n){return function Fc(){return(0,_a.J)(1)}()((0,Rn.D)(n,(0,fo.yG)(n)))}var Jr=z(4829);function jf(n){return new Ri.y(t=>{(0,Jr.Xf)(n()).subscribe(t)})}var rl=z(8407);function qs(n,t){const e=(0,hr.m)(n)?n:()=>n,i=o=>o.error(e());return new Ri.y(t?o=>t.schedule(i,0,o):i)}var po=z(6232),nh=z(7394),fr=z(9360);function ol(){return(0,fr.e)((n,t)=>{let e=null;n._refCount++;const i=(0,qi.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const o=n._connection,r=e;e=null,o&&(!r||o===r)&&o.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Qr extends Ri.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,fr.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new nh.w0;const e=this.getSubject();t.add(this.source.subscribe((0,qi.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=nh.w0.EMPTY)}return t}refCount(){return ol()(this)}}var ei=z(8645),ti=z(4664);function ki(n){return n<=0?()=>po.E:(0,fr.e)((t,e)=>{let i=0;t.subscribe((0,qi.x)(e,o=>{++i<=n&&(e.next(o),n<=i&&e.complete())}))})}function Ko(...n){const t=(0,fo.yG)(n);return(0,fr.e)((e,i)=>{(t?_s(n,e,t):_s(n,e)).subscribe(i)})}function Wn(n,t){return(0,fr.e)((e,i)=>{let o=0;e.subscribe((0,qi.x)(i,r=>n.call(t,r,o++)&&i.next(r)))})}var Pi=z(1631);function sl(n){return(0,fr.e)((t,e)=>{let i=!1;t.subscribe((0,qi.x)(e,o=>{i=!0,e.next(o)},()=>{i||e.next(n),e.complete()}))})}function ih(n=xu){return(0,fr.e)((t,e)=>{let i=!1;t.subscribe((0,qi.x)(e,o=>{i=!0,e.next(o)},()=>i?e.complete():e.error(n())))})}function xu(){return new vs}function Jo(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Wn((o,r)=>n(o,r,i)):nl.y,ki(1),e?sl(t):ih(()=>new vs))}function Xr(n,t){return(0,hr.m)(t)?(0,Pi.z)(n,t,1):(0,Pi.z)(n,1)}var gi=z(9397);function Sr(n){return(0,fr.e)((t,e)=>{let r,i=null,o=!1;i=t.subscribe((0,qi.x)(e,void 0,void 0,l=>{r=(0,Jr.Xf)(n(l,Sr(n)(t))),i?(i.unsubscribe(),i=null,r.subscribe(e)):o=!0})),o&&(i.unsubscribe(),i=null,r.subscribe(e))})}function Zs(n,t){return(0,fr.e)(function Lc(n,t,e,i,o){return(r,l)=>{let d=e,f=t,g=0;r.subscribe((0,qi.x)(l,_=>{const w=g++;f=d?n(f,_,w):(d=!0,_),i&&l.next(f)},o&&(()=>{d&&l.next(f),l.complete()})))}}(n,t,arguments.length>=2,!0))}function Br(n){return n<=0?()=>po.E:(0,fr.e)((t,e)=>{let i=[];t.subscribe((0,qi.x)(e,o=>{i.push(o),n<i.length&&i.shift()},()=>{for(const o of i)e.next(o);e.complete()},void 0,()=>{i=null}))})}function Ys(n){return(0,fr.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const cn="primary",Ks=Symbol("RouteTitle");class q_{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Yl(n){return new q_(n)}function qg(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const o={};for(let r=0;r<i.length;r++){const l=i[r],d=n[r];if(l.startsWith(":"))o[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:o}}function ys(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let o;for(let r=0;r<e.length;r++)if(o=e[r],!ll(n[o],t[o]))return!1;return!0}function ll(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((o,r)=>i[r]===o)}return n===t}function mi(n){return n.length>0?n[n.length-1]:null}function Js(n){return function Uf(n){return!!n&&(n instanceof Ri.y||(0,hr.m)(n.lift)&&(0,hr.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):(0,Ut.of)(n)}const Kl={exact:function Bc(n,t,e){if(!Z(n.segments,t.segments)||!Jl(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Bc(n.children[i],t.children[i],e))return!1;return!0},subset:bs},Qo={exact:function Mo(n,t){return ys(n,t)},subset:function Ou(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>ll(n[e],t[e]))},ignored:()=>!0};function eo(n,t,e){return Kl[e.paths](n.root,t.root,e.matrixParams)&&Qo[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function bs(n,t,e){return Hc(n,t,t.segments,e)}function Hc(n,t,e,i){if(n.segments.length>e.length){const o=n.segments.slice(0,e.length);return!(!Z(o,e)||t.hasChildren()||!Jl(o,e,i))}if(n.segments.length===e.length){if(!Z(n.segments,e)||!Jl(n.segments,e,i))return!1;for(const o in t.children)if(!n.children[o]||!bs(n.children[o],t.children[o],i))return!1;return!0}{const o=e.slice(0,n.segments.length),r=e.slice(n.segments.length);return!!(Z(n.segments,o)&&Jl(n.segments,o,i)&&n.children[cn])&&Hc(n.children[cn],t,r,i)}}function Jl(n,t,e){return t.every((i,o)=>Qo[e](n[o].parameters,i.parameters))}class cl{constructor(t=new I([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yl(this.queryParams)),this._queryParamMap}toString(){return mt.serialize(this)}}class I{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ft(this)}}class O{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Yl(this.parameters)),this._parameterMap}toString(){return ws(this)}}function Z(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let se=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new Ae},providedIn:"root"}),n})();class Ae{parse(t){const e=new K_(t);return new cl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Nt(t.root,!0)}`,i=function Xs(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(o=>`${Xt(e)}=${Xt(o)}`).join("&"):`${Xt(e)}=${Xt(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Hr(n){return encodeURI(n)}(t.fragment)}`:""}`}}const mt=new Ae;function ft(n){return n.segments.map(t=>ws(t)).join("/")}function Nt(n,t){if(!n.hasChildren())return ft(n);if(t){const e=n.children[cn]?Nt(n.children[cn],!1):"",i=[];return Object.entries(n.children).forEach(([o,r])=>{o!==cn&&i.push(`${o}:${Nt(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function ne(n,t){let e=[];return Object.entries(n.children).forEach(([i,o])=>{i===cn&&(e=e.concat(t(o,i)))}),Object.entries(n.children).forEach(([i,o])=>{i!==cn&&(e=e.concat(t(o,i)))}),e}(n,(i,o)=>o===cn?[Nt(n.children[cn],!1)]:[`${o}:${Nt(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[cn]?`${ft(n)}/${e[0]}`:`${ft(n)}/(${e.join("//")})`}}function sn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xt(n){return sn(n).replace(/%3B/gi,";")}function Di(n){return sn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qs(n){return decodeURIComponent(n)}function ya(n){return Qs(n.replace(/\+/g,"%20"))}function ws(n){return`${Di(n.path)}${function Vr(n){return Object.keys(n).map(t=>`;${Di(t)}=${Di(n[t])}`).join("")}(n.parameters)}`}const Ru=/^[^\/()?;#]+/;function ku(n){const t=n.match(Ru);return t?t[0]:""}const oh=/^[^\/()?;=#]+/,Z_=/^[^=?&#]+/,ul=/^[^&#]+/;class K_{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new I([],{}):new I([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[cn]=new I(t,e)),i}parseSegment(){const t=ku(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(t),new O(Qs(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function Zg(n){const t=n.match(oh);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=ku(this.remaining);o&&(i=o,this.capture(i))}t[Qs(e)]=Qs(i)}parseQueryParam(t){const e=function Y_(n){const t=n.match(Z_);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const l=function Pu(n){const t=n.match(ul);return t?t[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const o=ya(e),r=ya(i);if(t.hasOwnProperty(o)){let l=t[o];Array.isArray(l)||(l=[l],t[o]=l),l.push(r)}else t[o]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=ku(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new u.vHH(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=cn);const l=this.parseChildren();e[r]=1===Object.keys(l).length?l[cn]:new I([],l),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new u.vHH(4011,!1)}}function J_(n){return n.segments.length>0?new I([],{[cn]:n}):n}function Gf(n){const t={};for(const i of Object.keys(n.children)){const r=Gf(n.children[i]);if(i===cn&&0===r.segments.length&&r.hasChildren())for(const[l,d]of Object.entries(r.children))t[l]=d;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}return function Q_(n){if(1===n.numberOfChildren&&n.children[cn]){const t=n.children[cn];return new I(n.segments.concat(t.segments),t.children)}return n}(new I(n.segments,t))}function Ql(n){return n instanceof cl}function Yg(n){let t;const o=J_(function e(r){const l={};for(const f of r.children){const g=e(f);l[f.outlet]=g}const d=new I(r.url,l);return r===n&&(t=d),d}(n.root));return t??o}function Kg(n,t,e,i){let o=n;for(;o.parent;)o=o.parent;if(0===t.length)return Fu(o,o,o,e,i);const r=function sh(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ey(!0,0,n);let t=0,e=!1;const i=n.reduce((o,r,l)=>{if("object"==typeof r&&null!=r){if(r.outlets){const d={};return Object.entries(r.outlets).forEach(([f,g])=>{d[f]="string"==typeof g?g.split("/"):g}),[...o,{outlets:d}]}if(r.segmentPath)return[...o,r.segmentPath]}return"string"!=typeof r?[...o,r]:0===l?(r.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?e=!0:".."===d?t++:""!=d&&o.push(d))}),o):[...o,r]},[]);return new ey(e,t,i)}(t);if(r.toRoot())return Fu(o,o,new I([],{}),e,i);const l=function Jg(n,t,e){if(n.isAbsolute)return new $f(t,!0,0);if(!e)return new $f(t,!1,NaN);if(null===e.parent)return new $f(e,!0,0);const i=Xl(n.commands[0])?0:1;return function ty(n,t,e){let i=n,o=t,r=e;for(;r>o;){if(r-=o,i=i.parent,!i)throw new u.vHH(4005,!1);o=i.segments.length}return new $f(i,!1,o-r)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(r,o,n),d=l.processChildren?zf(l.segmentGroup,l.index,r.commands):ny(l.segmentGroup,l.index,r.commands);return Fu(o,l.segmentGroup,d,e,i)}function Xl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Vc(n){return"object"==typeof n&&null!=n&&n.outlets}function Fu(n,t,e,i,o){let l,r={};i&&Object.entries(i).forEach(([f,g])=>{r[f]=Array.isArray(g)?g.map(_=>`${_}`):`${g}`}),l=n===t?e:Lu(n,t,e);const d=J_(Gf(l));return new cl(d,r,o)}function Lu(n,t,e){const i={};return Object.entries(n.children).forEach(([o,r])=>{i[o]=r===t?e:Lu(r,t,e)}),new I(n.segments,i)}class ey{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Xl(i[0]))throw new u.vHH(4003,!1);const o=i.find(Vc);if(o&&o!==mi(i))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $f{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function ny(n,t,e){if(n||(n=new I([],{})),0===n.segments.length&&n.hasChildren())return zf(n,t,e);const i=function Bu(n,t,e){let i=0,o=t;const r={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(i>=e.length)return r;const l=n.segments[o],d=e[i];if(Vc(d))break;const f=`${d}`,g=i<e.length-1?e[i+1]:null;if(o>0&&void 0===f)break;if(f&&g&&"object"==typeof g&&void 0===g.outlets){if(!Xg(f,g,l))return r;i+=2}else{if(!Xg(f,{},l))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(n,t,e),o=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const r=new I(n.segments.slice(0,i.pathIndex),{});return r.children[cn]=new I(n.segments.slice(i.pathIndex),n.children),zf(r,0,o)}return i.match&&0===o.length?new I(n.segments,{}):i.match&&!n.hasChildren()?Wf(n,t,e):i.match?zf(n,0,o):Wf(n,t,e)}function zf(n,t,e){if(0===e.length)return new I(n.segments,{});{const i=function Uu(n){return Vc(n[0])?n[0].outlets:{[cn]:n}}(e),o={};if(!i[cn]&&n.children[cn]&&1===n.numberOfChildren&&0===n.children[cn].segments.length){const r=zf(n.children[cn],t,e);return new I(n.segments,r.children)}return Object.entries(i).forEach(([r,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[r]=ny(n.children[r],t,l))}),Object.entries(n.children).forEach(([r,l])=>{void 0===i[r]&&(o[r]=l)}),new I(n.segments,o)}}function Wf(n,t,e){const i=n.segments.slice(0,t);let o=0;for(;o<e.length;){const r=e[o];if(Vc(r)){const f=qf(r.outlets);return new I(i,f)}if(0===o&&Xl(e[0])){i.push(new O(n.segments[t].path,Qg(e[0]))),o++;continue}const l=Vc(r)?r.outlets[cn]:`${r}`,d=o<e.length-1?e[o+1]:null;l&&d&&Xl(d)?(i.push(new O(l,Qg(d))),o+=2):(i.push(new O(l,{})),o++)}return new I(i,{})}function qf(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=Wf(new I([],{}),0,i))}),t}function Qg(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Xg(n,t,e){return n==e.path&&ys(t,e.parameters)}const ah="imperative";class ea{constructor(t,e){this.id=t,this.url=e}}class jc extends ea{constructor(t,e,i="imperative",o=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ba extends ea{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hu extends ea{constructor(t,e,i,o){super(t,e),this.reason=i,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ec extends ea{constructor(t,e,i,o){super(t,e),this.reason=i,this.code=o,this.type=16}}class lh extends ea{constructor(t,e,i,o){super(t,e),this.error=i,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vu extends ea{constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D extends ea{constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m extends ea{constructor(t,e,i,o,r){super(t,e),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class y extends ea{constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T extends ea{constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class U{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class X{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fe{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class st{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ge{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Et{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Gn{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Zi,this.attachRef=null}}let Zi=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const o=this.getOrCreateContext(e);o.outlet=i,this.contexts.set(e,o)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Gn,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wa{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Gc(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=Gc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=pr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return pr(t,this._root).map(e=>e.value)}}function Gc(n,t){if(n===t.value)return t;for(const e of t.children){const i=Gc(n,e);if(i)return i}return null}function pr(n,t){if(n===t.value)return[t];for(const e of t.children){const i=pr(n,e);if(i.length)return i.unshift(t),i}return[]}class Xo{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function dl(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class $c extends wa{constructor(t,e){super(t),this.snapshot=e,tm(this,t)}toString(){return this.snapshot.toString()}}function gr(n,t){const e=function zc(n,t){const l=new tc([],{},{},"",{},cn,t,null,{});return new em("",new Xo(l,[]))}(0,t),i=new Tr.X([new O("",{})]),o=new Tr.X({}),r=new Tr.X({}),l=new Tr.X({}),d=new Tr.X(""),f=new Ca(i,o,l,d,r,cn,t,e.root);return f.snapshot=e.root,new $c(new Xo(f,[]),e)}class Ca{constructor(t,e,i,o,r,l,d,f){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=l,this.component=d,this._futureSnapshot=f,this.title=this.dataSubject?.pipe((0,Lt.U)(g=>g[Ks]))??(0,Ut.of)(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Lt.U)(t=>Yl(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Lt.U)(t=>Yl(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ch(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const o=e[i],r=e[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(r.component)break;i--}}return function iy(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class tc{get title(){return this.data?.[Ks]}constructor(t,e,i,o,r,l,d,f,g){this.url=t,this.params=e,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=l,this.component=d,this.routeConfig=f,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class em extends wa{constructor(t,e){super(e),this.url=t,tm(this,e)}toString(){return Nw(this._root)}}function tm(n,t){t.value._routerState=n,t.children.forEach(e=>tm(n,e))}function Nw(n){const t=n.children.length>0?` { ${n.children.map(Nw).join(", ")} } `:"";return`${n.value}${t}`}function nm(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ys(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),ys(t.params,e.params)||n.paramsSubject.next(e.params),function al(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ys(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),ys(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ry(n,t){const e=ys(n.params,t.params)&&function L(n,t){return Z(n,t)&&n.every((e,i)=>ys(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||ry(n.parent,t.parent))}let oy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=cn,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(Zi),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(uh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:o}=e.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=e;const o=this.location,l=e.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new sy(e,d,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:f,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),n})();class sy{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Ca?this.route:t===Zi?this.childContexts:this.parent.get(t,e)}}const uh=new u.OlP("");let Mw=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,o=va([i.queryParams,i.params,i.data]).pipe((0,ti.w)(([r,l,d],f)=>(d={...r,...l,...d},0===f?(0,Ut.of)(d):Promise.resolve(d)))).subscribe(r=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const l=(0,u.qFp)(i.component);if(l)for(const{templateName:d}of l.inputs)e.activatedComponentRef.setInput(d,r[d]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Yf(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const o=function uS(n,t,e){return t.children.map(i=>{for(const o of e.children)if(n.shouldReuseRoute(i.value,o.value.snapshot))return Yf(n,i,o);return Yf(n,i)})}(n,t,e);return new Xo(i,o)}{if(n.shouldAttach(t.value)){const r=n.retrieve(t.value);if(null!==r){const l=r.route;return l.value._futureSnapshot=t.value,l.children=t.children.map(d=>Yf(n,d)),l}}const i=function xw(n){return new Ca(new Tr.X(n.url),new Tr.X(n.params),new Tr.X(n.queryParams),new Tr.X(n.fragment),new Tr.X(n.data),n.outlet,n.component,n)}(t.value),o=t.children.map(r=>Yf(n,r));return new Xo(i,o)}}const im="ngNavigationCancelingError";function ay(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Ql(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=ju(!1,0,t);return o.url=e,o.navigationBehaviorOptions=i,o}function ju(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[im]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Kf(n){return ly(n)&&Ql(n.url)}function ly(n){return n&&n[im]}let rm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(e,i){1&e&&u._UZ(0,"router-outlet")},dependencies:[oy],encapsulation:2}),n})();function sm(n){const t=n.children&&n.children.map(sm),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==cn&&(e.component=rm),e}function Cs(n){return n.outlet||cn}function Jf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Gu{constructor(t,e,i,o,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),nm(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const o=dl(e);t.children.forEach(r=>{const l=r.value.outlet;this.deactivateRoutes(r,o[l],i),delete o[l]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,e,i){const o=t.value,r=e?e.value:null;if(o===r)if(o.component){const l=i.getContext(o.outlet);l&&this.deactivateChildRoutes(t,e,l.children)}else this.deactivateChildRoutes(t,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),o=i&&t.value.component?i.children:e,r=dl(t);for(const l of Object.keys(r))this.deactivateRouteAndItsChildren(r[l],o);if(i&&i.outlet){const l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:l,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),o=i&&t.value.component?i.children:e,r=dl(t);for(const l of Object.keys(r))this.deactivateRouteAndItsChildren(r[l],o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const o=dl(e);t.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new Ge(r.value.snapshot))}),t.children.length&&this.forwardEvent(new fe(t.value.snapshot))}activateRoutes(t,e,i){const o=t.value,r=e?e.value:null;if(nm(o),o===r)if(o.component){const l=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,l.children)}else this.activateChildRoutes(t,e,i);else if(o.component){const l=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const d=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),nm(d.route.value),this.activateChildRoutes(t,null,l.children)}else{const d=Jf(o.snapshot);l.attachRef=null,l.route=o,l.injector=d,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(t,null,l.children)}}else this.activateChildRoutes(t,null,i)}}class uy{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Qf{constructor(t,e){this.component=t,this.route=e}}function fS(n,t,e){const i=n._root;return Xf(i,t?t._root:null,e,[i.value])}function nc(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,u.Z0I)(n)?t.get(n):n:i}function Xf(n,t,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const r=dl(t);return n.children.forEach(l=>{(function Pw(n,t,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,l=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(l&&r.routeConfig===l.routeConfig){const f=function Fw(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Z(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Z(n.url,t.url)||!ys(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ry(n,t)||!ys(n.queryParams,t.queryParams);default:return!ry(n,t)}}(l,r,r.routeConfig.runGuardsAndResolvers);f?o.canActivateChecks.push(new uy(i)):(r.data=l.data,r._resolvedData=l._resolvedData),Xf(n,t,r.component?d?d.children:null:e,i,o),f&&d&&d.outlet&&d.outlet.isActivated&&o.canDeactivateChecks.push(new Qf(d.outlet.component,l))}else l&&dh(t,d,o),o.canActivateChecks.push(new uy(i)),Xf(n,null,r.component?d?d.children:null:e,i,o)})(l,r[l.value.outlet],e,i.concat([l.value]),o),delete r[l.value.outlet]}),Object.entries(r).forEach(([l,d])=>dh(d,e.getContext(l),o)),o}function dh(n,t,e){const i=dl(n),o=n.value;Object.entries(i).forEach(([r,l])=>{dh(l,o.component?t?t.children.getContext(r):null:t,e)}),e.canDeactivateChecks.push(new Qf(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function $u(n){return"function"==typeof n}function hh(n){return n instanceof vs||"EmptyError"===n?.name}const cm=Symbol("INITIAL_VALUE");function zu(){return(0,ti.w)(n=>va(n.map(t=>t.pipe(ki(1),Ko(cm)))).pipe((0,Lt.U)(t=>{for(const e of t)if(!0!==e){if(e===cm)return cm;if(!1===e||e instanceof cl)return e}return!0}),Wn(t=>t!==cm),ki(1)))}function Vw(n){return(0,rl.z)((0,gi.b)(t=>{if(Ql(t))throw ay(0,t)}),(0,Lt.U)(t=>!0===t))}class dm{constructor(t){this.segmentGroup=t||null}}class hm{constructor(t){this.urlTree=t}}function ph(n){return qs(new dm(n))}function gh(n){return qs(new hm(n))}class jw{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new u.vHH(4002,!1)}lineralizeSegments(t,e){let i=[],o=e.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return(0,Ut.of)(i);if(o.numberOfChildren>1||!o.children[cn])return qs(new u.vHH(4e3,!1));o=o.children[cn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,o){const r=this.createSegmentGroup(t,e.root,i,o);return new cl(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([o,r])=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[o]=e[d]}else i[o]=r}),i}createSegmentGroup(t,e,i,o){const r=this.createSegments(t,e.segments,i,o);let l={};return Object.entries(e.children).forEach(([d,f])=>{l[d]=this.createSegmentGroup(t,f,i,o)}),new I(r,l)}createSegments(t,e,i,o){return e.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,o):this.findOrReturn(r,i))}findPosParam(t,e,i){const o=i[e.path.substring(1)];if(!o)throw new u.vHH(4001,!1);return o}findOrReturn(t,e){let i=0;for(const o of e){if(o.path===t.path)return e.splice(i),o;i++}return t}}const pm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gw(n,t,e,i,o){const r=gm(n,t,e);return r.matched?(i=function om(n,t){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function KR(n,t,e,i){const o=t.canMatch;if(!o||0===o.length)return(0,Ut.of)(!0);const r=o.map(l=>{const d=nc(l,n);return Js(function lm(n){return n&&$u(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))});return(0,Ut.of)(r).pipe(zu(),Vw())}(i,t,e).pipe((0,Lt.U)(l=>!0===l?r:{...pm}))):(0,Ut.of)(r)}function gm(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...pm}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||qg)(e,n,t);if(!o)return{...pm};const r={};Object.entries(o.posParams??{}).forEach(([d,f])=>{r[d]=f.path});const l=o.consumed.length>0?{...r,...o.consumed[o.consumed.length-1].parameters}:r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function $w(n,t,e,i){return e.length>0&&function wS(n,t,e){return e.some(i=>Da(n,t,i)&&Cs(i)!==cn)}(n,e,i)?{segmentGroup:new I(t,bS(i,new I(e,n.children))),slicedSegments:[]}:0===e.length&&function CS(n,t,e){return e.some(i=>Da(n,t,i))}(n,e,i)?{segmentGroup:new I(n.segments,yS(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new I(n.segments,n.children),slicedSegments:e}}function yS(n,t,e,i,o){const r={};for(const l of i)if(Da(n,e,l)&&!o[Cs(l)]){const d=new I([],{});r[Cs(l)]=d}return{...o,...r}}function bS(n,t){const e={};e[cn]=t;for(const i of n)if(""===i.path&&Cs(i)!==cn){const o=new I([],{});e[Cs(i)]=o}return e}function Da(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class QR{constructor(t,e,i,o,r,l,d){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=l,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new jw(this.urlSerializer,this.urlTree)}noMatchError(t){return new u.vHH(4002,!1)}recognize(){const t=$w(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,cn).pipe(Sr(e=>{if(e instanceof hm)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof dm?this.noMatchError(e):e}),(0,Lt.U)(e=>{const i=new tc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},cn,this.rootComponentType,null,{}),o=new Xo(i,e),r=new em("",o),l=function X_(n,t,e=null,i=null){return Kg(Yg(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(r._root),{state:r,tree:l}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,cn).pipe(Sr(i=>{throw i instanceof dm?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=ch(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,e,i,o){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,o,!0)}processChildren(t,e,i){const o=[];for(const r of Object.keys(i.children))"primary"===r?o.unshift(r):o.push(r);return(0,Rn.D)(o).pipe(Xr(r=>{const l=i.children[r],d=function hS(n,t){const e=n.filter(i=>Cs(i)===t);return e.push(...n.filter(i=>Cs(i)!==t)),e}(e,r);return this.processSegmentGroup(t,d,l,r)}),Zs((r,l)=>(r.push(...l),r)),sl(null),function rh(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Wn((o,r)=>n(o,r,i)):nl.y,Br(1),e?sl(t):ih(()=>new vs))}(),(0,Pi.z)(r=>{if(null===r)return ph(i);const l=ES(r);return function XR(n){n.sort((t,e)=>t.value.outlet===cn?-1:e.value.outlet===cn?1:t.value.outlet.localeCompare(e.value.outlet))}(l),(0,Ut.of)(l)}))}processSegment(t,e,i,o,r,l){return(0,Rn.D)(e).pipe(Xr(d=>this.processSegmentAgainstRoute(d._injector??t,e,d,i,o,r,l).pipe(Sr(f=>{if(f instanceof dm)return(0,Ut.of)(null);throw f}))),Jo(d=>!!d),Sr(d=>{if(hh(d))return function DS(n,t,e){return 0===t.length&&!n.children[e]}(i,o,r)?(0,Ut.of)([]):ph(i);throw d}))}processSegmentAgainstRoute(t,e,i,o,r,l,d){return function tp(n,t,e,i){return!!(Cs(n)===i||i!==cn&&Da(t,e,n))&&("**"===n.path||gm(t,n,e).matched)}(i,o,r,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,o,i,r,l,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,o,e,i,r,l):ph(o):ph(o)}expandSegmentAgainstRouteUsingRedirect(t,e,i,o,r,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,o,r,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,o){const r=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?gh(r):this.applyRedirects.lineralizeSegments(i,r).pipe((0,Pi.z)(l=>{const d=new I(l,{});return this.processSegment(t,e,d,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,o,r,l){const{matched:d,consumedSegments:f,remainingSegments:g,positionalParamSegments:_}=gm(e,o,r);if(!d)return ph(e);const w=this.applyRedirects.applyRedirectCommands(f,o.redirectTo,_);return o.redirectTo.startsWith("/")?gh(w):this.applyRedirects.lineralizeSegments(o,w).pipe((0,Pi.z)(C=>this.processSegment(t,i,e,C.concat(g),l,!1)))}matchSegmentAgainstRoute(t,e,i,o,r,l){let d;if("**"===i.path){const f=o.length>0?mi(o).parameters:{},g=new tc(o,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zw(i),Cs(i),i.component??i._loadedComponent??null,i,Ww(i));d=(0,Ut.of)({snapshot:g,consumedSegments:[],remainingSegments:[]}),e.children={}}else d=Gw(e,i,o,t).pipe((0,Lt.U)(({matched:f,consumedSegments:g,remainingSegments:_,parameters:w})=>f?{snapshot:new tc(g,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zw(i),Cs(i),i.component??i._loadedComponent??null,i,Ww(i)),consumedSegments:g,remainingSegments:_}:null));return d.pipe((0,ti.w)(f=>null===f?ph(e):this.getChildConfig(t=i._injector??t,i,o).pipe((0,ti.w)(({routes:g})=>{const _=i._loadedInjector??t,{snapshot:w,consumedSegments:C,remainingSegments:E}=f,{segmentGroup:N,slicedSegments:A}=$w(e,C,E,g);if(0===A.length&&N.hasChildren())return this.processChildren(_,g,N).pipe((0,Lt.U)(F=>null===F?null:[new Xo(w,F)]));if(0===g.length&&0===A.length)return(0,Ut.of)([new Xo(w,[])]);const R=Cs(i)===r;return this.processSegment(_,g,N,A,R?cn:r,!0).pipe((0,Lt.U)(F=>[new Xo(w,F)]))}))))}getChildConfig(t,e,i){return e.children?(0,Ut.of)({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?(0,Ut.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function _S(n,t,e,i){const o=t.canLoad;if(void 0===o||0===o.length)return(0,Ut.of)(!0);const r=o.map(l=>{const d=nc(l,n);return Js(function am(n){return n&&$u(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))});return(0,Ut.of)(r).pipe(zu(),Vw())}(t,e,i).pipe((0,Pi.z)(o=>o?this.configLoader.loadChildren(t,e).pipe((0,gi.b)(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):function py(n){return qs(ju(!1,3))}())):(0,Ut.of)({routes:[],injector:t})}}function ek(n){const t=n.value.routeConfig;return t&&""===t.path}function ES(n){const t=[],e=new Set;for(const i of n){if(!ek(i)){t.push(i);continue}const o=t.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==o?(o.children.push(...i.children),e.add(o)):t.push(i)}for(const i of e){const o=ES(i.children);t.push(new Xo(i.value,o))}return t.filter(i=>!e.has(i))}function zw(n){return n.data||{}}function Ww(n){return n.resolve||{}}function IS(n,t){return(0,Pi.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=e;if(!o.length)return(0,Ut.of)(e);let r=0;return(0,Rn.D)(o).pipe(Xr(l=>function gy(n,t,e,i){const o=n.routeConfig,r=n._resolve;return void 0!==o?.title&&!my(o)&&(r[Ks]=o.title),function ic(n,t,e,i){const o=function np(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,Ut.of)({});const r={};return(0,Rn.D)(o).pipe((0,Pi.z)(l=>function qw(n,t,e,i){const o=Jf(t)??i,r=nc(n,o);return Js(r.resolve?r.resolve(t,e):o.runInContext(()=>r(t,e)))}(n[l],t,e,i).pipe(Jo(),(0,gi.b)(d=>{r[l]=d}))),Br(1),function Uc(n){return(0,Lt.U)(()=>n)}(r),Sr(l=>hh(l)?po.E:qs(l)))}(r,n,t,i).pipe((0,Lt.U)(l=>(n._resolvedData=l,n.data=ch(n,e).resolve,o&&my(o)&&(n.data[Ks]=o.title),null)))}(l.route,i,n,t)),(0,gi.b)(()=>r++),Br(1),(0,Pi.z)(l=>r===o.length?(0,Ut.of)(e):po.E))})}function my(n){return"string"==typeof n.title||null===n.title}function mm(n){return(0,ti.w)(t=>{const e=n(t);return e?(0,Rn.D)(e).pipe((0,Lt.U)(()=>t)):(0,Ut.of)(t)})}const ip=new u.OlP("ROUTES");let Zw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,Ut.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Js(e.loadComponent()).pipe((0,Lt.U)(vm),(0,gi.b)(r=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=r}),Ys(()=>{this.componentLoaders.delete(e)})),o=new Qr(i,()=>new ei.x).pipe(ol());return this.componentLoaders.set(e,o),o}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,Ut.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const r=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Lt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let f,g;return Array.isArray(d)?g=d:(f=d.create(e).injector,g=f.get(ip,[],u.XFs.Self|u.XFs.Optional).flat()),{routes:g.map(sm),injector:f}}),Ys(()=>{this.childrenLoaders.delete(i)})),l=new Qr(r,()=>new ei.x).pipe(ol());return this.childrenLoaders.set(i,l),l}loadModuleFactoryOrRoutes(e){return Js(e()).pipe((0,Lt.U)(vm),(0,Pi.z)(i=>i instanceof u.YKP||Array.isArray(i)?(0,Ut.of)(i):(0,Rn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vm(n){return function tk(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let mh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ei.x,this.configLoader=(0,u.f3M)(Zw),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(se),this.rootContexts=(0,u.f3M)(Zi),this.inputBindingEnabled=null!==(0,u.f3M)(uh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ut.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new U(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new k(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new Tr.X({id:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ah,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Wn(i=>0!==i.id),(0,Lt.U)(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),(0,ti.w)(i=>{let o=!1,r=!1;return(0,Ut.of)(i).pipe((0,gi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ti.w)(l=>{const d=e.browserUrlTree.toString(),f=!e.navigated||l.extractedUrl.toString()!==d||d!==e.currentUrlTree.toString();if(!f&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const _="";return this.events.next(new ec(l.id,e.serializeUrl(i.rawUrl),_,0)),e.rawUrlTree=l.rawUrl,l.resolve(null),po.E}if(e.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return AS(l.source)&&(e.browserUrlTree=l.extractedUrl),(0,Ut.of)(l).pipe((0,ti.w)(_=>{const w=this.transitions?.getValue();return this.events.next(new jc(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),w!==this.transitions?.getValue()?po.E:Promise.resolve(_)}),function SS(n,t,e,i,o,r){return(0,Pi.z)(l=>function JR(n,t,e,i,o,r,l="emptyOnly"){return new QR(n,t,e,i,o,l,r).recognize()}(n,t,e,i,l.extractedUrl,o,r).pipe((0,Lt.U)(({state:d,tree:f})=>({...l,targetSnapshot:d,urlAfterRedirects:f}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,gi.b)(_=>{if(i.targetSnapshot=_.targetSnapshot,i.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects},"eager"===e.urlUpdateStrategy){if(!_.extras.skipLocationChange){const C=e.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl);e.setBrowserUrl(C,_)}e.browserUrlTree=_.urlAfterRedirects}const w=new Vu(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}));if(f&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:_,extractedUrl:w,source:C,restoredState:E,extras:N}=l,A=new jc(_,this.urlSerializer.serialize(w),C,E);this.events.next(A);const R=gr(0,this.rootComponentType).snapshot;return i={...l,targetSnapshot:R,urlAfterRedirects:w,extras:{...N,skipLocationChange:!1,replaceUrl:!1}},(0,Ut.of)(i)}{const _="";return this.events.next(new ec(l.id,e.serializeUrl(i.extractedUrl),_,1)),e.rawUrlTree=l.rawUrl,l.resolve(null),po.E}}),(0,gi.b)(l=>{const d=new D(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),(0,Lt.U)(l=>i={...l,guards:fS(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function gS(n,t){return(0,Pi.z)(e=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:l}}=e;return 0===l.length&&0===r.length?(0,Ut.of)({...e,guardsResult:!0}):function mS(n,t,e,i){return(0,Rn.D)(n).pipe((0,Pi.z)(o=>function fh(n,t,e,i,o){const r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||0===r.length)return(0,Ut.of)(!0);const l=r.map(d=>{const f=Jf(t)??o,g=nc(d,f);return Js(function dy(n){return n&&$u(n.canDeactivate)}(g)?g.canDeactivate(n,t,e,i):f.runInContext(()=>g(n,t,e,i))).pipe(Jo())});return(0,Ut.of)(l).pipe(zu())}(o.component,o.route,e,t,i)),Jo(o=>!0!==o,!0))}(l,i,o,n).pipe((0,Pi.z)(d=>d&&function Lw(n){return"boolean"==typeof n}(d)?function vS(n,t,e,i){return(0,Rn.D)(t).pipe(Xr(o=>_s(function Hw(n,t){return null!==n&&t&&t(new X(n)),(0,Ut.of)(!0)}(o.route.parent,i),function Bw(n,t){return null!==n&&t&&t(new st(n)),(0,Ut.of)(!0)}(o.route,i),function fy(n,t,e){const i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(l=>function YR(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(l)).filter(l=>null!==l).map(l=>jf(()=>{const d=l.guards.map(f=>{const g=Jf(l.node)??e,_=nc(f,g);return Js(function Uw(n){return n&&$u(n.canActivateChild)}(_)?_.canActivateChild(i,n):g.runInContext(()=>_(i,n))).pipe(Jo())});return(0,Ut.of)(d).pipe(zu())}));return(0,Ut.of)(r).pipe(zu())}(n,o.path,e),function um(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,Ut.of)(!0);const o=i.map(r=>jf(()=>{const l=Jf(t)??e,d=nc(r,l);return Js(function ep(n){return n&&$u(n.canActivate)}(d)?d.canActivate(t,n):l.runInContext(()=>d(t,n))).pipe(Jo())}));return(0,Ut.of)(o).pipe(zu())}(n,o.route,e))),Jo(o=>!0!==o,!0))}(i,r,n,t):(0,Ut.of)(d)),(0,Lt.U)(d=>({...e,guardsResult:d})))})}(this.environmentInjector,l=>this.events.next(l)),(0,gi.b)(l=>{if(i.guardsResult=l.guardsResult,Ql(l.guardsResult))throw ay(0,l.guardsResult);const d=new m(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Wn(l=>!!l.guardsResult||(e.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),mm(l=>{if(l.guards.canActivateChecks.length)return(0,Ut.of)(l).pipe((0,gi.b)(d=>{const f=new y(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),(0,ti.w)(d=>{let f=!1;return(0,Ut.of)(d).pipe(IS(e.paramsInheritanceStrategy,this.environmentInjector),(0,gi.b)({next:()=>f=!0,complete:()=>{f||(e.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),(0,gi.b)(d=>{const f=new T(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),mm(l=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe((0,gi.b)(_=>{f.component=_}),(0,Lt.U)(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return va(d(l.targetSnapshot.root)).pipe(sl(),ki(1))}),mm(()=>this.afterPreactivation()),(0,Lt.U)(l=>{const d=function Zf(n,t,e){const i=Yf(n,t._root,e?e._root:void 0);return new $c(i,t)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:d}}),(0,gi.b)(l=>{e.currentUrlTree=l.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),e.routerState=l.targetRouterState,"deferred"===e.urlUpdateStrategy&&(l.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,l),e.browserUrlTree=l.urlAfterRedirects)}),((n,t,e,i)=>(0,Lt.U)(o=>(new Gu(t,o.targetRouterState,o.currentRouterState,e,i).activate(n),o)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ki(1),(0,gi.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new ba(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Ys(()=>{o||r||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Sr(l=>{if(r=!0,ly(l)){Kf(l)||(e.navigated=!0,e.restoreHistory(i,!0));const d=new Hu(i.id,this.urlSerializer.serialize(i.extractedUrl),l.message,l.cancellationCode);if(this.events.next(d),Kf(l)){const f=e.urlHandlingStrategy.merge(l.url,e.rawUrlTree),g={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||AS(i.source)};e.scheduleNavigation(f,ah,null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const d=new lh(i.id,this.urlSerializer.serialize(i.extractedUrl),l,i.targetSnapshot??void 0);this.events.next(d);try{i.resolve(e.errorHandler(l))}catch(f){i.reject(f)}}return po.E}))}))}cancelNavigationTransition(e,i,o){const r=new Hu(e.id,this.urlSerializer.serialize(e.extractedUrl),i,o);this.events.next(r),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AS(n){return n!==ah}let NS=(()=>{class n{buildTitle(e){let i,o=e.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(r=>r.outlet===cn);return i}getResolvedTitleForRoute(e){return e.data[Ks]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Yw)},providedIn:"root"}),n})(),Yw=(()=>{class n extends NS{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Iu))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(OS)},providedIn:"root"}),n})();class xS{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let OS=(()=>{class n extends xS{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _m=new u.OlP("",{providedIn:"root",factory:()=>({})});let Kw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(ym)},providedIn:"root"}),n})(),ym=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ds=(()=>((Ds=Ds||{})[Ds.COMPLETE=0]="COMPLETE",Ds[Ds.FAILED=1]="FAILED",Ds[Ds.REDIRECTING=2]="REDIRECTING",Ds))();function bm(n,t){n.events.pipe(Wn(e=>e instanceof ba||e instanceof Hu||e instanceof lh||e instanceof ec),(0,Lt.U)(e=>e instanceof ba||e instanceof ec?Ds.COMPLETE:e instanceof Hu&&(0===e.code||1===e.code)?Ds.REDIRECTING:Ds.FAILED),Wn(e=>e!==Ds.REDIRECTING),ki(1)).subscribe(()=>{t()})}function RS(n){throw n}function mr(n,t,e){return t.parse("/")}const kS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let es=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(_m,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||RS,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||mr,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(Kw),this.routeReuseStrategy=(0,u.f3M)(MS),this.titleStrategy=(0,u.f3M)(NS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(ip,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(mh),this.urlSerializer=(0,u.f3M)(se),this.location=(0,u.f3M)(pt),this.componentInputBindingEnabled=!!(0,u.f3M)(uh,{optional:!0}),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new cl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gr(0,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ah,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,o){const r={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const f={...o};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(r.state=f)}const d=this.parseUrl(e);this.scheduleNavigation(d,i,l,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(sm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:o,queryParams:r,fragment:l,queryParamsHandling:d,preserveFragment:f}=i,g=f?this.currentUrlTree.fragment:l;let w,_=null;switch(d){case"merge":_={...this.currentUrlTree.queryParams,...r};break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=r||null}null!==_&&(_=this.removeEmptyProps(_));try{w=Yg(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),w=this.currentUrlTree.root}return Kg(w,e,_,g??null)}navigateByUrl(e,i={skipLocationChange:!1}){const o=Ql(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(r,ah,null,i)}navigate(e,i={skipLocationChange:!1}){return function Jw(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new u.vHH(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return i}isActive(e,i){let o;if(o=!0===i?{...kS}:!1===i?{...PS}:i,Ql(e))return eo(this.currentUrlTree,e,o);const r=this.parseUrl(e);return eo(this.currentUrlTree,r,o)}removeEmptyProps(e){return Object.keys(e).reduce((i,o)=>{const r=e[o];return null!=r&&(i[o]=r),i},{})}scheduleNavigation(e,i,o,r,l){if(this.disposed)return Promise.resolve(!1);let d,f,g;l?(d=l.resolve,f=l.reject,g=l.promise):g=new Promise((w,C)=>{d=w,f=C});const _=this.pendingTasks.add();return bm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:r,resolve:d,reject:f,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(w=>Promise.reject(w))}setBrowserUrl(e,i){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const l={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const r={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(o,"",r)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-(this.browserPageId??this.currentPageId);0!==r?this.location.historyGo(r):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hl=(()=>{class n{constructor(e,i,o,r,l,d){this.router=e,this.route=i,this.tabIndexAttribute=o,this.renderer=r,this.el=l,this.locationStrategy=d,this.href=null,this.commands=null,this.onChanges=new ei.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const f=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===f||"area"===f,this.isAnchorElement?this.subscription=e.events.subscribe(g=>{g instanceof ba&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,o,r,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||o||r||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const o=this.renderer,r=this.el.nativeElement;null!==i?o.setAttribute(r,e,i):o.removeAttribute(r,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(es),u.Y36(Ca),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(nt))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,i){1&e&&u.NdJ("click",function(r){return i.onClick(r.button,r.ctrlKey,r.shiftKey,r.altKey,r.metaKey)}),2&e&&u.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]}),n})();class Qw{}let nk=(()=>{class n{constructor(e,i,o,r,l){this.router=e,this.injector=o,this.preloadingStrategy=r,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(e=>e instanceof ba),Xr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const o=[];for(const r of i){r.providers&&!r._injector&&(r._injector=(0,u.MMx)(r.providers,e,`Route: ${r.path}`));const l=r._injector??e,d=r._loadedInjector??l;(r.loadChildren&&!r._loadedRoutes&&void 0===r.canLoad||r.loadComponent&&!r._loadedComponent)&&o.push(this.preloadConfig(l,r)),(r.children||r._loadedRoutes)&&o.push(this.processRoutes(d,r.children??r._loadedRoutes))}return(0,Rn.D)(o).pipe((0,_a.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):(0,Ut.of)(null);const r=o.pipe((0,Pi.z)(l=>null===l?(0,Ut.of)(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??e,l.routes))));if(i.loadComponent&&!i._loadedComponent){const l=this.loader.loadComponent(i);return(0,Rn.D)([r,l]).pipe((0,_a.J)())}return r})}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(es),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(Qw),u.LFG(Zw))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wu=new u.OlP("");let qn=(()=>{class n{constructor(e,i,o,r,l={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=o,this.zone=r,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof jc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ba?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ec&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Et&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Et(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function fl(n,t){return{\u0275kind:n,\u0275providers:t}}function _y(){const n=(0,u.f3M)(u.zs3);return t=>{const e=n.get(u.z2F);if(t!==e.components[0])return;const i=n.get(es),o=n.get(Cm);1===n.get(tC)&&i.initialNavigation(),n.get(by,null,u.XFs.Optional)?.setUpPreloading(),n.get(Wu,null,u.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const Cm=new u.OlP("",{factory:()=>new ei.x}),tC=new u.OlP("",{providedIn:"root",factory:()=>1}),by=new u.OlP("");function iC(n){return fl(0,[{provide:by,useExisting:nk},{provide:Qw,useExisting:n}])}const Em=new u.OlP("ROUTER_FORROOT_GUARD"),Tm=[pt,{provide:se,useClass:Ae},es,Zi,{provide:Ca,useFactory:function vy(n){return n.routerState.root},deps:[es]},Zw,[]];function qu(){return new u.PXZ("Router",es)}let Sm=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[Tm,[],{provide:ip,multi:!0,useValue:e},{provide:Em,useFactory:oC,deps:[[es,new u.FiY,new u.tp0]]},{provide:_m,useValue:i||{}},i?.useHash?{provide:nt,useClass:Ye}:{provide:nt,useClass:ht},{provide:Wu,useFactory:()=>{const n=(0,u.f3M)(Rd),t=(0,u.f3M)(u.R0b),e=(0,u.f3M)(_m),i=(0,u.f3M)(mh),o=(0,u.f3M)(se);return e.scrollOffset&&n.setOffset(e.scrollOffset),new qn(o,i,n,t,e)}},i?.preloadingStrategy?iC(i.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:qu},i?.initialNavigation?_h(i):[],i?.bindToComponentInputs?fl(8,[Mw,{provide:uh,useExisting:Mw}]).\u0275providers:[],[{provide:sC,useFactory:_y},{provide:u.tb,multi:!0,useExisting:sC}]]}}static forChild(e){return{ngModule:n,providers:[{provide:ip,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Em,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function oC(n){return"guarded"}function _h(n){return["disabled"===n.initialNavigation?fl(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const t=(0,u.f3M)(es);return()=>{t.setUpLocationChangeListener()}}},{provide:tC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fl(2,[{provide:tC,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:t=>{const e=t.get(We,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const o=t.get(es),r=t.get(Cm);bm(o,()=>{i(!0)}),t.get(mh).afterPreactivation=()=>(i(!0),r.closed?(0,Ut.of)(void 0):r),o.initialNavigation()}))}}]).\u0275providers:[]]}const sC=new u.OlP("");var Me=z(5861),lk=z(2659),Zn=z(9058),Zu=z(534),Yu=z(7879),Cy=z(4537),rp=z(3019),Im=z(3093),Dy=z(4552);class Ey extends ei.x{constructor(t=1/0,e=1/0,i=Dy.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:o,_timestampProvider:r,_windowTime:l}=this;e||(i.push(t),!o&&i.push(r.now()+l)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:o}=this,r=o.slice();for(let l=0;l<r.length&&!t.closed;l+=i?1:2)t.next(r[l]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:o}=this,r=(o?1:2)*t;if(t<1/0&&r<i.length&&i.splice(0,i.length-r),!o){const l=e.now();let d=0;for(let f=1;f<i.length&&i[f]<=l;f+=2)d=f;d&&i.splice(0,d+1)}}}var op=z(3020);function Am(n,t,e){let i,o=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:o=!1,scheduler:e}=n):i=n??1/0,(0,op.B)({connector:()=>new Ey(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Nm(n,t){return(0,hr.m)(t)?(0,ti.w)(()=>n,t):(0,ti.w)(()=>n)}var Ku=z(5137),Ir=z(2793),xo=z(6304);z(4097);const xm=new Map,Om={activated:!1,tokenObservers:[]},Rm={initialized:!1,enabled:!1};function Yi(n){return xm.get(n)||Object.assign({},Om)}function km(){return Rm}const Pm="https://content-firebaseappcheck.googleapis.com/v1",Fm="exchangeDebugToken",fC={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ap{constructor(t,e,i,o,r){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=o,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=o,o>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Me.Z)(function*(){e.stop();try{e.pending=new Zn.BH,yield function KS(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new Zn.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const to=new Zn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Iy(n){if(!Yi(n).activated)throw to.create("use-before-activation",{appName:n.name})}function wh(n,t){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,Me.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){const w=yield o.getHeartbeatsHeader();w&&(i["X-Firebase-Client"]=w)}const r={method:"POST",body:JSON.stringify(t),headers:i};let l,d;try{l=yield fetch(n,r)}catch(w){throw to.create("fetch-network-error",{originalErrorMessage:w?.message})}if(200!==l.status)throw to.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(w){throw to.create("fetch-parse-error",{originalErrorMessage:w?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw to.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const g=1e3*Number(f[1]),_=Date.now();return{token:d.token,expireTimeMillis:_+g,issuedAtTimeMillis:_}})).apply(this,arguments)}function Bm(n,t){const{projectId:e,appId:i,apiKey:o}=n.options;return{url:`${Pm}/projects/${e}/apps/${i}:${Fm}?key=${o}`,body:{debug_token:t}}}const Ch="firebase-app-check-database",Hm=1,Dh="firebase-app-check-store";let Vm=null;function Wc(){return(Wc=(0,Me.Z)(function*(n,t){const i=(yield function mC(){return Vm||(Vm=new Promise((n,t)=>{try{const e=indexedDB.open(Ch,Hm);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var o;t(to.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Dh,{keyPath:"compositeKey"})}}catch(e){t(to.create("storage-open",{originalErrorMessage:e?.message}))}}),Vm)}()).transaction(Dh,"readwrite"),r=i.objectStore(Dh).put({compositeKey:n,value:t});return new Promise((l,d)=>{r.onsuccess=f=>{l()},i.onerror=f=>{var g;d(to.create("storage-set",{originalErrorMessage:null===(g=f.target.error)||void 0===g?void 0:g.message}))}})})).apply(this,arguments)}const cp=new Yu.Yd("@firebase/app-check");function Gm(n,t){return(0,Zn.hl)()?function QS(n,t){return function Ny(n,t){return Wc.apply(this,arguments)}(function tI(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{cp.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function $m(){return km().enabled}function Eh(){return zm.apply(this,arguments)}function zm(){return(zm=(0,Me.Z)(function*(){const n=km();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wC={error:"UNKNOWN_ERROR"};function mn(n){return Zn.US.encodeString(JSON.stringify(n),!1)}function up(n){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,Me.Z)(function*(n,t=!1){const e=n.app;Iy(e);const i=Yi(e);let r,o=i.token;if(o&&!Qu(o)&&(i.token=void 0,o=void 0),!o){const f=yield i.cachedTokenPromise;f&&(Qu(f)?o=f:yield Gm(e,void 0))}if(!t&&o&&Qu(o))return{token:o.token};let d,l=!1;if($m()){i.exchangeTokenPromise||(i.exchangeTokenPromise=wh(Bm(e,yield Eh()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const f=yield i.exchangeTokenPromise;return yield Gm(e,f),i.token=f,{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),o=yield Yi(e).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?cp.warn(f.message):cp.error(f),r=f}return o?r?d=Qu(o)?{token:o.token,internalError:r}:TC(r):(d={token:o.token},i.token=o,yield Gm(e,o)):d=TC(r),l&&function EC(n,t){const e=Yi(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}(e,d),d})).apply(this,arguments)}function nI(n){return My.apply(this,arguments)}function My(){return(My=(0,Me.Z)(function*(n){const t=n.app;Iy(t);const{provider:e}=Yi(t);if($m()){const i=yield Eh(),{token:o}=yield wh(Bm(t,i),n.heartbeatServiceProvider);return{token:o}}{const{token:i}=yield e.getToken();return{token:i}}})).apply(this,arguments)}function xy(n,t){const e=Yi(n),i=e.tokenObservers.filter(o=>o.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function CC(n){const{app:t}=n,e=Yi(t);let i=e.tokenRefresher;i||(i=function DC(n){const{app:t}=n;return new ap((0,Me.Z)(function*(){let i;if(i=Yi(t).token?yield up(n,!0):yield up(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=Yi(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},fC.RETRIAL_MIN_WAIT,fC.RETRIAL_MAX_WAIT)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Qu(n){return n.expireTimeMillis-Date.now()>0}function TC(n){return{token:mn(wC),error:n}}class iI{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Yi(this.app);for(const e of t)xy(this.app,e.next);return Promise.resolve()}}const OC="app-check-internal";!function Es(){(0,Zu._registerComponent)(new Cy.wA("app-check",n=>function vk(n,t){return new iI(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(OC).initialize()})),(0,Zu._registerComponent)(new Cy.wA(OC,n=>function SC(n){return{getToken:t=>up(n,t),getLimitedUseToken:()=>nI(n),addTokenListener:t=>function qm(n,t,e,i){const{app:o}=n,r=Yi(o);if(r.tokenObservers=[...r.tokenObservers,{next:e,error:i,type:t}],r.token&&Qu(r.token)){const d=r.token;Promise.resolve().then(()=>{e({token:d.token}),CC(n)}).catch(()=>{})}r.cachedTokenPromise.then(()=>CC(n))}(n,"INTERNAL",t),removeTokenListener:t=>xy(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zu.registerVersion)("@firebase/app-check","0.8.0")}();class kC{constructor(){return(0,Ir.vb)("app-check")}}typeof window<"u"&&window,z(120);const Uy=new u.OlP("angularfire2.auth.use-emulator"),BC=new u.OlP("angularfire2.auth.settings"),By=new u.OlP("angularfire2.auth.tenant-id"),Hy=new u.OlP("angularfire2.auth.langugage-code"),dp=new u.OlP("angularfire2.auth.use-device-language"),Xm=new u.OlP("angularfire.auth.persistence"),pI=(n,t,e,i,o,r,l,d)=>(0,xo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=t.runOutsideAngular(()=>n.auth());if(e&&f.useEmulator(...e),i&&(f.tenantId=i),f.languageCode=o,r&&f.useDeviceLanguage(),l)for(const[g,_]of Object.entries(l))f.settings[g]=_;return d&&f.setPersistence(d),f},[e,i,o,r,l,d]);let sc=(()=>{class n{constructor(e,i,o,r,l,d,f,g,_,w,C,E){const N=new ei.x,A=(0,Ut.of)(void 0).pipe((0,Im.Q)(l.outsideAngular),(0,ti.w)(()=>r.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,8661)))),(0,Lt.U)(()=>(0,xo.on)(e,r,i)),(0,Lt.U)(R=>pI(R,r,d,g,_,w,f,C)),Am({bufferSize:1,refCount:!1}));if(ds(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ut.of)(null);else{A.pipe(Jo()).subscribe();const F=A.pipe((0,ti.w)(W=>W.getRedirectResult().then(re=>re,()=>null)),Ir.iC,Am({bufferSize:1,refCount:!1})),j=A.pipe((0,ti.w)(W=>new Ri.y(re=>({unsubscribe:r.runOutsideAngular(()=>W.onAuthStateChanged(ue=>re.next(ue),ue=>re.error(ue),()=>re.complete()))})))),V=A.pipe((0,ti.w)(W=>new Ri.y(re=>({unsubscribe:r.runOutsideAngular(()=>W.onIdTokenChanged(ue=>re.next(ue),ue=>re.error(ue),()=>re.complete()))}))));this.authState=F.pipe(Nm(j),(0,Ku.R)(l.outsideAngular),(0,Im.Q)(l.insideAngular)),this.user=F.pipe(Nm(V),(0,Ku.R)(l.outsideAngular),(0,Im.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,ti.w)(W=>W?(0,Rn.D)(W.getIdToken()):(0,Ut.of)(null))),this.idTokenResult=this.user.pipe((0,ti.w)(W=>W?(0,Rn.D)(W.getIdTokenResult()):(0,Ut.of)(null))),this.credential=(0,rp.T)(F,N,this.authState.pipe(Wn(W=>!W))).pipe((0,Lt.U)(W=>W?.user?W:null),(0,Ku.R)(l.outsideAngular),(0,Im.Q)(l.insideAngular))}return(0,xo.pX)(this,A,r,{spy:{apply:(R,F,j)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&j.then(V=>N.next(V))}}})}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(xo.Dh),u.LFG(xo.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Ir.HU),u.LFG(Uy,8),u.LFG(BC,8),u.LFG(By,8),u.LFG(Hy,8),u.LFG(dp,8),u.LFG(Xm,8),u.LFG(kC,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class hp{}class fp{}class ta{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const o=e.slice(0,i),r=o.toLowerCase(),l=e.slice(i+1).trim();this.maybeSetNormalizedName(o,r),this.headers.has(r)?this.headers.get(r).push(l):this.headers.set(r,[l])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ta?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ta;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ta?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const o=("a"===t.op?this.headers.get(e):void 0)||[];o.push(...i),this.headers.set(e,o);break;case"d":const r=t.value;if(r){let l=this.headers.get(e);if(!l)return;l=l.filter(d=>-1===r.indexOf(d)),0===l.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,l)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const i=(Array.isArray(e)?e:[e]).map(r=>r.toString()),o=t.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class mI{encodeKey(t){return HC(t)}encodeValue(t){return HC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Vy=/%(\d[a-f0-9])/gi,_I={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function HC(n){return encodeURIComponent(n).replace(Vy,(t,e)=>_I[e]??t)}function ev(n){return`${n}`}class Xu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new mI,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function vI(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const r=o.indexOf("="),[l,d]=-1==r?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,r)),t.decodeValue(o.slice(r+1))],f=e.get(l)||[];f.push(d),e.set(l,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],o=Array.isArray(i)?i.map(ev):[ev(i)];this.map.set(e,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const o=t[i];Array.isArray(o)?o.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Xu({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(ev(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const o=i.indexOf(ev(t.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class bI{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Ih(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function pp(n){return typeof Blob<"u"&&n instanceof Blob}function wI(n){return typeof FormData<"u"&&n instanceof FormData}class Ah{constructor(t,e,i,o){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function tv(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,r=o):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new ta),this.context||(this.context=new bI),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+l}}else this.params=new Xu,this.urlWithParams=e}serializeBody(){return null===this.body?null:Ih(this.body)||pp(this.body)||wI(this.body)||function CI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Xu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wI(this.body)?null:pp(this.body)?this.body.type||null:Ih(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,o=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,l=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,g=t.params||this.params;const _=t.context??this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((w,C)=>w.set(C,t.setHeaders[C]),f)),t.setParams&&(g=Object.keys(t.setParams).reduce((w,C)=>w.set(C,t.setParams[C]),g)),new Ah(e,i,r,{params:g,headers:f,context:_,reportProgress:d,responseType:o,withCredentials:l})}}var or=(()=>((or=or||{})[or.Sent=0]="Sent",or[or.UploadProgress=1]="UploadProgress",or[or.ResponseHeader=2]="ResponseHeader",or[or.DownloadProgress=3]="DownloadProgress",or[or.Response=4]="Response",or[or.User=5]="User",or))();class jy{constructor(t,e=200,i="OK"){this.headers=t.headers||new ta,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Gy extends jy{constructor(t={}){super(t),this.type=or.ResponseHeader}clone(t={}){return new Gy({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ed extends jy{constructor(t={}){super(t),this.type=or.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ed({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class $y extends jy{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function td(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let zy=(()=>{class n{constructor(e){this.handler=e}request(e,i,o={}){let r;if(e instanceof Ah)r=e;else{let f,g;f=o.headers instanceof ta?o.headers:new ta(o.headers),o.params&&(g=o.params instanceof Xu?o.params:new Xu({fromObject:o.params})),r=new Ah(e,i,void 0!==o.body?o.body:null,{headers:f,context:o.context,params:g,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const l=(0,Ut.of)(r).pipe(Xr(f=>this.handler.handle(f)));if(e instanceof Ah||"events"===o.observe)return l;const d=l.pipe(Wn(f=>f instanceof ed));switch(o.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return d.pipe((0,Lt.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,Lt.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,Lt.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,Lt.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Xu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,o={}){return this.request("PATCH",e,td(o,i))}post(e,i,o={}){return this.request("POST",e,td(o,i))}put(e,i,o={}){return this.request("PUT",e,td(o,i))}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(hp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function $C(n,t){return t(n)}function EI(n,t){return(e,i)=>t.intercept(e,{handle:o=>n(o,i)})}const zC=new u.OlP(""),gp=new u.OlP(""),WC=new u.OlP("");function SI(){let n=null;return(t,e)=>{null===n&&(n=((0,u.f3M)(zC,{optional:!0})??[]).reduceRight(EI,$C));const i=(0,u.f3M)(u.HDt),o=i.add();return n(t,e).pipe(Ys(()=>i.remove(o)))}}let Wy=(()=>{class n extends hp{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=(0,u.f3M)(u.HDt)}handle(e){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(gp),...this.injector.get(WC,[])]));this.chain=o.reduceRight((r,l)=>function TI(n,t,e){return(i,o)=>e.runInContext(()=>t(i,r=>n(r,o)))}(r,l,this.injector),$C)}const i=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(Ys(()=>this.pendingTasks.remove(i)))}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(fp),u.LFG(u.lqb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const KC=/^\)\]\}',?\n/;let xI=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new u.vHH(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?(0,Rn.D)(i.\u0275loadImpl()):(0,Ut.of)(null)).pipe((0,ti.w)(()=>new Ri.y(r=>{const l=i.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((A,R)=>l.setRequestHeader(A,R.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const A=e.detectContentTypeHeader();null!==A&&l.setRequestHeader("Content-Type",A)}if(e.responseType){const A=e.responseType.toLowerCase();l.responseType="json"!==A?A:"text"}const d=e.serializeBody();let f=null;const g=()=>{if(null!==f)return f;const A=l.statusText||"OK",R=new ta(l.getAllResponseHeaders()),F=function MI(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||e.url;return f=new Gy({headers:R,status:l.status,statusText:A,url:F}),f},_=()=>{let{headers:A,status:R,statusText:F,url:j}=g(),V=null;204!==R&&(V=typeof l.response>"u"?l.responseText:l.response),0===R&&(R=V?200:0);let W=R>=200&&R<300;if("json"===e.responseType&&"string"==typeof V){const re=V;V=V.replace(KC,"");try{V=""!==V?JSON.parse(V):null}catch(ue){V=re,W&&(W=!1,V={error:ue,text:V})}}W?(r.next(new ed({body:V,headers:A,status:R,statusText:F,url:j||void 0})),r.complete()):r.error(new $y({error:V,headers:A,status:R,statusText:F,url:j||void 0}))},w=A=>{const{url:R}=g(),F=new $y({error:A,status:l.status||0,statusText:l.statusText||"Unknown Error",url:R||void 0});r.error(F)};let C=!1;const E=A=>{C||(r.next(g()),C=!0);let R={type:or.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(R.total=A.total),"text"===e.responseType&&l.responseText&&(R.partialText=l.responseText),r.next(R)},N=A=>{let R={type:or.UploadProgress,loaded:A.loaded};A.lengthComputable&&(R.total=A.total),r.next(R)};return l.addEventListener("load",_),l.addEventListener("error",w),l.addEventListener("timeout",w),l.addEventListener("abort",w),e.reportProgress&&(l.addEventListener("progress",E),null!==d&&l.upload&&l.upload.addEventListener("progress",N)),l.send(d),r.next({type:or.Sent}),()=>{l.removeEventListener("error",w),l.removeEventListener("abort",w),l.removeEventListener("load",_),l.removeEventListener("timeout",w),e.reportProgress&&(l.removeEventListener("progress",E),null!==d&&l.upload&&l.upload.removeEventListener("progress",N)),l.readyState!==l.DONE&&l.abort()}})))}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(ri))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const iv=new u.OlP("XSRF_ENABLED"),OI=new u.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),QC=new u.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class XC{}let Zy=(()=>{class n{constructor(e,i,o){this.doc=e,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ps(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Te),u.LFG(u.Lbi),u.LFG(OI))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function RI(n,t){const e=n.url.toLowerCase();if(!(0,u.f3M)(iv)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=(0,u.f3M)(XC).getToken(),o=(0,u.f3M)(QC);return null!=i&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,i)})),t(n)}var ui=(()=>((ui=ui||{})[ui.Interceptors=0]="Interceptors",ui[ui.LegacyInterceptors=1]="LegacyInterceptors",ui[ui.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ui[ui.NoXsrfProtection=3]="NoXsrfProtection",ui[ui.JsonpSupport=4]="JsonpSupport",ui[ui.RequestsMadeViaParent=5]="RequestsMadeViaParent",ui[ui.Fetch=6]="Fetch",ui))();function Ki(n,t){return{\u0275kind:n,\u0275providers:t}}function nd(...n){const t=[zy,xI,Wy,{provide:hp,useExisting:Wy},{provide:fp,useExisting:xI},{provide:gp,useValue:RI,multi:!0},{provide:iv,useValue:!0},{provide:XC,useClass:Zy}];for(const e of n)t.push(...e.\u0275providers);return(0,u.MR2)(t)}const Ts=new u.OlP("LEGACY_INTERCEPTOR_FN");let rd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[nd(Ki(ui.LegacyInterceptors,[{provide:Ts,useFactory:SI},{provide:gp,useExisting:Ts,multi:!0}]))]}),n})(),cc=(()=>{var n;class t{constructor(i){this.http=i,this.baseUrl="https://us-central1-locumsfunc.cloudfunctions.net/api"}ngOnInit(){}get users$(){return this.http.get(`${this.baseUrl}/users`).pipe((0,Lt.U)(i=>i.users))}user$(i){return this.http.get(`${this.baseUrl}/users/${i}`).pipe((0,Lt.U)(o=>o.user))}create(i){return this.http.post(`${this.baseUrl}/users`,i).pipe((0,Lt.U)(o=>{}))}edit(i){return this.http.patch(`${this.baseUrl}/users/${i.uid}`,i).pipe((0,Lt.U)(o=>{}),Sr((o,r)=>(alert("Error in User Edit. Please make sure your Phone Number is unique and is in the form: 6471234567."),o)))}calendar(){return this.http.get(`${this.baseUrl}/calendar`).pipe((0,Lt.U)(i=>i))}delete(i){return this.http.delete(`${this.baseUrl}`,{body:i}).subscribe(o=>{})}getUser(i){var o=this;return(0,Me.Z)(function*(){return o.http.get(`${o.baseUrl}/users/getByEmail/${i}`).pipe((0,Lt.U)(r=>r))})()}editUser(i,o){var r=this;return(0,Me.Z)(function*(){return r.http.patch(`${r.baseUrl}/users/getByEmail/${i}`,o).pipe((0,Lt.U)(l=>l))})()}addShift(i,o){var r=this;return(0,Me.Z)(function*(){return r.http.patch(`${r.baseUrl}/calendar/${i}`,o).pipe((0,Lt.U)(l=>l))})()}deleteShift(i,o){var r=this;return(0,Me.Z)(function*(){return r.http.patch(`${r.baseUrl}/calendardel/${i}`,o).pipe((0,Lt.U)(l=>l))})()}}return(n=t).\u0275fac=function(i){return new(i||n)(u.LFG(zy))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),Ss=(()=>{class n{constructor(e,i,o){this.fireauth=e,this.userService=i,this.router=o}login(e,i){this.fireauth.signInWithEmailAndPassword(e,i).then(o=>{1==o.user?.emailVerified?(localStorage.setItem("token","true"),this.router.navigate(["/dashboard"])):(alert("Please verify your email address. Check your inbox."),this.sendVerificationMail(o.user),this.router.navigate(["/login"]))},o=>{alert("Login Failed. Please try again."),this.router.navigate(["/login"])})}register(e){var i=this;return(0,Me.Z)(function*(){(yield i.checkEmailExists(e.email))?alert("Email already exists!"):(i.userService.create({displayName:e.displayName,email:e.email,password:e.password,phoneNumber:e.phoneNumber,role:"locum"}).subscribe(l=>{}),alert("Registration Successful! Proceed to login."),i.router.navigate(["/login"]))})()}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},e=>{alert("Error in logout")})}forgotPassword(e){this.fireauth.sendPasswordResetEmail(e).then(()=>{alert("Password reset email sent, check your inbox."),this.router.navigate(["/login"])},i=>{alert("Error in sending password reset email")})}sendVerificationMail(e){e.sendEmailVerification().then(i=>{},i=>{alert("Error in sending verification email")})}googleSignIn(){return this.fireauth.signInWithPopup(new lk.V).then(e=>{this.router.navigate(["/dashboard"]),localStorage.setItem("token","true")},e=>{alert("Error in Google Sign In")})}checkEmailExists(e){var i=this;return(0,Me.Z)(function*(){return i.fireauth.fetchSignInMethodsForEmail(e).then(o=>0!=o.length)})()}canActivate(e,i){return"true"==localStorage.getItem("token")||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(sc),u.LFG(cc),u.LFG(es))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ov=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),od=(()=>{class n extends ov{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Ea=new u.OlP("NgValueAccessor"),PI={provide:Ea,useExisting:(0,u.Gpc)(()=>uc),multi:!0},FI=new u.OlP("CompositionEventMode");let uc=(()=>{class n extends ov{constructor(e,i,o){super(e,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Rk(){const n=G()?G().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(FI,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&u.NdJ("input",function(r){return i._handleInput(r.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(r){return i._compositionEnd(r.target.value)})},features:[u._Bn([PI]),u.qOj]}),n})();const no=new u.OlP("NgValidators"),gl=new u.OlP("NgAsyncValidators");function hD(n){return null!=n}function av(n){return(0,u.QGY)(n)?(0,Rn.D)(n):n}function Tp(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Sp(n,t){return t.map(e=>e(n))}function fD(n){return n.map(t=>function kk(n){return!n.validate}(t)?t:e=>t.validate(e))}function Ip(n){return null!=n?function pD(n){if(!n)return null;const t=n.filter(hD);return 0==t.length?null:function(e){return Tp(Sp(e,t))}}(fD(n)):null}function lv(n){return null!=n?function gD(n){if(!n)return null;const t=n.filter(hD);return 0==t.length?null:function(e){return function oD(...n){const t=(0,fo.jO)(n),{args:e,keys:i}=kc(n),o=new Ri.y(r=>{const{length:l}=e;if(!l)return void r.complete();const d=new Array(l);let f=l,g=l;for(let _=0;_<l;_++){let w=!1;(0,Jr.Xf)(e[_]).subscribe((0,qi.x)(r,C=>{w||(w=!0,g--),d[_]=C},()=>f--,void 0,()=>{(!f||!w)&&(g||r.next(i?il(i,d):d),r.complete())}))}});return t?o.pipe(ma(t)):o}(Sp(e,t).map(av)).pipe((0,Lt.U)(Tp))}}(fD(n)):null}function mD(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function vD(n){return n._rawValidators}function Xy(n){return n._rawAsyncValidators}function cv(n){return n?Array.isArray(n)?n:[n]:[]}function Ap(n,t){return Array.isArray(n)?n.includes(t):n===t}function _D(n,t){const e=cv(t);return cv(n).forEach(o=>{Ap(e,o)||e.push(o)}),e}function yD(n,t){return cv(t).filter(e=>!Ap(n,e))}class bD{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Ip(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=lv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class go extends bD{get formDirective(){return null}get path(){return null}}class ml extends bD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class uv{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ta=(()=>{class n extends uv{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(ml,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]}),n})(),vl=(()=>{class n extends uv{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(go,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[u.qOj]}),n})();const xh="VALID",Np="INVALID",sd="PENDING",Mp="DISABLED";function pv(n){return(Op(n)?n.validators:n)||null}function xp(n,t){return(Op(t)?t.asyncValidators:n)||null}function Op(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function r0(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new u.vHH(1e3,"");if(!i[e])throw new u.vHH(1001,"")}function o0(n,t,e){n._forEachChild((i,o)=>{if(void 0===e[o])throw new u.vHH(1002,"")})}class Rp{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===xh}get invalid(){return this.status===Np}get pending(){return this.status==sd}get disabled(){return this.status===Mp}get enabled(){return this.status!==Mp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(_D(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(_D(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(yD(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(yD(t,this._rawAsyncValidators))}hasValidator(t){return Ap(this._rawValidators,t)}hasAsyncValidator(t){return Ap(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=sd,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Mp,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=xh,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xh||this.status===sd)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mp:xh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=sd,this._hasOwnPendingAsyncValidator=!0;const e=av(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,o)=>i&&i._find(o),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Mp:this.errors?Np:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sd)?sd:this._anyControlsHaveStatus(Np)?Np:xh}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Op(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function TD(n){return Array.isArray(n)?Ip(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function gv(n){return Array.isArray(n)?lv(n):n||null}(this._rawAsyncValidators)}}class _l extends Rp{constructor(t,e,i){super(pv(e),xp(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){o0(this,0,t),Object.keys(t).forEach(i=>{r0(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const o=this.controls[i];o&&o.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,o)=>((i.enabled||this.disabled)&&(e[o]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((o,r)=>{i=e(i,o,r)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class s0 extends _l{}const ts=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>kp}),kp="always";function mv(n,t){return[...t.path,n]}function ad(n,t,e=kp){Pp(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function Bk(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&SD(n,t)})}(n,t),function ID(n,t){const e=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function zI(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&SD(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function $I(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function yl(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),l0(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Oh(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Pp(n,t){const e=vD(n);null!==t.validator?n.setValidators(mD(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=Xy(n);null!==t.asyncValidator?n.setAsyncValidators(mD(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const o=()=>n.updateValueAndValidity();Oh(t._rawValidators,o),Oh(t._rawAsyncValidators,o)}function l0(n,t){let e=!1;if(null!==n){if(null!==t.validator){const o=vD(n);if(Array.isArray(o)&&o.length>0){const r=o.filter(l=>l!==t.validator);r.length!==o.length&&(e=!0,n.setValidators(r))}}if(null!==t.asyncValidator){const o=Xy(n);if(Array.isArray(o)&&o.length>0){const r=o.filter(l=>l!==t.asyncValidator);r.length!==o.length&&(e=!0,n.setAsyncValidators(r))}}}const i=()=>{};return Oh(t._rawValidators,i),Oh(t._rawAsyncValidators,i),e}function SD(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function AD(n,t){Pp(n,t)}function vv(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function ld(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function u0(n,t){if(!t)return null;let e,i,o;return Array.isArray(t),t.forEach(r=>{r.constructor===uc?e=r:function ND(n){return Object.getPrototypeOf(n.constructor)===od}(r)?i=r:o=r}),o||i||e||null}const JI={provide:go,useExisting:(0,u.Gpc)(()=>Fp)},Rh=(()=>Promise.resolve())();let Fp=(()=>{class n extends go{constructor(e,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new _l({},Ip(e),lv(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Rh.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),ad(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Rh.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Rh.then(()=>{const i=this._findContainer(e.path),o=new _l({});AD(o,e),i.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Rh.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Rh.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,ld(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(no,10),u.Y36(gl,10),u.Y36(ts,8))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&u.NdJ("submit",function(r){return i.onSubmit(r)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([JI]),u.qOj]}),n})();function d0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function _v(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const vi=class extends Rp{constructor(t=null,e,i){super(pv(e),xp(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Op(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=_v(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){d0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){d0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){_v(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},tA={provide:ml,useExisting:(0,u.Gpc)(()=>Kc)},OD=(()=>Promise.resolve())();let Kc=(()=>{class n extends ml{constructor(e,i,o,r,l,d){super(),this._changeDetectorRef=l,this.callSetDisabledState=d,this.control=new vi,this._registered=!1,this.name="",this.update=new u.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=u0(0,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),vv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ad(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){OD.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,o=0!==i&&(0,u.VuI)(i);OD.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?mv(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(go,9),u.Y36(no,10),u.Y36(gl,10),u.Y36(Ea,10),u.Y36(u.sBO,8),u.Y36(ts,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([tA]),u.qOj,u.TTD]}),n})(),na=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),f0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const yv=new u.OlP("NgModelWithFormControlWarning"),oA={provide:go,useExisting:(0,u.Gpc)(()=>dc)};let dc=(()=>{class n extends go{constructor(e,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(l0(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return ad(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){yl(e.control||null,e,!1),function YI(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,ld(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,o=this.form.get(e.path);i!==o&&(yl(i||null,e),(n=>n instanceof vi)(o)&&(ad(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);AD(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function Ar(n,t){return l0(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Pp(this.form,this),this._oldForm&&l0(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(no,10),u.Y36(gl,10),u.Y36(ts,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&u.NdJ("submit",function(r){return i.onSubmit(r)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([oA]),u.qOj,u.TTD]}),n})();const LD={provide:ml,useExisting:(0,u.Gpc)(()=>cd)};let cd=(()=>{class n extends ml{set isDisabled(e){}constructor(e,i,o,r,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=u0(0,r)}ngOnChanges(e){this._added||this._setUpControl(),vv(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return mv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(u.Y36(go,13),u.Y36(no,10),u.Y36(gl,10),u.Y36(Ea,10),u.Y36(yv,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([LD]),u.qOj,u.TTD]}),n})();const UD={provide:Ea,useExisting:(0,u.Gpc)(()=>kh),multi:!0};function m0(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let kh=(()=>{class n extends od{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=m0(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function sA(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&u.NdJ("change",function(r){return i.onChange(r.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([UD]),u.qOj]}),n})(),Up=(()=>{class n{constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(m0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(kh,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const aA={provide:Ea,useExisting:(0,u.Gpc)(()=>v0),multi:!0};function BD(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let v0=(()=>{class n extends od{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const o=e.map(r=>this._getOptionId(r));i=(r,l)=>{r._setSelected(o.indexOf(l.toString())>-1)}}else i=(o,r)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const o=[],r=i.selectedOptions;if(void 0!==r){const l=r;for(let d=0;d<l.length;d++){const g=this._getOptionValue(l[d].value);o.push(g)}}else{const l=i.options;for(let d=0;d<l.length;d++){const f=l[d];if(f.selected){const g=this._getOptionValue(f.value);o.push(g)}}}this.value=o,e(o)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function lA(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&u.NdJ("change",function(r){return i.onChange(r.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([aA]),u.qOj]}),n})(),Bp=(()=>{class n{constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(BD(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(BD(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(v0,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ZD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[f0]}),n})();class dd extends Rp{constructor(t,e,i){super(pv(e),xp(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){o0(this,0,t),t.forEach((i,o)=>{r0(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function pA(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let KD=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new n;return e.useNonNullable=!0,e}group(e,i=null){const o=this._reduceControls(e);let r={};return pA(i)?r=i:null!==i&&(r.validators=i.validator,r.asyncValidators=i.asyncValidator),new _l(o,r)}record(e,i=null){const o=this._reduceControls(e);return new s0(o,i)}control(e,i,o){let r={};return this.useNonNullable?(pA(i)?r=i:(r.validators=i,r.asyncValidators=o),new vi(e,{...r,nonNullable:!0})):new vi(e,i,o)}array(e,i,o){const r=e.map(l=>this._createControl(l));return new dd(r,i,o)}_reduceControls(e){const i={};return Object.keys(e).forEach(o=>{i[o]=this._createControl(e[o])}),i}_createControl(e){return e instanceof vi||e instanceof Rp?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JD=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:ts,useValue:e.callSetDisabledState??kp}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[ZD]}),n})(),mA=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:yv,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:ts,useValue:e.callSetDisabledState??kp}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[ZD]}),n})(),vA=(()=>{class n{constructor(e){this.auth=e,this.email="",this.password=""}ngOnInit(){}login(){""!=this.email&&""!=this.password?(this.auth.login(this.email,this.password),this.email="",this.password=""):alert("Please fill all the fields")}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(Ss))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login"]],decls:21,vars:2,consts:[[1,"loginContents"],[1,"col-md-4","mt-3",2,"margin","auto"],["src","../../../assets/city_logo_white.png",2,"display","block","margin-left","auto","margin-right","auto","width","50%","height","50%"],["action","",1,"mt-5","p-5",2,"background-color","var(--tertiary-color)","border-radius","3%"],[1,"mb-3",2,"color","var(--secondary-color)"],[1,"form-floating","mb-3"],["type","text","id","floatingInput","placeholder","Username","name","username",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput",2,"color","var(--primary-color)"],["type","password","id","floatingPassword","placeholder","Password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword",2,"color","var(--primary-color)"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["routerLink","/register",1,"btn","me-md-2","testReg"],["type","button",1,"btn","me-md-2",3,"click"],["routerLink","/forgot-password"]],template:function(e,i){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.TgZ(3,"form",3)(4,"h5",4),u._uU(5,"Login "),u.qZA(),u.TgZ(6,"div",5)(7,"input",6),u.NdJ("ngModelChange",function(r){return i.email=r}),u.qZA(),u.TgZ(8,"label",7),u._uU(9,"Email Address"),u.qZA()(),u.TgZ(10,"div",5)(11,"input",8),u.NdJ("ngModelChange",function(r){return i.password=r}),u.qZA(),u.TgZ(12,"label",9),u._uU(13,"Password"),u.qZA()(),u.TgZ(14,"div",10)(15,"div",11),u._uU(16,"Register"),u.qZA(),u.TgZ(17,"button",12),u.NdJ("click",function(){return i.login()}),u._uU(18,"Login"),u.qZA()(),u.TgZ(19,"a",13),u._uU(20,"Forgot Password?"),u.qZA()()()()),2&e&&(u.xp6(7),u.Q6J("ngModel",i.email),u.xp6(4),u.Q6J("ngModel",i.password))},dependencies:[hl,na,uc,Ta,vl,Kc,Fp],styles:["button[_ngcontent-%COMP%]{color:var(--secondary-color);border-color:var(--primary-color)}button[_ngcontent-%COMP%]:hover{color:var(--secondary-color);background-color:var(--shaded-primary);border-color:var(--primary-color)}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--secondary-color)}a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:var(--secondary-color)}.testReg[_ngcontent-%COMP%]{color:var(--secondary-color);border-color:var(--primary-color)}.testReg[_ngcontent-%COMP%]:hover{color:var(--secondary-color);background-color:var(--shaded-primary);border-color:var(--primary-color)}"]}),n})(),Fh=(()=>{class n{constructor(e,i){this.auth=e,this.userService=i,this.email="",this.password="",this.displayName="",this.phoneNumber=""}ngOnInit(){}register(){var e=this;return(0,Me.Z)(function*(){if(""==e.email||""==e.password||""==e.displayName||""==e.phoneNumber)return void alert("Please fill all the fields");if(e.password.length<6)return void alert("Password must be at least 6 characters");e.phoneNumber&&(e.phoneNumber=e.phoneNumber.replace(/[^0-9]/g,""),e.phoneNumber="+1"+e.phoneNumber);const i={email:e.email,password:e.password,displayName:e.displayName,phoneNumber:e.phoneNumber};console.log(i),e.auth.register(i),e.email="",e.password="",e.displayName="",e.phoneNumber=""})()}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(Ss),u.Y36(cc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:4,consts:[[1,"signupContents"],[1,"col-md-4","mt-3",2,"margin","auto"],["src","../../../assets/city_logo_white.png",2,"display","block","margin-left","auto","margin-right","auto","width","40%","height","40%"],["action","",1,"mt-5","p-5",2,"background-color","var(--tertiary-color)","border-radius","3%"],[1,"mb-3",2,"color","var(--secondary-color)"],[1,"form-floating","mb-3"],["type","text","id","floatingInput","placeholder","displayName","name","displayName",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput",2,"color","var(--primary-color)"],["type","text","id","floatingPhone","placeholder","phoneNumber","name","phoneNumber",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPhone",2,"color","var(--primary-color)"],["type","text","id","floatingEmail","placeholder","Username","name","username",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingEmail",2,"color","var(--primary-color)"],["type","password","id","floatingPassword","placeholder","Password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword",2,"color","var(--primary-color)"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","me-md-2",2,"color","var(--secondary-color)","border-color","var(--primary-color)",3,"click"],["routerLink","/"]],template:function(e,i){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.TgZ(3,"form",3)(4,"h5",4),u._uU(5,"Register as a Locum"),u.qZA(),u.TgZ(6,"div",5)(7,"input",6),u.NdJ("ngModelChange",function(r){return i.displayName=r}),u.qZA(),u.TgZ(8,"label",7),u._uU(9,"Full Name"),u.qZA()(),u.TgZ(10,"div",5)(11,"input",8),u.NdJ("ngModelChange",function(r){return i.phoneNumber=r}),u.qZA(),u.TgZ(12,"label",9),u._uU(13,"Phone Number"),u.qZA()(),u.TgZ(14,"div",5)(15,"input",10),u.NdJ("ngModelChange",function(r){return i.email=r}),u.qZA(),u.TgZ(16,"label",11),u._uU(17,"Email Address"),u.qZA()(),u.TgZ(18,"div",5)(19,"input",12),u.NdJ("ngModelChange",function(r){return i.password=r}),u.qZA(),u.TgZ(20,"label",13),u._uU(21,"Password"),u.qZA()(),u.TgZ(22,"div",14)(23,"button",15),u.NdJ("click",function(){return i.register()}),u._uU(24,"Sign Up"),u.qZA()(),u.TgZ(25,"a",16),u._uU(26,"Already have an account?"),u.qZA(),u._UZ(27,"br"),u.qZA()()()),2&e&&(u.xp6(7),u.Q6J("ngModel",i.displayName),u.xp6(4),u.Q6J("ngModel",i.phoneNumber),u.xp6(4),u.Q6J("ngModel",i.email),u.xp6(4),u.Q6J("ngModel",i.password))},dependencies:[hl,na,uc,Ta,vl,Kc,Fp],styles:["button[_ngcontent-%COMP%]{color:var(--secondary-color);border-color:var(--primary-color)}button[_ngcontent-%COMP%]:hover{color:var(--secondary-color);background-color:var(--shaded-primary);border-color:var(--primary-color)}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--secondary-color)}a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:var(--secondary-color)}"]}),n})();var _A=z(4266);const Tv=["addListener","removeListener"],Sv=["addEventListener","removeEventListener"],Ji=["on","off"];function mo(n,t,e,i){if((0,hr.m)(e)&&(i=e,e=void 0),i)return mo(n,t,e).pipe(ma(i));const[o,r]=function XD(n){return(0,hr.m)(n.addEventListener)&&(0,hr.m)(n.removeEventListener)}(n)?Sv.map(l=>d=>n[l](t,d,e)):function QD(n){return(0,hr.m)(n.addListener)&&(0,hr.m)(n.removeListener)}(n)?Tv.map(C0(n,t)):function yA(n){return(0,hr.m)(n.on)&&(0,hr.m)(n.off)}(n)?Ji.map(C0(n,t)):[];if(!o&&(0,_A.z)(n))return(0,Pi.z)(l=>mo(l,t,e))((0,Jr.Xf)(n));if(!o)throw new TypeError("Invalid event target");return new Ri.y(l=>{const d=(...f)=>l.next(1<f.length?f:f[0]);return o(d),()=>r(d)})}function C0(n,t){return e=>i=>n[e](t,i)}var Iv=z(6321),eE=z(671);const{isArray:bA}=Array;function iE(n){return 1===n.length&&bA(n[0])?n[0]:n}function D0(...n){const t=(0,fo.jO)(n),e=iE(n);return e.length?new Ri.y(i=>{let o=e.map(()=>[]),r=e.map(()=>!1);i.add(()=>{o=r=null});for(let l=0;!i.closed&&l<e.length;l++)(0,Jr.Xf)(e[l]).subscribe((0,qi.x)(i,d=>{if(o[l].push(d),o.every(f=>f.length)){const f=o.map(g=>g.shift());i.next(t?t(...f):f),o.some((g,_)=>!g.length&&r[_])&&i.complete()}},()=>{r[l]=!0,!o[l].length&&i.complete()}));return()=>{o=r=null}}):po.E}var Uh=z(2420);function sr(n){return(0,fr.e)((t,e)=>{(0,Jr.Xf)(n).subscribe((0,qi.x)(e,()=>e.complete(),Uh.Z)),!e.closed&&t.subscribe(e)})}function Av(...n){const t=(0,fo.jO)(n);return(0,fr.e)((e,i)=>{const o=n.length,r=new Array(o);let l=n.map(()=>!1),d=!1;for(let f=0;f<o;f++)(0,Jr.Xf)(n[f]).subscribe((0,qi.x)(i,g=>{r[f]=g,!d&&!l[f]&&(l[f]=!0,(d=l.every(nl.y))&&(l=null))},Uh.Z));e.subscribe((0,qi.x)(i,f=>{if(d){const g=[f,...r];i.next(t?t(...g):g)}}))})}var Bh=z(3997);Math,Math,Math;const iN=["*"],_N=["dialog"];function Wh(n){return"string"==typeof n}function fd(n){return null!=n}function qh(n){return(n||document.body).getBoundingClientRect()}const HN={animation:!0,transitionTimerDelayMs:5},hP=()=>{},{transitionTimerDelayMs:fP}=HN,jv=new Map,Ms=(n,t,e,i)=>{let o=i.context||{};const r=jv.get(t);if(r)switch(i.runningTransition){case"continue":return po.E;case"stop":n.run(()=>r.transition$.complete()),o=Object.assign(r.context,o),jv.delete(t)}const l=e(t,i.animation,o)||hP;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>l()),(0,Ut.of)(void 0).pipe(function uP(n){return t=>new Ri.y(e=>t.subscribe({next:l=>n.run(()=>e.next(l)),error:l=>n.run(()=>e.error(l)),complete:()=>n.run(()=>e.complete())}))}(n));const d=new ei.x,f=new ei.x,g=d.pipe(function CA(...n){return t=>_s(t,(0,Ut.of)(...n))}(!0));jv.set(t,{transition$:d,complete:()=>{f.next(),f.complete()},context:o});const _=function dP(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const w=mo(t,"transitionend").pipe(sr(g),Wn(({target:E})=>E===t));(function Lh(...n){return 1===(n=iE(n)).length?(0,Jr.Xf)(n[0]):new Ri.y(function wA(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push((0,Jr.Xf)(n[i]).subscribe((0,qi.x)(t,o=>{if(e){for(let r=0;r<e.length;r++)r!==i&&e[r].unsubscribe();e=null}t.next(o)})))}}(n))})(function nE(n=0,t,e=Iv.P){let i=-1;return null!=t&&((0,eE.K)(t)?e=t:i=t),new Ri.y(o=>{let r=function tE(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;r<0&&(r=0);let l=0;return e.schedule(function(){o.closed||(o.next(l++),0<=i?this.schedule(void 0,i):o.complete())},r)})}(_+fP).pipe(sr(g)),w,f).pipe(sr(g)).subscribe(()=>{jv.delete(t),n.run(()=>{l(),d.next(),d.complete()})})}),d.asObservable()};let Jp=(()=>{class n{constructor(){this.animation=HN.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),h1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),f1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),Wv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var tn=(()=>((tn=tn||{})[tn.Tab=9]="Tab",tn[tn.Enter=13]="Enter",tn[tn.Escape=27]="Escape",tn[tn.Space=32]="Space",tn[tn.PageUp=33]="PageUp",tn[tn.PageDown=34]="PageDown",tn[tn.End=35]="End",tn[tn.Home=36]="Home",tn[tn.ArrowLeft=37]="ArrowLeft",tn[tn.ArrowUp=38]="ArrowUp",tn[tn.ArrowRight=39]="ArrowRight",tn[tn.ArrowDown=40]="ArrowDown",tn))();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const cM=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function uM(n){const t=Array.from(n.querySelectorAll(cM)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),bt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class Pt{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}let fn=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(ki(1)).subscribe(()=>{Ms(this._zone,this._el.nativeElement,(e,i)=>{i&&qh(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ms(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(u.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),u.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[u.jDz],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();class In{update(t){}close(t){}dismiss(t){}}const kn=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],vo=["animation","backdropClass"];class o_{_applyWindowOptions(t,e){kn.forEach(i=>{fd(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){vo.forEach(i=>{fd(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(sr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(sr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,o){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=o,this._closed=new ei.x,this._dismissed=new ei.x,this._hidden=new ei.x,t.instance.dismissEvent.subscribe(r=>{this.dismiss(r)}),this.result=new Promise((r,l)=>{this._resolve=r,this._reject=l}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function tb(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ut.of)(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),D0(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var hc=(()=>((hc=hc||{})[hc.BACKDROP_CLICK=0]="BACKDROP_CLICK",hc[hc.ESC=1]="ESC",hc))();let NM=(()=>{class n{constructor(e,i,o){this._document=e,this._elRef=i,this._zone=o,this._closed$=new ei.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new ei.x,this.hidden=new ei.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Wh(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ki(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},l=D0(Ms(this._zone,e,()=>e.classList.remove("show"),i),Ms(this._zone,this._dialogEl.nativeElement,()=>{},i));return l.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),l}_show(){const e={animation:this.animation,runningTransition:"continue"};D0(Ms(this._zone,this._elRef.nativeElement,(r,l)=>{l&&qh(r),r.classList.add("show")},e),Ms(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{mo(e,"keydown").pipe(sr(this._closed$),Wn(o=>o.which===tn.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(hc.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;mo(this._dialogEl.nativeElement,"mousedown").pipe(sr(this._closed$),(0,gi.b)(()=>i=!1),(0,ti.w)(()=>mo(e,"mouseup").pipe(sr(this._closed$),ki(1))),Wn(({target:o})=>e===o)).subscribe(()=>{i=!0}),mo(e,"click").pipe(sr(this._closed$)).subscribe(({target:o})=>{e===o&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(hc.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),o=uM(e)[0];(i||o||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let o;o=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ms(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(Te),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&u.Gf(_N,7),2&e){let o;u.iGM(o=u.CRH())&&(i._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(u.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),u.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),u.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[u.jDz],ngContentSelectors:iN,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(u.F$t(),u.TgZ(0,"div",0,1)(2,"div",2),u.Hsn(3),u.qZA()()),2&e&&u.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),PH=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,o=i.style,{overflow:r,paddingRight:l}=o;if(e>0){const d=parseFloat(window.getComputedStyle(i).paddingRight);o.paddingRight=`${d+e}px`}return o.overflow="hidden",()=>{e>0&&(o.paddingRight=l),o.overflow=r}}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FH=(()=>{class n{constructor(e,i,o,r,l,d,f){this._applicationRef=e,this._injector=i,this._environmentInjector=o,this._document=r,this._scrollBar=l,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new ei.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const g=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{n.runOutsideAngular(()=>{const o=mo(t,"focusin").pipe(sr(e),(0,Lt.U)(r=>r.target));mo(t,"keydown").pipe(sr(e),Wn(r=>r.which===tn.Tab),Av(o)).subscribe(([r,l])=>{const[d,f]=uM(t);(l===d||l===t)&&r.shiftKey&&(f.focus(),r.preventDefault()),l===f&&!r.shiftKey&&(d.focus(),r.preventDefault())}),i&&mo(t,"click").pipe(sr(e),Av(o),(0,Lt.U)(r=>r[1])).subscribe(r=>r.focus())})})(this._ngZone,g.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(g.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,o){const r=o.container instanceof HTMLElement?o.container:fd(o.container)?this._document.querySelector(o.container):this._document.body,l=this._rendererFactory.createRenderer(null,null);if(!r)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const d=new In,f=(e=o.injector||e).get(u.lqb,null)||this._environmentInjector,g=this._getContentRef(e,f,i,d,o);let _=!1!==o.backdrop?this._attachBackdrop(r):void 0,w=this._attachWindowComponent(r,g.nodes),C=new o_(w,g,_,o.beforeDismiss);return this._registerModalRef(C),this._registerWindowCmpt(w),C.hidden.pipe(ki(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(l.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=E=>{C.close(E)},d.dismiss=E=>{C.dismiss(E)},d.update=E=>{C.update(E)},C.update(o),1===this._modalRefs.length&&l.addClass(this._document.body,"modal-open"),_&&_.instance&&_.changeDetectorRef.detectChanges(),w.changeDetectorRef.detectChanges(),C}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=(0,u.LMc)(fn,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let o=(0,u.LMc)(NM,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(o.hostView),e.appendChild(o.location.nativeElement),o}_getContentRef(e,i,o,r,l){return o?o instanceof u.Rgc?this._createFromTemplateRef(o,r):Wh(o)?this._createFromString(o):this._createFromComponent(e,i,o,r,l):new Pt([])}_createFromTemplateRef(e,i){const r=e.createEmbeddedView({$implicit:i,close(l){i.close(l)},dismiss(l){i.dismiss(l)}});return this._applicationRef.attachView(r),new Pt([r.rootNodes],r)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new Pt([[i]])}_createFromComponent(e,i,o,r,l){const d=u.zs3.create({providers:[{provide:In,useValue:r}],parent:e}),f=(0,u.LMc)(o,{environmentInjector:i,elementInjector:d}),g=f.location.nativeElement;return l.scrollable&&g.classList.add("component-host-scrollable"),this._applicationRef.attachView(f.hostView),new Pt([[g]],f.hostView,f)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(o=>{o!==e&&"SCRIPT"!==o.nodeName&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const o=this._modalRefs.indexOf(e);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(u.lqb),u.LFG(Te),u.LFG(PH),u.LFG(u.FYo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LH=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Jp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MM=(()=>{class n{constructor(e,i,o){this._injector=e,this._modalStack=i,this._config=o}open(e,i={}){const o={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(u.zs3),u.LFG(FH),u.LFG(LH))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[MM]}),n})(),$P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),QP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),eF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),tF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),nF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),iF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),rF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),oF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();new u.OlP("live announcer delay",{providedIn:"root",factory:function XH(){return 100}});let sF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),aF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const eV=[$N,h1,f1,Wv,S,bt,VP,$P,aF,QP,eF,tF,nF,iF,rF,oF,sF];let tV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[eV,$N,h1,f1,Wv,S,bt,VP,$P,aF,QP,eF,tF,nF,iF,rF,oF,sF]}),n})(),lF=(()=>{class n{constructor(){this._BS=new Tr.X({title:"",user:{}})}edit(e){this._BS.next({title:"Edit User",user:e})}create(){this._BS.next({title:"Create User",user:{}})}get title$(){return this._BS.asObservable().pipe((0,Lt.U)(e=>e.title))}get user$(){return this._BS.asObservable().pipe((0,Lt.U)(e=>e.user))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nV(n,t){1&n&&u.GkF(0)}let cF=(()=>{class n{constructor(e,i,o,r){this.modal=e,this.userService=i,this.userForm=o,this.auth=r,this.form=new _l({uid:new vi(""),email:new vi(""),displayName:new vi(""),password:new vi(""),role:new vi(""),phoneNumber:new vi("")})}ngOnInit(){this.title$=this.userForm.title$,this.user$=this.userForm.user$.pipe((0,gi.b)(e=>{e?this.form.patchValue(e):this.form.reset({})}))}dismiss(){this.modal.dismiss("modal dismissed")}save(){let{displayName:e,phoneNumber:i,uid:o}=this.form.value;e&&i?("+"!==i[0]&&"1"!==i[0]&&(i="+1"+i),this.modal.close({displayName:e,phoneNumber:i,uid:o})):alert("Missing Fields!")}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(In),u.Y36(cc),u.Y36(lF),u.Y36(Ss))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-user-form"]],decls:22,vars:4,consts:[[4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","string","formControlName","displayName","placeholder","Enter your Name",1,"form-control"],["formControlName","phoneNumber","placeholder","Enter your phone number (eg. 6471234567)","type","tel","name","tel",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,i){1&e&&(u.YNc(0,nV,1,0,"ng-container",0),u.ALo(1,"async"),u.TgZ(2,"div",1)(3,"h4",2),u._uU(4," Edit Your Profile "),u.qZA(),u.TgZ(5,"button",3),u.NdJ("click",function(){return i.dismiss()}),u.qZA()(),u.TgZ(6,"div",4)(7,"form",5),u.NdJ("ngSubmit",function(){return i.save()}),u.TgZ(8,"div",6)(9,"label"),u._uU(10,"Full Name"),u.qZA(),u._UZ(11,"input",7),u.qZA(),u.TgZ(12,"div",6)(13,"label"),u._uU(14,"Phone Number"),u.qZA(),u._UZ(15,"input",8),u.qZA(),u._UZ(16,"br"),u.qZA()(),u.TgZ(17,"div",9)(18,"button",10),u.NdJ("click",function(){return i.dismiss()}),u._uU(19,"Cancel"),u.qZA(),u.TgZ(20,"button",11),u.NdJ("click",function(){return i.save()}),u._uU(21,"Save"),u.qZA()()),2&e&&(u.Q6J("ngIf",u.lcZ(1,2,i.user$)),u.xp6(7),u.Q6J("formGroup",i.form))},dependencies:[Cr,na,uc,Ta,vl,dc,cd,Fs],encapsulation:2}),n})();var n;if(function(n){class t{}n.CalendarPropsAndEvents=t,n.CalendarConfig=class e extends t{},n.Calendar=class i extends t{},n.CalendarColumn=class o{};class r{}n.MonthPropsAndEvents=r,n.MonthConfig=class l extends r{},n.Month=class d extends r{};class f{}n.NavigatorPropsAndEvents=f,n.NavigatorConfig=class g extends f{},n.Navigator=class _ extends f{},n.Locale=class w{};class C{}n.MenuPropsAndEvents=C,n.MenuConfig=class E extends C{},n.Menu=class N extends C{},n.MenuBar=class A{};class R{}n.SwitcherPropsAndEvents=R,n.SwitcherConfig=class F extends R{},n.Switcher=class j extends R{},n.Date=class V{},n.DayPilotDateCache=class W{},n.Util=class re{},n.ColorUtil=class ue{},n.Http=class we{},n.Duration=class De{},n.Event=class tt{},n.Selection=class Ee{};class ve{}n.ModalPropsAndEvents=ve;class ye extends ve{}n.ModalConfig=ye,n.Modal=class ke extends ve{},n.ModalAlertConfig=class Be extends ye{},n.ModalConfirmConfig=class Gt extends ye{},n.ModalPromptConfig=class $t extends ye{},n.ModalFormConfig=class Tn extends ye{}}(x||(x={})),typeof x>"u")var x={};function OM(){return 65536*(1+Math.random())|0}function a_(n){return JSON.stringify(n)}(function(){function n(r){var l=x.Date.Cache.Ticks;if(l[r])return x.Stats.cacheHitsTicks+=1,l[r];var d,f=new Date(r),g=f.getUTCMilliseconds();d=0===g?"":g<10?".00"+g:g<100?".0"+g:"."+g;var _=f.getUTCSeconds();_<10&&(_="0"+_);var w=f.getUTCMinutes();w<10&&(w="0"+w);var C=f.getUTCHours();C<10&&(C="0"+C);var E=f.getUTCDate();E<10&&(E="0"+E);var N=f.getUTCMonth()+1;N<10&&(N="0"+N);var A=f.getUTCFullYear();if(A<=0)throw"The minimum year supported is 1.";A<10?A="000"+A:A<100?A="00"+A:A<1e3&&(A="0"+A);var R=A+"-"+N+"-"+E+"T"+C+":"+w+":"+_+d;return l[r]=R,R}function t(r,l){return!x.Util.isNullOrUndefined(r)&&!x.Util.isNullOrUndefined(l)&&r.toLocaleLowerCase()===l.toLocaleLowerCase()}function e(r){r=Math.min(r,255);var l=(r=Math.max(r,0)).toString(16);return r<16?"0"+l:l}if(typeof x.$>"u"){typeof x.Global>"u"&&(x.Global={}),x.$=function(r){return document.getElementById(r)},x.isKhtml=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("KHTML"),x.isIE=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("MSIE"),x.mo2=function(r,l){if(typeof(l=l||window.event).offsetX<"u"){var d={x:l.offsetX+1,y:l.offsetY+1};if(!r)return d;for(var f=l.srcElement;f&&f!==r;)"SPAN"!==f.tagName&&(d.x+=f.offsetLeft,f.offsetTop>0&&(d.y+=f.offsetTop-f.scrollTop)),f=f.offsetParent;return f?d:null}if(typeof l.layerX<"u"){if(d={x:l.layerX,y:l.layerY,src:l.target},!r)return d;for(f=l.target;f&&"absolute"!==f.style.position&&"relative"!==f.style.position;)f=f.parentNode,x.isKhtml&&(d.y+=f.scrollTop);for(;f&&f!==r;)d.x+=f.offsetLeft,d.y+=f.offsetTop-f.scrollTop,f=f.offsetParent;return f?d:null}return null},x.mo3=function(r,l){var d,f=x.page(l);if(f)if(r){var g=x.abs(r);if(!g)throw new Error("no abs");d={x:f.x-g.x,y:f.y-g.y}}else d={x:f.x,y:f.y};else if(!(d=x.mo2(r,l)))return null;return d.shift=l.shiftKey,d.meta=l.metaKey,d.ctrl=l.ctrlKey,d.alt=l.altKey,d},x.browser={},x.browser.ie9=((r=document.createElement("div")).innerHTML="\x3c!--[if IE 9]><i></i><![endif]--\x3e",1===r.getElementsByTagName("i").length),x.browser.ielt9=function(){var r=document.createElement("div");return r.innerHTML="\x3c!--[if lt IE 9]><i></i><![endif]--\x3e",1===r.getElementsByTagName("i").length}(),x.browser.hover=!window.matchMedia("(any-hover: none)").matches,x.touch={},x.page=function(r){var l=r.changedTouches&&r.changedTouches[0]?r.changedTouches[0]:r;return typeof l.pageX>"u"||x.browser.ie?typeof r.clientX<"u"&&document.body&&document.documentElement?{x:r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:r.clientY+document.body.scrollTop+document.documentElement.scrollTop}:null:{x:l.pageX,y:l.pageY}},x.abs=function(r,l){if(!r)return null;if(r.getBoundingClientRect){var d=x.absBoundingClientBased(r);if(l){var f=x.absOffsetBased(r,!1);l=x.absOffsetBased(r,!0),d.x+=l.x-f.x,d.y+=l.y-f.y,d.w=l.w,d.h=l.h}return d}return x.absOffsetBased(r,l)},x.absBoundingClientBased=function(r){var l=r.getBoundingClientRect();return{x:l.left+window.pageXOffset,y:l.top+window.pageYOffset,w:r.clientWidth,h:r.clientHeight,toString:function(){return"x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h}}},x.absOffsetBased=function(r,l){for(var d={x:r.offsetLeft,y:r.offsetTop,w:r.clientWidth,h:r.clientHeight,toString:function(){return"x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h}};r.offsetParent;)d.x-=(r=r.offsetParent).scrollLeft,d.y-=r.scrollTop,l&&(d.x<0&&(d.w+=d.x,d.x=0),d.y<0&&(d.h+=d.y,d.y=0),r.scrollLeft>0&&d.x+d.w>r.clientWidth&&(d.w-=d.x+d.w-r.clientWidth),r.scrollTop&&d.y+d.h>r.clientHeight&&(d.h-=d.y+d.h-r.clientHeight)),d.x+=r.offsetLeft,d.y+=r.offsetTop;var f=x.pageOffset();return d.x+=f.x,d.y+=f.y,d},x.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)},x.distance=function(r,l){return Math.sqrt(Math.pow(r.x-l.x,2)+Math.pow(r.y-l.y,2))},x.sheet=function(){var r=document.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(r);var l=!!r.styleSheet;return{rules:[],commit:function(){l&&(r.styleSheet.cssText=this.rules.join("\n"))},add:function(f,g,_){return l?void this.rules.push(f+"{"+g+"}"):void(r.sheet.insertRule?(typeof _>"u"&&(_=r.sheet.cssRules.length),r.sheet.insertRule(f+"{"+g+"}",_)):r.sheet.addRule&&r.sheet.addRule(f,g,_))}}},x.gs=function(r,l){return window.getComputedStyle(r,null).getPropertyValue(l)||""},x.StyleReader=function(r){this.get=function(l){return r?x.gs(r,l):null},this.getPx=function(l){var d=this.get(l);return-1===d.indexOf("px")?void 0:parseInt(d,10)}},function(){if(!x.Global.defaultCss){var r=x.sheet();r.add(".calendar_default_main","border: 1px solid #c0c0c0; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"),r.add(".calendar_default_main *, .calendar_default_main *:before, .calendar_default_main *:after","box-sizing: content-box;"),r.add(".calendar_default_rowheader_inner,.calendar_default_cornerright_inner,.calendar_default_corner_inner,.calendar_default_colheader_inner,.calendar_default_alldayheader_inner","color: #333;background: #f3f3f3;"),r.add(".calendar_default_cornerright_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;\tborder-bottom: 1px solid #c0c0c0;"),r.add(".calendar_default_direction_rtl .calendar_default_cornerright_inner","border-right: 1px solid #c0c0c0;"),r.add(".calendar_default_rowheader_inner","font-size: 16pt;text-align: right; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0; padding: 3px;"),r.add(".calendar_default_direction_rtl .calendar_default_rowheader_inner","border-right: none;"),r.add(".calendar_default_corner_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"),r.add(".calendar_default_direction_rtl .calendar_default_corner_inner","border-right: none;"),r.add(".calendar_default_rowheader_minutes","font-size:10px;vertical-align: super;padding-left: 2px;padding-right: 2px;"),r.add(".calendar_default_colheader_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0; display: flex; align-items: center; justify-content: center; font-size: 13px;"),r.add(".calendar_default_cell_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #ddd;border-bottom: 1px solid #ddd; background: #f9f9f9;"),r.add(".calendar_default_cell_business .calendar_default_cell_inner","background: #fff"),r.add(".calendar_default_alldayheader_inner","text-align: center;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"),r.add(".calendar_default_message","opacity: 0.9; padding: 10px; color: #ffffff;background: #ffa216;"),r.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner","color: #333; border: 1px solid #999;"),r.add(".calendar_default_event_bar","top: 0px;bottom: 0px;left: 0px;width: 6px;background-color: #9dc8e8;"),r.add(".calendar_default_event_bar_inner","position: absolute;width: 6px;background-color: #1066a8;"),r.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),r.add(".calendar_default_selected .calendar_default_event_inner","background: #ddd;"),r.add(".calendar_default_alldayevent_inner","position: absolute;top: 2px;bottom: 2px;left: 2px;right: 2px;overflow:hidden;padding: 2px;margin-right: 1px; font-size: 13px;"),r.add(".calendar_default_event_withheader .calendar_default_event_inner","padding-top: 15px;"),r.add(".calendar_default_event","cursor: default;"),r.add(".calendar_default_event_inner","position: absolute;overflow: hidden;top: 0px;bottom: 0px;left: 0px;right: 0px;padding: 2px 2px 2px 8px; font-size: 13px;"),r.add(".calendar_default_shadow_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;background-color: #666666; opacity: 0.5;"),r.add(".calendar_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),r.add(".calendar_default_event_delete:hover","opacity: 1;-ms-filter: none;"),r.add(".calendar_default_scroll_up","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAB3RJTUUH2wESDiYcrhwCiQAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAARnQU1BAACxjwv8YQUAAACcSURBVHjaY2AgF9wWsTW6yGMlhi7OhC7AyMDQzMnBXIpFHAFuCtuaMTP+P8nA8P/b1x//FfW/HHuF1UQmxv+NUP1c3OxMVVhNvCVi683E8H8LXOY/w9+fTH81tF8fv4NiIpBRj+YoZtZ/LDUoJmKYhsVUpv0MDiyMDP96sIYV0FS2/8z9ICaLlOhvS4b/jC//MzC8xBG0vJeF7GQBlK0xdiUzCtsAAAAASUVORK5CYII=);"),r.add(".calendar_default_scroll_down","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAACqSURBVChTY7wpam3L9J+xmQEP+PGPKZZxP4MDi4zI78uMDIwa2NT+Z2DYovrmiC+TI8OBP/8ZmEqwGvif4e8vxr+FIDkmEKH25vBWBgbG0+iK/zEwLtF+ffwOXCGI8Y+BoRFFIdC030x/WmBiYBNhpgLdswNJ8RSYaSgmgk39z1gPUfj/29ef/9rwhQTDHRHbrbdEbLvRFcGthkkAra/9/uMvhkK8piNLAgCRpTnNn4AEmAAAAABJRU5ErkJggg==);"),r.add(".calendar_default_now","background-color: red;"),r.add(".calendar_default_now:before","content: ''; top: -5px; border-width: 5px; border-color: transparent transparent transparent red; border-style: solid; width: 0px; height:0px; position: absolute; -moz-transform: scale(.9999);"),r.add(".calendar_default_shadow_forbidden .calendar_default_shadow_inner","background-color: red;"),r.add(".calendar_default_shadow_top",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),r.add(".calendar_default_shadow_bottom",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),r.add(".calendar_default_crosshair_vertical, .calendar_default_crosshair_horizontal, .calendar_default_crosshair_left, .calendar_default_crosshair_top","background-color: gray; opacity: 0.2;"),r.add(".calendar_default_loading","background-color: orange; color: white; padding: 2px;"),r.add(".calendar_default_scroll","background-color: #f3f3f3;"),r.add(".calendar_default_event_moving_source","opacity: 0.5;"),r.add(".menu_default_main","user-select:none; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;font-size: 13px;border: 1px solid #dddddd;background-color: white;padding: 0px;cursor: default;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAABCAIAAABG0om7AAAAKXRFWHRDcmVhdGlvbiBUaW1lAHBvIDEwIDUgMjAxMCAyMjozMzo1OSArMDEwMGzy7+IAAAAHdElNRQfaBQoUJAesj4VUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAABGdBTUEAALGPC/xhBQAAABVJREFUeNpj/P//PwO1weMnT2RlZAAYuwX/4oA3BgAAAABJRU5ErkJggg==);background-repeat: repeat-y;xborder-radius: 5px;-moz-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);-webkit-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);"),r.add(".menu_default_main, .menu_default_main *, .menu_default_main *:before, .menu_default_main *:after","box-sizing: content-box;"),r.add(".menu_default_title","background-color: #f2f2f2;border-bottom: 1px solid gray;padding: 4px 4px 4px 37px;"),r.add(".menu_default_main a","padding: 2px 2px 2px 35px;color: black;text-decoration: none;cursor: default;"),r.add(".menu_default_main.menu_default_withchildren a","padding: 2px 35px 2px 35px;"),r.add(".menu_default_main a img","margin-left: 6px;margin-top: 2px;"),r.add(".menu_default_item_text","display: block;height: 20px;line-height: 20px; overflow:hidden;padding-left: 2px;padding-right: 20px; white-space: nowrap;"),r.add(".menu_default_main a:hover","background-color: #f3f3f3;"),r.add(".menu_default_main div div","border-top: 1px solid #dddddd;margin-top: 2px;margin-bottom: 2px;margin-left: 28px;"),r.add(".menu_default_main a.menu_default_item_disabled","color: #ccc"),r.add(".menu_default_item_haschildren.menu_default_item_haschildren_active","background-color: #f3f3f3;"),r.add(".menu_default_item_haschildren a:before","content: ''; border-width: 5px; border-color: transparent transparent transparent #666; border-style: solid; width: 0px; height:0px; position: absolute; right: 5px; margin-top: 5px;"),r.add(".menu_default_item_icon","position: absolute; top:0px; left: 0px; padding: 2px 2px 2px 8px;"),r.add(".menu_default_item a i","height: 20px;line-height: 20px;"),r.add(".menu_default_item .menu_default_item_symbol","width: 18px; height: 18px; color: #999; margin-left: 6px;margin-top: 2px;"),r.add(".menubar_default_main","border-bottom: 1px solid #ccc; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px; user-select:none;"),r.add(".menubar_default_item","display: inline-block;  padding: 6px 10px; cursor: default;"),r.add(".menubar_default_item:hover","background-color: #f2f2f2;"),r.add(".menubar_default_item_active","background-color: #f2f2f2;"),r.add(".scheduler_default_selected .scheduler_default_event_inner","background: #ddd;"),r.add(".scheduler_default_main","border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"),r.add(".scheduler_default_timeheader","cursor: default;color: #333;"),r.add(".scheduler_default_message","opacity: 0.9;filter: alpha(opacity=90);padding: 10px; color: #ffffff;background: #ffa216;"),r.add(".scheduler_default_timeheadergroup,.scheduler_default_timeheadercol","color: #333;background: #f3f3f3;"),r.add(".scheduler_default_rowheader,.scheduler_default_corner","color: #333;background: #f3f3f3;"),r.add(".scheduler_default_rowheader_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #eee;padding: 2px;"),r.add(".scheduler_default_timeheadergroup, .scheduler_default_timeheadercol","text-align: center;"),r.add(".scheduler_default_timeheadergroup_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"),r.add(".scheduler_default_timeheadercol_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;"),r.add(".scheduler_default_divider","background-color: #c0c0c0;"),r.add(".scheduler_default_divider_horizontal","background-color: #c0c0c0;"),r.add(".scheduler_default_matrix_vertical_line","background-color: #eee;"),r.add(".scheduler_default_matrix_vertical_break","background-color: #000;"),r.add(".scheduler_default_matrix_horizontal_line","background-color: #eee;"),r.add(".scheduler_default_resourcedivider","background-color: #c0c0c0;"),r.add(".scheduler_default_shadow_inner","background-color: #666666;opacity: 0.5;filter: alpha(opacity=50);height: 100%;xborder-radius: 5px;"),r.add(".scheduler_default_event","color:#333; font-size: 13px;"),r.add(".scheduler_default_event_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:5px 2px 2px 2px;overflow:hidden;border:1px solid #ccc;"),r.add(".scheduler_default_event_bar","top:0px;left:0px;right:0px;height:4px;background-color:#9dc8e8;"),r.add(".scheduler_default_event_bar_inner","position:absolute;height:4px;background-color:#1066a8;"),r.add(".scheduler_default_event_inner",'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),r.add(".scheduler_default_event_float_inner","padding:6px 2px 2px 8px;"),r.add(".scheduler_default_event_float_inner:after",'content:"";border-color: transparent #666 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:8px;left:-4px;'),r.add(".scheduler_default_columnheader_inner","font-weight: bold;"),r.add(".scheduler_default_columnheader_splitter","background-color: #666;opacity: 0.5;filter: alpha(opacity=50);"),r.add(".scheduler_default_columnheader_cell_inner","padding: 2px;"),r.add(".scheduler_default_cell","background-color: #f9f9f9;"),r.add(".scheduler_default_cell.scheduler_default_cell_business","background-color: #fff;"),r.add(".navigator_default_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"),r.add(".navigator_default_main *, .navigator_default_main *:before, .navigator_default_main *:after","box-sizing: content-box;"),r.add(".navigator_default_month","font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 12px;"),r.add(".navigator_default_day","color: black;"),r.add(".navigator_default_weekend","background-color: #f0f0f0;"),r.add(".navigator_default_dayheader","color: black;"),r.add(".navigator_default_line","border-bottom: 1px solid #c0c0c0;"),r.add(".navigator_default_dayother","color: gray;"),r.add(".navigator_default_todaybox","border: 1px solid red;"),r.add(".navigator_default_title, .navigator_default_titleleft, .navigator_default_titleright","border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"),r.add(".navigator_default_busy","font-weight: bold;"),r.add(".navigator_default_cell","text-align: center;"),r.add(".navigator_default_select .navigator_default_cell_box","background-color: #FFE794; opacity: 0.5;"),r.add(".navigator_default_title","text-align: center;"),r.add(".navigator_default_titleleft, .navigator_default_titleright","text-align: center;"),r.add(".navigator_default_dayheader","text-align: center;"),r.add(".navigator_default_weeknumber","text-align: center; color: #999;"),r.add(".navigator_default_cell_text","cursor: pointer;"),r.add(".month_default_main","border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;color: #333;"),r.add(".month_default_main *, .month_default_main *:before, .month_default_main *:after","box-sizing: content-box;"),r.add(".month_default_cell_inner","border-right: 1px solid #ddd;border-bottom: 1px solid #ddd;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;background-color: #f9f9f9;"),r.add(".month_default_cell_business .month_default_cell_inner","background-color: #fff;"),r.add(".month_default_cell_header","text-align: right; padding: 4px; box-sizing: border-box;"),r.add(".month_default_header_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;cursor: default;color: #333;background: #f3f3f3; overflow:hidden; display: flex; align-items: center; justify-content: center;"),r.add(".month_default_message","padding: 10px;opacity: 0.9; color: #ffffff;background: #ffa216;"),r.add(".month_default_event_inner","position: absolute;top: 0px;bottom: 0px;left: 1px;right: 1px;overflow:hidden;padding: 2px;padding-left: 10px;color: #333;background: #fff;background: linear-gradient(to bottom, #ffffff 0%, #eeeeee);border: 1px solid #999;border-radius: 0px;display: flex; align-items: center; font-size: 13px;"),r.add(".month_default_event_continueright .month_default_event_inner","border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-right-style: dotted;"),r.add(".month_default_event_continueleft .month_default_event_inner","border-top-left-radius: 0px;border-bottom-left-radius: 0px;border-left-style: dotted;"),r.add(".month_default_event_bar","top: 0px;bottom: 0px;left: 0px;width: 6px;"),r.add(".month_default_event_bar_inner","position: absolute;width: 6px;background-color: #1066a8;"),r.add(".month_default_event_continueleft .month_default_event_bar","display: none;"),r.add(".month_default_selected .month_default_event_inner","background: #ddd;"),r.add(".month_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;"),r.add(".month_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),r.add(".month_default_event_delete:hover","opacity: 1;-ms-filter: none;"),r.add(".month_default_event_timeleft","color: #ccc; font-size: 8pt"),r.add(".month_default_event_timeright","color: #ccc; font-size: 8pt; text-align: right;"),r.add(".month_default_loading","background-color: orange; color: white; padding: 2px;"),r.commit(),x.Global.defaultCss=!0}}(),x.doc=function(){var r=document.documentElement;return r&&r.clientHeight?r:document.body},x.guid=function(){var r=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return""+r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},x.pageOffset=function(){if(typeof pageXOffset<"u")return{x:pageXOffset,y:pageYOffset};var r=x.doc();return{x:r.scrollLeft,y:r.scrollTop}},x.indexOf=function(r,l){if(!r||!r.length)return-1;for(var d=0;d<r.length;d++)if(r[d]===l)return d;return-1},x.ac=function(r,d){d||(d=[]);for(var f=0;r.children&&f<r.children.length;f++)d.push(r.children[f]),x.ac(r.children[f],d);return d},x.rfa=function(r,l){var d=x.indexOf(r,l);-1!==d&&r.splice(d,1)},x.mc=function(r){return r.pageX||r.pageY?{x:r.pageX,y:r.pageY}:{x:r.clientX+document.documentElement.scrollLeft,y:r.clientY+document.documentElement.scrollTop}},x.Stats={},x.Stats.eventObjects=0,x.Stats.dateObjects=0,x.Stats.cacheHitsCtor=0,x.Stats.cacheHitsParsing=0,x.Stats.cacheHitsTicks=0,x.re=function(r,l,d){d&&l&&r&&r.addEventListener(l,d,!1)},x.rePassive=function(r,l,d){d&&l&&r&&r.addEventListener(l,d,{passive:!0})},x.reNonPassive=function(r,l,d){d&&l&&r&&r.addEventListener(l,d,{passive:!1})},x.pu=function(r){var l,d,f,g=r.attributes;if(g)for(d=g.length,l=0;l<d;l+=1)g[l]&&"function"==typeof r[f=g[l].name]&&(r[f]=null);if(g=r.childNodes)for(d=g.length,l=0;l<d;l+=1)x.pu(r.childNodes[l])},x.de=function(r){if(r)if(x.isArray(r))for(var l=0;l<r.length;l++)x.de(r[l]);else r.parentNode&&r.parentNode.removeChild(r)},x.sw=function(r){return r?r.offsetWidth-r.clientWidth:0},x.am=function(){return typeof angular>"u"?null:(x.am.cached||(x.am.cached=angular.module("daypilot",[])),x.am.cached)},x.Selection=function(r,l,d,f){this.type="selection",this.start=r.isDayPilotDate?r:new x.Date(r),this.end=l.isDayPilotDate?l:new x.Date(l),this.resource=d,this.root=f,this.toJSON=function(g){var _={};return _.start=this.start,_.end=this.end,_.resource=this.resource,_}},x.request=function(r,l,d,f){var g=x.createXmlHttp();g&&(g.open("POST",r,!0),g.setRequestHeader("Content-type","text/plain"),g.onreadystatechange=function(){if(4===g.readyState)return 200!==g.status&&304!==g.status?void(f?f(g):window.console&&console.log("HTTP error "+g.status)):void l(g)},4!==g.readyState&&("object"==typeof d&&(d=JSON.stringify(d)),g.send(d)))},x.ajax=function(r){if(!r)throw new x.Exception("Parameter object required.");if("string"!=typeof r.url)throw new x.Exception("The parameter object must have 'url' property.");var l=x.createXmlHttp();if(!l)throw new x.Exception("Unable to create XMLHttpRequest object");var d="object"==typeof r.data,f=r.data,_=r.success||function(){},w=r.error||function(){},E=r.contentType||(d?"application/json":"text/plain"),N=r.headers||{};l.open(r.method||(r.data?"POST":"GET"),r.url,!0),l.setRequestHeader("Content-type",E),x.Util.ownPropsAsArray(N).forEach(function(A){l.setRequestHeader(A.key,A.val)}),l.onreadystatechange=function(){if(4===l.readyState)if(200===l.status||201===l.status||204===l.status||304===l.status)(A={}).request=l,l.responseText&&(A.data=JSON.parse(l.responseText)),_(A);else if(w){var A;(A={}).request=l,w(A)}else window.console&&console.log("HTTP error "+l.status)},4!==l.readyState&&(d&&(f=JSON.stringify(f)),l.send(f))},x.createXmlHttp=function(){return new XMLHttpRequest},x.Http={},x.Http.ajax=function(r){x.ajax(r)},x.Http.get=function(r,l){return l=l||{},new Promise(function(d,f){var g={};g.url=r,g.method="GET",g.success=function(_){d(_)},g.error=function(_){f(_)},g.contentType=l.contentType,g.headers=l.headers,x.ajax(g)})},x.Http.post=function(r,l,d){return d=d||{},new Promise(function(f,g){var _={};_.url=r,_.method="POST",_.data=l,_.success=function(w){f(w)},_.error=function(w){g(w)},_.contentType=d.contentType,_.headers=d.headers,x.ajax(_)})},x.Http.put=function(r,l,d){return d=d||{},new Promise(function(f,g){var _={};_.url=r,_.method="PUT",_.data=l,_.success=function(w){f(w)},_.error=function(w){g(w)},_.contentType=d.contentType,_.headers=d.headers,x.ajax(_)})},x.Http.delete=function(r,l){return l=l||{},new Promise(function(d,f){var g={};g.url=r,g.method="DELETE",g.success=function(_){d(_)},g.error=function(_){f(_)},g.contentType=l.contentType,g.headers=l.headers,x.ajax(g)})},x.Util={},x.Util.addClass=function(r,l){if(r){if(!r.className)return void(r.className=l);new RegExp("(^|\\s)"+l+"($|\\s)").test(r.className)||(r.className=r.className+" "+l)}},x.Util.removeClass=function(r,l){if(r){var d=new RegExp("(^|\\s)"+l+"($|\\s)");r.className=r.className.replace(d," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}},x.Util.copyProps=function(r,l,d){if(l||(l={}),!r)return l;if(typeof d>"u")for(var f in r)r.hasOwnProperty(f)&&typeof r[f]<"u"&&(l[f]=r[f]);else for(var g=0;g<d.length;g++)typeof r[f=d[g]]<"u"&&(l[f]=r[f]);return l},x.Util.ownPropsAsArray=function(r){var l=[];if(!r)return l;for(var d in r)if(r.hasOwnProperty(d)){var f={};f.key=d,f.val=r[d],l.push(f)}return l},x.Util.replaceCharAt=function(r,l,d){return r.substr(0,l)+d+r.substr(l+d.length)},x.Util.isNullOrUndefined=function(r){return null===r||typeof r>"u"},x.Util.escapeHtml=function(r){var l=document.createElement("div");return l.innerText=r,l.innerHTML},x.Util.escapeTextHtml=function(r,l){return x.Util.isNullOrUndefined(l)?x.Util.isNullOrUndefined(r)?"":x.Util.escapeHtml(r):l},x.Areas={},x.Areas.attach=function(r,l,f){var g=(f=f||{}).areas,_=f.allowed||function(){return!0},w=f.offsetX||0;(g=i(l,g))&&x.isArray(g)&&0!==g.length&&(x.re(r,"mousemove",function(C){r.active||r.areasDisabled||!_()||x.Areas.showAreas(r,l,C,g,{offsetX:w,eventDiv:f.eventDiv})}),x.re(r,"mouseleave",function(C){x.Areas.hideAreas(r,C)}),g.forEach(function(C){if(x.Areas.isVisible(C)){var E=x.Areas.createArea(r,l,C,{offsetX:w,eventDiv:f.eventDiv});r.appendChild(E)}}))},x.Areas.disable=function(r){r.areasDisabled=!0,Array.from(r.childNodes).filter(function(l){return l.isActiveArea&&!l.area.start}).forEach(function(l){l.c=l.style.display,l.style.display="none"})},x.Areas.enable=function(r){r.areasDisabled=!1,Array.from(r.childNodes).filter(function(l){return l.isActiveArea&&!l.area.start}).forEach(function(l){l.style.display=l.c?l.c:""})},x.Areas.remove=function(r){var l=Array.from(r.childNodes).filter(function(d){return d.isActiveArea});x.de(l)},x.Areas.isVisible=function(r){var l=r.visibility||r.v||"Visible";return"Visible"===l||"TouchVisible"===l&&!x.browser.hover},x.Areas.copy=function(r){return x.isArray(r)?r.map(function(l){return x.Util.copyProps(l,{})}):[]};var i=function(r,l){return x.isArray(l)||(l=r.areas)||(r.cache?l=r.cache.areas:r.data&&(l=r.data.areas)),l};x.Areas.showAreas=function(r,l,d,f,g){if(!x.Global.resizing&&!x.Global.moving&&!x.Global.selecting&&!r.active&&x.browser.hover){if(x.Areas.all&&x.Areas.all.length>0)for(var _=0;_<x.Areas.all.length;_++){var w=x.Areas.all[_];w!==r&&x.Areas.hideAreas(w,d)}if(r.active={},x.isArray(f)||(f=l.areas)||(l.cache?f=l.cache.areas:l.data&&(f=l.data.areas)),f&&0!==f.length&&!(r.areas&&r.areas.length>0)){for(r.areas=[],_=0;_<f.length;_++){var C=f[_];if(!x.Areas.isVisible(C)){var E=x.Areas.createArea(r,l,C,g);r.areas.push(E),r.appendChild(E),x.Areas.all.push(r)}}r.active.children=x.ac(r)}}},x.Areas.createArea=function(r,l,d,E){function g(Ee,ve,ye){var ke={};return ke.area=Ee,ke.source=ve,ke.originalEvent=ye,ke.preventDefault=function(){ke.preventDefault.value=!0},"function"==typeof Ee.onClick&&Ee.onClick(ke),ke}function w(Ee,ve,ye,ke){x.Menu&&x.Menu.touchPosition(ke);var Be=ye.contextMenu||ye.menu;Be instanceof x.Menu||(ve.isEvent&&ve.client.contextMenu()?Be=ve.client.contextMenu():ve.isEvent&&ve.calendar.contextMenu&&(Be=ve.calendar.contextMenu)),Be&&Be.show&&Be.show(ve,{initiator:{type:"area",div:Ee,e:ve,area:ye,a:A}})}function C(Ee){return"string"==typeof Ee&&isNaN(Ee)?Ee:typeof Ee<"u"?Ee+"px":void 0}var N=(E=E||{}).eventDiv||r,A=document.createElement("div");A.isActiveArea=!0,A.area=d,A.setAttribute("unselectable","on");var Ee,ve,ye,ke,Be,R=d.w||d.width,F=d.h||d.height,j=d.cssClass||d.css||d.className;if(typeof d.style<"u"&&A.setAttribute("style",d.style),A.style.position="absolute",A.style.width=C(R),A.style.height=C(F),A.style.right=C(d.right),A.style.top=C(d.top),A.style.left=C(d.left),A.style.bottom=C(d.bottom),typeof d.html<"u"||typeof d.text<"u")A.innerHTML=x.Util.escapeTextHtml(d.text,d.html);else if(d.icon){var V=document.createElement("i");V.className=d.icon,A.appendChild(V)}else if(d.image){var W=document.createElement("img");W.src=d.image,A.appendChild(W)}else if(d.symbol){var re="http://www.w3.org/2000/svg",ue=document.createElementNS(re,"svg");ue.setAttribute("width","100%"),ue.setAttribute("height","100%");var we=document.createElementNS(re,"use");we.setAttribute("href",d.symbol),ue.appendChild(we),A.appendChild(ue)}if(j&&(A.className=j),d.toolTip&&A.setAttribute("title",d.toolTip),d.backColor&&(A.style.background=d.backColor),d.background&&(A.style.background=d.background),d.fontColor&&(A.style.color=d.fontColor),d.padding&&(A.style.padding=d.padding+"px",A.style.boxSizing="border-box"),d.verticalAlignment)switch(A.style.display="flex",d.verticalAlignment){case"center":A.style.alignItems="center";break;case"top":A.style.alignItems="flex-start";break;case"bottom":A.style.alignItems="flex-end"}if(d.horizontalAlignment)switch(A.style.display="flex",d.horizontalAlignment){case"right":A.style.justifyContent="flex-end";break;case"left":A.style.justifyContent="flex-start";break;case"center":A.style.justifyContent="center"}if("ResizeEnd"===d.action||"ResizeStart"===d.action||"Move"===d.action){if(l.calendar.isCalendar)switch(d.action){case"ResizeEnd":d.cursor="s-resize",d.dpBorder="bottom";break;case"ResizeStart":d.cursor="n-resize",d.dpBorder="top";break;case"Move":d.cursor="move"}if(l.calendar.isScheduler||l.calendar.isMonth)switch(d.action){case"ResizeEnd":d.cursor="e-resize",d.dpBorder="right";break;case"ResizeStart":d.cursor="w-resize",d.dpBorder="left";break;case"Move":d.cursor="move"}A.onmousemove=(Ee=N,ve=l,ye=d,function(ke){ve.calendar.internal&&ve.calendar.internal.dragInProgress&&ve.calendar.internal.dragInProgress()||(ke.cancelBubble=!0,Ee.style.cursor=ye.cursor,ye.dpBorder&&(Ee.dpBorder=ye.dpBorder))}),A.onmouseout=function(Ee,ve,ye){return function(ke){Ee.style.cursor=""}}(N)}if(("ResizeEnd"===d.action||"ResizeStart"===d.action)&&l.isEvent&&l.calendar.internal.touch){var De=function(Ee,ve,ye){return function(ke){ke.cancelBubble=!0;var Be=ve.calendar.internal.touch,Gt=ke.touches?ke.touches[0]:ke,$t={x:Gt.pageX,y:Gt.pageY};ve.calendar.coords=Be.relativeCoords(ke),Be.preventEventTap=!0,ve.calendar.isScheduler?Be.startResizing(Ee,"ResizeEnd"===ye.action?"right":"left"):ve.calendar.isCalendar&&Be.startResizing(Ee,"ResizeEnd"===ye.action?"bottom":"top",$t)}}(N,l,d);x.rePassive(A,x.touch.start,De)}if("ContextMenu"===d.action&&l.isEvent&&l.calendar.internal.touch){De=function(ve,ye,ke){return function(Be){Be.cancelBubble=!0,Be.preventDefault(),w(ve,ye,ke,Be),ye.calendar.internal.touch.preventEventTap=!0}}(N,l,d);var tt=function(Be){Be.cancelBubble=!0,Be.preventDefault()};x.reNonPassive(A,x.touch.start,De),x.reNonPassive(A,x.touch.end,tt)}return"Bubble"===d.action&&l.isEvent&&l.calendar.internal.touch&&(ke=l,Be=d,De=function(Gt){Gt.cancelBubble=!0,Gt.preventDefault();var $t=g(Be,ke,Gt);$t.preventDefault.value||(function _(Ee,ve,ye){x.Bubble&&x.Bubble.touchPosition(ye),Ee.calendar.bubble&&Ee.calendar.bubble.showEvent(Ee,!0)}(ke,0,Gt),ke.calendar.internal.touch.preventEventTap=!0,"function"==typeof Be.onClicked&&Be.onClicked($t))},tt=function(Gt){Gt.cancelBubble=!0,Gt.preventDefault()},x.reNonPassive(A,x.touch.start,De),x.reNonPassive(A,x.touch.end,tt)),"Move"===d.action&&l.isEvent&&l.calendar.internal.touch&&(De=function(ve,ye,ke){return function(Be){Be.cancelBubble=!0;var Gt=ye.calendar.internal.touch,$t=Be.touches?Be.touches[0]:Be,Tn={x:$t.pageX,y:$t.pageY};ye.calendar.coords=Gt.relativeCoords(Be),x.Global&&x.Global.touch&&(x.Global.touch.active=!0),Gt.preventEventTap=!0,Gt.startMoving(ve,Tn)}}(N,l),x.rePassive(A,x.touch.start,De)),"Bubble"===d.action&&l.isEvent?(A.onmousemove=function(Ee,ve,ye){return function(ke){ye.bubble?ye.bubble.showEvent(ve,!0):ve.calendar.bubble&&ve.calendar.bubble.showEvent(ve,!0)}}(0,l,d),A.onmouseout=function(Ee,ve,ye){return function(ke){typeof x.Bubble<"u"&&(ye.bubble?ye.bubble.hideOnMouseOut():ve.calendar.bubble&&ve.calendar.bubble.hideOnMouseOut())}}(0,l,d)):"Bubble"===d.action&&l.isRow?(A.onmousemove=function(Ee,ve,ye){return function(ke){ye.bubble?ye.bubble.showResource(ve,!0):ve.calendar.resourceBubble&&ve.calendar.resourceBubble.showResource(ve,!0)}}(0,l,d),A.onmouseout=function(Ee,ve,ye){return function(ke){typeof x.Bubble<"u"&&(ye.bubble?ye.bubble.hideOnMouseOut():ve.calendar.resourceBubble&&ve.calendar.resourceBubble.hideOnMouseOut())}}(0,l,d)):"Bubble"===d.action&&typeof x.Bubble<"u"&&d.bubble instanceof x.Bubble&&(A.onmousemove=function(Ee,ve,ye){return function(ke){ye.bubble.showHtml(null,null)}}(0,0,d),A.onmouseout=function(Ee,ve,ye){return function(ke){typeof x.Bubble<"u"&&ye.bubble&&ye.bubble.hideOnMouseOut()}}(0,0,d)),"HoverMenu"===d.action&&(A.onmousemove=function(Ee,ve,ye){return function(ke){var Be=ye.menu;Be&&Be.show&&(Be.visible?Be.source&&typeof Be.source.id<"u"&&Be.source.id!==ve.id&&Be.show(ve):Be.show(ve),Be.cancelHideTimeout())}}(0,l,d),A.onmouseout=function(Ee,ve,ye){return function(ke){var Be=ye.menu;Be&&Be.hideOnMouseOver&&Be.delayedHide()}}(0,0,d)),"None"===d.action&&(De=function(ve,ye,ke){return function(Be){var Gt=g(ke,ye,Be);"function"==typeof ke.onClicked&&ke.onClicked(Gt),Be.preventDefault(),Be.stopPropagation()}}(0,l,d),x.reNonPassive(A,x.touch.start,De)),A.onmousedown=function(Ee,ve,ye){return function(ke){if("function"==typeof ye.onmousedown&&ye.onmousedown(ke),"function"==typeof ye.mousedown){var Be={};Be.area=ye,Be.div=Ee,Be.originalEvent=ke,Be.source=ve,ye.mousedown(Be)}"Move"===ye.action&&ve.isRow&&(0,ve.calendar.internal.rowStartMoving)(ve.$.row),typeof x.Bubble<"u"&&x.Bubble.hideActive(),"Move"===ye.action&&(x.Global.movingAreaData=ye.data),"Move"===ye.action&&ve.isEvent&&ve.calendar.internal&&ve.calendar.internal.startMoving&&ve.calendar.internal.startMoving(Ee,ke),"Move"!==ye.action&&"ResizeEnd"!==ye.action&&"ResizeStart"!==ye.action&&ye.action&&"Default"!==ye.action&&(ke.preventDefault(),ke.cancelBubble=!0)}}(r,l,d),A.onclick=function(Ee,ve,ye){return function(ke){var Be=g(ye,ve,ke);if(!Be.preventDefault.value){switch(ye.action){case"ContextMenu":w(Ee,ve,ye,ke),ke.cancelBubble=!0;break;case"None":ke.cancelBubble=!0}"function"==typeof ye.onClicked&&ye.onClicked(Be)}}}(r,l,d),"function"==typeof d.onMouseEnter&&A.addEventListener("mouseenter",function(Ee,ve,ye){return function(ke){var Be={};Be.area=ye,Be.source=ve,Be.originalEvent=ke,ye.onMouseEnter(Be)}}(0,l,d)),"function"==typeof d.onMouseLeave&&A.addEventListener("mouseleave",function(Ee,ve,ye){return function(ke){var Be={};Be.area=ye,Be.source=ve,Be.originalEvent=ke,ye.onMouseLeave(Be)}}(0,l,d)),A},x.Areas.all=[],x.Areas.hideAreas=function(r,l){if(r&&r&&r.active){var d=r.active,f=r.areas;if(d&&d.children&&l&&~x.indexOf(d.children,l.toElement||l.relatedTarget))return;if(!f||0===f.length)return void(r.active=null);x.de(f),r.active=null,r.areas=[],x.rfa(x.Areas.all,r),d.children=null}},x.Areas.hideAll=function(r){if(x.Areas.all&&0!==x.Areas.all.length)for(var l=0;l<x.Areas.all.length;l++)x.Areas.hideAreas(x.Areas.all[l],r)},x.Exception=function(r){return new Error(r)},x.Locale=function(r,l){if(this.id=r,this.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.dayNamesShort=["Su","Mo","Tu","We","Th","Fr","Sa"],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.datePattern="M/d/yyyy",this.timePattern="H:mm",this.dateTimePattern="M/d/yyyy H:mm",this.timeFormat="Clock12Hours",this.weekStarts=0,l)for(var d in l)this[d]=l[d]},x.Locale.all={},x.Locale.find=function(r){if(!r)return null;var l=r.toLowerCase();return l.length>2&&(l=x.Util.replaceCharAt(l,2,"-")),x.Locale.all[l]},x.Locale.register=function(r){x.Locale.all[r.id]=r},x.Locale.register(new x.Locale("ca-es",{dayNames:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],dayNamesShort:["dg","dl","dt","dc","dj","dv","ds"],monthNames:["gener","febrer","mar\xe7","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre",""],monthNamesShort:["gen.","febr.","mar\xe7","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des.",""],timePattern:"H:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("cs-cz",{dayNames:["ned\u011ble","pond\u011bl\xed","\xfater\xfd","st\u0159eda","\u010dtvrtek","p\xe1tek","sobota"],dayNamesShort:["ne","po","\xfat","st","\u010dt","p\xe1","so"],monthNames:["leden","\xfanor","b\u0159ezen","duben","kv\u011bten","\u010derven","\u010dervenec","srpen","z\xe1\u0159\xed","\u0159\xedjen","listopad","prosinec",""],monthNamesShort:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""],timePattern:"H:mm",datePattern:"d. M. yyyy",dateTimePattern:"d. M. yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("da-dk",{dayNames:["s\xf8ndag","mandag","tirsdag","onsdag","torsdag","fredag","l\xf8rdag"],dayNamesShort:["s\xf8","ma","ti","on","to","fr","l\xf8"],monthNames:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december",""],monthNamesShort:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""],timePattern:"HH:mm",datePattern:"dd-MM-yyyy",dateTimePattern:"dd-MM-yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("de-at",{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["J\xe4nner","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],monthNamesShort:["J\xe4n","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("de-ch",{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],monthNamesShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("de-de",{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],monthNamesShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("de-lu",{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],monthNamesShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("en-au",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"h:mm tt",datePattern:"d/MM/yyyy",dateTimePattern:"d/MM/yyyy h:mm tt",timeFormat:"Clock12Hours",weekStarts:1})),x.Locale.register(new x.Locale("en-ca",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"h:mm tt",datePattern:"yyyy-MM-dd",dateTimePattern:"yyyy-MM-dd h:mm tt",timeFormat:"Clock12Hours",weekStarts:0})),x.Locale.register(new x.Locale("en-gb",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("en-us",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"h:mm tt",datePattern:"M/d/yyyy",dateTimePattern:"M/d/yyyy h:mm tt",timeFormat:"Clock12Hours",weekStarts:0})),x.Locale.register(new x.Locale("es-es",{dayNames:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],dayNamesShort:["D","L","M","X","J","V","S"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],monthNamesShort:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic.",""],timePattern:"H:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("es-mx",{dayNames:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],dayNamesShort:["do.","lu.","ma.","mi.","ju.","vi.","s\xe1."],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],monthNamesShort:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic.",""],timePattern:"hh:mm tt",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy hh:mm tt",timeFormat:"Clock12Hours",weekStarts:0})),x.Locale.register(new x.Locale("eu-es",{dayNames:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],dayNamesShort:["ig","al","as","az","og","or","lr"],monthNames:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua",""],monthNamesShort:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe.",""],timePattern:"H:mm",datePattern:"yyyy/MM/dd",dateTimePattern:"yyyy/MM/dd H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("fi-fi",{dayNames:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],dayNamesShort:["su","ma","ti","ke","to","pe","la"],monthNames:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kes\xe4kuu","hein\xe4kuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu",""],monthNamesShort:["tammi","helmi","maalis","huhti","touko","kes\xe4","hein\xe4","elo","syys","loka","marras","joulu",""],timePattern:"H:mm",datePattern:"d.M.yyyy",dateTimePattern:"d.M.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("fr-be",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"dd-MM-yy",dateTimePattern:"dd-MM-yy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("fr-ch",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("fr-fr",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("fr-lu",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("gl-es",{dayNames:["domingo","luns","martes","m\xe9rcores","xoves","venres","s\xe1bado"],dayNamesShort:["do","lu","ma","m\xe9","xo","ve","s\xe1"],monthNames:["xaneiro","febreiro","marzo","abril","maio","xu\xf1o","xullo","agosto","setembro","outubro","novembro","decembro",""],monthNamesShort:["xan","feb","mar","abr","maio","xu\xf1o","xul","ago","set","out","nov","dec",""],timePattern:"H:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("it-it",{dayNames:["domenica","luned\xec","marted\xec","mercoled\xec","gioved\xec","venerd\xec","sabato"],dayNamesShort:["do","lu","ma","me","gi","ve","sa"],monthNames:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],monthNamesShort:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("it-ch",{dayNames:["domenica","luned\xec","marted\xec","mercoled\xec","gioved\xec","venerd\xec","sabato"],dayNamesShort:["do","lu","ma","me","gi","ve","sa"],monthNames:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],monthNamesShort:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("ja-jp",{dayNames:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],dayNamesShort:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],monthNames:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12",""],timePattern:"H:mm",datePattern:"yyyy/MM/dd",dateTimePattern:"yyyy/MM/dd H:mm",timeFormat:"Clock24Hours",weekStarts:0})),x.Locale.register(new x.Locale("nb-no",{dayNames:["s\xf8ndag","mandag","tirsdag","onsdag","torsdag","fredag","l\xf8rdag"],dayNamesShort:["s\xf8","ma","ti","on","to","fr","l\xf8"],monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("nl-nl",{dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zo","ma","di","wo","do","vr","za"],monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""],timePattern:"HH:mm",datePattern:"d-M-yyyy",dateTimePattern:"d-M-yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("nl-be",{dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zo","ma","di","wo","do","vr","za"],monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""],timePattern:"H:mm",datePattern:"d/MM/yyyy",dateTimePattern:"d/MM/yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("nn-no",{dayNames:["s\xf8ndag","m\xe5ndag","tysdag","onsdag","torsdag","fredag","laurdag"],dayNamesShort:["s\xf8","m\xe5","ty","on","to","fr","la"],monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("pt-br",{dayNames:["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"],dayNamesShort:["D","S","T","Q","Q","S","S"],monthNames:["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],monthNamesShort:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:0})),x.Locale.register(new x.Locale("pl-pl",{dayNames:["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],dayNamesShort:["N","Pn","Wt","\u015ar","Cz","Pt","So"],monthNames:["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017adziernik","listopad","grudzie\u0144",""],monthNamesShort:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru",""],timePattern:"HH:mm",datePattern:"yyyy-MM-dd",dateTimePattern:"yyyy-MM-dd HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("pt-pt",{dayNames:["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"],dayNamesShort:["D","S","T","Q","Q","S","S"],monthNames:["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],monthNamesShort:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:0})),x.Locale.register(new x.Locale("ro-ro",{dayNames:["duminic\u0103","luni","mar\u021bi","miercuri","joi","vineri","s\xe2mb\u0103t\u0103"],dayNamesShort:["D","L","Ma","Mi","J","V","S"],monthNames:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie",""],monthNamesShort:["ian.","feb.","mar.","apr.","mai.","iun.","iul.","aug.","sep.","oct.","nov.","dec.",""],timePattern:"H:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("ru-ru",{dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c",""],monthNamesShort:["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a",""],timePattern:"H:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("sk-sk",{dayNames:["nede\u013ea","pondelok","utorok","streda","\u0161tvrtok","piatok","sobota"],dayNamesShort:["ne","po","ut","st","\u0161t","pi","so"],monthNames:["janu\xe1r","febru\xe1r","marec","apr\xedl","m\xe1j","j\xfan","j\xfal","august","september","okt\xf3ber","november","december",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12",""],timePattern:"H:mm",datePattern:"d.M.yyyy",dateTimePattern:"d.M.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("sv-se",{dayNames:["s\xf6ndag","m\xe5ndag","tisdag","onsdag","torsdag","fredag","l\xf6rdag"],dayNamesShort:["s\xf6","m\xe5","ti","on","to","fr","l\xf6"],monthNames:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december",""],monthNamesShort:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""],timePattern:"HH:mm",datePattern:"yyyy-MM-dd",dateTimePattern:"yyyy-MM-dd HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("tr-tr",{dayNames:["Pazar","Pazartesi","Sal\u0131","\xc7ar\u015famba","Per\u015fembe","Cuma","Cumartesi"],dayNamesShort:["Pz","Pt","Sa","\xc7a","Pe","Cu","Ct"],monthNames:["Ocak","\u015eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011fustos","Eyl\xfcl","Ekim","Kas\u0131m","Aral\u0131k",""],monthNamesShort:["Oca","\u015eub","Mar","Nis","May","Haz","Tem","A\u011fu","Eyl","Eki","Kas","Ara",""],timePattern:"HH:mm",datePattern:"d.M.yyyy",dateTimePattern:"d.M.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("uk-ua",{dayNames:["\u043d\u0435\u0434\u0456\u043b\u044f","\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a","\u0432\u0456\u0432\u0442\u043e\u0440\u043e\u043a","\u0441\u0435\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440","\u043f'\u044f\u0442\u043d\u0438\u0446\u044f","\u0441\u0443\u0431\u043e\u0442\u0430"],dayNamesShort:["\u041d\u0434","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],monthNames:["\u0441\u0456\u0447\u0435\u043d\u044c","\u043b\u044e\u0442\u0438\u0439","\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c","\u043a\u0432\u0456\u0442\u0435\u043d\u044c","\u0442\u0440\u0430\u0432\u0435\u043d\u044c","\u0447\u0435\u0440\u0432\u0435\u043d\u044c","\u043b\u0438\u043f\u0435\u043d\u044c","\u0441\u0435\u0440\u043f\u0435\u043d\u044c","\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c","\u0436\u043e\u0432\u0442\u0435\u043d\u044c","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434","\u0433\u0440\u0443\u0434\u0435\u043d\u044c",""],monthNamesShort:["\u0421\u0456\u0447","\u041b\u044e\u0442","\u0411\u0435\u0440","\u041a\u0432\u0456","\u0422\u0440\u0430","\u0427\u0435\u0440","\u041b\u0438\u043f","\u0421\u0435\u0440","\u0412\u0435\u0440","\u0416\u043e\u0432","\u041b\u0438\u0441","\u0413\u0440\u0443",""],timePattern:"H:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("zh-cn",{dayNames:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayNamesShort:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],monthNames:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708",""],monthNamesShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708",""],timePattern:"H:mm",datePattern:"yyyy/M/d",dateTimePattern:"yyyy/M/d H:mm",timeFormat:"Clock24Hours",weekStarts:1})),x.Locale.register(new x.Locale("zh-tw",{dayNames:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayNamesShort:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],monthNames:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708",""],monthNamesShort:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708",""],timePattern:"tt hh:mm",datePattern:"yyyy/M/d",dateTimePattern:"yyyy/M/d tt hh:mm",timeFormat:"Clock12Hours",weekStarts:0})),x.Locale.US=x.Locale.find("en-us"),x.Switcher=function(r){function l(f,g,_){var w={};w.start=f,w.end=g,w.day=_,w.target=d.k.control,w.preventDefault=function(){this.preventDefault.value=!0};var C=d.G;C&&C.start===w.start&&C.end===w.end&&C.day===w.day&&C.target===w.target||(d.G=w,"function"==typeof d.onChange&&(d.onChange(w),w.preventDefault.value)||"function"==typeof d.onTimeRangeSelect&&(d.onTimeRangeSelect(w),w.preventDefault.value)||(d.k.q(d.l),"function"==typeof d.onChanged&&d.onChanged(w),"function"==typeof d.onTimeRangeSelected&&d.onTimeRangeSelected(w)))}var d=this;this.f=[],this.i=[],this.j={},this.selectedClass=null,this.k=null,this.l=x.Date.today(),this.onChange=null,this.onChanged=null,this.onSelect=null,this.j.updateMode=function(f){var g=d.j.control;g&&(g.selectMode=f,g.select(d.l))},this.addView=function(f,g){var _;if("string"==typeof f){if(!(_=document.getElementById(f)))throw"Element not found: "+f}else _=f;var w=_,C={m:!0};return C.n=w.id,C.control=w,C.o=g||{},C.p=function(){w.hide?w.hide():w.nav&&w.nav.top?w.nav.top.style.display="none":w.style.display="none"},C.q=function(E){w.backendUrl||"function"==typeof WebForm_DoCallback&&w.uniqueID?w.commandCallBack&&w.commandCallBack("navigate",{day:E}):(w.startDate=E,w.update())},C.s=function(){d.t(),w.show?w.show():w.nav&&w.nav.top?w.nav.top.style.display="":w.style.display=""},C.u=function(){if(C.o.navigatorSelectMode)return C.o.navigatorSelectMode;if(w.isCalendar)switch(w.viewType){case"Day":default:return"day";case"Week":case"WorkWeek":return"week"}else if(w.isMonth)switch(w.viewType){case"Month":return"month";case"Weeks":return"week";default:return"day"}return"day"},this.f.push(C),C},this.addTrigger=function(f,g){var _;if("string"==typeof f){if(!(_=document.getElementById(f)))throw"Element not found: "+f}else _=f;var w=this.z(g);w||(w=this.addView(g));var C={A:!0};return C.B=_,C.n=_.id,C.C=w,C.D=function(E){d.show(C),d.E(C),E&&(E.preventDefault?E.preventDefault():E.returnValue=!1)},x.re(_,"click",C.D),this.i.push(C),C},this.addButton=this.addTrigger,this.select=function(f){var g=this.F(f);g?g.D():this.i.length>0&&this.i[0].D()},this.F=function(f){for(var g=0;g<this.i.length;g++){var _=this.i[g];if(_.n===f)return _}return null},this.E=function(f){if(this.selectedClass){for(var g=0;g<this.i.length;g++)x.Util.removeClass(this.i[g].B,this.selectedClass);x.Util.addClass(f.B,this.selectedClass)}},this.addNavigator=function(f){d.j.control=f,f.timeRangeSelectedHandling="JavaScript",f.onTimeRangeSelected=function(){var g,_,w;if(1===f.api)g=arguments[0],_=arguments[1],w=arguments[2];else{var C=arguments[0];g=C.start,_=C.end,w=C.day}d.l=w,l(g,_,w)}},this.show=function(f){var g,_;if(f.A)g=(_=f).C;else if(g=f.m?f:this.z(f),this.k===g)return;if(d.onSelect){var w={};w.source=_?_.B:null,w.target=g.control,d.onSelect(w)}this.k=g,g.s();var C=g.u();d.j.updateMode(C),l(d.j.control.selectionStart,d.j.control.selectionEnd.addDays(1),d.j.control.selectionDay)},this.z=function(f){for(var g=0;g<this.f.length;g++)if(this.f[g].control===f)return this.f[g];return null},this.t=function(){for(var f=0;f<this.f.length;f++)this.f[f].p()},Object.defineProperty(this,"active",{get:function(){return d.k}}),this.events={},this.events.load=function(f,g,_){if(!d.k||!d.k.control)throw"DayPilot.Switcher.events.load(): Active view not found";d.k.control.events.load(f,g,_)},this.G=null,this.H=function(){if(r)for(var f in r)"triggers"===f?(r.triggers||[]).forEach(function(_){d.addTrigger(_.id,_.view)}):"navigator"===f?d.addNavigator(r.navigator):d[f]=r[f]},this.H()},x.Duration=function(r){var l=this,d=864e5,f=36e5,g=6e4,_=1e3;if(2===arguments.length){var w=arguments[0],C=arguments[1];if(!(w instanceof x.Date)&&"string"!=typeof w)throw"DayPilot.Duration(): Invalid start argument, DayPilot.Date expected";if(!(C instanceof x.Date)&&"string"!=typeof C)throw"DayPilot.Duration(): Invalid end argument, DayPilot.Date expected";"string"==typeof w&&(w=new x.Date(w)),"string"==typeof C&&(C=new x.Date(C)),r=C.getTime()-w.getTime()}return this.ticks=r,x.Date.Cache.DurationCtor[""+r]?x.Date.Cache.DurationCtor[""+r]:(x.Date.Cache.DurationCtor[""+r]=this,this.toString=function(E){if(!E)return l.days()+"."+l.hours()+":"+l.minutes()+":"+l.seconds()+"."+l.milliseconds();var N=l.minutes();return E.replace("mm",N=(N<10?"0":"")+N).replace("m",l.minutes()).replace("H",l.hours()).replace("h",l.hours()).replace("d",l.days()).replace("s",l.seconds())},this.totalHours=function(){return l.ticks/f},this.totalDays=function(){return l.ticks/d},this.totalMinutes=function(){return l.ticks/g},this.totalSeconds=function(){return l.ticks/_},this.days=function(){return Math.floor(l.totalDays())},this.hours=function(){var E=l.ticks-l.days()*d;return Math.floor(E/f)},this.minutes=function(){var E=l.ticks-Math.floor(l.totalHours())*f;return Math.floor(E/g)},this.seconds=function(){var E=l.ticks-Math.floor(l.totalMinutes())*g;return Math.floor(E/_)},void(this.milliseconds=function(){return l.ticks%_}))},x.Duration.weeks=function(r){return new x.Duration(1e3*r*60*60*24*7)},x.Duration.days=function(r){return new x.Duration(1e3*r*60*60*24)},x.Duration.hours=function(r){return new x.Duration(1e3*r*60*60)},x.Duration.minutes=function(r){return new x.Duration(1e3*r*60)},x.Duration.seconds=function(r){return new x.Duration(1e3*r)},x.TimeSpan=function(){throw"Please use DayPilot.Duration class instead of DayPilot.TimeSpan."};try{x.TimeSpan.prototype=Object.create(x.Duration.prototype)}catch{}x.Date=function(r,l){if(r instanceof x.Date)return r;var d;x.Util.isNullOrUndefined(r)&&(r=d=x.DateUtil.fromLocal().getTime());var f=x.Date.Cache.Ctor;if(f[r])return x.Stats.cacheHitsCtor+=1,f[r];var g=!1;if("string"==typeof r)d=x.DateUtil.fromStringSortable(r,l).getTime(),g=!0;else if("number"==typeof r){if(isNaN(r))throw"Cannot create DayPilot.Date from NaN";d=r}else{if(!(r instanceof Date))throw"Unrecognized parameter: use Date, number or string in ISO 8601 format";d=l?x.DateUtil.fromLocal(r).getTime():r.getTime()}var _=n(d);return f[_]?f[_]:(f[_]=this,f[d]=this,g&&_!==r&&x.DateUtil.hasTzSpec(r)&&(f[r]=this),Object.defineProperty&&!x.browser.ielt9?(Object.defineProperty(this,"ticks",{get:function(){return d}}),Object.defineProperty(this,"value",{value:_,writable:!1,enumerable:!0})):(this.ticks=d,this.value=_),x.Date.Config.legacyShowD&&(this.d=new Date(d)),void(x.Stats.dateObjects+=1))},x.Date.Config={},x.Date.Config.legacyShowD=!1,x.Date.Cache={},x.Date.Cache.Parsing={},x.Date.Cache.Ctor={},x.Date.Cache.Ticks={},x.Date.Cache.DurationCtor={},x.Date.Cache.clear=function(){x.Date.Cache.Parsing={},x.Date.Cache.Ctor={},x.Date.Cache.Ticks={},x.Date.Cache.DurationCtor={}},x.Date.prototype.addDays=function(r){return r?new x.Date(this.ticks+24*r*60*60*1e3):this},x.Date.prototype.addHours=function(r){return r?this.addTime(60*r*60*1e3):this},x.Date.prototype.addMilliseconds=function(r){return r?this.addTime(r):this},x.Date.prototype.addMinutes=function(r){return r?this.addTime(60*r*1e3):this},x.Date.prototype.addMonths=function(r){if(!r)return this;var l=new Date(this.ticks),d=l.getUTCFullYear(),f=l.getUTCMonth()+1;if(r>0){for(;r>=12;)r-=12,d++;r>12-f?(d++,f=r-(12-f)):f+=r}else{for(;r<=-12;)r+=12,d--;f+r<=0?(d--,f=12+f+r):f+=r}var g=new Date(l.getTime());g.setUTCDate(1),g.setUTCFullYear(d),g.setUTCMonth(f-1);var _=new x.Date(g).daysInMonth();return g.setUTCDate(Math.min(_,l.getUTCDate())),new x.Date(g)},x.Date.prototype.addSeconds=function(r){return r?this.addTime(1e3*r):this},x.Date.prototype.addTime=function(r){return r?(r instanceof x.Duration&&(r=r.ticks),new x.Date(this.ticks+r)):this},x.Date.prototype.addYears=function(r){var l=new Date(this.ticks),d=new Date(this.ticks),f=this.getYear()+r,g=this.getMonth();d.setUTCDate(1),d.setUTCFullYear(f),d.setUTCMonth(g);var _=new x.Date(d).daysInMonth();return d.setUTCDate(Math.min(_,l.getUTCDate())),new x.Date(d)},x.Date.prototype.dayOfWeek=function(){return new Date(this.ticks).getUTCDay()},x.Date.prototype.getDayOfWeek=function(){return new Date(this.ticks).getUTCDay()},x.Date.prototype.getDayOfYear=function(){var r=this.firstDayOfYear();return x.DateUtil.daysDiff(r,this)+1},x.Date.prototype.daysInMonth=function(){var r=new Date(this.ticks),l=r.getUTCMonth()+1,d=r.getUTCFullYear(),f=[31,28,31,30,31,30,31,31,30,31,30,31];return 2!==l?f[l-1]:d%4!=0||d%100==0&&d%400!=0?f[1]:f[1]+1},x.Date.prototype.daysInYear=function(){var r=this.getYear();return r%4!=0||r%100==0&&r%400!=0?365:366},x.Date.prototype.dayOfYear=function(){return Math.ceil((this.getDatePart().getTime()-this.firstDayOfYear().getTime())/864e5)+1},x.Date.prototype.equals=function(r){if(null===r)return!1;if(r instanceof x.Date)return this===r;throw"The parameter must be a DayPilot.Date object (DayPilot.Date.equals())"},x.Date.prototype.firstDayOfMonth=function(){var r=new Date;return r.setUTCFullYear(this.getYear(),this.getMonth(),1),r.setUTCHours(0),r.setUTCMinutes(0),r.setUTCSeconds(0),r.setUTCMilliseconds(0),new x.Date(r)},x.Date.prototype.firstDayOfYear=function(){var r=this.getYear(),l=new Date;return l.setUTCFullYear(r,0,1),l.setUTCHours(0),l.setUTCMinutes(0),l.setUTCSeconds(0),l.setUTCMilliseconds(0),new x.Date(l)},x.Date.prototype.firstDayOfWeek=function(r){var l=this;r=r instanceof x.Locale?r.weekStarts:"string"==typeof r&&x.Locale.find(r)?x.Locale.find(r).weekStarts:r||0;for(var f=l.dayOfWeek();f!==r;)f=(l=l.addDays(-1)).dayOfWeek();return new x.Date(l)},x.Date.prototype.getDay=function(){return new Date(this.ticks).getUTCDate()},x.Date.prototype.getDatePart=function(){var r=new Date(this.ticks);return r.setUTCHours(0),r.setUTCMinutes(0),r.setUTCSeconds(0),r.setUTCMilliseconds(0),new x.Date(r)},x.Date.prototype.getYear=function(){return new Date(this.ticks).getUTCFullYear()},x.Date.prototype.getHours=function(){return new Date(this.ticks).getUTCHours()},x.Date.prototype.getMilliseconds=function(){return new Date(this.ticks).getUTCMilliseconds()},x.Date.prototype.getMinutes=function(){return new Date(this.ticks).getUTCMinutes()},x.Date.prototype.getMonth=function(){return new Date(this.ticks).getUTCMonth()},x.Date.prototype.getSeconds=function(){return new Date(this.ticks).getUTCSeconds()},x.Date.prototype.getTotalTicks=function(){return this.getTime()},x.Date.prototype.getTime=function(){return this.ticks},x.Date.prototype.getTimePart=function(){var r=this.getDatePart();return x.DateUtil.diff(this,r)},x.Date.prototype.lastDayOfMonth=function(){var r=new Date(this.firstDayOfMonth().getTime()),l=this.daysInMonth();return r.setUTCDate(l),new x.Date(r)},x.Date.prototype.weekNumber=function(){var r=this.firstDayOfYear(),l=(this.getTime()-r.getTime())/864e5;return Math.ceil((l+r.dayOfWeek()+1)/7)},x.Date.prototype.weekNumberISO=function(){var r=!1,l=this.dayOfYear(),d=this.firstDayOfYear().dayOfWeek(),f=this.firstDayOfYear().addYears(1).addDays(-1).dayOfWeek();0===d&&(d=7),0===f&&(f=7);var g=8-d;4!==d&&4!==f||(r=!0);var w=Math.ceil((l-g)/7);return g>=4&&(w+=1),w>52&&!r&&(w=1),0===w&&(w=this.firstDayOfYear().addDays(-1).weekNumberISO()),w},x.Date.prototype.toDateLocal=function(){var r=new Date(this.ticks),l=new Date;return l.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),l.setHours(r.getUTCHours()),l.setMinutes(r.getUTCMinutes()),l.setSeconds(r.getUTCSeconds()),l.setMilliseconds(r.getUTCMilliseconds()),l},x.Date.prototype.toDate=function(){return new Date(this.ticks)},x.Date.prototype.toJSON=function(){return this.value},x.Date.prototype.toString=function(r,l){return r?new o(r,l).print(this):this.toStringSortable()},x.Date.prototype.toStringSortable=function(){return n(this.ticks)},x.Date.parse=function(r,l,d){return new o(l,d).parse(r)},x.Date.today=function(){return new x.Date(x.DateUtil.localToday(),!0)},x.Date.now=function(){return new x.Date},x.Date.fromYearMonthDay=function(r,l,d){l=l||1,d=d||1;var f=new Date(0);return f.setUTCFullYear(r),f.setUTCMonth(l-1),f.setUTCDate(d),new x.Date(f)},x.DateUtil={},x.DateUtil.fromStringSortable=function(r,l){if(!r)throw"Can't create DayPilot.Date from an empty string";var d=r.length,f=10===d,g=19===d;if(!(f||g||d>19))throw"Invalid string format (use '2010-01-01' or '2010-01-01T00:00:00'): "+r;if(x.Date.Cache.Parsing[r]&&!l)return x.Stats.cacheHitsParsing+=1,x.Date.Cache.Parsing[r];var w=r.substring(0,4),C=r.substring(5,7),E=r.substring(8,10),N=new Date(0);if(N.setUTCFullYear(w,C-1,E),f)return x.Date.Cache.Parsing[r]=N,N;var A=r.substring(11,13),R=r.substring(14,16),F=r.substring(17,19);if(N.setUTCHours(A),N.setUTCMinutes(R),N.setUTCSeconds(F),g)return x.Date.Cache.Parsing[r]=N,N;var V=0;if("."===r[19]){var W=parseInt(r.substring(20,23));N.setUTCMilliseconds(W),V=x.DateUtil.getTzOffsetMinutes(r.substring(23))}else V=x.DateUtil.getTzOffsetMinutes(r.substring(19));var re=new x.Date(N);return l||(re=re.addMinutes(-V)),N=re.toDate(),x.Date.Cache.Parsing[r]=N,N},x.DateUtil.getTzOffsetMinutes=function(r){if(x.Util.isNullOrUndefined(r)||""===r||"Z"===r)return 0;var l=r[0],g=60*parseInt(r.substring(1,3))+parseInt(r.substring(4));if("-"===l)return-g;if("+"===l)return g;throw"Invalid timezone spec: "+r},x.DateUtil.hasTzSpec=function(r){return!!r.indexOf("+")||!!r.indexOf("-")},x.DateUtil.daysDiff=function(r,l){if(r&&l||function(){throw"two parameters required"}(),r=new x.Date(r),l=new x.Date(l),r.getTime()>l.getTime())return null;for(var d=0,f=r.getDatePart(),g=l.getDatePart();f<g;)f=f.addDays(1),d++;return d},x.DateUtil.daysSpan=function(r,l){if(r&&l||function(){throw"two parameters required"}(),r=new x.Date(r),l=new x.Date(l),r.getTime()===l.getTime())return 0;var d=x.DateUtil.daysDiff(r,l);return l.getTime()==l.getDatePart().getTime()&&d--,d},x.DateUtil.diff=function(r,l){if(!(r&&l&&r.getTime&&l.getTime))throw"Both compared objects must be Date objects (DayPilot.Date.diff).";return r.getTime()-l.getTime()},x.DateUtil.fromLocal=function(r){r||(r=new Date);var l=new Date;return l.setUTCFullYear(r.getFullYear(),r.getMonth(),r.getDate()),l.setUTCHours(r.getHours()),l.setUTCMinutes(r.getMinutes()),l.setUTCSeconds(r.getSeconds()),l.setUTCMilliseconds(r.getMilliseconds()),l},x.DateUtil.localToday=function(){var r=new Date;return r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),r},x.DateUtil.hours=function(r,l){var d=r.getUTCMinutes();d<10&&(d="0"+d);var f=r.getUTCHours();if(l){var g=f<12;return 0==(f%=12)&&(f=12),f+":"+d+" "+(g?"AM":"PM")}return f+":"+d},x.DateUtil.max=function(r,l){return r.getTime()>l.getTime()?r:l},x.DateUtil.min=function(r,l){return r.getTime()<l.getTime()?r:l};var o=function(r,d){"string"==typeof d&&(d=x.Locale.find(d)),d=d||x.Locale.US;var f=[{seq:"yyyy",expr:"[0-9]{4,4}",str:function(_){return _.getYear()}},{seq:"yy",expr:"[0-9]{2,2}",str:function(_){return _.getYear()%100}},{seq:"mm",expr:"[0-9]{2,2}",str:function(_){var w=_.getMinutes();return w<10?"0"+w:w}},{seq:"m",expr:"[0-9]{1,2}",str:function(_){return _.getMinutes()}},{seq:"HH",expr:"[0-9]{2,2}",str:function(_){var w=_.getHours();return w<10?"0"+w:w}},{seq:"H",expr:"[0-9]{1,2}",str:function(_){return _.getHours()}},{seq:"hh",expr:"[0-9]{2,2}",str:function(_){var w;return 0==(w=(w=_.getHours())%12)&&(w=12),w<10?"0"+w:w}},{seq:"h",expr:"[0-9]{1,2}",str:function(_){var w;return 0==(w=(w=_.getHours())%12)&&(w=12),w}},{seq:"ss",expr:"[0-9]{2,2}",str:function(_){var w=_.getSeconds();return w<10?"0"+w:w}},{seq:"s",expr:"[0-9]{1,2}",str:function(_){return _.getSeconds()}},{seq:"MMMM",expr:"[^\\s0-9]*",str:function(_){return d.monthNames[_.getMonth()]},transform:function(_){var w=x.indexOf(d.monthNames,_,t);return w<0?null:w+1}},{seq:"MMM",expr:"[^\\s0-9]*",str:function(_){return d.monthNamesShort[_.getMonth()]},transform:function(_){var w=x.indexOf(d.monthNamesShort,_,t);return w<0?null:w+1}},{seq:"MM",expr:"[0-9]{2,2}",str:function(_){var w=_.getMonth()+1;return w<10?"0"+w:w}},{seq:"M",expr:"[0-9]{1,2}",str:function(_){return _.getMonth()+1}},{seq:"dddd",expr:"[^\\s0-9]*",str:function(_){return d.dayNames[_.getDayOfWeek()]}},{seq:"ddd",expr:"[^\\s0-9]*",str:function(_){return d.dayNamesShort[_.getDayOfWeek()]}},{seq:"dd",expr:"[0-9]{2,2}",str:function(_){var w=_.getDay();return w<10?"0"+w:w}},{seq:"%d",expr:"[0-9]{1,2}",str:function(_){return _.getDay()}},{seq:"d",expr:"[0-9]{1,2}",str:function(_){return _.getDay()}},{seq:"tt",expr:"(AM|PM|am|pm)",str:function(_){return _.getHours()<12?"AM":"PM"},transform:function(_){return _.toUpperCase()}}];this.init=function(){this.year=this.findSequence("yyyy"),this.month=this.findSequence("MMMM")||this.findSequence("MMM")||this.findSequence("MM")||this.findSequence("M"),this.day=this.findSequence("dd")||this.findSequence("d"),this.hours=this.findSequence("HH")||this.findSequence("H"),this.minutes=this.findSequence("mm")||this.findSequence("m"),this.seconds=this.findSequence("ss")||this.findSequence("s"),this.ampm=this.findSequence("tt"),this.hours12=this.findSequence("hh")||this.findSequence("h")},this.findSequence=function(_){function w(C){return parseInt(C)}return-1===r.indexOf(_)?null:{findValue:function(C){for(var E=function(_){return _.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(r),N=null,A=0;A<f.length;A++){var F=f[A].expr;_===f[A].seq&&(F="("+F+")",N=f[A].transform),E=E.replace(f[A].seq,F)}E="^"+E+"$";try{var V=new RegExp(E).exec(C);return V?(N=N||w)(V[1]):null}catch{throw"unable to create regex from: "+E}}}},this.print=function(_){for(var w=function(re){for(var ue=0;ue<f.length;ue++)if(f[ue]&&f[ue].seq===re)return f[ue];return null},C=r.length<=0,E=0,N=[];!C;){var A=r.substring(E),R=/%?(.)\1*/.exec(A);if(R&&R.length>0){var F=R[0],j=w(F);N.push(j||F),C=r.length<=(E+=F.length)}else C=!0}for(var V=0;V<N.length;V++){var W=N[V];"string"!=typeof W&&(N[V]=W.str(_))}return N.join("")},this.parse=function(_){var w=this.year.findValue(_);if(!w)return null;var C=this.month.findValue(_);if(x.Util.isNullOrUndefined(C)||C>12||C<1)return null;var E=this.day.findValue(_),N=x.Date.fromYearMonthDay(w,C).daysInMonth();if(E<1||E>N)return null;var A=this.hours?this.hours.findValue(_):0,R=this.minutes?this.minutes.findValue(_):0,F=this.seconds?this.seconds.findValue(_):0,j=this.ampm?this.ampm.findValue(_):null;if(this.ampm&&this.hours12){var V=this.hours12.findValue(_);if(V<1||V>12)return null;A="PM"===j?12===V?12:V+12:12===V?0:V}if(A<0||A>23||R<0||R>59||F<0||F>59)return null;var W=new Date;return W.setUTCFullYear(w,C-1,E),W.setUTCHours(A),W.setUTCMinutes(R),W.setUTCSeconds(F),W.setUTCMilliseconds(0),new x.Date(W)},this.init()};x.ColorUtil={},x.ColorUtil.hexToRgb=function(r){if(!/^#[0-9a-f]{6}$/i.test(r))throw new x.Exception("Invalid color, only full hex color string accepted, eg. '#ffaaff'.");return r=r.replace("#",""),{r:parseInt(r.substring(0,2),16),g:parseInt(r.substring(2,4),16),b:parseInt(r.substring(4,6),16)}},x.ColorUtil.rgbToHex=function(r){return"#"+e(r.r)+e(r.g)+e(r.b)},x.ColorUtil.adjustLuminance=function(r,l){return{r:r.r+l,g:r.g+l,b:r.b+l}},x.ColorUtil.darker=function(r,l){var d=x.ColorUtil.hexToRgb(r),_=x.ColorUtil.adjustLuminance(d,-17*(l=l||1));return x.ColorUtil.rgbToHex(_)},x.ColorUtil.lighter=function(r,l){return"number"!=typeof l&&(l=1),x.ColorUtil.darker(r,-l)},x.ColorUtil.pl=function(r){var l=x.ColorUtil.hexToRgb(r),d=l.r/255,f=l.g/255,g=l.b/255;return Math.sqrt(.299*d*d+.587*f*f+.114*g*g)},x.ColorUtil.contrasting=function(r,l,d){return l=l||"#ffffff",d=d||"#000000",x.ColorUtil.pl(r)>.5?d:l},x.Event=function(r,l,d){var f=this;this.calendar=l,this.data=r||{},this.part=d||{},typeof this.data.id>"u"&&(this.data.id=this.data.value);var g={},_=["id","text","start","end","resource"];this.isEvent=!0,this.temp=function(){if(g.dirty)return g;for(var w=0;w<_.length;w++)g[_[w]]=f.data[_[w]];return g.dirty=!0,g},this.copy=function(){for(var w={},C=0;C<_.length;C++)w[_[C]]=f.data[_[C]];return w},this.commit=function(){if(g.dirty){for(var w=0;w<_.length;w++)f.data[_[w]]=g[_[w]];g.dirty=!1}},this.dirty=function(){return g.dirty},this.id=function(w){return typeof w>"u"?f.data.id:void(this.temp().id=w)},this.value=function(w){return typeof w>"u"?f.id():void f.id(w)},this.text=function(w){return typeof w>"u"?f.data.text:(this.temp().text=w,void this.client.innerHTML(w))},this.start=function(w){return typeof w>"u"?new x.Date(f.data.start):void(this.temp().start=new x.Date(w))},this.end=function(w){return typeof w>"u"?new x.Date(f.data.end):void(this.temp().end=new x.Date(w))},this.resource=function(w){return typeof w>"u"?f.data.resource:void(this.temp().resource=w)},this.partStart=function(){return new x.Date(this.part.start)},this.partEnd=function(){return new x.Date(this.part.end)},this.tag=function(w){var C=f.data.tag;if(!C)return null;if(typeof w>"u")return f.data.tag;for(var E=f.calendar.tagFields,N=-1,A=0;A<E.length;A++)w===E[A]&&(N=A);if(-1===N)throw"Field name not found.";return C[N]},this.client={},this.client.innerHTML=function(w){if(typeof w>"u"){var C=f.cache||f.data,E=f.calendar&&f.calendar.internal&&f.calendar.internal.xssTextHtml;return E?E(C.text,C.html):x.Util.escapeTextHtml(C.text,C.html)}f.data.html=w},this.client.html=this.client.innerHTML,this.client.header=function(w){return typeof w>"u"?f.data.header:void(f.data.header=w)},this.client.cssClass=function(w){return typeof w>"u"?f.cache&&typeof f.cache.cssClass<"u"?f.cache.cssClass:f.data.cssClass:void(f.data.cssClass=w)},this.client.toolTip=function(w){return typeof w>"u"?f.cache&&typeof f.cache.toolTip<"u"?f.cache.toolTip:typeof f.data.toolTip<"u"?f.data.toolTip:f.data.text:void(f.data.toolTip=w)},this.client.barVisible=function(w){return typeof w>"u"?f.cache&&typeof f.cache.barHidden<"u"?!f.cache.barHidden:f.calendar.durationBarVisible&&!f.data.barHidden:void(f.data.barHidden=!w)},this.client.backColor=function(w){return typeof w>"u"?f.cache&&typeof f.cache.backColor<"u"?f.cache.backColor:typeof f.data.backColor<"u"?f.data.backColor:f.calendar.eventBackColor:void(f.data.backColor=w)},this.client.borderColor=function(w){return typeof w>"u"?f.cache&&typeof f.cache.borderColor<"u"?f.cache.borderColor:typeof f.data.borderColor<"u"?f.data.borderColor:f.calendar.eventBorderColor:void(f.data.borderColor=w)},this.client.contextMenu=function(w){if(typeof w>"u"){if(f.oContextMenu)return f.oContextMenu}else f.oContextMenu=w},this.client.moveEnabled=function(w){return typeof w>"u"?f.cache&&typeof f.cache.moveDisabled<"u"?!f.cache.moveDisabled:"Disabled"!==f.calendar.eventMoveHandling&&!f.data.moveDisabled:void(f.data.moveDisabled=!w)},this.client.resizeEnabled=function(w){return typeof w>"u"?f.cache&&typeof f.cache.resizeDisabled<"u"?!f.cache.resizeDisabled:"Disabled"!==f.calendar.eventResizeHandling&&!f.data.resizeDisabled:void(f.data.resizeDisabled=!w)},this.client.clickEnabled=function(w){return typeof w>"u"?f.cache&&typeof f.cache.clickDisabled<"u"?!f.cache.clickDisabled:"Disabled"!==f.calendar.eventClickHandling&&!f.data.clickDisabled:void(f.data.clickDisabled=!w)},this.client.rightClickEnabled=function(w){return typeof w>"u"?f.cache&&typeof f.cache.rightClickDisabled<"u"?!f.cache.rightClickDisabled:"Disabled"!==f.calendar.eventRightClickHandling&&!f.data.rightClickDisabled:void(f.data.rightClickDisabled=!w)},this.client.deleteEnabled=function(w){return typeof w>"u"?f.cache&&typeof f.cache.deleteDisabled<"u"?!f.cache.deleteDisabled:"Disabled"!==f.calendar.eventDeleteHandling&&!f.data.deleteDisabled:void(f.data.deleteDisabled=!w)},this.toJSON=function(w){var C={};if(C.value=this.id(),C.id=this.id(),C.text=this.text(),C.start=this.start(),C.end=this.end(),C.tag={},f.calendar&&f.calendar.tagFields)for(var E=f.calendar.tagFields,N=0;N<E.length;N++)C.tag[E[N]]=this.tag(E[N]);return C}}}var r})(),x.JSON={},function(){function n(f){return f<10?"0"+f:f}function t(f){return l.lastIndex=0,l.test(f)?'"'+f.replace(l,function(g){var _=d[g];return"string"==typeof _?_:"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function e(f,g){var _,w,C,E,N,A=i,R=g[f];switch(R&&"object"==typeof R&&"function"==typeof R.toJSON2?R=R.toJSON2(f):R&&"object"==typeof R&&"function"==typeof R.toJSON&&!R.ignoreToJSON&&(R=R.toJSON(f)),"function"==typeof r&&(R=r.call(g,f,R)),typeof R){case"string":return t(R);case"number":return isFinite(R)?String(R):"null";case"boolean":case"null":return String(R);case"object":if(!R)return"null";if(i+=o,N=[],"number"==typeof R.length&&!R.propertyIsEnumerable("length")){for(E=R.length,_=0;_<E;_+=1)N[_]=e(_,R)||"null";return C=0===N.length?"[]":i?"[\n"+i+N.join(",\n"+i)+"\n"+A+"]":"["+N.join(",")+"]",i=A,C}if(r&&"object"==typeof r)for(E=r.length,_=0;_<E;_+=1)"string"==typeof(w=r[_])&&(C=e(w,R))&&N.push(t(w)+(i?": ":":")+C);else for(w in R)Object.hasOwnProperty.call(R,w)&&(C=e(w,R))&&N.push(t(w)+(i?": ":":")+C);return C=0===N.length?"{}":i?"{\n"+i+N.join(",\n"+i)+"\n"+A+"}":"{"+N.join(",")+"}",i=A,C}}"function"!=typeof Date.prototype.toJSON2&&(Date.prototype.toJSON2=function(f){return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(f){return this.valueOf()});var i,o,r,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof x.JSON.stringify&&(x.JSON.stringify=function(f,g,_){var w;if(i="",o="","number"==typeof _)for(w=0;w<_;w+=1)o+=" ";else"string"==typeof _&&(o=_);if(r=g,g&&"function"!=typeof g&&("object"!=typeof g||"number"!=typeof g.length))throw new Error("JSON.stringify");return e("",{"":f})})}(),typeof x>"u"&&(x={}),typeof x.Global>"u"&&(x.Global={}),function(){var e;if(typeof x.Calendar>"u"||!x.Calendar.events){var t={selectedCells:[],topSelectedCell:null,bottomSelectedCell:null,selecting:!1,column:null,firstSelected:null,firstMousePos:null,originalMouse:null,originalHeight:null,originalTop:null,resizing:null,globalHandlers:!1,moving:null,register:function(e){t.registered||(t.registered=[]);for(var i=t.registered,o=0;o<i.length;o++)if(i[o]===e)return;i.push(e)},unregister:function(e){var i=t.registered;if(i){var o=x.indexOf(i,e);-1!==o&&i.splice(o,1)}},getCellsAbove:function(e){for(var i=[],o=t.getColumn(e),r=e.parentNode,l=null;r&&l!==t.firstSelected;)for(l=r.getElementsByTagName("td")[o],i.push(l),r=r.previousSibling;r&&"TR"!==r.tagName;)r=r.previousSibling;return i},getCellsBelow:function(e){for(var i=[],o=t.getColumn(e),r=e.parentNode,l=null;r&&l!==t.firstSelected;)for(l=r.getElementsByTagName("td")[o],i.push(l),r=r.nextSibling;r&&"TR"!==r.tagName;)r=r.nextSibling;return i},getColumn:function(e){for(var i=0;e.previousSibling;)"TD"===(e=e.previousSibling).tagName&&i++;return i},gUnload:function(e){if(t.registered)for(var i=t.registered,o=0;o<i.length;o++){var r=i[o];r.dispose(),t.unregister(r)}},gMouseUp:function(e){if(t.resizing){if(!t.resizingShadow)return t.resizing.style.cursor="default",document.body.style.cursor="default",t.resizing=null,void(x.Global.resizing=null);var i=t.resizing.event,o=t.resizingShadow.clientHeight+4,r=t.resizingShadow.offsetTop,l=t.resizing.dpBorder;t.deleteShadow(t.resizingShadow),t.resizingShadow=null,t.resizing.style.cursor="default",i.calendar.nav.top.style.cursor="auto",t.resizing.onclick=null,t.resizing=null,x.Global.resizing=null,i.calendar.I(i,o,r,l)}else if(t.moving){if(!t.movingShadow)return t.moving=null,x.Global.moving=null,void(document.body.style.cursor="default");r=t.movingShadow.offsetTop,i=t.moving.event,t.deleteShadow(t.movingShadow),x.Util.removeClass(t.moving,i.calendar.J("_event_moving_source"));var d=t.movingShadow.column;t.moving=null,x.Global.moving=null,t.movingShadow=null,i.calendar.nav.top.style.cursor="auto",i.calendar.K(i,d,r,e)}else if(t.selecting&&null!==t.topSelectedCell){var f=t.selecting.calendar;t.selecting=!1;var g=f.getSelection();f.L(g.start,g.end,g.resource)}else t.selecting=!1},deleteShadow:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},moveShadow:function(e){var i=t.movingShadow,o=i.parentNode;o.style.display="none",i.parentNode.removeChild(i),e.firstChild.appendChild(i),i.style.left="0px",o.style.display="",i.style.width=t.movingShadow.parentNode.offsetWidth+1+"px"},Calendar:function(e,i){var o=!1;if(this instanceof t.Calendar&&!this.M&&(o=!0,this.M=!0),!o)throw"DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'";var r=this;this.uniqueID=null,this.isCalendar=!0,this.v="2023.2.477-lite",this.id=e,this.clientName=e,this.cache={},this.cache.pixels={},this.elements={},this.elements.events=[],this.elements.selection=[],this.nav={},this.afterRender=function(){},this.fasterDispose=!0,this.angularAutoApply=!1,this.api=2,this.businessBeginsHour=9,this.businessEndsHour=18,this.cellHeight=30,this.columnMarginRight=5,this.columnsLoadMethod="GET",this.contextMenu=null,this.days=1,this.durationBarVisible=!0,this.eventsLoadMethod="GET",this.headerDateFormat=null,this.headerHeight=30,this.headerTextWrappingEnabled=!1,this.height=300,this.heightSpec="BusinessHours",this.hideUntilInit=!0,this.hourWidth=60,this.initScrollPos="Auto",this.loadingLabelHtml=null,this.loadingLabelText="Loading...",this.loadingLabelVisible=!0,this.locale="en-us",this.showToolTip=!0,this.startDate=(new x.Date).getDatePart(),this.cssClassPrefix="calendar_default",this.theme=null,this.timeFormat="Auto",this.viewType="Days",this.visible=!0,this.xssProtection="Enabled",this.headerClickHandling="Enabled",this.eventClickHandling="Enabled",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.eventMoveHandling="Update",this.eventDeleteHandling="Disabled",this.timeRangeSelectedHandling="Enabled",this.onBeforeEventRender=null,this.onEventClick=null,this.onEventClicked=null,this.onEventDelete=null,this.onEventDeleted=null,this.onEventMove=null,this.onEventMoved=null,this.onEventResize=null,this.onEventResized=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onHeaderClick=null,this.onHeaderClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.clearSelection=function(){t.topSelectedCell=null,t.bottomSelectedCell=null,this.N()},this.N=function(){x.de(r.elements.selection),r.elements.selection=[],r.nav.activeSelection=null},this.O=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("MSIE"),this.cleanSelection=this.clearSelection,this.P=function(d,f,g){var _={};_.action=d,_.parameters=g,_.data=f,_.header=this.Q();var w="JSON"+x.JSON.stringify(_);__doPostBack(r.uniqueID,w)},this.R=function(d,f,g){this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.callbackTimeout=window.setTimeout(function(){r.loadingStart()},100);var _={};_.action=d,_.parameters=g,_.data=f,_.header=this.Q();var w="JSON"+x.JSON.stringify(_);this.backendUrl?x.request(this.backendUrl,this.S,w,this.ajaxError):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,w,this.T,this.clientName,this.onCallbackError,!0)},this.onCallbackError=function(d,f){alert("Error!\r\nResult: "+d+"\r\nContext:"+f)},this.dispose=function(){var d=r;clearInterval(d.U),d.V(),d.nav.scroll.root=null,x.pu(d.nav.loading),d.W(),d.X(),d.nav.select=null,d.nav.cornerRight=null,d.nav.scrollable=null,d.nav.zoom=null,d.nav.loading=null,d.nav.header=null,d.nav.hourTable=null,d.nav.scrolltop=null,d.nav.scroll.onscroll=null,d.nav.scroll=null,d.nav.main=null,d.nav.message=null,d.nav.messageClose=null,d.nav.top=null,t.unregister(d)},this.Y=function(){this.nav.top.dispose=this.dispose},this.S=function(d){r.T(d.responseText)},this.Q=function(){var d={control:"dpc"};return d.id=this.id,d.v=this.v,d.days=r.days,d.startDate=r.startDate,d.heightSpec=r.heightSpec,d.businessBeginsHour=r.businessBeginsHour,d.businessEndsHour=r.businessEndsHour,d.hashes=r.hashes,d.timeFormat=r.timeFormat,d.viewType=r.viewType,d.locale=r.locale,d},this.Z=function(d,f){for(var g=d.parentNode;g&&"TD"!==g.tagName;)g=g.parentNode;var _=document.createElement("div");_.setAttribute("unselectable","on"),_.style.position="absolute",_.style.width=d.offsetWidth+"px",_.style.height=d.offsetHeight+"px",_.style.left=d.offsetLeft+"px",_.style.top=d.offsetTop+"px",_.style.boxSizing="border-box",_.style.zIndex=101,_.className=r.J("_shadow");var w=document.createElement("div");return w.className=r.J("_shadow_inner"),_.appendChild(w),g.firstChild.appendChild(_),_},this._={},this._.locale=function(){return x.Locale.find(r.locale)||x.Locale.US},this._.timeFormat=function(){return"Auto"!==r.timeFormat?r.timeFormat:this.locale().timeFormat},this._.aa=function(){return"Disabled"!==r.xssProtection};var l=this._;this.T=function(g,f){if(g&&0===g.indexOf("$$$")){if(!window.console)throw"Error received from the server side: "+g;console.log("Error received from the server side: "+g)}else if((g=JSON.parse(g)).CallBackRedirect)document.location.href=g.CallBackRedirect;else{if("None"===g.UpdateType)return r.loadingStop(),void r.s();if(r.V(),"Full"===g.UpdateType&&(r.columns=g.Columns,r.days=g.Days,r.startDate=new x.Date(g.StartDate),r.heightSpec=g.HeightSpec?g.HeightSpec:r.heightSpec,r.businessBeginsHour=g.BusinessBeginsHour?g.BusinessBeginsHour:r.businessBeginsHour,r.businessEndsHour=g.BusinessEndsHour?g.BusinessEndsHour:r.businessEndsHour,r.headerDateFormat=g.HeaderDateFormat?g.HeaderDateFormat:r.headerDateFormat,r.viewType=g.ViewType,r.backColor=g.BackColor?g.BackColor:r.backColor,r.eventHeaderVisible=g.EventHeaderVisible?g.EventHeaderVisible:r.eventHeaderVisible,r.timeFormat=g.TimeFormat?g.TimeFormat:r.timeFormat,r.locale=g.Locale?g.Locale:r.locale,r.ba()),g.Hashes)for(var _ in g.Hashes)r.hashes[_]=g.Hashes[_];r.events.list=g.Events,r.ca(),r.da(),"Full"===g.UpdateType&&(r.ea(),r.fa(),r.ga(),r.ha()),r.s(),r.ia(),r.clearSelection(),r.afterRender(g.CallBackData,!0),r.loadingStop()}},this.ja=function(){return this.ka()/36e5},this.la=function(){return this.businessBeginsHour>this.businessEndsHour?24-this.businessBeginsHour+this.businessEndsHour:this.businessEndsHour-this.businessBeginsHour},this.ma=function(){return this.ka()/18e5},this.ka=function(){return 60*("BusinessHoursNoScroll"===this.heightSpec?this.la():24)*60*1e3},this.na=function(){return"BusinessHoursNoScroll"===this.heightSpec?this.businessBeginsHour:0},this.oa=function(){return 2===r.api},this.eventClickCallBack=function(d,f){this.R("EventClick",f,d)},this.eventClickPostBack=function(d,f){this.P("EventClick",f,d)},this.pa=function(d){var g=this.event;if(r.oa()){var _={};if(_.e=g,_.originalEvent=d,_.meta=d.metaKey,_.ctrl=d.ctrlKey,_.control=r,_.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventClick&&(r.qa.apply(function(){r.onEventClick(_)}),_.preventDefault.value))return;switch(r.eventClickHandling){case"CallBack":r.eventClickCallBack(g);break;case"PostBack":r.eventClickPostBack(g);break;case"ContextMenu":var w=g.client.contextMenu();w?w.show(g):r.contextMenu&&r.contextMenu.show(g)}"function"==typeof r.onEventClicked&&r.qa.apply(function(){r.onEventClicked(_)})}else switch(r.eventClickHandling){case"PostBack":r.eventClickPostBack(g);break;case"CallBack":r.eventClickCallBack(g);break;case"JavaScript":r.onEventClick(g)}},this.ra=function(d){var f=this.event;if(d.stopPropagation&&d.stopPropagation(),!f.client.rightClickEnabled())return!1;var g={};if(g.e=f,g.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventRightClick&&(r.onEventRightClick(g),g.preventDefault.value))return!1;if("ContextMenu"===r.eventRightClickHandling){var _=f.client.contextMenu();_?_.show(f):r.contextMenu&&r.contextMenu.show(this.event)}return"function"==typeof r.onEventRightClicked&&r.onEventRightClicked(g),d.preventDefault&&d.preventDefault(),!1},this.eventDeleteCallBack=function(d,f){this.R("EventDelete",f,d)},this.eventDeletePostBack=function(d,f){this.P("EventDelete",f,d)},this.sa=function(d){if(r.oa()){var f={};if(f.e=d,f.control=r,f.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventDelete&&(r.qa.apply(function(){r.onEventDelete(f)}),f.preventDefault.value))return;switch(r.eventDeleteHandling){case"CallBack":r.eventDeleteCallBack(d);break;case"PostBack":r.eventDeletePostBack(d);break;case"Update":r.events.remove(d)}"function"==typeof r.onEventDeleted&&r.qa.apply(function(){r.onEventDeleted(f)})}else switch(r.eventDeleteHandling){case"PostBack":r.eventDeletePostBack(d);break;case"CallBack":r.eventDeleteCallBack(d);break;case"JavaScript":r.onEventDelete(d)}},this.eventResizeCallBack=function(d,f,g,_){if(!f)throw"newStart is null";if(!g)throw"newEnd is null";var w={};w.e=d,w.newStart=f,w.newEnd=g,this.R("EventResize",_,w)},this.eventResizePostBack=function(d,f,g,_){if(!f)throw"newStart is null";if(!g)throw"newEnd is null";var w={};w.e=d,w.newStart=f,w.newEnd=g,this.P("EventResize",_,w)},this.I=function(d,f,g,_){var C=new Date,E=new Date,N=d.start(),A=d.end();if("top"===_){var R=N.getDatePart(),V=30*Math.floor((g-1)/r.cellHeight)*60*1e3,W=60*r.na()*60*1e3;C=R.addTime(V+W),E=d.end()}else"bottom"===_&&(R=A.getDatePart(),V=30*Math.floor((g+f-1)/r.cellHeight)*60*1e3,W=60*r.na()*60*1e3,C=N,E=R.addTime(V+W));if(r.oa()){var re={};if(re.e=d,re.control=r,re.newStart=C,re.newEnd=E,re.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventResize&&(r.qa.apply(function(){r.onEventResize(re)}),re.preventDefault.value))return;switch(r.eventResizeHandling){case"PostBack":r.eventResizePostBack(d,C,E);break;case"CallBack":r.eventResizeCallBack(d,C,E);break;case"Update":d.start(C),d.end(E),r.events.update(d)}"function"==typeof r.onEventResized&&r.qa.apply(function(){r.onEventResized(re)})}else switch(r.eventResizeHandling){case"PostBack":r.eventResizePostBack(d,C,E);break;case"CallBack":r.eventResizeCallBack(d,C,E);break;case"JavaScript":r.onEventResize(d,C,E)}},this.eventMovePostBack=function(d,f,g,_,w){if(!f)throw"newStart is null";if(!g)throw"newEnd is null";var C={};C.e=d,C.newStart=f,C.newEnd=g,this.P("EventMove",w,C)},this.eventMoveCallBack=function(d,f,g,_,w){if(!f)throw"newStart is null";if(!g)throw"newEnd is null";var C={};C.e=d,C.newStart=f,C.newEnd=g,this.R("EventMove",w,C)},this.K=function(d,f,g,_){var E=30*Math.floor((g-1)/r.cellHeight)*60*1e3,N=d.start(),A=d.end(),R=new Date;N instanceof x.Date&&(N=N.toDate()),R.setTime(Date.UTC(N.getUTCFullYear(),N.getUTCMonth(),N.getUTCDate()));var F=N.getTime()-(R.getTime()+3600*N.getUTCHours()*1e3+30*Math.floor(N.getUTCMinutes()/30)*60*1e3),j=A.getTime()-N.getTime(),V=this.ta[f],W=V.id,re=V.start.getTime(),ue=new Date;ue.setTime(re+E+F);var we=new x.Date(ue),De=we.addTime(j);if(r.oa()){var tt={};if(tt.e=d,tt.newStart=we,tt.newEnd=De,tt.newResource=W,tt.ctrl=_.ctrlKey,tt.shift=_.shiftKey,tt.control=r,tt.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventMove&&(r.qa.apply(function(){r.onEventMove(tt)}),tt.preventDefault.value))return;switch(r.eventMoveHandling){case"PostBack":r.eventMovePostBack(d,we,De,V.id);break;case"CallBack":r.eventMoveCallBack(d,we,De,V.id);break;case"Update":d.start(we),d.end(De),d.resource(W),r.events.update(d)}"function"==typeof r.onEventMoved&&r.qa.apply(function(){r.onEventMoved(tt)})}else switch(r.eventMoveHandling){case"PostBack":r.eventMovePostBack(d,we,De,V.id);break;case"CallBack":r.eventMoveCallBack(d,we,De,V.id);break;case"JavaScript":r.onEventMove(d,we,De,V.id,!1)}},this.timeRangeSelectedPostBack=function(d,f,g,_){var w={};w.start=d,w.end=f,this.P("TimeRangeSelected",_,w)},this.timeRangeSelectedCallBack=function(d,f,g,_){var w={};w.start=d,w.end=f,this.R("TimeRangeSelected",_,w)},this.L=function(d,f,g){if(d=new x.Date(d),f=new x.Date(f),this.oa()){var _={};if(_.start=d,_.end=f,_.resource=g,_.control=r,_.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onTimeRangeSelect&&(r.qa.apply(function(){r.onTimeRangeSelect(_)}),_.preventDefault.value))return;switch(r.timeRangeSelectedHandling){case"PostBack":r.timeRangeSelectedPostBack(d,f);break;case"CallBack":r.timeRangeSelectedCallBack(d,f)}"function"==typeof r.onTimeRangeSelected&&r.qa.apply(function(){r.onTimeRangeSelected(_)})}else switch(r.timeRangeSelectedHandling){case"PostBack":r.timeRangeSelectedPostBack(d,f);break;case"CallBack":r.timeRangeSelectedCallBack(d,f);break;case"JavaScript":r.onTimeRangeSelected(d,f)}},this.ua=function(d){if(!t.selecting&&"Disabled"!==r.timeRangeSelectedHandling){var f=d.which;if(1===f||0===f)return t.firstMousePos=x.mc(d),t.selecting={},t.selecting.calendar=r,t.selectedCells&&(r.clearSelection(),t.selectedCells=[]),t.column=t.getColumn(this),t.selectedCells.push(this),t.firstSelected=this,t.topSelectedCell=this,t.bottomSelectedCell=this,r.va(),!1}},this.va=function(){this.getSelection(),function(){var d=t.topSelectedCell,f=t.bottomSelectedCell,g=function(){if(d.data)return d.data.x;for(var R=d.parentNode.cells,F=0;F<R.length;F++)if(R[F]===d)return F;return-1}(),_=r.ta[g];if(_){var w=_.start,C=r.getPixels(d.start,w).boxTop,N=r.getPixels(f.end,w).boxBottom-C,A=function(){if(r.nav.activeSelection)return r.nav.activeSelection;var R=document.createElement("div");R.setAttribute("unselectable","on"),R.style.position="absolute",R.style.left="0px",R.style.width="100%";var F=document.createElement("div");return F.setAttribute("unselectable","on"),F.className=r.J("_shadow_inner"),R.appendChild(F),r.nav.events.rows[0].cells[g].selection.appendChild(R),r.elements.selection.push(R),r.nav.activeSelection=R,R}();A.className=r.J("_shadow"),A.firstChild.innerHTML="",A.style.top=C+"px",A.style.height=N+"px"}}()},this.wa=function(d){if(typeof t<"u"&&t.selecting){var f=x.mc(d);t.getColumn(this)===t.column&&(r.clearSelection(),f.y<t.firstMousePos.y?(t.selectedCells=t.getCellsBelow(this),t.topSelectedCell=t.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(t.selectedCells=t.getCellsAbove(this),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=t.selectedCells[0]),r.va())}},this.getSelection=function(){return new x.Selection(t.topSelectedCell.start,t.bottomSelectedCell.end,t.topSelectedCell.resource,r)},this.xa=function(d){if(d<0)return null;for(var f=0,g=r.nav.events.rows[0].cells,_=0;_<g.length;_++)if(d<(f+=g[_].offsetWidth))return _;return null},this.ya={},this.ya.getCellCoords=function(){var d={x:0,y:0};if(!r.coords)return null;d.x=r.xa(r.coords.x);var g=Math.floor((r.coords.y-0)/r.cellHeight);return d.y=g,d.x<0?null:d},this.columns={},this.columns.list=[],this.columns.load=function(d,f,g){if(!d)throw new x.Exception("columns.load(): 'url' parameter required");var _=function(C){var E={};E.exception=C.exception,E.request=C.request,"function"==typeof g&&g(E)},w=function(C){var E,N=C.request;try{E=JSON.parse(N.responseText)}catch(F){var A={};return A.exception=F,void _(A)}if(x.isArray(E)){var R={preventDefault:function(){this.preventDefault.value=!0}};if(R.data=E,"function"==typeof f&&f(R),R.preventDefault.value)return;r.columns.list=E,r.za&&r.update()}};r.columnsLoadMethod&&"POST"===r.columnsLoadMethod.toUpperCase()?x.ajax({method:"POST",url:d,success:w,error:_}):x.ajax({method:"GET",url:d,success:w,error:_})},this.ba=function(){var d;d="Resources"!==r.viewType?this.Aa():r.columns.list,this.ta=[];for(var f=0;f<d.length;f++){var g=this.Ba(d[f]);this.ta.push(g)}},this.Ba=function(d){var f={};return f.name=d.name,f.html=d.html,f.id=d.id,f.toolTip=d.toolTip,f.data=d,f.start=new x.Date(d.start?d.start:r.startDate),f.putIntoBlock=function(g){for(var _=0;_<this.blocks.length;_++)if((w=this.blocks[_]).overlapsWith(g.part.top,g.part.height))return w.events.push(g),w.min=Math.min(w.min,g.part.top),w.max=Math.max(w.max,g.part.top+g.part.height),_;var w;return(w=[]).lines=[],w.events=[],w.overlapsWith=function(C,E){return!(C+E-1<this.min||C>this.max-1)},w.putIntoLine=function(C){for(var E=0;E<this.lines.length;E++)if((N=this.lines[E]).isFree(C.part.top,C.part.height))return N.push(C),E;var N;return(N=[]).isFree=function(A,R){for(var F=A+R-1,j=this.length,V=0;V<j;V++){var W=this[V];if(!(F<W.part.top||A>W.part.top+W.part.height-1))return!1}return!0},N.push(C),this.lines.push(N),this.lines.length-1},w.events.push(g),w.min=g.part.top,w.max=g.part.top+g.part.height,this.blocks.push(w),this.blocks.length-1},f.putIntoLine=function(g){for(var _=0;_<this.lines.length;_++)if((w=this.lines[_]).isFree(g.part.top,g.part.height))return w.push(g),_;var w;return(w=[]).isFree=function(C,E){for(var N=C+E-1,A=this.length,R=0;R<A;R++){var F=this[R];if(!(N<F.part.top||C>F.part.top+F.part.height-1))return!1}return!0},w.push(g),this.lines.push(w),this.lines.length-1},f},this.Aa=function(){var d=[],f=this.startDate.getDatePart(),g=this.days;switch(this.viewType){case"Day":g=1;break;case"Week":g=7,f=f.firstDayOfWeek(l.locale().weekStarts);break;case"WorkWeek":g=5,f=f.firstDayOfWeek(1)}"BusinessHoursNoScroll"===this.heightSpec&&(f=f.addHours(this.businessBeginsHour));for(var _=0;_<g;_++){var w=r.headerDateFormat?r.headerDateFormat:l.locale().datePattern,C={};C.start=f.addDays(_),C.name=C.start.toString(w,l.locale()),d.push(C)}return d},this.visibleStart=function(){if("Resources"===r.viewType){if(0===r.ta.length)return x.Date.today();var d=r.ta.map(function(g){return g.start.getTime()}),f=Math.min.apply(null,d);return new x.Date(f)}return this.ta[0].start},this.visibleEnd=function(){if("Resources"===r.viewType){if(0===r.ta.length)return x.Date.today().addDays(1);var d=r.ta.map(function(_){return _.start.getTime()}),f=Math.max.apply(null,d);return new x.Date(f).addDays(1)}return this.ta[f=this.ta.length-1].start.addDays(1)},this.J=function(d){var f=this.theme||this.cssClassPrefix;return f?f+d:""},this.V=function(){if(this.elements.events)for(var d=0;d<this.elements.events.length;d++){var f=this.elements.events[d],g=f.event;if(g&&(g.calendar=null),f.onclick=null,f.onclickSave=null,f.onmouseover=null,f.onmouseout=null,f.onmousemove=null,f.onmousedown=null,f.firstChild&&f.firstChild.firstChild&&f.firstChild.firstChild.tagName&&"IMG"===f.firstChild.firstChild.tagName.toUpperCase()){var _=f.firstChild.firstChild;_.onmousedown=null,_.onmousemove=null,_.onclick=null}f.helper=null,f.data=null,f.event=null,x.de(f)}this.elements.events=[]},this.Ca=function(d){var f=d.cache||d.data,g=this.nav.events,_=document.createElement("div");_.style.position="absolute",_.style.left=d.part.left+"%",_.style.top=d.part.top+"px",_.style.width=d.part.width+"%",_.style.height=Math.max(d.part.height,2)+"px",_.style.overflow="hidden",_.data=d,_.event=d,_.unselectable="on",_.style.MozUserSelect="none",_.style.KhtmlUserSelect="none",_.className=this.J("_event"),f.cssClass&&x.Util.addClass(_,f.cssClass),_.isFirst=d.part.start.getTime()===d.start().getTime(),_.isLast=d.part.end.getTime()===d.end().getTime(),_.onclick=this.pa,x.re(_,"contextmenu",this.ra),_.onmouseout=function(W){_.deleteIcon&&(_.deleteIcon.style.display="none")},_.onmousemove=function(W){if(typeof t<"u"){var ue=x.mo3(_,W);if(ue&&!t.resizing&&!t.moving){_.deleteIcon&&(_.deleteIcon.style.display="");var we=this.isLast;ue.y<=5&&d.client.resizeEnabled()?(this.style.cursor="n-resize",this.dpBorder="top"):this.offsetHeight-ue.y<=5&&d.client.resizeEnabled()?we?(this.style.cursor="s-resize",this.dpBorder="bottom"):this.style.cursor="not-allowed":t.resizing||t.moving||(this.style.cursor="Disabled"!==r.eventClickHandling?"pointer":"default")}}},_.onmousedown=function(W){var re=W.which||W.button;if("n-resize"!==this.style.cursor&&"s-resize"!==this.style.cursor||1!==re){if(1===re&&d.client.moveEnabled()){t.moving=this,x.Global.moving=this,t.moving.event=this.event,(t.moving.helper={}).oldColumn=r.ta[this.data.part.dayIndex].id,t.originalMouse=x.mc(W),t.originalTop=this.offsetTop;var we=x.mo3(this,W);t.moveOffsetY=we?we.y:0,r.nav.top.style.cursor="move"}}else t.resizing=this,x.Global.resizing=this,t.originalMouse=x.mc(W),t.originalHeight=this.offsetHeight,t.originalTop=this.offsetTop,r.nav.top.style.cursor=this.style.cursor;return!1};var w=document.createElement("div");if(w.setAttribute("unselectable","on"),w.className=r.J("_event_inner"),w.innerHTML=d.client.html(),w.style.borderColor="darker"===f.borderColor&&f.backColor?x.ColorUtil.darker(f.backColor,2):f.borderColor,f.backColor&&(w.style.background=f.backColor,(x.browser.ie9||x.browser.ielt9)&&(w.style.filter="")),f.fontColor&&(w.style.color=f.fontColor),_.appendChild(w),d.client.barVisible()){var C=d.part.height-2,E=100*d.part.barTop/C,N=Math.ceil(100*d.part.barHeight/C),A=document.createElement("div");A.setAttribute("unselectable","on"),A.className=this.J("_event_bar"),A.style.position="absolute",f.barBackColor&&(A.style.backgroundColor=f.barBackColor);var R=document.createElement("div");R.setAttribute("unselectable","on"),R.className=this.J("_event_bar_inner"),R.style.top=E+"%",R.style.height=0<N&&N<=1?"1px":N+"%",f.barColor&&(R.style.backgroundColor=f.barColor),A.appendChild(R),_.appendChild(A)}if(d.client.deleteEnabled()){var F=document.createElement("div");F.style.position="absolute",F.style.right="2px",F.style.top="2px",F.style.width="17px",F.style.height="17px",F.className=r.J("_event_delete"),F.onmousedown=function(W){W.stopPropagation()},F.onclick=function(W){W.stopPropagation();var re=this.parentNode.event;re&&r.sa(re)},F.style.display="none",_.deleteIcon=F,_.appendChild(F)}var j=f.areas?x.Areas.copy(f.areas):[];if(x.Areas.attach(_,d,{areas:j}),g.rows[0].cells[d.part.dayIndex]&&(g.rows[0].cells[d.part.dayIndex].firstChild.appendChild(_),r.Da(_)),"function"==typeof r.onAfterEventRender){var V={};V.e=_.event,V.div=_,r.onAfterEventRender(V)}r.elements.events.push(_)},this.Da=function(d){for(var f=d&&d.childNodes?d.childNodes.length:0,g=0;g<f;g++)try{var _=d.childNodes[g];1===_.nodeType&&(_.unselectable="on",this.Da(_))}catch{}},this.ia=function(){for(var d=0;d<this.ta.length;d++){var f=this.ta[d];if(f.blocks)for(var g=0;g<f.blocks.length;g++)for(var _=f.blocks[g],w=0;w<_.lines.length;w++)for(var C=_.lines[w],E=0;E<C.length;E++){var N=C[E];N.part.width=100/_.lines.length,N.part.left=N.part.width*w,w===_.lines.length-1||(N.part.width=1.5*N.part.width),this.Ca(N)}}},this.Ea=function(){this.nav.top.innerHTML="",x.Util.addClass(this.nav.top,this.J("_main")),this.nav.top.style.MozUserSelect="none",this.nav.top.style.KhtmlUserSelect="none",this.nav.top.style.position="relative",this.nav.top.style.width=this.width?this.width:"100%",this.hideUntilInit&&(this.nav.top.style.visibility="hidden"),this.visible||(this.nav.top.style.display="none"),this.nav.scroll=document.createElement("div"),this.nav.scroll.style.height=this.Fa()+"px",this.nav.scroll.style.overflow="BusinessHours"===this.heightSpec?"auto":"hidden",this.nav.scroll.style.position="relative";var d=this.Ga();this.nav.top.appendChild(d),this.nav.scroll.style.zoom=1;var f=this.Ha();this.nav.scrollable=f.firstChild,this.nav.scroll.appendChild(f),this.nav.top.appendChild(this.nav.scroll),this.nav.scrollLayer=document.createElement("div"),this.nav.scrollLayer.style.position="absolute",this.nav.scrollLayer.style.top="0px",this.nav.scrollLayer.style.left="0px",this.nav.top.appendChild(this.nav.scrollLayer),this.nav.loading=document.createElement("div"),this.nav.loading.style.position="absolute",this.nav.loading.style.top="0px",this.nav.loading.style.left=this.hourWidth+5+"px",this.nav.loading.innerHTML=r.Ia(r.loadingLabelText,r.loadingLabelHtml),this.nav.loading.style.display="none",this.nav.top.appendChild(this.nav.loading)},this.ga=function(){this.fasterDispose||x.pu(this.nav.hourTable),this.nav.scrollable.rows[0].cells[0].innerHTML="",this.nav.hourTable=this.Ja(),this.nav.scrollable.rows[0].cells[0].appendChild(this.nav.hourTable)},this.Ha=function(){var d=document.createElement("div");d.style.zoom=1,d.style.position="relative";var f=document.createElement("table");f.cellSpacing="0",f.cellPadding="0",f.border="0",f.style.border="0px none",f.style.width="100%",f.style.position="absolute";var g,_=f.insertRow(-1);(g=_.insertCell(-1)).valign="top",g.style.padding="0px",g.style.border="0px none",this.nav.hourTable=this.Ja(),g.appendChild(this.nav.hourTable),(g=_.insertCell(-1)).valign="top",g.width="100%",g.style.padding="0px",g.style.border="0px none";var w=document.createElement("div");return w.style.position="relative",g.appendChild(w),w.appendChild(this.Ka()),w.appendChild(this.La()),d.appendChild(f),this.nav.zoom=d,d},this.Ka=function(){var d=document.createElement("table");return d.cellPadding="0",d.cellSpacing="0",d.border="0",d.style.width="100%",d.style.border="0px none",d.style.tableLayout="fixed",this.nav.main=d,this.nav.events=d,d},this.La=function(){var d=document.createElement("table");d.style.top="0px",d.cellPadding="0",d.cellSpacing="0",d.border="0",d.style.position="absolute",d.style.width="100%",d.style.border="0px none",d.style.tableLayout="fixed",this.nav.events=d;for(var g=this.ta.length,_=d.insertRow(-1),w=0;w<g;w++){var C=_.insertCell(-1);C.style.padding="0px",C.style.border="0px none",C.style.height="0px",C.style.overflow="visible",r.rtl||(C.style.textAlign="left");var E=document.createElement("div");E.style.marginRight=r.columnMarginRight+"px",E.style.position="relative",E.style.height="1px",E.style.marginTop="-1px";var N=document.createElement("div");C.selection=N,C.appendChild(E),C.appendChild(N)}return d},this.Ja=function(){var d=document.createElement("table");d.cellSpacing="0",d.cellPadding="0",d.border="0",d.style.border="0px none",d.style.width=this.hourWidth+"px",d.oncontextmenu=function(){return!1};for(var f=r.ja(),g=0;g<f;g++)this.Ma(d,g);return d},this.Ma=function(d,f){var g=2*this.cellHeight,_=d.insertRow(-1);_.style.height=g+"px";var w=_.insertCell(-1);w.valign="bottom",w.unselectable="on",w.style.cursor="default",w.style.padding="0px",w.style.border="0px none";var C=document.createElement("div");C.style.position="relative",C.className=this.J("_rowheader"),C.style.width=this.hourWidth+"px",C.style.height=g+"px",C.style.overflow="hidden",C.unselectable="on";var E=document.createElement("div");E.className=this.J("_rowheader_inner"),E.unselectable="on";var N=document.createElement("div");N.unselectable="on";var R=this.startDate.addHours(f).addHours(r.na()).getHours(),F=R<12,j=l.timeFormat();"Clock12Hours"===j&&0==(R%=12)&&(R=12),N.innerHTML=R;var V=document.createElement("span");V.unselectable="on",V.className=this.J("_rowheader_minutes"),V.innerHTML="Clock12Hours"===j?F?"AM":"PM":"00",N.appendChild(V),E.appendChild(N),C.appendChild(E),w.appendChild(C)},this.Fa=function(){switch(this.heightSpec){case"Full":return 48*this.cellHeight;case"BusinessHours":case"BusinessHoursNoScroll":return this.la()*this.cellHeight*2;default:throw"DayPilot.Calendar: Unexpected 'heightSpec' value."}},this.Na=function(){var d=r.nav.corner?r.nav.corner.parentNode:null;if(d){d.innerHTML="";var f=this.Oa();d.appendChild(f),r.nav.corner=f}},this.Ga=function(){var d=document.createElement("div");d.style.overflow="auto";var f=document.createElement("table");f.cellPadding="0",f.cellSpacing="0",f.border="0",f.style.width="100%",f.style.borderCollapse="separate",f.style.border="0px none";var g=f.insertRow(-1),_=g.insertCell(-1);_.style.padding="0px",_.style.border="0px none";var w=this.Oa();_.appendChild(w),this.nav.corner=w,(_=g.insertCell(-1)).style.width="100%",_.valign="top",_.style.position="relative",_.style.padding="0px",_.style.border="0px none",this.nav.header=document.createElement("table"),this.nav.header.cellPadding="0",this.nav.header.cellSpacing="0",this.nav.header.border="0",this.nav.header.width="100%",this.nav.header.style.tableLayout="fixed",this.nav.header.oncontextmenu=function(){return!1};var C="hidden"!==this.nav.scroll.style.overflow;if(_.appendChild(this.nav.header),C){(_=g.insertCell(-1)).unselectable="on";var E=document.createElement("div");E.unselectable="on",E.style.position="relative",E.style.width="16px",E.style.height=this.headerHeight+"px",E.className=this.J("_cornerright");var N=document.createElement("div");N.className=this.J("_cornerright_inner"),E.appendChild(N),_.appendChild(E),this.nav.cornerRight=E}return d.appendChild(f),d},this.Oa=function(){var d=document.createElement("div");d.style.position="relative",d.className=this.J("_corner"),d.style.width=this.hourWidth+"px",d.style.height=this.headerHeight+"px",d.oncontextmenu=function(){return!1};var f=document.createElement("div");return f.unselectable="on",f.className=this.J("_corner_inner"),d.appendChild(f),d},this.W=function(){var d=this.nav.main;d.root=null,d.onmouseup=null;for(var f=0;f<d.rows.length;f++)for(var g=d.rows[f],_=0;_<g.cells.length;_++){var w=g.cells[_];w.root=null,w.onmousedown=null,w.onmousemove=null,w.onmouseout=null,w.onmouseup=null}this.fasterDispose||x.pu(d)},this.fa=function(){var d=this.nav.main,f=18e5,g=this.ma(),_=r.ta;for(d&&this.W();d&&d.rows&&d.rows.length>0;)this.fasterDispose||x.pu(d.rows[0]),d.deleteRow(0);this.tableCreated=!0;for(var C=this.nav.events;C&&C.rows&&C.rows.length>0;)this.fasterDispose||x.pu(C.rows[0]),C.deleteRow(0);for(var w=_.length,E=C.insertRow(-1),N=0;N<w;N++){(A=E.insertCell(-1)).style.padding="0px",A.style.border="0px none",A.style.height="0px",A.style.overflow="visible",r.rtl||(A.style.textAlign="left"),(R=document.createElement("div")).style.marginRight=r.columnMarginRight+"px",R.style.position="relative",R.style.height="1px",R.style.marginTop="-1px";var F=document.createElement("div");F.style.position="relative",A.selection=F,A.appendChild(R),A.appendChild(F)}for(var j=0;j<g;j++)for((E=d.insertRow(-1)).style.MozUserSelect="none",E.style.KhtmlUserSelect="none",N=0;N<w;N++){var A,R,V=this.ta[N];(A=E.insertCell(-1)).start=V.start.addTime(j*f),A.end=A.start.addTime(f),A.resource=V.id,A.onmousedown=this.ua,A.onmouseup=function(){return!1},A.onclick=function(){return!1},A.root=this,A.style.padding="0px",A.style.border="0px none",A.style.verticalAlign="top",A.style.height=r.cellHeight+"px",A.style.overflow="hidden",A.unselectable="on",(R=document.createElement("div")).unselectable="on",R.style.height=r.cellHeight+"px",R.style.position="relative",R.className=this.J("_cell"),this.Pa(A.start,A.end)&&x.Util.addClass(R,r.J("_cell_business"));var W=document.createElement("div");W.setAttribute("unselectable","on"),W.className=this.J("_cell_inner"),R.appendChild(W),A.appendChild(R),A.appendChild(R)}d.root=this,r.nav.scrollable.onmousemove=function(re){r.coords=x.mo3(r.nav.scrollable,re);var we=x.mc(re);if(t.resizing){t.resizingShadow||(t.resizingShadow=r.Z(t.resizing,!1,r.shadow));var De=r.cellHeight,tt=1,Ee=we.y-t.originalMouse.y;if("bottom"===t.resizing.dpBorder)(ve=Math.floor((t.originalHeight+t.originalTop+Ee+De/2)/De)*De-t.originalTop+tt)<De&&(ve=De),t.originalTop+ve>(ye=r.nav.main.clientHeight)&&(ve=ye-t.originalTop),t.resizingShadow.style.height=ve+"px";else if("top"===t.resizing.dpBorder){var ve;(ke=Math.floor((t.originalTop+Ee-tt+De/2)/De)*De+tt)<tt&&(ke=tt),ke>t.originalTop+t.originalHeight-De&&(ke=t.originalTop+t.originalHeight-De),(ve=t.originalHeight-(ke-t.originalTop))<De?ve=De:t.resizingShadow.style.top=ke+"px",t.resizingShadow.style.height=ve+"px"}}else if(t.moving){if(t.movingShadow||(t.movingShadow=r.Z(t.moving,!r.O,r.shadow),t.movingShadow.style.width=t.movingShadow.parentNode.offsetWidth+1+"px"),!r.coords)return;De=r.cellHeight,tt=1;var ke,Be=t.moveOffsetY;Be||(Be=De/2),(ke=Math.floor((r.coords.y-Be-tt+De/2)/De)*De+tt)<tt&&(ke=tt);var Gt=r.nav.events,ye=r.nav.main.clientHeight,$t=parseInt(t.movingShadow.style.height);ke+$t>ye&&(ke=ye-$t),x.Util.addClass(t.moving,r.J("_event_moving_source")),t.movingShadow.parentNode.style.display="none",t.movingShadow.style.top=ke+"px",t.movingShadow.parentNode.style.display="";var Kt=Math.floor((r.coords.x-45)/(Gt.clientWidth/Gt.rows[0].cells.length));Kt<0&&(Kt=0),Kt<Gt.rows[0].cells.length&&Kt>=0&&t.movingShadow.column!==Kt&&(t.movingShadow.column=Kt,t.moveShadow(Gt.rows[0].cells[Kt]))}else if(t.selecting){we=x.mc(re);var br=r.ya.getCellCoords(),Sn=r.nav.main.rows[br.y].cells[t.column];we.y<t.firstMousePos.y?(t.selectedCells=t.getCellsBelow(Sn),t.topSelectedCell=t.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(t.selectedCells=t.getCellsAbove(Sn),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=t.selectedCells[0]),r.va()}},r.nav.scrollable.style.display=""},this.Pa=function(d,f){return this.businessBeginsHour<this.businessEndsHour?!(d.getHours()<this.businessBeginsHour||d.getHours()>=this.businessEndsHour||6===d.getDayOfWeek()||0===d.getDayOfWeek()):d.getHours()>=this.businessBeginsHour||d.getHours()<this.businessEndsHour},this.X=function(){var d=this.nav.header;if(d&&d.rows)for(var f=0;f<d.rows.length;f++)for(var g=d.rows[f],_=0;_<g.cells.length;_++){var w=g.cells[_];w.onclick=null,w.onmousemove=null,w.onmouseout=null}this.fasterDispose||x.pu(d)},this.Qa=function(d){for(var f=d?this.nav.header.insertRow(-1):this.nav.header.rows[0],g=this.ta,_=g.length,w=0;w<_;w++){var C=g[w],E=d?f.insertCell(-1):f.cells[w];E.data=C,E.style.overflow="hidden",E.style.padding="0px",E.style.border="0px none",E.style.height=this.headerHeight+"px",E.onclick=r.Ra;var A,N=d?document.createElement("div"):E.firstChild;d&&(N.unselectable="on",N.style.MozUserSelect="none",N.style.cursor="default",N.style.position="relative",N.className=r.J("_colheader"),N.style.height=this.headerHeight+"px",r.headerTextWrappingEnabled||(N.style.whiteSpace="nowrap"),(A=document.createElement("div")).className=r.J("_colheader_inner"),A.unselectable="on",N.appendChild(A),E.appendChild(N)),C.toolTip&&(A.title=C.toolTip),(A=N.firstChild).innerHTML=r.Ia(C.name,C.html)}},this.Ra=function(d){if("Disabled"!==r.headerClickHandling){var f=this.data,g=r.Sa(f),_={header:{}};_.header.id=f.id,_.header.name=f.name,_.header.start=f.start,_.column=g,_.originalEvent=d,_.shift=d.shiftKey,_.ctrl=d.ctrlKey,_.meta=d.metaKey,_.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onHeaderClick&&(r.onHeaderClick(_),_.preventDefault.value)||"function"==typeof r.onHeaderClicked&&r.onHeaderClicked(_)}},this.Sa=function(d){return new x.CalendarColumn(d,r)},this.Ta=function(){return this.width&&-1!==this.width.indexOf("px")?"Pixel":"Percentage"},this.ea=function(){for(var d=this.nav.header;this.headerCreated&&d&&d.rows&&d.rows.length>0;)this.fasterDispose||x.pu(d.rows[0]),d.deleteRow(0);this.headerCreated=!0,this.Qa(!0)},this.loadingStart=function(){this.loadingLabelVisible&&(this.nav.loading.innerHTML=this.loadingLabelText,this.nav.loading.style.top=this.headerHeight+5+"px",this.nav.loading.style.display="")},this.commandCallBack=function(d,f){var g={};g.command=d,this.R("Command",f,g)},this.loadingStop=function(d){this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.nav.loading.style.display="none"},this.Ua=function(){var d=this.nav.scroll;d.onscroll||(d.onscroll=function(){r.Va()});var f=typeof this.Wa.scrollpos<"u"?this.Wa.scrollpos:this.initScrollPos;f&&("Auto"===f&&(f="BusinessHours"===this.heightSpec?2*this.cellHeight*this.businessBeginsHour:0),d.root=this,0===d.scrollTop&&(d.scrollTop=f))},this.callbackError=function(d,f){alert("Error!\r\nResult: "+d+"\r\nContext:"+f)},this.Xa=function(){var d=x.sw(this.nav.scroll),f=this.nav.cornerRight;f&&(f.style.width=d+"px")},this.Ya=function(){t.globalHandlers||(t.globalHandlers=!0,x.re(document,"mouseup",t.gMouseUp),x.re(window,"unload",t.gUnload))},this.events={},this.events.add=function(d){var f=null;if(d instanceof x.Event)f=d.data;else{if("object"!=typeof d)throw"DayPilot.Calendar.events.add() expects an object or DayPilot.Event instance.";f=d}r.events.list||(r.events.list=[]),r.events.list.push(f),r.update(),r.qa.notify()},this.events.find=function(d){if(!r.events.list)return null;for(var f=0;f<r.events.list.length;f++){var g=r.events.list[f];if(g.id===d)return new x.Event(g,r)}return null},this.events.update=function(d){if(d instanceof x.Event)d.commit();else if("object"==typeof d){var f=r.events.find(d.id);if(f){var g=x.indexOf(r.events.list,f.data);r.events.list.splice(g,1,d)}}r.update(),r.qa.notify()},this.events.remove=function(d){var f;if(d instanceof x.Event)f=d.data;else if("object"==typeof d)(g=r.events.find(d.id))&&(f=g.data);else if("string"==typeof d||"number"==typeof d){var g;(g=r.events.find(d))&&(f=g.data)}var _=x.indexOf(r.events.list,f);r.events.list.splice(_,1),r.update(),r.qa.notify()},this.events.load=function(d,f,g){var _=function(N){var A={};A.exception=N.exception,A.request=N.request,"function"==typeof g&&g(A)},w=function(N){var A,R=N.request;try{A=JSON.parse(R.responseText)}catch(V){var F={};return F.exception=V,void _(F)}if(x.isArray(A)){var j={preventDefault:function(){this.preventDefault.value=!0}};if(j.data=A,"function"==typeof f&&f(j),j.preventDefault.value)return;r.events.list=A,r.za&&r.update()}};if(r.eventsLoadMethod&&"POST"===r.eventsLoadMethod.toUpperCase())x.Http.ajax({method:"POST",data:{start:r.visibleStart().toString(),end:r.visibleEnd().toString()},url:d,success:w,error:_});else{var C=d,E="start="+r.visibleStart().toString()+"&end="+r.visibleEnd().toString();C+=C.indexOf("?")>-1?"&"+E:"?"+E,x.Http.ajax({method:"GET",url:C,success:w,error:_})}},this.Za=function(){if(r.nav.top.className!==r.J("_main")){r.nav.top.className=r.J("_main");var d=r.nav.corner;d.className=r.J("_corner"),d.firstChild.className=r.J("_corner_inner");var f=r.nav.cornerRight;f&&(f.className=r.J("_cornerright"),f.firstChild.className=r.J("_cornerright_inner"))}},this.update=function(d){r.$a(d),this.za&&(r._a(),r.V(),r.nav.top.style.cursor="auto",r.ba(),r.ea(),r.fa(),r.ga(),r.ha(),r.Na(),r.Za(),r.ab(),r.ca(),r.da(),r.s(),r.ia(),r.clearSelection(),this.visible?this.show():this.hide())},this.bb=null,this.$a=function(d){if(d){var f={events:{preInit:function(){var w=this.data||[];r.events.list=x.isArray(w.list)?w.list:w}},columns:{preInit:function(){r.columns.list=this.data}}};for(var g in this.bb=f,d)if(f[g]){var _=f[g];_.data=d[g],_.preInit&&_.preInit()}else r[g]=d[g]}},this.cb=function(){var d=this.bb;for(var f in d){var g=d[f];g.postInit&&g.postInit()}},this.db=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Calendar() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Calendar: The placeholder element not found: '"+e+"'."}},this.eb={},this.eb.events=[],this.fb=function(d){var f=this.eb.events,g=this.events.list[d],_={};for(var w in g)_[w]=g[w];if("function"==typeof this.onBeforeEventRender){var C={};C.data=_,this.onBeforeEventRender(C)}f[d]=_},this.ca=function(){var d=this.events.list;if(r.eb.events=[],d){if(!x.isArray(d))throw new x.Exception("DayPilot.Calendar.events.list expects an array object. You supplied: "+typeof d);var f=d.length;this.cache.pixels={};var _=[];this.scrollLabels=[],this.minStart=1e4,this.maxEnd=0;for(var w=0;w<f;w++){var E=C=d[w];if("object"!=typeof E)throw new x.Exception("Event data item must be an object");if(!E.start)throw new x.Exception("Event data item must specify 'start' property");if(!E.end)throw new x.Exception("Event data item must specify 'end' property");if(E instanceof x.Event)throw new x.Exception("DayPilot.Calendar: DayPilot.Event object detected in events.list array. Use raw event data instead.");C.start=new x.Date(C.start),C.end=new x.Date(C.end)}if("function"==typeof this.onBeforeEventRender)for(w=0;w<f;w++)this.fb(w);for(w=0;w<this.ta.length;w++){var N={minEnd:1e6,maxStart:-1};this.scrollLabels.push(N),(A=this.ta[w]).events=[],A.lines=[],A.blocks=[];for(var R=new x.Date(A.start),F=R.getTime(),j=R.addTime(864e5),V=j.getTime(),W=0;W<f;W++)if(!_[W]){var ue=(C=d[W]).end,we=(re=C.start).getTime(),De=ue.getTime();if(!(De<we)){var tt=!(De<=F||we>=V);if("Resources"===r.viewType&&(tt=tt&&A.id===C.resource),tt){var Ee=new x.Event(C,r);Ee.part.dayIndex=w,Ee.part.start=F<we?C.start:R,Ee.part.end=V>De?C.end:j;var ve=this.getPixels(Ee.part.start,A.start),ye=this.getPixels(Ee.part.end,A.start),ke=ve.top,Be=ye.top;if(ke===Be&&(ve.cut||ye.cut))continue;var re,Gt=ye.boxBottom;Ee.part.top=Math.floor(ke/this.cellHeight)*this.cellHeight+1,Ee.part.height=Math.max(Math.ceil(Gt/this.cellHeight)*this.cellHeight-Ee.part.top,this.cellHeight-1)+1,Ee.part.barTop=Math.max(ke-Ee.part.top-1,0),Ee.part.barHeight=Math.max(Be-ke-2,1),ue=Ee.part.top+Ee.part.height,(re=Ee.part.top)>N.maxStart&&(N.maxStart=re),ue<N.minEnd&&(N.minEnd=ue),re<this.minStart&&(this.minStart=re),ue>this.maxEnd&&(this.maxEnd=ue),A.events.push(Ee),"function"==typeof this.onBeforeEventRender&&(Ee.cache=this.eb.events[W]),Ee.part.start.getTime()===we&&Ee.part.end.getTime()===De&&(_[W]=!0)}}}}for(w=0;w<this.ta.length;w++){var A;for((A=this.ta[w]).events.sort(this.gb),W=0;W<A.events.length;W++)A.putIntoBlock(C=A.events[W]);for(W=0;W<A.blocks.length;W++){var $t=A.blocks[W];$t.events.sort(this.gb);for(var Tn=0;Tn<$t.events.length;Tn++){var C;$t.putIntoLine(C=$t.events[Tn])}}}}},this.gb=function(d,f){if(!(d&&f&&d.start&&f.start))return 0;var g=d.start().getTime()-f.start().getTime();return 0!==g?g:f.end().getTime()-d.end().getTime()},this.debug=function(d,f){this.debuggingEnabled&&(r.debugMessages||(r.debugMessages=[]),r.debugMessages.push(d),typeof console<"u"&&console.log(d))},this.getPixels=function(d,f){f||(f=this.startDate);var g=f.getTime(),_=d.getTime(),w=this.cache.pixels[_+"_"+g];if(w)return w;var C=18e5,E=_-(g=f.getTime()),N=E%C,A=E-N,R=A+C;0===N&&(R=A);var F={cut:!1};return F.top=this.hb(E),F.boxTop=this.hb(A),F.boxBottom=this.hb(R),this.cache.pixels[_+"_"+g]=F,F},this.hb=function(d){return Math.floor(this.cellHeight*d/18e5)},this._a=function(){this.startDate=new x.Date(this.startDate).getDatePart()},this.da=function(){this.nav.corner&&(this.nav.corner.style.height=this.headerHeight+"px")},this.ha=function(){var d=this.Fa();this.nav.scroll&&d>0&&(this.nav.scroll.style.height=d+"px")},this.qa={},this.qa.scope=null,this.qa.notify=function(){r.qa.scope&&r.qa.scope.$apply()},this.qa.apply=function(d){d()},this.Va=function(){r.nav.scroll&&(r.Wa.scrollHour=r.nav.scroll.scrollTop/(2*r.cellHeight))},this.ab=function(){var d=0;r.Wa.scrollHour?d=2*r.cellHeight*r.Wa.scrollHour:"Auto"===r.initScrollPos&&(d="BusinessHours"===this.heightSpec?2*this.cellHeight*this.businessBeginsHour:0),r.nav.scroll.scrollTop=d},this.ib=function(){return!(!this.backendUrl&&"function"!=typeof WebForm_DoCallback)&&(typeof r.events.list>"u"||!r.events.list)},this.s=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.show=function(){r.visible=!0,r.nav.top.style.display=""},this.hide=function(){r.visible=!1,r.nav.top.style.display="none"},this.jb=function(){this._a(),this.ba(),this.Ea(),this.ea(),this.fa(),this.Xa(),this.Ua(),this.Ya(),t.register(this),this.kb(),this.R("Init")},this.Wa={},this.lb=function(){this.Wa.themes=[],this.Wa.themes.push(this.theme||this.cssClassPrefix)},this.mb=function(){for(var d=this.Wa.themes,f=0;f<d.length;f++)x.Util.removeClass(this.nav.top,d[f]+"_main");this.Wa.themes=[]},this.nb=function(){if(this.afterRender(null,!1),"function"==typeof this.onAfterRender){this.onAfterRender({isCallBack:!1})}},this.ob=function(){"function"!=typeof this.onInit||this.pb||(this.pb=!0,this.onInit({}))},this.qb=function(){var d=r.nav.top;return!!d&&d.offsetWidth>0&&d.offsetHeight>0},this.kb=function(){var d=r.qb;d()||(r.U=setInterval(function(){d()&&(r.Ua(),r.Xa(),clearInterval(r.U))},100))},this.Ia=function(d,f){return r._.aa()?x.Util.escapeTextHtml(d,f):x.Util.isNullOrUndefined(f)?x.Util.isNullOrUndefined(d)?"":d:f},this.internal={},this.internal.loadOptions=r.$a,this.internal.xssTextHtml=r.Ia,this.init=function(){this.db();var d=this.ib();return this.lb(),d?void this.jb():(this._a(),this.ba(),this.ca(),this.Ea(),this.ea(),this.fa(),this.s(),this.Xa(),this.Ua(),this.Ya(),t.register(this),this.events&&(this.da(),this.ia()),this.nb(),this.ob(),this.kb(),this.za=!0,this)},this.Init=this.init,this.$a(i)}};x.CalendarColumn=function(e,i){var o=this;o.id=e.id,o.name=e.name,o.data=e.data,o.start=new x.Date(e.start),o.calendar=i,o.toJSON=function(){var r={};return r.id=this.id,this.start&&(r.start=this.start.toString()),r.name=this.name,r}},x.Calendar=t.Calendar,typeof jQuery<"u"&&(jQuery.fn.daypilotCalendar=function(i){var o=null,r=this.each(function(){if(!this.daypilot){var l=new x.Calendar(this.id);for(name in this.daypilot=l,i)l[name]=i[name];l.init(),o||(o=l)}});return 1===this.length?o:r}),(e=x.am())&&e.directive("daypilotCalendar",["$parse",function(i){return{restrict:"E",template:"<div></div>",replace:!0,link:function(o,r,l){var d=new x.Calendar(r[0]);d.qa.scope=o,d.init();var f=l.id;f&&(o[f]=d);var g=l.publishAs;for(var _ in g&&(0,i(g).assign)(o,d),l)0===_.indexOf("on")&&function(N){d[N]=function(A){var R=i(l[N]);o.$apply(function(){R(o,{args:A})})}}(_);var w=o.$watch,E=l.events||l.daypilotEvents;w.call(o,l.config||l.daypilotConfig,function(N){for(var A in N)d[A]=N[A];d.update(),d.ob()},!0),w.call(o,E,function(N){d.events.list=N,d.update()},!0)}}}])}}(),typeof x>"u"&&(x={}),typeof x.DatePicker<"u"&&x.DatePicker.close||(x.DatePicker=function(n){this.v="2023.2.477-lite";var t="navigator_"+(new Date).getTime(),e=this;this.onShow=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.prepare=function(){if(this.locale="en-us",this.target=null,this.targetAlignment="left",this.resetTarget=!0,this.pattern=this._.locale().datePattern,this.theme="navigator_default",this.patterns=[],this.zIndex=null,n)for(var i in n)this[i]=n[i]},this.init=function(){this.date=new x.Date(this.date);var i=this.rb();this.resetTarget&&!i?this.sb(this.date):this.resetTarget||(e.date=i);var o=this.B();return o&&o.addEventListener("input",function(){e.date=e.rb(),e.date&&e.navigator.select(e.date,{dontNotify:!0})}),document.addEventListener("mousedown",function(){e.close()}),this},this.close=function(){this.qb&&(this.qb=!1,this.navigator&&this.navigator.dispose(),this.div.innerHTML="",this.div&&this.div.parentNode===document.body&&document.body.removeChild(this.div))},this.setDate=function(i){this.date=new x.Date(i),this.sb(this.date)},this.rb=function(){var o,i=this.B();if(!i)return this.date;if(!(o="INPUT"===i.tagName?i.value:i.innerText))return null;for(var r=x.Date.parse(o,e.pattern),l=0;l<e.patterns.length;l++){if(r)return r;r=x.Date.parse(o,e.patterns[l])}return r},this.sb=function(i){var o=this.B();if(o){var r=i.toString(e.pattern,e.locale);"INPUT"===o.tagName?o.value=r:o.innerHTML=r}},this._={},this._.locale=function(){return x.Locale.find(e.locale)},this.B=function(){var i=this.target;return i&&i.nodeType&&1===i.nodeType?i:document.getElementById(i)},Object.defineProperty(this,"visible",{get:function(){return e.qb}}),this.show=function(){if(!this.qb){var i=this.B(),o=this.navigator;(o=new x.Navigator(t)).api=2,o.cssOnly=!0,o.theme=e.theme,o.weekStarts="Auto",o.locale=e.locale,o.onTimeRangeSelected=function(A){e.date=A.start;var E=A.start.addTime(o.tb),N=E.toString(e.pattern,e.locale);(A={}).start=E,A.date=E,A.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof e.onTimeRangeSelect&&(e.onTimeRangeSelect(A),A.preventDefault.value)||(e.sb(N),e.close(),"function"==typeof e.onTimeRangeSelected&&e.onTimeRangeSelected(A))},this.navigator=o;var r=x.abs(i),l=i.offsetHeight,d=e.targetAlignment,f=document.createElement("div");f.style.position="absolute","left"===d&&(f.style.left=r.x+"px"),f.style.top=r.y+l+"px",e.zIndex&&(f.style.zIndex=e.zIndex);var g=document.createElement("div");g.id=t,f.appendChild(g),f.addEventListener("mousedown",function(E){(E=E||window.event).cancelBubble=!0,E.stopPropagation&&E.stopPropagation()}),document.body.appendChild(f),this.div=f;var _=e.rb()||(new x.Date).getDatePart();o.startDate=_,o.tb=_.getTimePart(),o.selectionDay=_.getDatePart(),o.init(),"right"===d&&(f.style.left=r.x+i.offsetWidth-o.nav.top.offsetWidth+"px"),this.qb=!0,this.onShow&&this.onShow()}},this.prepare(),this.init()}),typeof x>"u"&&(x={}),typeof x.Global>"u"&&(x.Global={}),function(n){if(typeof n.Menu>"u"||!n.Menu.def){var e={mouse:null,menu:null,handlersRegistered:!1,hideTimeout:null,waitingSubmenu:null};n.Menu=function(i){var o=this,r=null;this.v="2023.2.477-lite",this.zIndex=120,this.cssClassPrefix="menu_default",this.cssOnly=!0,this.menuTitle=null,this.showMenuTitle=!1,this.hideOnMouseOut=!1,this.hideAfter=200,this.theme=null,this.onShow=null,this.ub=function(){},i&&n.isArray(i)&&(this.items=i),this.toJSON=function(){return null},this.show=function(f,g){g=g||{};var jt,On,Pn,ji,_=null;if(f?"string"==typeof f.id||"number"==typeof f.id?_=f.id:"function"==typeof f.id?_=f.id():"function"==typeof f.value&&(_=f.value()):_=null,typeof n.Bubble<"u"&&n.Bubble.hideActive(),g.submenu||e.menuClean(),this.ub.submenu=null,null!==e.mouse){o.cssOnly||(o.cssOnly=!0);var w=null;if(f&&f.isRow&&f.$.row.task?(w=new n.Task(f.$.row.task,f.calendar)).menuType="resource":w=f&&f.isEvent&&f.data.task?new n.Task(f,f.calendar):f,"function"==typeof o.onShow){var C={};if(C.source=w,C.menu=o,C.preventDefault=function(){C.preventDefault.value=!0},o.onShow(C),C.preventDefault.value)return}var E=document.createElement("div");if(E.style.position="absolute",E.style.top="0px",E.style.left="0px",E.style.display="none",E.style.overflow="hidden",E.style.zIndex=this.zIndex+1,E.className=this.vb("main"),E.onclick=function(jt){jt.cancelBubble=!0,this.parentNode.removeChild(this)},this.hideOnMouseOut&&(E.onmousemove=function(jt){clearTimeout(e.hideTimeout)},E.onmouseleave=function(jt){o.delayedHide({hideParent:!0})}),!this.items||0===this.items.length)throw"No menu items defined.";if(this.showMenuTitle){var N=document.createElement("div");N.innerHTML=this.menuTitle,N.className=this.vb("title"),E.appendChild(N)}for(var A=0;A<this.items.length;A++){var R=this.items[A],F=document.createElement("div");if(n.Util.addClass(F,this.vb("item")),R.items&&(n.Util.addClass(F,this.vb("item_haschildren")),n.Util.addClass(E,this.vb("withchildren"))),typeof R<"u"&&!R.hidden){if("-"===R.text){var j=document.createElement("div");j.addEventListener("click",function(jt){jt.stopPropagation()}),F.appendChild(j)}else{var V=document.createElement("a");if(V.style.position="relative",V.style.display="block",R.cssClass&&n.Util.addClass(V,R.cssClass),R.disabled)n.Util.addClass(V,o.vb("item_disabled"));else if((R.onclick||R.onClick)&&(V.item=R,V.onclick=function(jt,On){return function(Pn){if("function"==typeof jt.onClick){var ji={};if(ji.item=jt,ji.source=On.source,ji.originalEvent=Pn,ji.preventDefault=function(){ji.preventDefault.value=!0},jt.onClick(ji),ji.preventDefault.value)return}jt.onclick&&jt.onclick.call(On,Pn)}}(R,V),n.reNonPassive(V,"touchstart",function(jt){jt.stopPropagation(),jt.preventDefault(),V.source.calendar.internal.touch.active=!0}),n.reNonPassive(V,"touchend",function(jt,On){return function(Pn){Pn.stopPropagation(),Pn.preventDefault();var ji=function(){window.setTimeout(function(){On.source.calendar.internal.touch.active=!1},500)};if("function"==typeof jt.onClick){var ni={};if(ni.item=jt,ni.source=On.source,ni.originalEvent=Pn,ni.preventDefault=function(){ni.preventDefault.value=!0},jt.onClick(ni),ni.preventDefault.value)return void ji()}jt.onclick&&jt.onclick.call(On,Pn),e.menuClean(),ji()}}(R,V))),R.items&&!R.disabled&&(V.ontouchend=(re=function(jt,On){return function(Pn){Pn.preventDefault(),Pn.stopPropagation(),o.wb(jt,On)}})(R,V)),R.onclick);else if(R.href)V.href=R.href.replace(/\x7B0\x7D/gim,_),R.target&&V.setAttribute("target",R.target);else if(R.command){var re;V.onclick=(re=function(On,Pn){return function(ji){var ni=Pn.source,oi=On;oi.action=oi.action?oi.action:"CallBack";var cs=ni.calendar||ni.root;if(ni instanceof n.Link)cs.internal.linkMenuClick(oi.command,ni,oi.action);else if(ni instanceof n.Selection)cs.internal.timeRangeMenuClick(oi.command,ni,oi.action);else if(ni instanceof n.Event)cs.internal.eventMenuClick(oi.command,ni,oi.action);else if(ni instanceof n.Selection)cs.internal.timeRangeMenuClick(oi.command,ni,oi.action);else if(ni instanceof n.Task)"resource"===ni.menuType?cs.internal.resourceHeaderMenuClick(oi.command,Pn.menuSource,oi.action):cs.internal.eventMenuClick(oi.command,Pn.menuSource,oi.action);else{switch(ni.menuType){case"resource":return void cs.internal.resourceHeaderMenuClick(oi.command,ni,oi.action);case"selection":return void cs.internal.timeRangeMenuClick(oi.command,ni,oi.action);default:return void cs.internal.eventMenuClick(oi.command,ni,oi.action)}ji.preventDefault()}}})(R,V),V.ontouchend=re(R,V)}R.items&&V.addEventListener("click",function(jt){jt.stopPropagation()}),V.source=w,V.menuSource=f;var ue=document.createElement("span");if(ue.className=o.vb("item_text"),ue.innerHTML=n.Util.escapeTextHtml(R.text,R.html),V.appendChild(ue),R.image){var we=document.createElement("img");we.src=R.image,we.style.position="absolute",we.style.top="0px",we.style.left="0px",V.appendChild(we)}if(R.icon){var De=document.createElement("span");De.className=o.vb("item_icon");var tt=document.createElement("i");tt.className=R.icon,De.appendChild(tt),V.appendChild(De)}if(R.symbol){var Ee="http://www.w3.org/2000/svg",ve=document.createElementNS(Ee,"svg");ve.setAttribute("width","100%"),ve.setAttribute("height","100%");var ye=document.createElementNS(Ee,"use");ye.setAttribute("href",R.symbol),ve.appendChild(ye);var ke=document.createElement("span");ke.className=o.vb("item_symbol"),ke.style.position="absolute",ke.style.top="0px",ke.style.left="0px",ke.appendChild(ve),V.appendChild(ke)}V.onmouseover=function(jt,On){return function(){var Pn=jt,ji=e.waitingSubmenu;if(ji){if(ji.parent===Pn)return;clearTimeout(ji.timeout),e.waitingSubmenu=null}jt.disabled||(e.waitingSubmenu={},e.waitingSubmenu.parent=Pn,e.waitingSubmenu.timeout=setTimeout(function(){e.waitingSubmenu=null,o.wb(Pn,On)},300))}}(R,V),F.appendChild(V)}E.appendChild(F)}}var Gt=function(jt){window.setTimeout(function(){e.menuClean(),n.MenuBar.deactivate()},100)};E.onclick=Gt,E.ontouchend=Gt,E.onmousedown=function(jt){(jt=jt||window.event).cancelBubble=!0,jt.stopPropagation&&jt.stopPropagation()},E.oncontextmenu=function(){return!1},document.body.appendChild(E),o.ub.visible=!0,o.ub.source=f,E.style.display="";var $t=E.offsetHeight,Tn=E.offsetWidth;E.style.display="none";var Kt=document.documentElement.clientHeight,br=window.innerWidth,Mi="number"==typeof g.windowMargin?g.windowMargin:5;if(function(){var jt=g.initiator;if(jt){var On=jt.div,ji=jt.area,oi=jt.a;if("Visible"!==(ji.visibility||ji.v||"Visible")&&(oi=n.Areas.createArea(On,jt.e,ji),On.appendChild(oi),r=oi),oi){var cs=n.abs(oi);g.x=cs.x,g.y=cs.y+cs.h+2}}}(),jt="number"==typeof g.x?g.x:e.mouse.x+1,On="number"==typeof g.y?g.y:e.mouse.y+1,Pn=document.body.scrollTop||document.documentElement.scrollTop,ji=document.body.scrollLeft||document.documentElement.scrollLeft,E.style.top=On-Pn>Kt-$t&&0!==Kt?On-(On-Pn-(Kt-$t)+Mi)+"px":On+"px","right"===g.align&&(jt-=Tn),E.style.left=jt-ji>br-Tn&&0!==br?jt-(jt-ji-(br-Tn)+Mi)+"px":jt+"px",g.parentLink){var Sn=g.parentLink,ka=parseInt(new n.StyleReader(E).get("border-top-width")),Il=n.abs(g.parentLink.parentNode),Pa=Il.x+Sn.offsetWidth,Or=Il.y-ka;Pa+Tn>br&&(Pa=Math.max(0,Il.x-Tn));var Rr=document.body.scrollTop+document.documentElement.scrollTop;Or+$t-Rr>Kt&&(Or=Math.max(0,Kt-$t+Rr)),E.style.left=Pa+"px",E.style.top=Or+"px"}E.style.display="",this.addShadow(E),this.ub.div=E,g.submenu||(n.Menu.active=this)}},this.wb=function(f,g){var _=f,w=g.source;if((!o.ub.submenu||o.ub.submenu.item!==f)&&(o.ub.submenu&&o.ub.submenu.item!==f&&(n.Util.removeClass(o.ub.submenu.link.parentNode,o.vb("item_haschildren_active")),o.ub.submenu.menu.hide(),o.ub.submenu=null),f.items)){var C=o.cloneOptions();C.items=f.items,o.ub.submenu={},o.ub.submenu.menu=new n.Menu(C),o.ub.submenu.menu.xb=o,o.ub.submenu.menu.show(w,{submenu:!0,parentLink:g,parentItem:_}),o.ub.submenu.item=f,o.ub.submenu.link=g,n.Util.addClass(g.parentNode,o.vb("item_haschildren_active"))}},this.vb=function(f){var g=this.theme||this.cssClassPrefix;return g?g+(this.cssOnly?"_":"")+f:""},this.cloneOptions=function(){return n.Util.copyProps(l,{},["cssClassPrefix","theme","hideAfter","hideOnMouseOut","zIndex"])},this.hide=function(f){f=f||{},this.ub.submenu&&this.ub.submenu.menu.hide();var g=e.waitingSubmenu;g&&(e.waitingSubmenu=null,clearTimeout(g.timeout)),this.removeShadow(),this.ub.div&&this.ub.div.parentNode===document.body&&document.body.removeChild(this.ub.div),r&&(n.de(r),r=null),o.ub.visible=!1,o.ub.source=null,o.xb&&f.hideParent&&o.xb.hide(f),n.Menu.active===o&&(n.Menu.active=null),"function"==typeof this.onHide&&this.onHide({})},this.delayedHide=function(f){e.hideTimeout=setTimeout(function(){o.hide(f)},o.hideAfter)},this.cancelHideTimeout=function(){clearTimeout(e.hideTimeout)},this.init=function(f){return e.mouseMove(f),this},this.addShadow=function(f){},this.removeShadow=function(){};var l=n.isArray(i)?null:i;if(l)for(var d in l)this[d]=l[d]},n.MenuBar=function(i,o){var r=this;for(var l in o=o||{},this.items=[],this.theme="menubar_default",this.windowMargin=0,this.nav={},this.elements={},this.elements.items=n.list(),this.k=null,this.za=!1,o)this[l]=o[l];this.yb=function(d){return this.theme+"_"+d},this.s=function(){this.nav.top=document.getElementById(i);var d=this.nav.top;d.className=this.yb("main"),n.list(r.items).forEach(function(f){var g=document.createElement("span");g.innerHTML=n.Util.escapeTextHtml(f.text,f.html),g.className=r.yb("item"),f.cssClass&&g.classList.add(f.cssClass),g.data=f,g.onclick=function(_){if(r.active&&r.active.item===f)r.zb();else if(f.children)return void r.Ab(g);if("function"==typeof f.onClick){var w={};w.item=f,w.originalEvent=_,f.onClick(w)}},g.onmousedown=function(_){_.stopPropagation()},g.onmouseover=function(){r.active&&r.active.item!==f&&r.Ab(g)},d.appendChild(g),r.elements.items.push(g)})},this.zb=function(){var d=r.yb("item_active");r.elements.items.forEach(function(f){n.Util.removeClass(f,d)}),r.active&&r.active.menu&&r.active.menu.hide(),r.active=null},this.Bb=function(d){return!!r.active&&r.active.item===d.data},this.Ab=function(d){if(!r.Bb(d)){r.zb();var f=d.data,g=r.active={};g.item=f,g.div=d;var _=r.yb("item_active");n.Util.addClass(d,_);var w=n.abs(d);if(f.children){g.menu=new n.Menu({items:f.children});var C=w.x;"right"===f.align&&(C+=w.w),g.menu.show(null,{x:C,y:w.y+w.h,align:f.align,windowMargin:r.windowMargin})}n.MenuBar.active=r}},this.init=function(){return this.s(),this.za=!0,this},this.dispose=function(){this.za&&(this.nav.top.innerHTML="",this.elements.items=[])}},n.MenuBar.deactivate=function(){n.MenuBar.active&&(n.MenuBar.active.zb(),n.MenuBar.active=null)},e.menuClean=function(){typeof n.Menu.active<"u"&&n.Menu.active&&(n.Menu.active.hide(),n.Menu.active=null)},e.mouseDown=function(i){typeof e<"u"&&(e.menuClean(),n.MenuBar.deactivate())},e.mouseMove=function(i){typeof e<"u"&&(e.mouse=e.mousePosition(i))},e.touchMove=function(i){typeof e<"u"&&(e.mouse=e.touchPosition(i))},e.touchStart=function(i){typeof e<"u"&&(e.mouse=e.touchPosition(i))},e.touchEnd=function(i){},e.touchPosition=function(i){if(!i||!i.touches)return null;var o=i.touches[0],r={};return r.x=o.pageX,r.y=o.pageY,r},e.mousePosition=function(i){return n.mo3(null,i)},n.Menu.touchPosition=function(i){i.touches&&(e.mouse=e.touchPosition(i))},n.Menu.hide=function(i){if((i=i||{}).calendar){var o=n.Menu.active;if(o){var r=o.ub.source;r&&r.calendar===i.calendar&&e.menuClean()}}else e.menuClean()},e.handlersRegistered||(n.re(document,"mousemove",e.mouseMove),n.re(document,"mousedown",e.mouseDown),n.re(document,"touchmove",e.touchMove),n.re(document,"touchstart",e.touchStart),n.re(document,"touchend",e.touchEnd),e.handlersRegistered=!0),n.Menu.def={}}}(x),typeof x>"u"&&(x={}),function(n){function t(C,E,N){var A=E.indexOf(".");if(-1!==A){var R=E.substring(0,A);if("__proto__"!==R&&"constructor"!==R){var F=E.substring(A+1),j=C[R];"object"==typeof j&&null!==j||(C[R]={},j=C[R]),t(j,F,N)}}else"__proto__"!==E&&"constructor"!==E&&(C[E]=N)}function e(C,E,N){for(var A in E=E||{},N=N||"",C){var R=C[A];"object"==typeof R?"[object Array]"===Object.prototype.toString.call(R)?E[N+A]=R:R&&R.toJSON?E[N+A]=R.toJSON():e(R,E,N+A+"."):E[N+A]=R}return E}if(!n.ModalStatic){n.ModalStatic={},n.ModalStatic.list=[],n.ModalStatic.hide=function(){if(this.list.length>0){var C=this.list.pop();C&&C.hide()}},n.ModalStatic.remove=function(C){for(var E=n.ModalStatic.list,N=0;N<E.length;N++)if(E[N]===C)return void E.splice(N,1)},n.ModalStatic.close=function(C){n.ModalStatic.result(C),n.ModalStatic.hide()},n.ModalStatic.result=function(C){var E=n.ModalStatic.list;E.length>0&&(E[E.length-1].result=C)},n.ModalStatic.displayed=function(C){for(var E=n.ModalStatic.list,N=0;N<E.length;N++)if(E[N]===C)return!0;return!1},n.ModalStatic.stretch=function(){if(this.list.length>0){var C=this.list[this.list.length-1];C&&C.stretch()}},n.ModalStatic.last=function(){var C=n.ModalStatic.list;return C.length>0?C[C.length-1]:null};var o="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDMxNzMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoxLjg1MTk2ODUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0gMC45NTQxNDgzOCwwLjY4MTYwMzEgNS4wMzkwNjI1LDUuNDExNTM4NiA5LjEyMzk3NjYsMC42ODE2MDMxIgogICAgICAgIC8+CiAgPC9nPgo8L3N2Zz4K",r=new function(){var C=document.createElement("style");C.setAttribute("type","text/css"),C.styleSheet||C.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(C);var E=!!C.styleSheet;return{rules:[],commit:function(){try{E&&(C.styleSheet.cssText=this.rules.join("\n"))}catch{}},add:function(A,R,F){if(E)this.rules.push(A+"{"+R+"}");else if(C.sheet.insertRule)typeof F>"u"&&(F=C.sheet.cssRules.length),C.sheet.insertRule(A+"{"+R+"}",F);else{if(!C.sheet.addRule)throw"No CSS registration method found";C.sheet.addRule(A,R,F)}}}};r.add(".modal_default_main","border: 10px solid #ccc; max-width: 90%;"),r.add(".modal_default_main:focus","outline: none;"),r.add(".modal_default_content","padding: 10px 0px;"),r.add(".modal_default_inner","padding: 20px;"),r.add(".modal_default_input","padding: 10px 0px;"),r.add(".modal_default_buttons","margin-top: 10px;"),r.add(".modal_default_buttons","padding: 10px 0px;"),r.add(".modal_default_form_item","padding: 10px 0px; position: relative;"),r.add(".modal_default_form_item_level1","border-left: 2px solid #ccc; margin-left: 10px; padding-left: 20px;"),r.add(".modal_default_form_item.modal_default_form_title","font-size: 1.5rem; font-weight: bold;"),r.add(".modal_default_form_item input[type=text]","width: 100%; box-sizing: border-box;"),r.add(".modal_default_form_item textarea","width: 100%; height: 200px; box-sizing: border-box;"),r.add(".modal_default_form_item input[type=select]","width: 100%; box-sizing: border-box;"),r.add(".modal_default_form_item label","display: block;"),r.add(".modal_default_form_item select","width: 100%; box-sizing: border-box;"),r.add(".modal_default_form_item_label","margin: 2px 0px;"),r.add(".modal_default_form_item_image img","max-width: 100%; height: auto;"),r.add(".modal_default_form_item_invalid",""),r.add(".modal_default_form_item_invalid_message","position: absolute; right: 0px; top: 9px; background-color: red; color: #ffffff; padding: 2px; border-radius: 2px;"),r.add(".modal_default_background","opacity: 0.5; background-color: #000;"),r.add(".modal_default_ok","padding: 3px; width: 80px;"),r.add(".modal_default_cancel","padding: 3px; width: 80px;"),r.add(".modal_default_form_item_date","position: relative;"),r.add(".modal_default_form_item_date:after","content: ''; position: absolute; right: 7px; top: 50%; margin-top: 3px; width: 10px; height: 15px; background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojY2NjY2NjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjM4MDM3MzM2O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDE5MjgiCiAgICAgICB3aWR0aD0iOS45MTUzMDYxIgogICAgICAgaGVpZ2h0PSIxMS4zNjkzNyIKICAgICAgIHg9IjAuMTE3MTg3NSIKICAgICAgIHk9Ii0zLjAwOTk5NTciCiAgICAgICByeT0iMS4zMTE4NTA1IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNjY2NjY2M7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNTk4MTQwMTI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MTkzMCIKICAgICAgIHdpZHRoPSIxLjUzNDQxMzYiCiAgICAgICBoZWlnaHQ9IjIuMjE5ODI1IgogICAgICAgeD0iMi4xNTU4NDgzIgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHJ5PSIwLjY3MTc4OTE3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iMS41MjM5NTA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QxOTQ4IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjY3MTc4OTE3IgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHg9IjYuNDUyNzIzNSIKICAgICAgIGhlaWdodD0iMi4yMTk4MjUiCiAgICAgICB3aWR0aD0iMS41MzQ0MTM2IgogICAgICAgaWQ9InJlY3QyMDAzIgogICAgICAgc3R5bGU9ImZpbGw6I2NjY2NjYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS41OTgxNDAxMjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAwNSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIHk9Ii0xLjE2NTg0NjYiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iNi45OTI3MDA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDA3IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAxMyIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjEuNTIzOTUwNiIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHJ5PSIwLjI5NjAxNDciIC8+CiAgICA8cmVjdAogICAgICAgcnk9IjAuMjk2MDE0NyIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGlkPSJyZWN0MjAxNSIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDIwMTciCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB4PSI2Ljk5MjcwMDYiCiAgICAgICB5PSIxLjgwMjkwMzQiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSI0LjczMjU5MDciCiAgICAgICB4PSIxLjU2MzAxMzEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBpZD0icmVjdDIwMTkiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3QyMDIxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgeD0iNC4yNTgzMjU2IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgcnk9IjAuMjk2MDE0NyIgLz4KICAgIDxyZWN0CiAgICAgICByeT0iMC4yOTYwMTQ3IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgeD0iNy4wMzE3NjMxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDIzIgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDwvZz4KPC9zdmc+Cg==)"),-1!==navigator.userAgent.indexOf("Edge")&&r.add(".modal_default_form_item_date input::-ms-clear","display: none;"),r.add(".modal_default_form_item_scrollable_scroll","width: 100%; height: 200px; box-sizing: border-box; border: 1px solid #ccc; overflow-y: auto;"),r.add(".modal_default_form_item_scrollable_scroll_content","padding: 5px;"),r.add(".modal_default_form_item_searchable","position: relative;"),r.add(".modal_default_form_item_searchable_icon",""),r.add(".modal_default_form_item_searchable_icon:after","content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url("+o+");"),r.add(".modal_default_form_item_searchable_list","box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;"),r.add(".modal_default_form_item_searchable_list_item","background: white; padding: 2px; cursor: default;"),r.add(".modal_default_form_item_searchable_list_item_highlight","background: #ccc;"),r.add(".modal_default_form_item_time","position: relative;"),r.add(".modal_default_form_item_time_icon",""),r.add(".modal_default_form_item_time_icon:after","content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url("+o+");"),r.add(".modal_default_form_item_time_list","box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;"),r.add(".modal_default_form_item_time_list_item","background: white; padding: 2px; cursor: default;"),r.add(".modal_default_form_item_time_list_item_highlight","background: #ccc;"),r.add(".modal_default_form_item_datetime_parent","display: flex;"),r.add(".modal_default_form_item_datetime .modal_default_form_item_time_main","margin-left: 5px;"),r.add(".modal_default_form_item_datetime input[type='text'].modal_default_input_date ",""),r.add(".modal_default_form_item_tabular_main","margin-top: 10px;"),r.add(".modal_default_form_item_tabular_table","display: table; width: 100%; xbackground-color: #fff; border-collapse: collapse;"),r.add(".modal_default_form_item_tabular_tbody","display: table-row-group;"),r.add(".modal_default_form_item_tabular_row","display: table-row;"),r.add(".modal_default_form_item_tabular_row.modal_default_form_item_tabular_header",""),r.add(".modal_default_form_item_tabular_cell.modal_default_form_item_tabular_rowaction","padding: 0px; width: 23px;"),r.add(".modal_default_form_item_tabular_cell","display: table-cell; border: 0px; padding: 2px 2px 2px 0px; cursor: default; vertical-align: bottom;"),r.add(".modal_default_form_item_tabular_header .modal_default_form_item_tabular_cell","padding-left: 0px; padding-bottom: 0px;"),r.add(".modal_default_form_item_tabular_table input[type=text], .modal_default_form_item_tabular_table input[type=number]","width:100%; box-sizing: border-box;"),r.add(".modal_default_form_item_tabular_table select","width:100%; height:100%; box-sizing: border-box;"),r.add(".modal_default_form_item_tabular_plus","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"),r.add(".modal_default_form_item_tabular_plus:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSA1LjAgMC41IEwgNS4wIDkuNSBNIDAuNSA1LjAgTCA5LjUgNS4wJyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"),r.add(".modal_default_form_item_tabular_delete","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"),r.add(".modal_default_form_item_tabular_delete:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgOS41IDkuNSBNIDAuNSA5LjUgTCA5LjUgMC41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"),r.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_plus","display: none;"),r.add(".modal_default_form_item_tabular_plus_max.modal_default_form_item_tabular_plus","display: none;"),r.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_delete","visibility: hidden;"),r.add(".modal_default_form_item_tabular_empty","height: 1px; margin: 5px 23px 5px 0px; background-color: #ccc;"),r.add(".modal_default_form_item_tabular_spacer .modal_default_form_item_tabular_cell","padding: 0px;"),r.add(".modal_min_main","border: 1px solid #ccc; max-width: 90%;"),r.add(".modal_min_background","opacity: 0.5; background-color: #000;"),r.add(".modal_min_ok","padding: 3px 10px;"),r.add(".modal_min_cancel","padding: 3px 10px;"),r.add(".navigator_modal_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"),r.add(".navigator_modal_main *, .navigator_modal_main *:before, .navigator_modal_main *:after","box-sizing: content-box;"),r.add(".navigator_modal_month","font-size: 11px;"),r.add(".navigator_modal_day","color: black;"),r.add(".navigator_modal_weekend","background-color: #f0f0f0;"),r.add(".navigator_modal_dayheader","color: black;"),r.add(".navigator_modal_line","border-bottom: 1px solid #c0c0c0;"),r.add(".navigator_modal_dayother","color: gray;"),r.add(".navigator_modal_todaybox","border: 1px solid red;"),r.add(".navigator_modal_title, .navigator_modal_titleleft, .navigator_modal_titleright","border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"),r.add(".navigator_modal_busy","font-weight: bold;"),r.add(".navigator_modal_cell","text-align: center;"),r.add(".navigator_modal_select .navigator_modal_cell_box","background-color: #FFE794; opacity: 0.5;"),r.add(".navigator_modal_title","text-align: center;"),r.add(".navigator_modal_titleleft, .navigator_modal_titleright","text-align: center;"),r.add(".navigator_modal_dayheader","text-align: center;"),r.add(".navigator_modal_weeknumber","text-align: center;"),r.add(".navigator_modal_cell_text","cursor: pointer;"),r.commit(),n.Modal=function(C){this.autoFocus=!0,this.focus=null,this.autoStretch=!0,this.autoStretchFirstLoadOnly=!1,this.className=null,this.theme="modal_default",this.disposeOnClose=!0,this.dragDrop=!0,this.loadingHtml=null,this.maxHeight=null,this.scrollWithPage=!0,this.useIframe=!0,this.zIndex=99999,this.left=null,this.width=600,this.top=20,this.height=200,this.locale=null,this.closed=null,this.onClose=null,this.onClosed=null,this.onShow=null;var E=this;this.id="_"+(new Date).getTime()+"n"+10*Math.random(),this.Cb=!1,this.Db=null,this.Eb=null,this.showHtml=function(N){if(n.ModalStatic.displayed(this))throw"This modal dialog is already displayed.";var R,F;this.div||this.Fb(),this.Gb(),this.useIframe?window.setTimeout((R=this,F=N,function(){R.setInnerHTML(R.id+"iframe",F)}),0):N.nodeType?this.div.appendChild(N):this.div.innerHTML=N,this.Gb(),this.Hb(),this.Ib()},this.showUrl=function(N){if(n.ModalStatic.displayed(this))throw"This modal dialog is already displayed.";if(this.useIframe){this.div||this.Fb();var A=this.loadingHtml;A&&(this.iframe.src="about:blank",this.setInnerHTML(this.id+"iframe",A)),this.re(this.iframe,"load",this.Jb),this.iframe.src=N,this.Gb(),this.Hb(),this.Ib()}else E.Kb({url:N,success:function(R){E.showHtml(R.request.responseText)},error:function(R){E.showHtml("Error loading the modal dialog")}})},this.Ib=function(){if("function"==typeof E.onShow){var N={};N.root=E.Lb(),N.modal=E,E.onShow(N)}},this.Lb=function(){return E.iframe?E.iframe.contentWindow.document:E.div},this.Kb=function(N){var A=new XMLHttpRequest;if(A){var F=N.success||function(){},j=N.error||function(){},V=N.data;A.open(N.method||"GET",N.url,!0),A.setRequestHeader("Content-type","text/plain"),A.onreadystatechange=function(){if(4===A.readyState)if(200===A.status||304===A.status)(re={}).request=A,F(re);else if(j){var re;(re={}).request=A,j(re)}else window.console&&console.log("HTTP error "+A.status)},4!==A.readyState&&("object"==typeof V&&(V=JSON.stringify(V)),A.send(V))}},this.Gb=function(){delete this.result;var N=window,A=document,R=N.pageYOffset?N.pageYOffset:A.documentElement&&A.documentElement.scrollTop?A.documentElement.scrollTop:A.body.scrollTop;this.theme&&(this.hideDiv.className=this.theme+"_background"),this.zIndex&&(this.hideDiv.style.zIndex=this.zIndex),this.hideDiv.style.display="",window.setTimeout(function(){E.hideDiv&&(E.hideDiv.onclick=function(){E.hide({backgroundClick:!0})})},500),this.div.className=this.theme?this.theme+"_main":"",this.className&&(this.div.className+=" "+this.className),this.left?this.div.style.left=this.left+"px":this.div.style.marginLeft="-"+Math.floor(this.width/2)+"px",this.div.style.position="absolute",this.div.style.boxSizing="content-box",this.div.style.top=R+this.top+"px",this.div.style.width=this.width+"px",this.zIndex&&(this.div.style.zIndex=this.zIndex),this.height&&(this.div.style.height=this.useIframe||!this.autoStretch?this.height+"px":""),this.useIframe&&this.height&&(this.iframe.style.height=this.height+"px"),this.div.style.display="",this.Nb(),n.ModalStatic.remove(this),n.ModalStatic.list.push(this)},this.Jb=function(){E.iframe.contentWindow.modal=E,E.autoStretch&&E.stretch()},this.stretch=function(){if(this.useIframe){for(var R=E.Mb().x-40,F=this.width;F<R&&this.Ob();F+=10)this.div.style.width=F+"px",this.div.style.marginLeft="-"+Math.floor(F/2)+"px";for(var j=this.maxHeight||E.Mb().y-2*this.top,V=this.height;V<j&&this.Pb();V+=10)this.iframe.style.height=V+"px",this.div.style.height=V+"px";this.autoStretchFirstLoadOnly&&this.ue(this.iframe,"load",this.Jb)}else this.div.style.height=""},this.Ob=function(){for(var N=this.iframe.contentWindow.document,A="BackCompat"===N.compatMode?N.body:N.documentElement,R=A.scrollWidth,F=N.body.children,j=0;j<F.length;j++)R=Math.max(R,F[j].offsetLeft+F[j].offsetWidth);return R>A.clientWidth},this.Pb=function(){for(var N=this.iframe.contentWindow.document,A="BackCompat"===N.compatMode?N.body:N.documentElement,R=A.scrollHeight,F=N.body.children,j=0;j<F.length;j++)R=Math.max(R,F[j].offsetTop+F[j].offsetHeight);return R>A.clientHeight},this.Mb=function(){var N=document;return"CSS1Compat"===N.compatMode&&N.documentElement&&N.documentElement.clientWidth?{x:N.documentElement.clientWidth,y:N.documentElement.clientHeight}:{x:N.body.clientWidth,y:N.body.clientHeight}},this.Hb=function(){this.Cb||(this.re(window,"resize",this.Qb),this.re(window,"scroll",this.Rb),this.dragDrop&&(this.re(document,"mousemove",this.Sb),this.re(document,"mouseup",this.Tb)),this.Cb=!0)},this.Ub=function(){this.ue(window,"resize",this.Qb),this.ue(window,"scroll",this.Rb),this.dragDrop&&(this.ue(document,"mousemove",this.Sb),this.ue(document,"mouseup",this.Tb)),this.Cb=!1},this.Vb=function(N){N.target===E.div&&(N.preventDefault(),E.div.style.cursor="move",E.Wb(),E.Eb=E.mc(N||window.event),E.Db={x:E.div.offsetLeft,y:E.div.offsetTop})},this.Sb=function(N){if(E.Eb){N=N||window.event;var A=E.mc(N),R=A.x-E.Eb.x,F=A.y-E.Eb.y;E.div.style.marginLeft="0px",E.div.style.top=E.Db.y+F+"px",E.div.style.left=E.Db.x+R+"px"}},this.Tb=function(N){E.Eb&&(E.Xb(),E.div.style.cursor=null,E.Eb=null)},this.Wb=function(){if(this.useIframe){var N=document.createElement("div");N.style.backgroundColor="#ffffff",N.style.filter="alpha(opacity=80)",N.style.opacity="0.80",N.style.width="100%",N.style.height=this.height+"px",N.style.position="absolute",N.style.left="0px",N.style.top="0px",this.div.appendChild(N),this.mask=N}},this.Xb=function(){this.useIframe&&(this.div.removeChild(this.mask),this.mask=null)},this.Qb=function(){E.Yb(),E.Nb()},this.Rb=function(){E.Yb()},this.Nb=function(){!E.left&&E.div&&(E.div.style.marginLeft="-"+Math.floor(E.div.offsetWidth/2)+"px")},this.Yb=function(){if(E.hideDiv&&E.div&&"none"!==E.hideDiv.style.display&&"none"!==E.div.style.display){var N=E.Zb.scrollY();E.scrollWithPage||(E.div.style.top=N+E.top+"px")}},this.Zb={},this.Zb.container=function(){return E.container||document.body},this.Zb.scrollY=function(){var N=E.Zb.container();return N===document.body?window.pageYOffset?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop:N.scrollTop},this.re=function(N,A,R){N.addEventListener?N.addEventListener(A,R,!1):N.attachEvent&&N.attachEvent("on"+A,R)},this.ue=function(N,A,R){N.removeEventListener?N.removeEventListener(A,R,!1):N.detachEvent&&N.detachEvent("on"+A,R)},this.mc=function(N){return N.pageX||N.pageY?{x:N.pageX,y:N.pageY}:{x:N.clientX+document.documentElement.scrollLeft,y:N.clientY+document.documentElement.scrollTop}},this.abs=function(N){for(var A={x:N.offsetLeft,y:N.offsetTop};N.offsetParent;)A.x+=(N=N.offsetParent).offsetLeft,A.y+=N.offsetTop;return A},this.Fb=function(){var N=E.Zb.container(),R=N===document.body?"fixed":"absolute",F=document.createElement("div");F.id=this.id+"hide",F.style.position=R,F.style.left="0px",F.style.top="0px",F.style.right="0px",F.style.bottom="0px",F.oncontextmenu=function(){return!1},F.onmousedown=function(){return!1},N.appendChild(F);var j=document.createElement("div");j.id=this.id+"popup",j.style.position=R,j.style.left="50%",j.style.top="0px",j.style.backgroundColor="white",j.style.width="50px",j.style.height="50px",this.dragDrop&&(j.onmousedown=this.Vb),j.addEventListener("keydown",function(W){W.stopPropagation()});var V=null;this.useIframe&&((V=document.createElement("iframe")).id=this.id+"iframe",V.name=this.id+"iframe",V.frameBorder="0",V.style.width="100%",V.style.height="50px",j.appendChild(V)),N.appendChild(j),this.div=j,this.iframe=V,this.hideDiv=F},this.setInnerHTML=function(N,A){var R=window.frames[N],F=R.contentWindow||R.document||R.contentDocument;F.document&&(F=F.document),null==F.body&&F.write("<body></body>"),A.nodeType?F.body.appendChild(A):F.body.innerHTML=A,E.autoStretch&&(E.autoStretchFirstLoadOnly&&E.$b||(E.stretch(),E.$b=!0))},this.close=function(N){this.result=N,this.hide()},this.closeSerialized=function(){for(var A=E.Lb().querySelectorAll("input, textarea, select"),R={},F=0;F<A.length;F++){var j=A[F],V=j.name;V&&(R[V]=j.value)}E.close(R)},this.hide=function(N){var A={};A.backgroundClick=!!(N=N||{}).backgroundClick,A.result=this.result,A.canceled=typeof this.result>"u",A.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof this.onClose&&(this.onClose(A),A.preventDefault.value)||(this.div&&(this.div.style.display="none",this.hideDiv.style.display="none",this.useIframe||(this.div.innerHTML=null)),window.focus(),n.ModalStatic.remove(this),"function"==typeof this.onClosed?this.onClosed(A):this.closed&&this.closed(),delete this.result,this.disposeOnClose&&(E.Ub(),E._b(E.div),E._b(E.hideDiv),E.div=null,E.hideDiv=null,E.iframe=null))},this._b=function(N){N&&N.parentNode&&N.parentNode.removeChild(N)},this.bc=function(){if(C)for(var N in C)this[N]=C[N]},this.bc()},n.Modal.alert=function(C,E){(E=E||{}).height=E.height||40,E.useIframe=!1;var N=E.okText||"OK";return n.getPromise(function(A,R){E.onClosed=function(ue){A(ue)};var F=new n.Modal(E),j=document.createElement("div");j.className=F.theme+"_inner";var V=document.createElement("div");V.className=F.theme+"_content",V.innerHTML=C;var W=document.createElement("div");W.className=F.theme+"_buttons";var re=document.createElement("button");re.innerText=N,re.className=F.theme+"_ok",re.onclick=function(ue){n.ModalStatic.close("OK")},W.appendChild(re),j.appendChild(V),j.appendChild(W),F.showHtml(j),F.autoFocus&&re.focus()})},n.Modal.confirm=function(C,E){(E=E||{}).height=E.height||40,E.useIframe=!1;var N=E.okText||"OK",A=E.cancelText||"Cancel";return n.getPromise(function(R,F){E.onClosed=function(tt){R(tt)};var j=new n.Modal(E),V=document.createElement("div");V.className=j.theme+"_inner";var W=document.createElement("div");W.className=j.theme+"_content",W.innerHTML=C;var re=document.createElement("div");re.className=j.theme+"_buttons";var ue=document.createElement("button");ue.innerText=N,ue.className=j.theme+"_ok",ue.onclick=function(tt){n.ModalStatic.close("OK")};var we=document.createTextNode(" "),De=document.createElement("button");De.innerText=A,De.className=j.theme+"_cancel",De.onclick=function(tt){n.ModalStatic.close()},re.appendChild(ue),re.appendChild(we),re.appendChild(De),V.appendChild(W),V.appendChild(re),j.showHtml(V),j.autoFocus&&ue.focus()})},n.Modal.prompt=function(C,E,N){"object"==typeof E&&(N=E,E=""),(N=N||{}).height=N.height||40,N.useIframe=!1;var A=N.okText||"OK",R=N.cancelText||"Cancel",F=E||"";return n.getPromise(function(j,V){N.onClosed=function(ke){j(ke)};var W=new n.Modal(N),re=document.createElement("div");re.className=W.theme+"_inner";var ue=document.createElement("div");ue.className=W.theme+"_content",ue.innerHTML=C;var we=document.createElement("div");we.className=W.theme+"_input";var De=document.createElement("input");De.value=F,De.style.width="100%",De.onkeydown=function(ke){var Be=!1;switch(ke.keyCode){case 13:W.close(this.value);break;case 27:W.close();break;default:Be=!0}Be||(ke.preventDefault(),ke.stopPropagation())},we.appendChild(De);var tt=document.createElement("div");tt.className=W.theme+"_buttons";var Ee=document.createElement("button");Ee.innerText=A,Ee.className=W.theme+"_ok",Ee.onclick=function(ke){W.close(De.value)};var ve=document.createTextNode(" "),ye=document.createElement("button");ye.innerText=R,ye.className=W.theme+"_cancel",ye.onclick=function(ke){W.close()},tt.appendChild(Ee),tt.appendChild(ve),tt.appendChild(ye),re.appendChild(ue),re.appendChild(we),re.appendChild(tt),W.showHtml(re),W.autoFocus&&De.focus()})},n.Modal.form=function(C,E,N){if(1===arguments.length){var A=C;if(function(C){return"[object Array]"===Object.prototype.toString.call(C)}(A))E={};else{if("object"!=typeof A)throw"Invalid DayPilot.Modal.form() parameter";for(var R in E=C,C=[],E){var F={};F.name=R,F.id=R,C.push(F)}}}var j={};for(var R in N)j[R]=N[R];j.height=j.height||40,j.useIframe=!1;var V=j.okText||"OK",W=j.cancelText||"Cancel";return n.getPromise(function(re,ue){j.onClosed=function(Mi){if(Mi.result){var Sn=JSON.parse(JSON.stringify(E));for(var ka in Mi.result)t(Sn,ka,Mi.result[ka]);Mi.result=Sn}re(Mi)};var we=new n.Modal(j),De=document.createElement("div");De.className=we.theme+"_inner";var tt=document.createElement("div");tt.className=we.theme+"_input";var Ee=new d({theme:we.theme,form:C,data:E,zIndex:we.zIndex,locale:we.locale,plugins:we.plugins,onKey:function(Mi){switch(Mi.key){case"Enter":Ee.validate()&&we.close(Ee.serialize());break;case"Escape":we.close()}},onChange:function(Mi){"function"==typeof we.onChange&&we.onChange(Mi)}}),ve=Ee.create();tt.append(ve);var ye=document.createElement("div");ye.className=we.theme+"_buttons";var ke=document.createElement("button");ke.innerText=V,ke.className=we.theme+"_ok",j.okDisabled&&(ke.disabled=!0),ke.onclick=function(Mi){Ee.validate()&&we.close(Ee.serialize())};var Be=document.createTextNode(" "),Gt=document.createElement("button");if(Gt.innerText=W,Gt.className=we.theme+"_cancel",Gt.onclick=function(Mi){we.close()},Gt.onmousedown=function(Mi){Ee.canceling=!0},ye.appendChild(ke),ye.appendChild(Be),ye.appendChild(Gt),De.appendChild(tt),De.appendChild(ye),we.showHtml(De),we.div.setAttribute("tabindex","-1"),we.div.addEventListener("keydown",function(Mi){switch(Mi.keyCode){case 27:we.close();break;case 13:Ee.validate()&&we.close(Ee.serialize())}}),we.focus){var $t=null;"object"==typeof we.focus?$t=Ee.findViewById(we.focus.id,we.focus.value):"string"==typeof we.focus&&($t=Ee.findViewById(we.focus)),$t&&$t.focus()}else{var br=Ee.firstFocusable();we.autoFocus&&br?br.focus():we.div.focus()}})},n.Modal.close=function(C){var E=n.Modal.opener();E&&E.close(C)},n.Modal.stretch=function(C){var E=n.Modal.opener();if(!E)throw"Unable to find the opener DayPilot.Modal instance.";E.stretch()},n.Modal.closeSerialized=function(){var C=n.Modal.opener()||n.ModalStatic.last();C&&C.closeSerialized()},n.Modal.opener=function(){return typeof n<"u"&&typeof n.ModalStatic<"u"&&n.ModalStatic.list.length>0?n.ModalStatic.list[n.ModalStatic.list.length-1]:parent&&parent.DayPilot&&parent.DayPilot.ModalStatic&&parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length-1]},n.Modal.Experimental={},n.Modal.Experimental.Form=d,typeof n.getPromise>"u"&&(n.getPromise=function(C){return typeof Promise<"u"?new Promise(C):(n.Promise=function(E){var N=this;this.then=function(A,R){return E(A=A||function(){},R=R||function(){}),n.getPromise(E)},this.catch=function(A){return N.then(null,A),n.getPromise(E)}},new n.Promise(C))});var d=function(C){for(var E in this.form=[],this.data={},this.theme="form_default",this.zIndex=99999,this.locale="en-us",this.plugins={},this.onKey=null,this.cc=[],this.dc=null,this.canceling=!1,this.ec=[],this.f=[],this.fc=null,C=C||{})this[E]=C[E]};d.prototype.create=function(){return this.load(),this.render(),this.fc},d.prototype.render=function(){var C=this;this.fc=document.createElement("div"),this.cc.forEach(function(E){C.createView(E)}),this.applyState()},d.prototype.createView=function(C){var E=this.theme,N=this,A=document.createElement("div");if(A.className=E+"_form_item "+E+"_form_item_level"+C.level,A.className+=C.interactive||"title"!==C.type?" "+E+"_form_item_"+C.type:" "+E+"_form_title",C.data.cssClass&&(A.className+=" "+C.data.cssClass),!C.isValue){var R=document.createElement("div");R.className=E+"_form_item_label",R.innerText=C.text,A.appendChild(R)}var F=this.createInteractive(C);F.onInput=function(j){if(N.gc(F,{debounce:!(j=j||{}).immediate}),"function"==typeof N.onChange){var V={};V.result=N.serialize(),N.onChange(V)}},F.onBlur=function(){N.canceling||N.gc(F)},F.apply(C),F.fc=A,F.row=C,F.element&&A.appendChild(F.element),this.f.push(F),this.fc.appendChild(A)},d.prototype.validate=function(){var C=this,E=!0;return this.f.forEach(function(N){var A=C.gc(N);E=E&&A}),E},d.prototype.gc=function(C,E){function N(){C.hc&&(C.hc.remove(),C.hc=null),C.fc.classList.add(we);var Ee=document.createElement("div");Ee.classList.add(De),Ee.innerText=ue.message,C.hc=Ee,C.fc.appendChild(Ee)}var A=(E=E||{}).debounce,R=E.silent,F=C.row,j=!0,re=("function"==typeof F.data.onValidate?F.data.onValidate:null)||("function"==typeof F.data.validate?F.data.validate:null);if(re){var ue={valid:!0};ue.value=C.save()[F.field],ue.message="Error",ue.values=this.serialize(),ue.result=this.serialize(),re(ue);var we=this.theme+"_form_item_invalid",De=this.theme+"_form_item_invalid_message";ue.valid?(clearTimeout(this.ec[F.field]),C.hc&&(C.hc.remove(),C.hc=null),C.fc.classList.remove(we)):R||(A?(clearTimeout(this.ec[F.field]),this.ec[F.field]=setTimeout(function(){N()},1e3)):N()),j=ue.valid}return j},d.prototype.load=function(){var E,C=this;this.form.forEach(function(R){C.processFormItem(R,0)});try{var N=JSON.stringify(this.data);E=e(JSON.parse(N))}catch(R){throw new Error("The 'data' object is not serializable (it may contain circular dependencies): "+R)}for(var A in E)this.setValue(A,E[A])},d.prototype.setValue=function(C,E){this.cc.forEach(function(N){N.applyValue(C,E)})},d.prototype.updateDependentState=function(){var C=this,E=[!0];(this.dc?this.dc:this.cc).forEach(function(N){var A=C.updateState(N,{enabled:E[N.level]&&!N.data.disabled});A.isValue&&(E[A.level+1]=A.enabled&&A.checked)})},d.prototype.processFormItem=function(C,E){var N=this,A=this.getFieldType(C),R=[];if("radio"===A)C.name&&((F=new f).field=C.id,F.data=C,F.level=E,F.type="label",F.interactive=!1,F.text=C.name,N.cc.push(F),R.push(F)),C.options.forEach(function(j){var V=new f;V.field=C.id,V.data=j,V.level=E,V.type=A,V.isValue=!0,V.text=j.name,V.resolved=j.id,N.cc.push(V),R.push(V),j.children&&j.children.forEach(function(W){var re=N.processFormItem(W,E+1);R=R.concat(re)})});else if("title"===A)(F=new f).field=C.id,F.data=C,F.level=E,F.type=A,F.interactive=!1,F.text=C.name,N.cc.push(F),R.push(F);else if("image"===A)(F=new f).isValue=!0,F.field=C.id,F.data=C,F.level=E,F.type=A,F.interactive=!1,F.text=null,N.cc.push(F),R.push(F);else if("html"===A)(F=new f).isValue=!0,F.field=C.id,F.data=C,F.level=E,F.type=A,F.interactive=!1,F.text=null,N.cc.push(F),R.push(F);else if("scrollable"===A)(F=new f).isValue=!0,F.field=C.id,F.data=C,F.level=E,F.type=A,F.interactive=!1,F.text=null,N.cc.push(F),R.push(F);else{var F;(F=new f).field=C.id,F.data=C,F.level=E,F.type=A,F.text=C.name,F.children=[],N.cc.push(F),R.push(F)}return"checkbox"===A&&(F.isValue=!0,F.resolved=!0,C.children&&C.children.forEach(function(j){var V=N.processFormItem(j,E+1);R=R.concat(V)})),R},d.prototype.doOnKey=function(C){"function"==typeof this.onKey&&this.onKey({key:C})},d.prototype.createInteractive=function(C){var E=this,N={label:function(){return new g},title:function(){return new g},image:function(){var A=new g,R=document.createElement("img");return R.src=C.data.image,A.element=R,A},html:function(){var A=new g,R=document.createElement("div");return"string"==typeof C.data.text?R.innerText=C.data.text:"string"==typeof C.data.html&&(R.innerHTML=C.data.html),A.element=R,A},scrollable:function(){var A=new g,R=document.createElement("div");R.className=E.theme+"_form_item_scrollable_scroll",C.data.height&&(R.style.height=C.data.height+"px");var F=document.createElement("div");return F.className=E.theme+"_form_item_scrollable_scroll_content","string"==typeof C.data.text?F.innerText=C.data.text:"string"==typeof C.data.html&&(F.innerHTML=C.data.html),R.appendChild(F),A.element=R,A},text:function(){var A=new g;A.apply=function(F){A.row=F;var j=A.element;j.value=F.value,j.disabled=!F.enabled};var R=document.createElement("input");return R.name=C.field,R.type="text",R.autocomplete="off",R.onkeydown=function(F){var j=!1;switch(F.keyCode){case 13:E.doOnKey("Enter");break;case 27:E.doOnKey("Escape");break;default:j=!0}j||(F.preventDefault(),F.stopPropagation())},R.oninput=function(F){A.onInput()},R.onblur=function(F){A.onBlur()},A.element=R,A.canFocus=function(){return!A.element.disabled},A.focus=function(){A.element.focus(),A.element.setSelectionRange(0,A.element.value.length)},A.save=function(){var F={};return F[C.field]=R.value,F},A},textarea:function(){var A=new g;A.apply=function(F){A.row=F;var j=A.element;j.value=F.value,j.disabled=!F.enabled};var R=document.createElement("textarea");return R.name=C.field,C.data.height&&(R.style.height=C.data.height+"px"),R.onkeydown=function(F){var j=!1;switch(F.keyCode){case 13:(F.ctrlKey||F.metaKey)&&E.doOnKey("Enter"),j=!1;break;case 27:E.doOnKey("Escape");break;default:j=!0}j||F.stopPropagation()},R.oninput=function(F){A.onInput()},R.onblur=function(F){A.onBlur()},A.element=R,A.canFocus=function(){return!A.element.disabled},A.focus=function(){A.element.focus(),A.element.setSelectionRange(0,0)},A.save=function(){var F={};return F[C.field]=R.value,F},A},date:function(){var A=new g;A.apply=function(j){A.row=j;var V=A.element,W=A.picker;j.data.dateFormat&&(W.pattern=j.data.dateFormat);var re=j.data.locale||E.locale;re&&(W.locale=re),V.disabled=!j.enabled,W.date=new n.Date(j.value);var ue=new n.Date(j.value).toString(j.data.dateFormat||W.pattern,W.locale);V.value=ue};var R=document.createElement("input");R.name=C.field;var F=new n.DatePicker({target:R,theme:"navigator_modal",zIndex:E.zIndex+1,resetTarget:!1,targetAlignment:"left",onTimeRangeSelect:function(j){A.onInput({immediate:!0})}});return R.picker=F,R.className=E.theme+"_input_date",R.type="text",R.onkeydown=function(j){var V=!1;switch(j.keyCode){case 13:F.visible?F.close():E.doOnKey("Enter");break;case 27:F.visible?F.close():E.doOnKey("Escape");break;case 9:F.close(),V=!0;break;default:V=!0}V||(j.preventDefault(),j.stopPropagation())},R.onfocus=function(){F.show()},R.onclick=function(){F.show()},R.oninput=function(j){A.onInput()},R.onblur=function(j){A.onBlur()},A.element=R,A.picker=F,A.canFocus=function(){return!A.element.disabled},A.focus=function(){A.element.focus()},A.save=function(){var j=F.date?F.date.toString():null,V={};return V[C.field]=j,V},A},time:function(){return E.ic(C)},datetime:function(){return E.jc(C)},select:function(){var A=new g;A.apply=function(F){A.row=F;var j=A.element;j.value=F.value,j.disabled=!F.enabled};var R=document.createElement("select");return R.name=C.field,C.data.options&&C.data.options.forEach&&C.data.options.forEach(function(F){var j=document.createElement("option");j.innerText=F.name||F.id,j.value=F.id,j.kc=F.id,R.appendChild(j)}),R.onchange=function(F){A.onInput({immediate:!0})},R.onblur=function(F){A.onBlur()},A.element=R,A.canFocus=function(){return!A.element.disabled},A.focus=function(){A.element.focus()},A.save=function(){var F=null,j=R.options[R.selectedIndex];j&&typeof j.kc<"u"&&(F=j.kc);var V={};return V[C.field]=F,V},A},searchable:function(){var A=new g;A.apply=function(j){A.row=j;var V=A.searchable;V.disabled=!j.enabled,V.select(j.value)};var R=new _({data:C.data.options||[],name:C.field,theme:E.theme+"_form_item_searchable",listZIndex:E.zIndex+1,onSelect:function(j){j.ui&&A.onInput({immediate:!0})}}),F=R.create();return A.element=F,A.searchable=R,A.canFocus=function(){return!A.searchable.disabled},A.focus=function(){A.searchable.focus()},A.save=function(){var V={};return V[C.field]=R.selected&&R.selected.id,V},A},radio:function(){var A=new g;A.apply=function(V){A.row=V;var W=A.radio;W.checked=V.checked,W.disabled=!V.enabled};var R=document.createElement("label"),F=document.createElement("input");F.type="radio",F.name=C.field,F.kc=C.resolved,F.onchange=function(V){var W=A.row;E.findRowsByField(W.field).forEach(function(re){E.updateState(re,{checked:!1})}),E.updateState(W,{checked:!0}),E.applyState(),A.onInput({immediate:!0})},F.onblur=function(V){A.onBlur()},R.appendChild(F);var j=document.createTextNode(C.text);return R.append(j),A.element=R,A.radio=F,A.canFocus=function(){return!1},A.focus=function(){A.radio.focus()},A.save=function(){if(!F.checked)return{};var W={};return W[C.field]=F.kc,W},A},checkbox:function(){var A=new g;A.apply=function(V){A.row=V;var W=A.checkbox;W.checked=V.checked,W.disabled=!V.enabled};var R=document.createElement("label"),F=document.createElement("input");F.type="checkbox",F.name=C.field,F.kc=C.resolved,F.onchange=function(V){E.updateState(A.row,{checked:this.checked}),E.applyState(),A.onInput({immediate:!0})},F.onblur=function(V){A.onBlur()},R.appendChild(F);var j=document.createTextNode(C.text);return R.append(j),A.element=R,A.checkbox=F,A.canFocus=function(){return!1},A.focus=function(){A.checkbox.focus()},A.save=function(){var W={};return W[C.field]=F.checked,W},A},table:function(){var A=new g;A.apply=function(j){A.row=j;var V=A.table;V.disabled=!j.enabled,V.load(j.value||[])};var R=new w({name:C.field,form:E,theme:E.theme+"_form_item_tabular",item:C.data,onInput:function(j){A.onInput()}}),F=R.create();return A.element=F,A.table=R,A.canFocus=function(){return!1},A.focus=function(){A.table.focus()},A.save=function(){var j=R.save(),V={};return V[C.field]=j,V},A}};return E.plugins&&E.plugins[C.type]?E.plugins[C.type](C):N[C.type]()},d.prototype.ic=function(C){var E=this,N=new g;N.apply=function(Ee){N.row=Ee;var ve=N.searchable;ve.disabled=!Ee.enabled,ve.select(Ee.value)};var A=[],R=C.data.timeInterval||15;[1,5,10,15,20,30,60].includes(R)||(R=15);for(var F=60/R,V=n.Locale.find(C.data.locale||E.locale)||n.Locale.US,W=n.Date.today(),re=0;re<24*F;re++){var ue=W.addMinutes(R*re),we={};we.name=ue.toString(C.data.timeFormat||V.timePattern,V),we.id=ue.toString("HH:mm"),A.push(we)}var De=new _({data:A,name:C.field,theme:E.theme+"_form_item_time",listZIndex:E.zIndex+1,strategy:"startsWith",onSelect:function(Ee){Ee.ui&&N.onInput({immediate:!0})}}),tt=De.create();return N.element=tt,N.searchable=De,N.canFocus=function(){return!N.searchable.disabled},N.focus=function(){N.searchable.focus()},N.save=function(){var ve={};return ve[C.field]=De.selected&&De.selected.id,ve},N},d.prototype.jc=function(C){var E=this,N=new g;N.apply=function(j){N.row=j;var V=N.searchable;V.disabled=!j.enabled;var W=new n.Date(j.value).toString("HH:mm");V.select(W);var re=N.dateInput,ue=N.picker;j.data.dateFormat&&(ue.pattern=j.data.dateFormat);var we=j.data.locale||E.locale;if(we){var De=n.Locale.find(we)||n.Locale.US;ue.locale=we,ue.pattern=De.datePattern}re.disabled=!j.enabled,ue.date=new n.Date(j.value);var tt=new n.Date(j.value).toString(j.data.dateFormat||ue.pattern,ue.locale);re.value=tt};var A=function(){var j=document.createElement("input");j.name=C.field;var V=new n.DatePicker({target:j,theme:"navigator_modal",zIndex:E.zIndex+1,resetTarget:!1,targetAlignment:"left",onTimeRangeSelect:function(W){N.onInput({immediate:!0})}});return j.picker=V,j.className=E.theme+"_input_date",j.type="text",j.onkeydown=function(W){var re=!1;switch(W.keyCode){case 13:V.visible?V.close():E.doOnKey("Enter");break;case 27:V.visible?V.close():E.doOnKey("Escape");break;case 9:V.close(),re=!0;break;default:re=!0}re||(W.preventDefault(),W.stopPropagation())},j.onfocus=function(){V.show()},j.onclick=function(){V.show()},j.oninput=function(W){N.onInput()},j.onblur=function(W){N.onBlur()},N.dateInput=j,N.picker=V,j}(),R=function(){var j=[],V=C.data.timeInterval||15;[1,5,10,15,20,30,60].includes(V)||(V=15);for(var W=60/V,ue=n.Locale.find(C.data.locale||E.locale)||n.Locale.US,we=n.Date.today(),De=0;De<24*W;De++){var tt=we.addMinutes(V*De),Ee={};Ee.name=tt.toString(C.data.timeFormat||ue.timePattern,ue),Ee.id=tt.toString("HH:mm"),j.push(Ee)}var ve=new _({data:j,name:C.field,theme:E.theme+"_form_item_time",listZIndex:E.zIndex+1,strategy:"startsWith",onSelect:function(ye){ye.ui&&N.onInput({immediate:!0})}});return N.searchable=ve,ve.create()}(),F=document.createElement("div");return F.className=E.theme+"_form_item_datetime_parent",F.appendChild(A),F.appendChild(R),N.element=F,N.canFocus=function(){return!N.searchable.disabled},N.focus=function(){N.dateInput.focus()},N.save=function(){var j=N.searchable.selected&&N.searchable.selected.id,V=N.picker.date?N.picker.date.toString():null,W=new n.Date(V).getDatePart(),re=n.Date.parse(W.toString("yyyy-dd-MM ")+j,"yyyy-dd-MM HH:mm"),ue={};return ue[C.field]=re,ue},N},d.prototype.findRowsByField=function(C){return this.cc.filter(function(E){return E.field===C})},d.prototype.findViewById=function(C,E){return this.f.find(function(N){return N.row.field===C&&("radio"!==N.row.type||N.row.resolved===E)})},d.prototype.firstFocusable=function(){return this.f.find(function(C){return C.canFocus&&C.canFocus()})},d.prototype.updateState=function(C,E){var N=this.dc?this.dc:this.cc,A=N.indexOf(C);return this.dc=N.map(function(R){if(R!==C)return R;if(C.propsEqual(E))return C;var F=C.clone();for(var j in E)F[j]=E[j];return F}),this.dc[A]},d.prototype.updateInteractive=function(C){var E=this.dc.indexOf(C);this.f[E].apply(C)},d.prototype.applyState=function(){var C=this;this.updateDependentState(),this.dc&&(this.dc.filter(function(E,N){return C.cc[N]!==E}).forEach(function(E){C.updateInteractive(E)}),this.cc=this.dc,this.dc=null)},d.prototype.getFieldType=function(C){return-1!==["text","date","select","searchable","radio","checkbox","table","title","image","html","textarea","scrollable","time","datetime"].indexOf(C.type)||C.type&&this.plugins&&this.plugins[C.type]?C.type:C.image?"image":C.html||C.text?"html":C.id?C.options?"searchable":C.dateFormat?"date":C.columns?"table":"text":"title"},d.prototype.serialize=function(){var C={};return this.f.forEach(function(E){var N=E.save();for(var A in N)C[A]=N[A]}),C};var f=function(){this.id=this.guid(),this.field=null,this.data=null,this.type=null,this.level=0,this.enabled=!0,this.value=null,this.text=null,this.interactive=!0,this.isValue=!1,this.checked=!1,this.resolved=null};f.prototype.clone=function(){var C=new f;for(var E in this)"id"!==E&&(C[E]=this[E]);return C},f.prototype.propsEqual=function(C){for(var E in C)if(this[E]!==C[E])return!1;return!0},f.prototype.guid=function(){var C=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return""+C()+C()+"-"+C()+"-"+C()+"-"+C()+"-"+C()+C()+C()},f.prototype.applyValue=function(C,E){this.field===C&&(this.value=E,this.isValue&&E===this.resolved&&(this.checked=!0))};var g=function(){this.element=null,this.canFocus=function(){return!1},this.apply=function(C){},this.focus=function(){},this.save=function(){return{}}},_=function(C){this.data=[],this.name=null,this.theme="searchable_default",this.lc=!1,this.listZIndex=1e5,this.onSelect=null,this.nc=null,this.oc=null,this.pc=!1,this.qc=null,this.rc=null,this.o=[],this.sc=null,C=C||{};var E=this,N={selected:{post:function(R){"object"==typeof R&&R.id?E.nc=R:"string"!=typeof R&&"number"!=typeof R||E.select(R)}}};for(var A in Object.defineProperty(this,"selected",{get:function(){return this.nc}}),Object.defineProperty(this,"disabled",{get:function(){return this.lc},set:function(R){this.lc=R,this.qc&&(this.qc.disabled=R,R&&this.tc())}}),C)N[A]||(this[A]=C[A]);for(var A in C)N[A]&&N[A].post(C[A])};_.prototype.select=function(C){return this.nc=this.data.find(function(E){return E.id===C}),this.uc(!1),this},_.prototype.create=function(){function C(ve){var ye=W.strategy;"includes"!==W.strategy&&"startsWith"!==W.strategy&&(ye="includes"),ve=ve||ye||"includes",De.style.display="",De.style.top=Ee.offsetHeight+"px",De.style.left="0px",De.style.width=Ee.offsetWidth+"px",De.innerHTML="",De.addEventListener("mousedown",function(Be){Be.preventDefault()}),W.oc=null,W.o=[];var ke=null;W.data.forEach(function(Be){var Gt=Be.name||Be.id;if("includes"===ve){if(-1===Gt.toLowerCase().indexOf(Ee.value.toLowerCase()))return}else if("startsWith"===ve&&0!==Gt.toLowerCase().indexOf(Ee.value.toLowerCase()))return;var $t=document.createElement("div");$t.className=W.theme+"_list_item",$t.innerText=Gt,$t.item=Be,Be===W.nc&&(W.oc=$t),ke||(ke=$t),$t.addEventListener("mousedown",function(Tn){A($t),Tn.preventDefault()}),$t.addEventListener("mousemove",function(Tn){W.oc!==$t&&(W.oc=$t,E({dontScroll:!0}))}),De.appendChild($t),W.o.push($t)}),W.oc||(W.oc=ke),E()}function E(ve){var ye=!(ve=ve||{}).dontScroll;document.querySelectorAll("."+W.theme+"_list_item_highlight").forEach(function(ke){ke.className=ke.className.replace(W.theme+"_list_item_highlight","")}),W.oc&&(W.oc.className+=" "+W.theme+"_list_item_highlight",ye&&!function N(ve,ye){var ke=ve.getBoundingClientRect(),Be=ye.getBoundingClientRect();return ke.top>=Be.top&&ke.bottom<=Be.bottom}(W.oc,De)&&W.oc.scrollIntoView())}function A(ve){W.nc=ve.item,W.uc(!0),function F(){W.p()}(),j()}function R(){W.tc()}function j(){W.pc=!0,Ee.setAttribute("readonly","readonly"),Ee.focus()}function V(){W.pc=!1,Ee.removeAttribute("readonly"),Ee.select(),C("all")}var W=this,re=this,ue=document.createElement("div");ue.className=this.theme+"_main",ue.style.position="relative";var we=document.createElement("div");we.className=this.theme+"_icon",we.style.position="absolute",we.style.right="0",we.style.top="0",we.style.bottom="0",we.style.width="20px",we.addEventListener("mousedown",function(ve){ve.preventDefault(),W.pc?(W.focus(),V()):(R(),j())});var De=document.createElement("div");De.className=this.theme+"_list",De.style.display="none",De.style.position="absolute",De.style.zIndex=this.listZIndex;var tt=document.createElement("input");tt.type="hidden",tt.name=this.name,tt.searchable=re,this.sc=tt;var Ee=document.createElement("input");return Ee.type="text",Ee.className=this.theme+"_input",Ee.disabled=this.lc,Ee.addEventListener("click",function(ve){V()}),Ee.addEventListener("focus",function(ve){C("all")}),Ee.addEventListener("input",function(ve){C()}),Ee.addEventListener("blur",function(ve){Ee.removeAttribute("readonly"),R()}),Ee.addEventListener("keydown",function(ve){if(W.pc){if("Enter"===ve.key||"Esc"===ve.key||"Escape"===ve.key)return;V()}if("ArrowDown"===ve.key)(ye=re.o.indexOf(re.oc))+1<re.o.length&&(re.oc=re.o[ye+1]),E();else if("ArrowUp"===ve.key){var ye;(ye=re.o.indexOf(re.oc))-1>=0&&(re.oc=re.o[ye-1]),E()}else"Enter"===ve.key?W.oc?(ve.stopPropagation(),A(W.oc)):(ve.stopPropagation(),R(),j()):"Esc"!==ve.key&&"Escape"!==ve.key||(ve.stopPropagation(),R(),j())}),this.qc=Ee,this.rc=De,this.nc||(this.nc=this.data[0],this.nc&&(Ee.value=this.nc.name)),ue.appendChild(Ee),ue.appendChild(we),ue.appendChild(tt),ue.appendChild(De),ue},_.prototype.tc=function(){this.p(),this.nc?this.qc.value=this.nc.name:(this.qc.value="",this.uc(!0))},_.prototype.focus=function(){this.pc=!0,this.qc.setAttribute("readonly","readonly"),this.qc.focus(),this.tc()},_.prototype.p=function(){this.rc.style.display="none"},_.prototype.uc=function(C){this.sc.value=this.selected?this.selected.id:null,this.qc.value=this.nc?this.nc.name:"","function"==typeof this.onSelect&&this.onSelect({control:this,ui:C})};var w=function(C){for(var E in this.form=null,this.item=null,this.data=null,this.name=null,this.theme="edit_table_default",this.onInput=null,this.nav={},this.vc=null,this.cc=[],C=C||{})this[E]=C[E]};w.prototype.create=function(){var C=this,E=document.createElement("div");E.className=this.theme+"_main",E.style.position="relative";var N=document.createElement("input");N.type="hidden",N.name=C.name,N.table=this,E.appendChild(N);var A=document.createElement("div");A.className=this.theme+"_table";var R=this.wc();A.appendChild(R);var F=C.xc({});F.spacer=!0;var j=this.yc(F);j.classList.add(C.theme+"_spacer"),A.appendChild(j);var V=document.createElement("div");V.className=C.theme+"_tbody",A.appendChild(V),E.appendChild(A);var W=document.createElement("div");E.appendChild(W),this.nav.body=V,this.nav.table=A,this.nav.main=E,this.nav.after=W;var re=document.createElement("div"),ue=document.createElement("span");return ue.className=this.theme+"_plus",ue.addEventListener("click",function(we){if(!C.disabled){var De=C.item.onNewRow,tt={};if("function"==typeof De){var Ee={};Ee.result=C.form.serialize(),Ee.value={},De(Ee),tt=Ee.value}var ve=C.xc(tt);C.cc.push(ve),C.zc(),C.Ac()}}),this.nav.plus=ue,re.appendChild(ue),E.appendChild(re),E},w.prototype.wc=function(){var C=this,E=document.createElement("div");return E.classList.add(this.theme+"_row"),E.classList.add(this.theme+"_header"),this.item.columns.forEach(function(N){var A=document.createElement("div");A.classList.add(C.theme+"_cell"),A.innerText=N.name,E.appendChild(A)}),E},w.prototype.Bc=function(){var C=this.item.max||0;return!!(C&&this.cc.length>=C)},w.prototype.save=function(){var E=[];return this.cc.forEach(function(N){var A={};N.cells.forEach(function(R){A[R.id]=R.value}),E.push(A)}),E},w.prototype.load=function(C){if("[object Array]"!==Object.prototype.toString.call(C))throw new Error("Array expected");this.data=C,this.Cc(),this.zc()},w.prototype.Dc=function(){this.disabled?this.nav.main.classList.add(this.theme+"_disabled"):this.nav.main.classList.remove(this.theme+"_disabled"),this.Bc()?this.nav.plus.classList.add(this.theme+"_plus_max"):this.nav.plus.classList.remove(this.theme+"_plus_max")},w.prototype.Cc=function(){var C=this;this.cc=[],this.data.forEach(function(E){var N=C.xc(E);C.cc.push(N)})},w.prototype.Ec=function(C){var N=this.cc.indexOf(C);this.cc.splice(N,1)},w.prototype.xc=function(C){var E=this,N={};return N.data=C,N.cells=[],E.item.columns.forEach(function(A){var R=A.id,F=C[R],j=E.Fc(A);if(typeof F>"u")if("text"===j)F="";else if("number"===j)F=0;else if("select"===j){var V=A.options;F=V&&V[0].id}var W={};W.id=R,W.value=F,W.type=j,W.data=A,N.cells.push(W)}),N},w.prototype.Fc=function(C){var E=C.type;return E||(E=C.options?"select":"text"),E},w.prototype.zc=function(){var C=this;if(this.nav.body.innerHTML="",this.nav.after.innerHTML="",this.cc.forEach(function(N){var A=C.yc(N);C.nav.body.appendChild(A)}),0===this.cc.length){var E=C.Gc();C.nav.after.appendChild(E)}this.Dc()},w.prototype.Gc=function(){var C=document.createElement("div");return C.className=this.theme+"_empty",C},w.prototype.yc=function(C){var E=this,N=document.createElement("div");N.className=E.theme+"_row",C.cells.forEach(function(F){var j=document.createElement("div");j.className=E.theme+"_cell";var V=E.Hc(F);if(C.spacer){var W=document.createElement("div");W.style.height="0px",W.style.overflow="hidden",W.appendChild(V),j.appendChild(W)}else j.appendChild(V);N.appendChild(j)});var A=document.createElement("div");A.classList.add(E.theme+"_cell"),A.classList.add(E.theme+"_rowaction");var R=document.createElement("span");return R.className=this.theme+"_delete",R.addEventListener("click",function(F){E.disabled||(E.Ec(C),E.zc(),E.Ac())}),C.spacer||A.appendChild(R),N.appendChild(A),N},w.prototype.Ac=function(){"function"==typeof this.onInput&&this.onInput({})},w.prototype.Hc=function(C){var E=this,N=C.type;if("text"===N||"number"===N){var A=document.createElement("input");return A.type=N,E.disabled&&(A.disabled=!0),C.value&&(A.value=C.value),A.addEventListener("keyup",function(F){C.value="number"===N?Number(this.value):this.value,E.Ac()}),A}if("select"===N){var R=document.createElement("select");return E.disabled&&(R.disabled=!0),C.data.options.forEach(function(F){var j=document.createElement("option");j.innerText=F.name,j.value=F.id,j.kc=F.id,R.appendChild(j),C.value===F.id&&j.setAttribute("selected",!0)}),R.addEventListener("change",function(F){var j=R.options[R.selectedIndex];j&&typeof j.kc<"u"&&(C.value=j.kc),E.Ac()}),R}throw new Error("Unsupported item type: "+N)},w.prototype.focus=function(){}}}(x),typeof x>"u"&&(x={}),typeof x.Global>"u"&&(x.Global={}),function(){if(typeof x.Month>"u"||!x.Month.events){var n={Month:function(t,e){this.v="2023.2.477-lite",this.nav={};var i=this;this.id=t,this.isMonth=!0,this.api=2,this.backendUrl=null,this.cellHeaderHeight=24,this.cellHeight=100,this.contextMenu=null,this.cssClassPrefix="month_default",this.eventBarVisible=!0,this.eventHeight=25,this.eventsLoadMethod="GET",this.headerHeight=30,this.hideUntilInit=!0,this.lineSpace=1,this.locale="en-us",this.showToolTip=!0,this.startDate=new x.Date,this.theme=null,this.visible=!0,this.weekStarts=1,this.width="100%",this.xssProtection="Enabled",this.afterRender=function(){},this.cellHeaderClickHandling="Enabled",this.eventClickHandling="Enabled",this.eventDeleteHandling="Disabled",this.eventMoveHandling="Update",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.headerClickHandling="Enabled",this.timeRangeSelectedHandling="Enabled",this.onCellHeaderClick=null,this.onCellHeaderClicked=null,this.onEventClick=null,this.onEventClicked=null,this.onEventDelete=null,this.onEventDeleted=null,this.onEventMove=null,this.onEventMoved=null,this.onEventResize=null,this.onEventResized=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.cellEvents=[],this.elements={},this.elements.events=[],this.cache={},this.T=function(d,l){return(d=JSON.parse(d)).CallBackRedirect?void(document.location.href=d.CallBackRedirect):("None"===d.UpdateType||(i.events.list=d.Events,"Full"===d.UpdateType&&(i.startDate=d.StartDate,i.timeFormat=d.TimeFormat?d.TimeFormat:i.timeFormat,typeof d.WeekStarts<"u"&&(i.weekStarts=d.WeekStarts),i.hashes=d.Hashes),i.V(),i.Ic(),i.ca(),"Full"===d.UpdateType&&(i.Jc(),i.Kc()),i.ha(),i.show(),i.ia()),void i.fireAfterRenderDetached(d.CallBackData,!0))},this.fireAfterRenderDetached=function(r,l){var f,g;window.setTimeout((f=r,g=l,function(){i.afterRender&&i.afterRender(f,g)}),0)},this.lineHeight=function(){return this.eventHeight+this.lineSpace},this.events={},this.events.add=function(r){var l=null;if(r instanceof x.Event)l=r.data;else{if("object"!=typeof r)throw"DayPilot.Month.events.add() expects an object or DayPilot.Event instance.";l=r}i.events.list||(i.events.list=[]),i.events.list.push(l),i.update(),i.qa.notify()},this.events.find=function(r){if(!i.events.list)return null;for(var l=0;l<i.events.list.length;l++){var d=i.events.list[l];if(d.id===r)return new x.Event(d,i)}return null},this.events.update=function(r){if(r instanceof x.Event)r.commit();else if("object"==typeof r){var l=i.events.find(r.id);if(l){var d=x.indexOf(i.events.list,l.data);i.events.list.splice(d,1,r)}}i.update(),i.qa.notify()},this.events.remove=function(r){var l=x.indexOf(i.events.list,r.data);i.events.list.splice(l,1),i.update(),i.qa.notify()},this.events.load=function(r,l,d){var f=function(C){var E={};E.exception=C.exception,E.request=C.request,"function"==typeof d&&d(E)},g=function(C){var E,N=C.request;try{E=JSON.parse(N.responseText)}catch(F){var A={};return A.exception=F,void f(A)}if(x.isArray(E)){var R={preventDefault:function(){this.preventDefault.value=!0}};if(R.data=E,"function"==typeof l&&l(R),R.preventDefault.value)return;i.events.list=E,i.za&&i.update()}};if(i.eventsLoadMethod&&"POST"===i.eventsLoadMethod.toUpperCase())x.Http.ajax({method:"POST",data:{start:i.visibleStart().toString(),end:i.visibleEnd().toString()},url:r,success:g,error:f});else{var _=r,w="start="+i.visibleStart().toString()+"&end="+i.visibleEnd().toString();_+=_.indexOf("?")>-1?"&"+w:"?"+w,x.Http.ajax({method:"GET",url:_,success:g,error:f})}},this.update=function(r){i.$a(r),this.za&&this.cells&&(i.V(),i.Ic(),i.ca(),i.Jc(),i.Kc(),i.ha(),i.s(),i.ia(),this.visible?this.show():this.hide())},this.bb=null,this.$a=function(r){if(r){var l={events:{preInit:function(){var g=this.data||[];i.events.list=x.isArray(g.list)?g.list:g}}};for(var d in this.bb=l,r)if(l[d]){var f=l[d];f.data=r[d],f.preInit&&f.preInit()}else i[d]=r[d]}},this.cb=function(){var r=this.bb;for(var l in r){var d=r[l];d.postInit&&d.postInit()}},this.eb={},this.eb.events=[],this.fb=function(r){var l=this.eb.events,d=this.events.list[r],f={};for(var g in d)f[g]=d[g];if("function"==typeof this.onBeforeEventRender){var _={};_.data=f,this.onBeforeEventRender(_)}l[r]=f},this.ca=function(){var r=this.events.list;if(r){if(!x.isArray(r))throw new x.Exception("DayPilot.Month.events.list expects an array object. You supplied: "+typeof r);if("function"==typeof this.onBeforeEventRender)for(var l=0;l<r.length;l++)this.fb(l);for(var d=0;d<r.length;d++){var f=r[d];if("object"!=typeof f)throw new x.Exception("Event data item must be an object");if(!f.start)throw new x.Exception("Event data item must specify 'start' property");if(!f.end)throw new x.Exception("Event data item must specify 'end' property");var g=new x.Date(f.start),_=new x.Date(f.end);if(!(g.getTime()>_.getTime()))for(l=0;l<this.rows.length;l++){var w=this.rows[l],C=new x.Event(f,this);w.belongsHere(C)&&(w.events.push(C),"function"==typeof this.onBeforeEventRender&&(C.cache=this.eb.events[d]))}}for(var E=0;E<this.rows.length;E++){(w=this.rows[E]).events.sort(this.gb);for(var N=0;N<this.rows[E].events.length;N++){var A=w.events[N],R=w.getStartColumn(A),F=w.getWidth(A);w.putIntoLine(A,R,F,E)}}}},this.V=function(){for(var r=0;r<this.elements.events.length;r++){var l=this.elements.events[r];l.event=null,l.click=null,l.parentNode.removeChild(l)}this.elements.events=[]},this.ia=function(){this.Lc()},this.Lc=function(){this.elements.events=[];for(var r=0;r<this.rows.length;r++)for(var l=this.rows[r],d=0;d<l.lines.length;d++)for(var f=l.lines[d],g=0;g<f.length;g++)this.Ca(f[g])},this.gb=function(r,l){if(!(r&&l&&r.start&&l.start))return 0;var d=r.start().getTime()-l.start().getTime();return 0!==d?d:l.end().getTime()-r.end().getTime()},this.drawShadow=function(r,l,d,f,g,_){g||(g=0);var w=f;this.shadow={},this.shadow.list=[],this.shadow.start={x:r,y:l},this.shadow.width=f;var C=7*l+r-g;C<0&&(w+=C,r=0,l=0);for(var E=g;E>=7;)l--,E-=7;E>r?E>r+(7-this.getColCount())?(l--,r=r+7-E):(w=w-E+r,r=0):r-=E,l<0&&(l=0,r=0);var N=null;for(n.resizingEvent?N="w-resize":n.movingEvent&&(N="move"),this.nav.top.style.cursor=N;w>0&&l<this.rows.length;){var A=Math.min(this.getColCount()-r,w),R=this.rows[l],F=this.getRowTop(l),j=R.getHeight(),V=document.createElement("div");V.setAttribute("unselectable","on"),V.style.position="absolute",V.style.left=this.getCellWidth()*r+"%",V.style.width=this.getCellWidth()*A+"%",V.style.top=F+"px",V.style.height=j+"px",V.style.cursor=N;var W=document.createElement("div");W.setAttribute("unselectable","on"),V.appendChild(W),W.style.position="absolute",W.style.top="0px",W.style.right="0px",W.style.left="0px",W.style.bottom="0px",W.style.backgroundColor="#aaaaaa",W.style.opacity=.5,W.style.filter="alpha(opacity=50)",this.nav.top.appendChild(V),this.shadow.list.push(V),w-=A+7-this.getColCount(),r=0,l++}},this.clearShadow=function(){if(this.shadow){for(var r=0;r<this.shadow.list.length;r++)this.nav.top.removeChild(this.shadow.list[r]);this.shadow=null,this.nav.top.style.cursor=""}},this.getEventTop=function(r,l){for(var d=this.headerHeight,f=0;f<r;f++)d+=this.rows[f].getHeight();return(d+=this.cellHeaderHeight)+l*this.lineHeight()},this.getDateFromCell=function(r,l){return this.firstDate.addDays(7*l+r)},this.Ca=function(r){var l=r.cache||r.data,d=r.part.row,f=r.part.line,g=r.part.colStart,_=r.part.colWidth,w=this.getCellWidth()*g,C=this.getCellWidth()*_,E=this.getEventTop(d,f),N=document.createElement("div");N.setAttribute("unselectable","on"),N.style.height=this.eventHeight+"px",N.className=this.J("_event"),l.cssClass&&x.Util.addClass(N,l.cssClass),r.part.startsHere||x.Util.addClass(N,this.J("_event_continueleft")),r.part.endsHere||x.Util.addClass(N,this.J("_event_continueright")),N.event=r,N.style.width=C+"%",N.style.position="absolute",N.style.left=w+"%",N.style.top=E+"px",this.showToolTip&&r.client.toolTip()&&(N.title=r.client.toolTip()),N.onclick=i.pa,N.oncontextmenu=i.Mc,N.onmousedown=function(ue){var we=(ue=ue||window.event).which||ue.button;if(ue.cancelBubble=!0,ue.stopPropagation&&ue.stopPropagation(),1===we)if(n.movingEvent=null,"w-resize"===this.style.cursor||"e-resize"===this.style.cursor){var De={start:{}};De.start.x=g,De.start.y=d,De.event=N.event,De.width=x.DateUtil.daysSpan(De.event.start(),De.event.end())+1,De.direction=this.style.cursor,n.resizingEvent=De}else if("move"===this.style.cursor||r.client.moveEnabled()){i.clearShadow();var tt=x.mo2(i.nav.top,ue);if(!tt)return;var Ee=i.getCellBelowPoint(tt.x,tt.y),ve=x.DateUtil.daysDiff(r.start(),i.rows[d].start),ye=7*Ee.y+Ee.x-(7*d+g);ve&&(ye+=ve);var ke={start:{}};ke.start.x=g,ke.start.y=d,ke.start.line=f,ke.offset=i.eventMoveToPosition?0:ye,ke.colWidth=_,ke.event=N.event,ke.coords=tt,n.movingEvent=ke}},N.onmousemove=function(ue){if(typeof n<"u"&&!n.movingEvent&&!n.resizingEvent){var we=x.mo3(N,ue);we&&(N.deleteIcon&&(N.deleteIcon.style.display=""),we.x<=6&&r.client.resizeEnabled()?r.part.startsHere?(N.style.cursor="w-resize",N.dpBorder="left"):N.style.cursor="not-allowed":N.clientWidth-we.x<=6&&r.client.resizeEnabled()?r.part.endsHere?(N.style.cursor="e-resize",N.dpBorder="right"):N.style.cursor="not-allowed":N.style.cursor=r.client.clickEnabled()?"pointer":"default")}},N.onmouseleave=function(ue){N.deleteIcon&&(N.deleteIcon.style.display="none"),N.style.cursor=""},N.onmouseenter=function(ue){N.deleteIcon&&(N.deleteIcon.style.display="")};var A=document.createElement("div");if(A.setAttribute("unselectable","on"),A.className=this.J("_event_inner"),A.style.borderColor="darker"===l.borderColor&&l.backColor?x.ColorUtil.darker(l.backColor,2):l.borderColor,l.backColor&&(A.style.background=l.backColor,(x.browser.ie9||x.browser.ielt9)&&(A.style.filter="")),l.fontColor&&(A.style.color=l.fontColor),A.innerHTML=r.client.html(),N.appendChild(A),r.client.barVisible()){var R=document.createElement("div");R.setAttribute("unselectable","on"),R.className=this.J("_event_bar"),R.style.position="absolute";var F=document.createElement("div");F.setAttribute("unselectable","on"),F.className=this.J("_event_bar_inner"),F.style.top="0%",F.style.height="100%",l.barColor&&(F.style.backgroundColor=l.barColor),R.appendChild(F),N.appendChild(R)}if(r.client.deleteEnabled()){var j=Math.floor(i.eventHeight/2-9),V=document.createElement("div");V.style.position="absolute",V.style.right="2px",V.style.top=j+"px",V.style.width="18px",V.style.height="18px",V.className=i.J("_event_delete"),V.onmousedown=function(ue){ue.stopPropagation()},V.onclick=function(ue){ue.stopPropagation();var we=this.parentNode.event;we&&i.sa(we)},V.style.display="none",N.deleteIcon=V,N.appendChild(V)}var W=l.areas?x.Areas.copy(l.areas):[];if(x.Areas.attach(N,r,{areas:W}),"function"==typeof i.onAfterEventRender){var re={};re.e=N.event,re.div=N,i.onAfterEventRender(re)}this.elements.events.push(N),this.nav.events.appendChild(N)},this.lastVisibleDayOfMonth=function(){return this.startDate.lastDayOfMonth()},this.Ic=function(){"string"==typeof this.startDate&&(this.startDate=new x.Date(this.startDate)),this.startDate=this.startDate.firstDayOfMonth(),this.firstDate=this.startDate.firstDayOfWeek(this.getWeekStart());var r,l=this.lastVisibleDayOfMonth(),d=x.DateUtil.daysDiff(this.firstDate,l)+1;r=Math.ceil(d/7),this.days=7*r,this.rows=[];for(var f=0;f<r;f++){var g={};g.start=this.firstDate.addDays(7*f),g.end=g.start.addDays(this.getColCount()),g.events=[],g.lines=[],g.index=f,g.minHeight=this.cellHeight,g.calendar=this,g.belongsHere=function(_){return _.end().getTime()===_.start().getTime()&&_.start().getTime()===this.start.getTime()||!(_.end().getTime()<=this.start.getTime()||_.start().getTime()>=this.end.getTime())},g.getPartStart=function(_){return x.DateUtil.max(this.start,_.start())},g.getPartEnd=function(_){return x.DateUtil.min(this.end,_.end())},g.getStartColumn=function(_){var w=this.getPartStart(_);return x.DateUtil.daysDiff(this.start,w)},g.getWidth=function(_){return x.DateUtil.daysSpan(this.getPartStart(_),this.getPartEnd(_))+1},g.putIntoLine=function(_,w,C,E){for(var N=this,A=0;A<this.lines.length;A++)if((R=this.lines[A]).isFree(w,C))return R.addEvent(_,w,C,E,A),A;var R;return(R=[]).isFree=function(F,j){for(var V=!0,W=0;W<this.length;W++)F+j-1<this[W].part.colStart||F>this[W].part.colStart+this[W].part.colWidth-1||(V=!1);return V},R.addEvent=function(F,j,V,W,re){F.part.colStart=j,F.part.colWidth=V,F.part.row=W,F.part.line=re,F.part.startsHere=N.start.getTime()<=F.start().getTime(),F.part.endsHere=N.end.getTime()>=F.end().getTime(),this.push(F)},R.addEvent(_,w,C,E,this.lines.length),this.lines.push(R),this.lines.length-1},g.getStart=function(){for(var w=0;w<i.rows.length&&w<this.index;w++)i.rows[w].getHeight()},g.getHeight=function(){return Math.max(this.lines.length*i.lineHeight()+i.cellHeaderHeight,this.calendar.cellHeight)},this.rows.push(g)}this.endDate=this.firstDate.addDays(7*r)},this.visibleStart=function(){return i.firstDate},this.visibleEnd=function(){return i.endDate},this.getHeight=function(){for(var r=this.headerHeight,l=0;l<this.rows.length;l++)r+=this.rows[l].getHeight();return r},this.getWidth=function(r,l){return 7*l.y+l.x-(7*r.y+r.x)+1},this.getMinCoords=function(r,l){return 7*r.y+r.x<7*l.y+l.x?r:l},this.J=function(r){var l=this.theme||this.cssClassPrefix;return l?l+r:""},this.Ea=function(){var r=this.nav.top;r.setAttribute("unselectable","on"),r.style.MozUserSelect="none",r.style.KhtmlUserSelect="none",r.style.WebkitUserSelect="none",r.style.position="relative",this.width&&(r.style.width=this.width),r.style.height=this.getHeight()+"px",r.onselectstart=function(f){return!1},this.hideUntilInit&&(r.style.visibility="hidden"),this.visible||(r.style.display="none"),r.className=this.J("_main");var l=document.createElement("div");this.nav.cells=l,l.style.position="absolute",l.style.left="0px",l.style.right="0px",l.setAttribute("unselectable","on"),r.appendChild(l);var d=document.createElement("div");this.nav.events=d,d.style.position="absolute",d.style.left="0px",d.style.right="0px",d.setAttribute("unselectable","on"),r.appendChild(d),r.onmousemove=function(f){if(n.resizingEvent){if(!(g=x.mo2(i.nav.top,f)))return;var _=i.getCellBelowPoint(g.x,g.y);i.clearShadow();var E=n.resizingEvent;if("w-resize"===E.direction){C=_;var N=E.event.end();N.getDatePart()===N&&(N=N.addDays(-1));var A=i.getCellFromDate(N);w=i.getWidth(_,A)}else C=i.getCellFromDate(E.event.start()),w=i.getWidth(C,_);w<1&&(w=1),i.drawShadow(C.x,C.y,0,w)}else if(n.movingEvent){if(!(g=x.mo2(i.nav.top,f))||g.x===n.movingEvent.coords.x&&g.y===n.movingEvent.coords.y)return;_=i.getCellBelowPoint(g.x,g.y),i.clearShadow();var R=n.movingEvent.event,F=n.movingEvent.offset;(w=i.cellMode?1:x.DateUtil.daysSpan(R.start(),R.end())+1)<1&&(w=1),i.drawShadow(_.x,_.y,0,w,F,R)}else if(n.timeRangeSelecting){var g;if(!(g=x.mo2(i.nav.top,f)))return;_=i.getCellBelowPoint(g.x,g.y),i.clearShadow();var C,w,j=7*(C=n.timeRangeSelecting).y+C.x,V=7*_.y+_.x;(w=Math.abs(V-j)+1)<1&&(w=1);var W=j<V?C:_;n.timeRangeSelecting.from={x:W.x,y:W.y},n.timeRangeSelecting.width=w,n.timeRangeSelecting.moved=!0,i.drawShadow(W.x,W.y,0,w,0,null)}}},this.ha=function(){this.nav.top.style.height=this.getHeight()+"px";for(var r=0;r<this.cells.length;r++)for(var l=0;l<this.cells[r].length;l++)this.cells[r][l].style.top=this.getRowTop(l)+"px",this.cells[r][l].style.height=this.rows[l].getHeight()+"px"},this.getCellBelowPoint=function(r,l){for(var d=Math.floor(this.nav.top.clientWidth/this.getColCount()),f=Math.min(Math.floor(r/d),this.getColCount()-1),g=null,_=this.headerHeight,w=0,C=0;C<this.rows.length;C++){var E=_;if(l<(_+=this.rows[C].getHeight())){w=l-E,g=C;break}}null===g&&(g=this.rows.length-1);var N={};return N.x=f,N.y=g,N.relativeY=w,N},this.getCellFromDate=function(r){for(var l=x.DateUtil.daysDiff(this.firstDate,r),d={x:0,y:0};l>=7;)d.y++,l-=7;return d.x=l,d},this.Kc=function(){var r=document.createElement("div");r.oncontextmenu=function(){return!1},this.nav.cells.appendChild(r),this.cells=[];for(var l=0;l<this.getColCount();l++){this.cells[l]=[];var d=document.createElement("div");d.setAttribute("unselectable","on"),d.style.position="absolute",d.style.left=this.getCellWidth()*l+"%",d.style.width=this.getCellWidth()+"%",d.style.top="0px",d.style.height=this.headerHeight+"px";var f=l+this.getWeekStart();f>6&&(f-=7),d.className=this.J("_header");var g=document.createElement("div");g.setAttribute("unselectable","on"),g.innerHTML=o.locale().dayNames[f],d.appendChild(g),g.style.position="absolute",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.className=this.J("_header_inner"),g.innerHTML=o.locale().dayNames[f],r.appendChild(d);for(var _=0;_<this.rows.length;_++)this.Nc(l,_,r)}},this.Jc=function(){for(var r=0;r<this.cells.length;r++)for(var l=0;l<this.cells[r].length;l++)this.cells[r][l].onclick=null;this.nav.cells.innerHTML=""},this.oa=function(){return 2===i.api},this.Nc=function(r,l,d){var f=this.rows[l],g=this.firstDate.addDays(7*l+r),_=document.createElement("div");if(_.setAttribute("unselectable","on"),_.style.position="absolute",_.style.cursor="default",_.style.left=this.getCellWidth()*r+"%",_.style.width=this.getCellWidth()+"%",_.style.top=this.getRowTop(l)+"px",_.style.height=f.getHeight()+"px",_.className=this.J("_cell"),!this.isWeekend(g)){var w=this.J("_cell_business");x.Util.addClass(_,w)}var C=(this.startDate.addMonths(-1).getMonth(),this.startDate.addMonths(1).getMonth(),this.startDate.getMonth(),document.createElement("div"));C.setAttribute("unselectable","on"),_.appendChild(C),C.style.position="absolute",C.style.left="0px",C.style.right="0px",C.style.top="0px",C.style.bottom="0px",C.className=this.J("_cell_inner"),_.onmousedown=function(A){"Disabled"!==i.timeRangeSelectedHandling&&(i.clearShadow(),n.timeRangeSelecting={root:i,x:r,y:l,from:{x:r,y:l},width:1})},_.onclick=function(){var F,j;if("Disabled"!==i.timeRangeSelectedHandling)return j=(F=new x.Date(g)).addDays(1),void i.L(F,j)};var E=document.createElement("div");E.setAttribute("unselectable","on"),E.style.height=this.cellHeaderHeight+"px",E.className=this.J("_cell_header"),E.onclick=function(A){if("Enabled"===i.cellHeaderClickHandling){A.stopPropagation();var R={};R.control=i,R.start=g,R.end=g.addDays(1),R.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onCellHeaderClick&&(i.onCellHeaderClick(R),R.preventDefault.value)||"function"==typeof i.onCellHeaderClicked&&i.onCellHeaderClicked(R)}};var N=g.getDay();E.innerHTML=1===N?o.locale().monthNames[g.getMonth()]+" "+N:N,C.appendChild(E),this.cells[r][l]=_,d.appendChild(_)},this.getWeekStart=function(){return o.locale().weekStarts},this.getColCount=function(){return 7},this.getCellWidth=function(){return 14.285},this.getRowTop=function(r){for(var l=this.headerHeight,d=0;d<r;d++)l+=this.rows[d].getHeight();return l},this.R=function(r,l,d){var f={};f.action=r,f.parameters=d,f.data=l,f.header=this.Q();var g="JSON"+x.JSON.stringify(f);this.backendUrl&&x.request(this.backendUrl,this.S,g,this.ajaxError)},this.S=function(r){i.T(r.responseText)},this.Q=function(){var r={control:"dpm"};return r.id=this.id,r.v=this.v,r.visibleStart=new x.Date(this.firstDate),r.visibleEnd=r.visibleStart.addDays(this.days),r.startDate=i.startDate,r.timeFormat=this.timeFormat,r.weekStarts=this.weekStarts,r},this.eventClickCallBack=function(r,l){this.R("EventClick",l,r)},this.pa=function(d){n.movingEvent=null,n.resizingEvent=null,(d=d||window.event).cancelBubble=!0,d.stopPropagation&&d.stopPropagation(),i.eventClickSingle(this,d)},this.eventClickSingle=function(r,l){var d=r.event;if(d.client.clickEnabled())if(i.oa()){var f={};if(f.e=d,f.control=i,f.div=r,f.originalEvent=l,f.meta=l.metaKey,f.ctrl=l.ctrlKey,f.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onEventClick&&(i.qa.apply(function(){i.onEventClick(f)}),f.preventDefault.value))return;switch(i.eventClickHandling){case"CallBack":i.eventClickCallBack(d);break;case"ContextMenu":var g=d.client.contextMenu();g?g.show(d):i.contextMenu&&i.contextMenu.show(d)}"function"==typeof i.onEventClicked&&i.qa.apply(function(){i.onEventClicked(f)})}else switch(i.eventClickHandling){case"CallBack":i.eventClickCallBack(d);break;case"JavaScript":i.onEventClick(d)}},this.Mc=function(){return i.ra(this.event),!1},this.ra=function(r){if(this.event=r,!r.client.rightClickEnabled())return!1;var l={};if(l.e=r,l.preventDefault=function(){this.preventDefault.value=!0},"function"!=typeof i.onEventRightClick||(i.onEventRightClick(l),!l.preventDefault.value)){if("ContextMenu"===i.eventRightClickHandling){var d=r.client.contextMenu();d?d.show(r):i.contextMenu&&i.contextMenu.show(this.event)}return"function"==typeof i.onEventRightClicked&&i.onEventRightClicked(l),!1}},this.sa=function(r){if(i.oa()){var l={};if(l.e=r,l.control=i,l.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onEventDelete&&(i.qa.apply(function(){i.onEventDelete(l)}),l.preventDefault.value))return;switch(i.eventDeleteHandling){case"CallBack":i.eventDeleteCallBack(r);break;case"PostBack":i.eventDeletePostBack(r);break;case"Update":i.events.remove(r)}"function"==typeof i.onEventDeleted&&i.qa.apply(function(){i.onEventDeleted(l)})}else switch(i.eventDeleteHandling){case"PostBack":i.eventDeletePostBack(r);break;case"CallBack":i.eventDeleteCallBack(r);break;case"JavaScript":i.onEventDelete(r)}},this.eventDeleteCallBack=function(r,l){this.R("EventDelete",l,r)},this.eventDeletePostBack=function(r,l){this.P("EventDelete",l,r)},this.eventMoveCallBack=function(r,l,d,f,g){if(!l)throw"newStart is null";if(!d)throw"newEnd is null";var _={};_.e=r,_.newStart=l,_.newEnd=d,_.position=g,this.R("EventMove",f,_)},this.K=function(r,l,d,f,g,_){var w=r.start().getTimePart(),C=r.end().getDatePart();C.getTime()!==r.end().getTime()&&(C=C.addDays(1));var E=x.DateUtil.diff(r.end(),C),N=this.getDateFromCell(l,d);N=N.addDays(-f);var A=x.DateUtil.daysSpan(r.start(),r.end())+1,R=N.addDays(A),F=N.addTime(w),j=R.addTime(E);if(i.oa()){var V={};if(V.e=r,V.control=i,V.newStart=F,V.newEnd=j,V.ctrl=g.ctrlKey,V.shift=g.shiftKey,V.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onEventMove&&(i.qa.apply(function(){i.onEventMove(V)}),V.preventDefault.value))return;switch(i.eventMoveHandling){case"CallBack":i.eventMoveCallBack(r,F,j);break;case"Update":r.start(F),r.end(j),i.events.update(r)}"function"==typeof i.onEventMoved&&i.qa.apply(function(){i.onEventMoved(V)})}else switch(i.eventMoveHandling){case"CallBack":i.eventMoveCallBack(r,F,j);break;case"JavaScript":i.onEventMove(r,F,j)}},this.eventResizeCallBack=function(r,l,d,f){if(!l)throw"newStart is null";if(!d)throw"newEnd is null";var g={};g.e=r,g.newStart=l,g.newEnd=d,this.R("EventResize",f,g)},this.I=function(r,l,d){var f=r.start().getTimePart(),g=r.end().getDatePart();g.getTime()!==r.end().getTime()&&(g=g.addDays(1));var _=x.DateUtil.diff(r.end(),g),w=this.getDateFromCell(l.x,l.y),C=w.addDays(d),E=w.addTime(f),N=C.addTime(_);if(i.oa()){var A={};if(A.e=r,A.control=i,A.newStart=E,A.newEnd=N,A.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onEventResize&&(i.qa.apply(function(){i.onEventResize(A)}),A.preventDefault.value))return;switch(i.eventResizeHandling){case"CallBack":i.eventResizeCallBack(r,E,N);break;case"Update":r.start(E),r.end(N),i.events.update(r)}"function"==typeof i.onEventResized&&i.qa.apply(function(){i.onEventResized(A)})}else switch(i.eventResizeHandling){case"CallBack":i.eventResizeCallBack(r,E,N);break;case"JavaScript":i.onEventResize(r,E,N)}},this.timeRangeSelectedCallBack=function(r,l,d){var f={};f.start=r,f.end=l,this.R("TimeRangeSelected",d,f)},this.L=function(r,l){if(this.oa()){var d={};if(d.control=i,d.start=r,d.end=l,d.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onTimeRangeSelect&&(i.qa.apply(function(){i.onTimeRangeSelect(d)}),d.preventDefault.value))return;"CallBack"===i.timeRangeSelectedHandling&&i.timeRangeSelectedCallBack(r,l),"function"==typeof i.onTimeRangeSelected&&i.qa.apply(function(){i.onTimeRangeSelected(d)})}else switch(i.timeRangeSelectedHandling){case"CallBack":i.timeRangeSelectedCallBack(r,l);break;case"JavaScript":i.onTimeRangeSelected(r,l)}},this.qa={},this.qa.scope=null,this.qa.notify=function(){i.qa.scope&&i.qa.scope.$apply()},this.qa.apply=function(r){r()},this.clearSelection=function(){i.clearShadow()},this.commandCallBack=function(r,l){var d={};d.command=r,this.R("Command",l,d)},this.isWeekend=function(r){return 0===(r=new x.Date(r)).dayOfWeek()||6===r.dayOfWeek()},this._={},this._.locale=function(){return x.Locale.find(i.locale)||x.Locale.US},this._.aa=function(){return"Disabled"!==i.xssProtection};var o=this._;this.debug=function(r,l){this.debuggingEnabled&&(i.debugMessages||(i.debugMessages=[]),i.debugMessages.push(r),typeof console<"u"&&console.log(r))},this.dispose=function(){var r=i;r.nav.top&&(r.V(),r.nav.top.removeAttribute("style"),r.nav.top.removeAttribute("class"),r.nav.top.innerHTML="",r.nav.top.dp=null,r.nav.top.onmousemove=null,r.nav.top=null)},this.Ya=function(){n.globalHandlers||(n.globalHandlers=!0,x.re(document,"mouseup",n.gMouseUp))},this.loadFromServer=function(){return!(!this.backendUrl&&"function"!=typeof WebForm_DoCallback)&&(typeof i.events.list>"u"||!i.events.list)},this.s=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.show=function(){i.visible=!0,i.nav.top.style.display=""},this.hide=function(){i.visible=!1,i.nav.top.style.display="none"},this.db=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Month() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Month: The placeholder element not found: '"+id+"'."}},this.jb=function(){this.Ic(),this.Ea(),this.Kc(),this.Ya(),this.R("Init")},this.Ia=function(r,l){return i._.aa()?x.Util.escapeTextHtml(r,l):x.Util.isNullOrUndefined(l)?x.Util.isNullOrUndefined(r)?"":r:l},this.internal={},this.internal.loadOptions=this.$a,this.internal.xssTextHtml=i.Ia,this.init=function(){return this.db(),this.loadFromServer()?void this.jb():(this.Ic(),this.ca(),this.Ea(),this.Kc(),this.s(),this.ia(),this.Ya(),this.fireAfterRenderDetached(null,!1),this.za=!0,this)},this.Init=this.init,Object.defineProperty(this,"durationBarVisible",{get:function(){return i.eventBarVisible}}),this.$a(e)},gMouseUp:function(t){if(n.movingEvent){if(!((e=n.movingEvent).event&&e.event.calendar&&e.event.calendar.shadow&&e.event.calendar.shadow.start))return;var o=n.movingEvent.event,r=(i=n.movingEvent.event.calendar).shadow.start,l=i.shadow.position,d=n.movingEvent.offset;return i.clearShadow(),n.movingEvent=null,t=t||window.event,i.K(o,r.x,r.y,d,t,l),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),n.movingEvent=null,!1}if(n.resizingEvent){var e;if(!((e=n.resizingEvent).event&&e.event.calendar&&e.event.calendar.shadow&&e.event.calendar.shadow.start))return;o=n.resizingEvent.event,r=(i=n.resizingEvent.event.calendar).shadow.start;var f=i.shadow.width;return i.clearShadow(),n.resizingEvent=null,i.I(o,r,f),t.cancelBubble=!0,n.resizingEvent=null,!1}if(n.timeRangeSelecting){if(n.timeRangeSelecting.moved){var i,g=n.timeRangeSelecting,_=(r=new x.Date((i=g.root).getDateFromCell(g.from.x,g.from.y))).addDays(g.width);i.L(r,_),i.clearShadow()}n.timeRangeSelecting=null}}};x.Month=n.Month,typeof jQuery<"u"&&(jQuery.fn.daypilotMonth=function(e){var i=null,o=this.each(function(){if(!this.daypilot){var r=new x.Month(this.id);for(name in this.daypilot=r,e)r[name]=e[name];r.Init(),i||(i=r)}});return 1===this.length?i:o}),(t=x.am())&&t.directive("daypilotMonth",["$parse",function(e){return{restrict:"E",template:"<div></div>",replace:!0,link:function(i,o,r){var l=new x.Month(o[0]);l.qa.scope=i,l.init();var d=r.id;d&&(i[d]=l);var f=r.publishAs;for(var g in f&&(0,e(f).assign)(i,l),r)0===g.indexOf("on")&&function(E){l[E]=function(N){var A=e(r[E]);i.$apply(function(){A(i,{args:N})})}}(g);var _=i.$watch,C=r.events||r.daypilotEvents;_.call(i,r.config||r.daypilotConfig,function(E){for(var N in E)l[N]=E[N];l.update()},!0),_.call(i,C,function(E){l.events.list=E,l.update()},!0)}}}]),typeof Sys<"u"&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}var t}(),typeof x>"u"&&(x={}),typeof x.Global>"u"&&(x.Global={}),(typeof x.Navigator>"u"||!x.Navigator.nav)&&(x.Navigator=function(n,t){this.v="2023.2.477-lite";var e=this;this.id=n,this.api=2,this.isNavigator=!0,this.autoFocusOnClick=!0,this.weekStarts="Auto",this.selectMode="Day",this.titleHeight=30,this.dayHeaderHeight=30,this.bound=null,this.cellWidth=30,this.cellHeight=30,this.cssClassPrefix="navigator_default",this.freeHandSelectionEnabled=!1,this.selectionStart=(new x.Date).getDatePart(),this.selectionEnd=null,this.selectionDay=null,this.showMonths=1,this.skipMonths=1,this.command="navigate",this.year=(new x.Date).getYear(),this.month=(new x.Date).getMonth()+1,this.showWeekNumbers=!1,this.weekNumberAlgorithm="Auto",this.rowsPerMonth="Six",this.orientation="Vertical",this.locale="en-us",this.rtl=!1,this.visible=!0,this.timeRangeSelectedHandling="Bind",this.visibleRangeChangedHandling="Enabled",this.onVisibleRangeChange=null,this.onVisibleRangeChanged=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.nav={},this.eb={},this.Oc=function(){this.root.dp=this,this.root.className=this.J("_main"),"Horizontal"===this.orientation?(this.root.style.width=this.showMonths*(7*r.cellWidth()+this.Pc())+"px",this.root.style.height=6*this.cellHeight+this.titleHeight+this.dayHeaderHeight+"px"):this.root.style.width=7*r.cellWidth()+this.Pc()+"px",this.rtl&&(this.root.style.direction="rtl"),this.root.style.position="relative",this.visible||(this.root.style.display="none");var l=document.createElement("input");l.type="hidden",l.name=e.id+"_state",l.id=l.name,this.root.appendChild(l),this.state=l,this.startDate=this.startDate?new x.Date(this.startDate).firstDayOfMonth():x.Date.fromYearMonthDay(this.year,this.month),this.calendars=[],this.selected=[],this.months=[]},this.oa=function(){return 2===e.api},this.Jc=function(){this.root.innerHTML=""},this.J=function(l){var d=this.theme||this.cssClassPrefix;return d?d+l:""},this.Qc=function(l,d){var f=this.J("_"+d);x.Util.addClass(l,f)},this.Rc=function(l,d){var f=this.J("_"+d);x.Util.removeClass(l,f)},this.Kc=function(l,d){var f={cells:[],days:[],weeks:[]},g=this.startDate.addMonths(l),_=d.before,w=d.after,C=g.firstDayOfMonth(),E=C.firstDayOfWeek(r.weekStarts()),N=C.addMonths(1),A=x.DateUtil.daysDiff(E,N),R="Auto"===this.rowsPerMonth?Math.ceil(A/7):6;f.rowCount=R;var F=(new x.Date).getDatePart(),j=7*r.cellWidth()+this.Pc();f.width=j;var V=this.cellHeight*R+this.titleHeight+this.dayHeaderHeight;f.height=V;var W=document.createElement("div");W.style.width=j+"px",W.style.height=V+"px","Horizontal"===this.orientation?(W.style.position="absolute",W.style.left=j*l+"px",W.style.top="0px",f.top=0,f.left=j*l):(W.style.position="relative",f.top=l>0?e.months[l-1].top+e.months[l-1].height:0,f.left=0),W.className=this.J("_month"),W.style.cursor="default",W.style.MozUserSelect="none",W.style.KhtmlUserSelect="none",W.style.WebkitUserSelect="none",W.month=f,this.root.appendChild(W);var ue=this.titleHeight+this.dayHeaderHeight,we=document.createElement("div");we.style.position="absolute",we.style.left="0px",we.style.right="0px",we.style.top="0px",we.style.width=r.cellWidth()+"px",we.style.height=this.titleHeight+"px",we.style.lineHeight=this.titleHeight+"px",we.setAttribute("unselectable","on"),we.className=this.J("_titleleft"),d.left&&(we.style.cursor="pointer",we.innerHTML="<span>&lt;</span>",we.onclick=this.Sc),W.appendChild(we),this.tl=we;var De=document.createElement("div");De.style.position="absolute",De.style.left=r.cellWidth()+"px",De.style.top="0px",De.style.width=5*r.cellWidth()+this.Pc()+"px",De.style.height=this.titleHeight+"px",De.style.lineHeight=this.titleHeight+"px",De.setAttribute("unselectable","on"),De.className=this.J("_title"),De.innerHTML=r.locale().monthNames[g.getMonth()]+" "+g.getYear(),W.appendChild(De),this.ti=De;var tt=document.createElement("div");tt.style.position="absolute",tt.style.left=6*r.cellWidth()+this.Pc()+"px",tt.style.right=6*r.cellWidth()+this.Pc()+"px",tt.style.top="0px",tt.style.width=r.cellWidth()+"px",tt.style.height=this.titleHeight+"px",tt.style.lineHeight=this.titleHeight+"px",tt.setAttribute("unselectable","on"),tt.className=this.J("_titleright"),d.right&&(tt.style.cursor="pointer",tt.innerHTML="<span>&gt;</span>",tt.onclick=this.Tc),W.appendChild(tt),this.tr=tt;var Ee=this.Pc();if(this.showWeekNumbers)for(var ve=0;ve<R;ve++){var ye=E.addDays(7*ve),ke=null;switch(this.weekNumberAlgorithm){case"Auto":ke=1===r.weekStarts()?ye.weekNumberISO():ye.weekNumber();break;case"US":ke=ye.weekNumber();break;case"ISO8601":ke=ye.weekNumberISO();break;default:throw"Unknown weekNumberAlgorithm value."}(Be=document.createElement("div")).style.position="absolute",Be.style.left="0px",Be.style.right="0px",Be.style.top=ve*this.cellHeight+ue+"px",Be.style.width=r.cellWidth()+"px",Be.style.height=this.cellHeight+"px",Be.style.lineHeight=this.cellHeight+"px",Be.setAttribute("unselectable","on"),Be.className=this.J("_weeknumber"),Be.innerHTML="<span>"+ke+"</span>",W.appendChild(Be),f.weeks.push(Be)}for(var Gt=0;Gt<7;Gt++){var Be;for(f.cells[Gt]=[],(Be=document.createElement("div")).style.position="absolute",Be.style.left=Gt*r.cellWidth()+Ee+"px",Be.style.right=Gt*r.cellWidth()+Ee+"px",Be.style.top=this.titleHeight+"px",Be.style.width=r.cellWidth()+"px",Be.style.height=this.dayHeaderHeight+"px",Be.style.lineHeight=this.dayHeaderHeight+"px",Be.setAttribute("unselectable","on"),Be.className=this.J("_dayheader"),Be.innerHTML="<span>"+this.Uc(Gt)+"</span>",W.appendChild(Be),f.days.push(Be),ve=0;ve<R;ve++){ye=E.addDays(7*ve+Gt);var $t=this.Vc(ye)&&"none"!==this.Wc(),Tn=ye.firstDayOfMonth()===g,Kt=ye<g,br=ye>=g.addMonths(1);if("month"===this.Wc())$t=$t&&Tn;else if("day"===this.Wc())$t=$t&&(Tn||_&&Kt||w&&br);else if("week"===this.Wc()){var Mi=ye.firstDayOfMonth()===g;$t=$t&&(Mi||_&&Kt||w&&br)}var Sn=document.createElement("div");f.cells[Gt][ve]=Sn;var ka=e.Xc(Gt,ve),Il=ka.x,Pa=ka.y;Sn.day=ye,Sn.x=Gt,Sn.y=ve,Sn.left=Il,Sn.top=Pa,Sn.isCurrentMonth=Tn,Sn.isNextMonth=br,Sn.isPrevMonth=Kt,Sn.showBefore=_,Sn.showAfter=w,Sn.className=this.J(Tn?"_day":"_dayother"),e.Qc(Sn,"cell"),ye.getTime()===F.getTime()&&Tn&&this.Qc(Sn,"today"),0!==ye.dayOfWeek()&&6!==ye.dayOfWeek()||this.Qc(Sn,"weekend"),Sn.style.position="absolute",Sn.style.left=Il+"px",Sn.style.right=Il+"px",Sn.style.top=Pa+"px",Sn.style.width=r.cellWidth()+"px",Sn.style.height=this.cellHeight+"px",Sn.style.lineHeight=this.cellHeight+"px";var Or=document.createElement("div");Or.style.position="absolute",Or.className=ye.getTime()===F.getTime()&&Tn?this.J("_todaybox"):this.J("_daybox"),e.Qc(Or,"cell_box"),Or.style.left="0px",Or.style.top="0px",Or.style.right="0px",Or.style.bottom="0px",Sn.appendChild(Or);var Rr=null;if(this.cells&&this.cells[ye.toStringSortable()]&&(Rr=this.cells[ye.toStringSortable()]),"function"==typeof e.onBeforeCellRender){var jt={};jt.cell=Rr||{},jt.cell.day=ye,jt.cell.isCurrentMonth=Tn,jt.cell.isToday=ye.getTime()===F.getTime()&&Tn,jt.cell.isWeekend=0===ye.dayOfWeek()||6===ye.dayOfWeek(),Rr?(jt.cell.html=Rr.html||ye.getDay(),jt.cell.cssClass=Rr.css):(jt.cell.html=ye.getDay(),jt.cell.cssClass=null),e.onBeforeCellRender(jt),Rr=jt.cell}if(Rr&&x.Util.addClass(Sn,Rr.cssClass||Rr.css),Tn||_&&Kt||w&&br){var On=document.createElement("div");On.innerHTML=ye.getDay(),On.style.position="absolute",On.style.left="0px",On.style.top="0px",On.style.right="0px",On.style.bottom="0px",e.Qc(On,"cell_text"),Sn.isClickable=!0,Rr&&Rr.html&&(On.innerHTML=Rr.html),Sn.appendChild(On)}Sn.setAttribute("unselectable","on"),Sn.onclick=this.Yc,W.appendChild(Sn),$t&&(e.Zc(W,Gt,ve),this.selected.push(Sn))}}var Pn=document.createElement("div");Pn.style.position="absolute",Pn.style.left="0px",Pn.style.top=ue-2+"px",Pn.style.width=7*r.cellWidth()+this.Pc()+"px",Pn.style.height="1px",Pn.style.fontSize="1px",Pn.style.lineHeight="1px",Pn.className=this.J("_line"),W.appendChild(Pn),this.months.push(f)},this.Xc=function(l,d){var f=this.titleHeight+this.dayHeaderHeight,g=this.Pc();return{x:l*r.cellWidth()+g,y:d*this.cellHeight+f}},this.Zc=function(l,d,f){e.Qc(l.month.cells[d][f],"select")},this.$c=function(l,d,f){e.Rc(l.month.cells[d][f],"select")},this.Pc=function(){return this.showWeekNumbers?r.cellWidth():0},this._c=function(){if(this.items)for(var l=0;l<this.showMonths;l++)for(var d=0;d<7;d++)for(var f=0;f<6;f++){var g=this.months[l].cells[d][f];g&&(1===this.items[g.day.toStringSortable()]?(this.Qc(g,"busy"),this.Rc(g,"free")):(this.Rc(g,"busy"),this.Qc(g,"free")))}},this.ad=function(){var l={};l.startDate=e.startDate,l.selectionStart=e.selectionStart,l.selectionEnd=e.selectionEnd.addDays(1),e.state.value=JSON.stringify(l)},this.Wc=function(){return(this.selectMode||"").toLowerCase()},this.bd=function(){var l=this.selectionDay||this.selectionStart;switch(l||(l=x.Date.today()),l=new x.Date(l),this.Wc()){case"day":this.selectionStart=l,this.selectionDay=l,this.selectionEnd=l;break;case"week":this.selectionDay=l,this.selectionStart=l.firstDayOfWeek(r.weekStarts()),this.selectionEnd=this.selectionStart.addDays(6);break;case"month":this.selectionDay=l,this.selectionStart=l.firstDayOfMonth(),this.selectionEnd=this.selectionStart.lastDayOfMonth();break;case"none":this.selectionEnd=l;break;default:throw"Unknown selectMode value."}},this.cd=null,this.select=function(l,d,f){var w=l,C=d&&(d instanceof x.Date||"string"==typeof d)?d:null,E=d&&"object"==typeof d||"boolean"==typeof d?d:f;if(this.za){var N=!0,A=!0;E&&"object"==typeof E?(E.dontFocus&&(N=!1),E.dontNotify&&(A=!1)):"boolean"==typeof E&&(N=!E);var R=this.selectionStart,F=this.selectionEnd;this.selectionStart=new x.Date(w).getDatePart(),this.selectionDay=this.selectionStart;var j=!1;if(N){var V=this.startDate;(this.selectionStart<this.dd()||this.selectionStart>=this.ed())&&(V=this.selectionStart.firstDayOfMonth()),V.toStringSortable()!==this.startDate.toStringSortable()&&(j=!0),this.startDate=V}C&&e.freeHandSelectionEnabled?e.selectionEnd=new x.Date(C):this.bd(),this.Jc(),this.Oc(),this.fd(),this._c(),this.ad(),!A||R.equals(this.selectionStart)&&F.equals(this.selectionEnd)||this.L(),j&&this.gd()}else this.cd={date1:w,date2:C,options:E}},this.update=function(l){if(e.$a(l),this.za){if(e.hd)throw new x.Exception("You are trying to update a DayPilot.Navigator instance that has been disposed.");e.jd();var d={day:e.selectionDay,start:e.selectionStart,end:e.selectionEnd};e.Gb(),d.start===e.selectionStart&&d.end==e.selectionEnd&&d.day===e.selectionDay||e.L()}},this.Gb=function(){this.Jc(),this.Oc(),this.bd(),this.fd(),this.ca(),this._c(),this.ad(),this.visible?this.show():this.hide()},this.jd=function(){e.eb={}},this.bb=null,this.$a=function(l){if(l){var d={events:{preInit:function(){var _=this.data||[];e.events.list=x.isArray(_.list)?_.list:_}}};for(var f in this.bb=d,l)if(d[f]){var g=d[f];g.data=l[f],g.preInit&&g.preInit()}else e[f]=l[f]}},this.cb=function(){var l=this.bb;for(var d in l){var f=l[d];f.postInit&&f.postInit()}},this.R=function(l,d,f){var g={};g.action=l,g.parameters=f,g.data=d,g.header=this.Q();var _="JSON"+JSON.stringify(g);this.backendUrl?x.request(this.backendUrl,this.S,_,this.kd):WebForm_DoCallback(this.uniqueID,_,this.T,null,this.callbackError,!0)},this.kd=function(l){if("function"==typeof e.onAjaxError){var d={};d.request=l,e.onAjaxError(d)}else"function"==typeof e.ajaxError&&e.ajaxError(l)},this.S=function(l){e.T(l.responseText)},this.P=function(l,d,f){var g={};g.action=l,g.parameters=f,g.data=d,g.header=this.Q();var _="JSON"+JSON.stringify(g);__doPostBack(e.uniqueID,_)},this.Q=function(){var l={};return l.v=this.v,l.startDate=this.startDate,l.selectionStart=this.selectionStart,l.showMonths=this.showMonths,l},this.ld=function(l,d){"refresh"===l&&this.gd()},this.Uc=function(l){var d=l+r.weekStarts();return d>6&&(d-=7),r.locale().dayNamesShort[d]},this.Vc=function(l){return null!==this.selectionStart&&null!==this.selectionEnd&&this.selectionStart.getTime()<=l.getTime()&&l.getTime()<=this.selectionEnd.getTime()},this.md=function(l){for(var d=0;d<e.months.length;d++){var f=e.months[d];if(!f||l.x<f.left||f.width<l.x)return null;if(f.top<=l.y&&l.y<f.top+f.height)return d}return null},this.nd=function(l){var d=x.mo3(e.nav.top,l),f=e.md(d);if(null===f)return null;var g=e.months[f];if(g.top<=d.y&&d.y<g.top+(this.titleHeight+this.dayHeaderHeight))return{month:f,x:0,y:0,coords:d,header:!0};for(var w=0;w<g.cells.length;w++)for(var C=0;C<g.cells[w].length;C++){var E=g.cells[w][C],N=E.top+g.top,A=E.left+g.left;if(A<=d.x&&d.x<A+e.cellWidth&&N<=d.y&&d.y<N+e.cellHeight)return{month:f,x:w,y:C,coords:d}}return null},this.od=function(l){if(e.freeHandSelectionEnabled){var d=e.nd(l);d&&!d.header&&(i.start=d),l.preventDefault()}},this.pd=function(l){if(i.start){var d=e.nd(l);(i.end||d&&x.distance(i.start.coords,d.coords)>3)&&(i.end=d),i.end&&(i.clear(),i.draw())}},this.qd={};var i=this.qd;i.start=null,i.drawCell=function(l){var d=e.months[l.month],f=e.Xc(l.x,l.y),g=d.top+f.y,_=d.left+f.x,w=document.createElement("div");w.style.position="absolute",w.style.left=_+"px",w.style.top=g+"px",w.style.height=e.cellHeight+"px",w.style.width=e.cellWidth+"px",w.style.backgroundColor="#ccc",w.style.opacity=.5,w.style.cursor="default",e.nav.preselection.appendChild(w),i.cells.push(w)},i.clear=function(){if(i.cells){for(var l=0;l<i.cells.length;l++)e.nav.preselection.removeChild(i.cells[l]);i.cells=[]}},i.draw=function(){var l=i.ordered(),d=new o(l.start),f=l.end;if(f){if(f===i.end&&f.header&&f.month>0){f.month-=1;var g=e.months[f.month];f.x=6,f.y=g.rowCount-1}for(i.cells=[];!d.is(f);){i.drawCell(d);var _=new o(d).next();if(!_)return;d.month=_.month,d.x=_.x,d.y=_.y}i.drawCell(d)}},i.ordered=function(){var l=i.start,d=i.end,f={};return!d||new o(l).before(d)?(f.start=l,f.end=d):(f.start=d,f.end=l),f};var o=function(l,d,f){if(l instanceof o)return l;if("object"==typeof l){var g=l;this.month=g.month,this.x=g.x,this.y=g.y}else this.month=l,this.x=d,this.y=f;this.is=function(_){return this.month===_.month&&this.x===_.x&&this.y===_.y},this.next=function(){var _=this;return _.x<6?{month:_.month,x:_.x+1,y:_.y}:_.y<e.months[_.month].rowCount-1?{month:_.month,x:0,y:_.y+1}:_.month<e.months.length-1?{month:_.month+1,x:0,y:0}:null},this.visible=function(){var _=this.cell();return!!_.isCurrentMonth||!(!_.isPrevMonth||!_.showBefore)||!(!_.isNextMonth||!_.showAfter)},this.nextVisible=function(){for(var _=this;!_.visible();){var w=_.next();if(!w)return null;_=new o(w)}return _},this.previous=function(){var _=this;return _.x>0?{month:_.month,x:_.x-1,y:_.y}:_.y>0?{month:_.month,x:6,y:_.y-1}:_.month>0?{month:_.month-1,x:6,y:e.months[_.month-1].rowCount-1}:null},this.previousVisible=function(){for(var _=this;!_.visible();){var w=_.previous();if(!w)return null;_=new o(w)}return _},this.cell=function(){return e.months[this.month].cells[this.x][this.y]},this.date=function(){return this.cell().day},this.before=function(_){return this.date()<new o(_).date()}};this.Yc=function(l){var d=this.parentNode,f=this.parentNode.month,w=f.cells[g=this.x][_=this.y].day;if(f.cells[g][_].isClickable){switch(e.clearSelection(),e.selectionDay=w,w=e.selectionDay,e.Wc()){case"none":e.selectionStart=w,e.selectionEnd=w;break;case"day":if(e.autoFocusOnClick){var C=w;if(w<e.dd()||w>=e.ed())return void e.select(w)}var E=f.cells[g][_];e.Zc(d,g,_),e.selected.push(E),e.selectionStart=E.day,e.selectionEnd=E.day;break;case"week":if(e.autoFocusOnClick){var N=f.cells[6][_].day;if((C=f.cells[0][_].day).firstDayOfMonth()===N.firstDayOfMonth()&&(C<e.dd()||N>=e.ed()))return void e.select(w)}for(var A=0;A<7;A++)e.Zc(d,A,_),e.selected.push(f.cells[A][_]);e.selectionStart=f.cells[0][_].day,e.selectionEnd=f.cells[6][_].day;break;case"month":if(e.autoFocusOnClick&&(C=w,w<e.dd()||w>=e.ed()))return void e.select(w);C=null,N=null;for(var _=0;_<6;_++)for(var g=0;g<7;g++)(E=f.cells[g][_])&&E.day.getYear()===w.getYear()&&E.day.getMonth()===w.getMonth()&&(e.Zc(d,g,_),e.selected.push(E),null===C&&(C=E.day),N=E.day);e.selectionStart=C,e.selectionEnd=N;break;default:throw"unknown selectMode"}e.ad(),e.L()}},this.L=function(l){var d=e.selectionStart,f=e.selectionEnd.addDays(1),g=x.DateUtil.daysDiff(d,f),_=e.selectionDay;if(l=l||{},e.oa()){var w={};if(w.start=d,w.end=f,w.day=_,w.days=g,w.mode=l.mode||e.selectMode,w.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof e.onTimeRangeSelect&&(e.onTimeRangeSelect(w),w.preventDefault.value))return;switch(e.timeRangeSelectedHandling){case"Bind":"object"==typeof bound&&((C={}).start=d,C.end=f,C.days=g,C.day=_,bound.commandCallBack(e.command,C));break;case"None":break;case"PostBack":e.timeRangeSelectedPostBack(d,f,_)}"function"==typeof e.onTimeRangeSelected&&e.onTimeRangeSelected(w)}else switch(e.timeRangeSelectedHandling){case"Bind":var C;"object"==typeof bound&&((C={}).start=d,C.end=f,C.days=g,C.day=_,bound.commandCallBack(e.command,C));break;case"JavaScript":e.onTimeRangeSelected(d,f,_);break;case"None":break;case"PostBack":e.timeRangeSelectedPostBack(d,f,_)}},this.timeRangeSelectedPostBack=function(l,d,f,g){var _={};_.start=l,_.end=d,_.day=g,this.P("TimeRangeSelected",f,_)},this.Tc=function(l){e.rd(e.skipMonths)},this.Sc=function(l){e.rd(-e.skipMonths)},this.rd=function(l){this.startDate=this.startDate.addMonths(l),this.Jc(),this.Oc(),this.fd(),this.ad(),this.gd(),this._c()},this.dd=function(){return e.startDate.firstDayOfMonth()},this.ed=function(){return e.startDate.firstDayOfMonth().addMonths(this.showMonths)},this.visibleStart=function(){return e.startDate.firstDayOfMonth().firstDayOfWeek(r.weekStarts())},this.visibleEnd=function(){return e.startDate.firstDayOfMonth().addMonths(this.showMonths-1).firstDayOfWeek(r.weekStarts()).addDays(42)},this.gd=function(){var l=this.visibleStart(),d=this.visibleEnd();if(e.oa()){var f={};if(f.start=l,f.end=d,f.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof e.onVisibleRangeChange&&(e.onVisibleRangeChange(f),f.preventDefault.value))return;switch(this.visibleRangeChangedHandling){case"CallBack":this.visibleRangeChangedCallBack(null);break;case"PostBack":this.visibleRangeChangedPostBack(null)}"function"==typeof e.onVisibleRangeChanged&&e.onVisibleRangeChanged(f)}else switch(this.visibleRangeChangedHandling){case"CallBack":this.visibleRangeChangedCallBack(null);break;case"PostBack":this.visibleRangeChangedPostBack(null);break;case"JavaScript":this.onVisibleRangeChanged(l,d)}},this.visibleRangeChangedCallBack=function(l){this.R("Visible",l,{})},this.visibleRangeChangedPostBack=function(l){this.P("Visible",l,{})},this.T=function(f,d){f=JSON.parse(f),e.items=f.Items,e.cells=f.Cells,e.cells?e.update():e._c()},this.fd=function(){for(var l=0;l<this.showMonths;l++){var d=this.sd(l);this.Kc(l,d)}this.root.style.height=this.td()+"px",this.nav.preselection=document.createElement("div"),this.nav.preselection.style.position="absolute",this.nav.preselection.style.left="0px",this.nav.preselection.style.top="0px",this.root.appendChild(this.nav.preselection)},this.td=function(){if("Horizontal"===this.orientation){for(var l=0,d=0;d<this.months.length;d++)(f=this.months[d]).height>l&&(l=f.height);return l}var g=0;for(d=0;d<this.months.length;d++){var f;g+=(f=this.months[d]).height}return g},this.sd=function(l){if(this.internal.showLinks)return this.internal.showLinks;var d={};return d.left=0===l,d.right=0===l,d.before=0===l,d.after=l===this.showMonths-1,"Horizontal"===this.orientation&&(d.right=l===this.showMonths-1),d},this.qa={},this.qa.scope=null,this.qa.notify=function(){e.qa.scope&&e.qa.scope.$apply()},this.internal={},this.internal.loadOptions=e.$a,this.internal.initialized=function(){return e.za},this._={};var r=this._;r.locale=function(){return x.Locale.find(e.locale)},r.weekStarts=function(){if("Auto"===e.weekStarts){var l=r.locale();return l?l.weekStarts:0}return e.weekStarts},r.cellWidth=function(){if(e.eb.cellWidth)return e.eb.cellWidth;var l=e.ud("_cell_dimensions").width;return l||(l=e.cellWidth),e.eb.cellWidth=l,l},this.clearSelection=function(){for(var l=0;l<this.selected.length;l++){var d=this.selected[l];e.$c(d.parentNode,d.x,d.y)}this.selected=[]},this.vd=function(){return!!this.backendUrl&&(typeof e.items>"u"||!e.items)},this.events={},this.ca=function(){if(x.isArray(this.events.list)){this.items={};for(var l=0;l<this.events.list.length;l++){var d=this.events.list[l];if(!d.hidden){var f=this.wd(d);for(var g in f)this.items[g]=1}}}},this.ud=function(l){var d=document.createElement("div");d.style.position="absolute",d.style.top="-2000px",d.style.left="-2000px",d.className=this.J(l);var f=e.root||document.body;f.appendChild(d);var g=d.offsetHeight,_=d.offsetWidth;f.removeChild(d);var w={};return w.height=g,w.width=_,w},this.wd=function(l){for(var d=new x.Date(l.start),f=new x.Date(l.end),g={},_=d.getDatePart();_.getTime()<f.getTime();)g[_.toStringSortable()]=1,_=_.addDays(1);return g},this.show=function(){e.visible=!0,e.root.style.display=""},this.hide=function(){e.visible=!1,e.root.style.display="none"},this.db=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Navigator() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Navigator: The placeholder element not found: '"+n+"'."}this.root=this.nav.top},this.init=function(){if(this.db(),!this.root.dp){if(this.bd(),this.Oc(),this.fd(),this.ca(),this._c(),this.Y(),this.xd(),this.Ya(),this.vd()&&this.gd(),this.za=!0,this.cb(),this.cd){var l=this.cd;this.select(l.date1,l.date2,l.options),this.cd=null}return this}},this.xd=function(){e.nav.top.onmousedown=this.od,e.nav.top.onmousemove=this.pd},this.Ya=function(){x.re(document,"mouseup",e.yd)},this.yd=function(l){if(i.start&&i.end){var d=x.mo3(e.nav.top,l);if(d.x===i.start.coords.x&&d.y===i.start.coords.y)return i.start=null,void i.clear();i.clear();var f=i.ordered();f.start=new o(f.start).nextVisible(),f.end=new o(f.end).previousVisible(),e.selectionDay=new o(f.start).date(),e.selectionStart=e.selectionDay,e.selectionEnd=new o(f.end).date(),i.start=null,i.end=null,e.Jc(),e.Oc(),e.fd(),e._c(),e.ad(),e.L({mode:"FreeHand"})}i.start=null,i.end=null},this.dispose=function(){var l=e;l.root&&(l.root.removeAttribute("style"),l.root.removeAttribute("class"),l.root.dp=null,l.root.innerHTML=null,l.root=null,l.hd=!0)},this.Y=function(){this.root.dispose=this.dispose},this.Init=this.init,this.$a(t)},typeof jQuery<"u"&&(jQuery.fn.daypilotNavigator=function(t){var e=null,i=this.each(function(){if(!this.daypilot){var o=new x.Navigator(this.id);for(var r in this.daypilot=o,t)o[r]=t[r];o.Init(),e||(e=o)}});return 1===this.length?e:i}),(n=x.am())&&n.directive("daypilotNavigator",["$parse",function(t){return{restrict:"E",template:"<div id='{{id}}'></div>",compile:function(e,i){return e.replaceWith(this.template.replace("{{id}}",i.id)),function(o,r,l){var d=new x.Navigator(r[0]);d.qa.scope=o,d.init();var f=l.id;f&&(o[f]=d);var g=l.publishAs;for(var _ in g&&(0,t(g).assign)(o,d),l)0===_.indexOf("on")&&(x.Util.shouldApply(_)?function(A){d[A]=function(R){var F=t(l[A]);o.$apply(function(){F(o,{args:R})})}}(_):function(A){d[A]=function(R){t(l[A])(o,{args:R})}}(_));var C=o.$watch,N=l.events||l.daypilotEvents;C.call(o,l.config||l.daypilotConfig,function(A,R){for(var F in A)d[F]=A[F];d.update()},!0),C.call(o,N,function(A){d.events.list=A,d.ca(),d._c()},!0)}}}}]),typeof Sys<"u"&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded());let uF=(()=>{class n{constructor(){this.viewChange=new u.vpe,this.events=[],this._requestUpdateFull=!1,this._requestUpdateEvents=!1,this._requestViewChange=!1,this._hashOptions="",this._hashEvents="",this._id="dp_"+(new Date).getTime()+OM()}get id(){return this._id}ngOnInit(){}ngOnDestroy(){this.dispose()}ngAfterViewInit(){this.dispose();let e=new x.Calendar(this.id);this.control=e,this.updateOptions(),this.updateEvents(),this._requestUpdateFull=!1,this._requestUpdateEvents=!1,e.init()}ngDoCheck(){this.control&&(this.updateOptions(),this.updateEvents(),this._requestUpdateFull?(this.control.update(),this._requestUpdateFull=!1,this._requestUpdateEvents=!1):this._requestUpdateEvents&&(this.control.update({events:this.events}),this._requestUpdateEvents=!1),this._requestViewChange)&&(this._requestViewChange=!1,this.viewChange.emit({}))}dispose(){this.control&&(this.control.dispose(),this.control=null)}updateOptions(){let e=a_(this.config);e!==this._hashOptions&&(this.control.internal.loadOptions(this.config),this._requestUpdateFull=!0,this._requestViewChange=!0),this._hashOptions=e}updateEvents(){let e=a_(this.events);if(e!==this._hashEvents){let i=this.control;i&&(i.events.list=this.events),this._requestUpdateEvents=!0}this._hashEvents=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["daypilot-calendar"]],inputs:{events:"events",config:"config"},outputs:{viewChange:"viewChange"},decls:1,vars:1,consts:[[3,"id"]],template:function(e,i){1&e&&u._UZ(0,"div",0),2&e&&u.s9C("id",i.id)}}),n})(),dF=(()=>{class n{constructor(){this.events=[],this._requestUpdate=!1,this._hashOptions="",this._hashEvents="",this._id="dp_"+(new Date).getTime()+OM()}get id(){return this._id}ngOnInit(){}ngOnDestroy(){this.dispose()}ngAfterViewInit(){this.dispose(),this.control=new x.Month(this.id),this.updateOptions(),this.updateEvents(),this._requestUpdate=!1,this.control.init()}ngDoCheck(){this.control&&(this.updateOptions(),this.updateEvents(),this._requestUpdate&&(this.control.update(),this._requestUpdate=!1))}dispose(){this.control&&(this.control.dispose(),this.control=null)}updateOptions(){let e=a_(this.config);e!==this._hashOptions&&(this.control.internal.loadOptions(this.config),this._requestUpdate=!0),this._hashOptions=e}updateEvents(){let e=a_(this.events);e!==this._hashEvents&&(this.control.events.list=this.events,this._requestUpdate=!0),this._hashEvents=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["daypilot-month"]],inputs:{events:"events",config:"config"},decls:1,vars:1,consts:[[3,"id"]],template:function(e,i){1&e&&u._UZ(0,"div",0),2&e&&u.s9C("id",i.id)}}),n})(),hF=(()=>{class n{constructor(){this.events=[],this.dateChange=new u.vpe,this._requestUpdate=!1,this._hashOptions="",this._hashEvents="",this._onTrs=null,this._dateSet=!1,this._currentDate=null,this._date=x.Date.today(),this._id="dp_"+(new Date).getTime()+OM()}get date(){return this._date}set date(e){this._date=e,this._dateSet=!0}get id(){return this._id}ngOnInit(){}ngOnDestroy(){this.dispose()}ngAfterViewInit(){this.dispose(),this.control=new x.Navigator(this.id);let e=this;this.updateOptions(),this.updateEvents();let i=this.control;this.control.onTimeRangeSelected=function(o){e.dateChange.emit(o.day),e._onTrs&&e._onTrs.call(i,o)},this._requestUpdate=!1,this.control.init(),this.control.selectionDay!==x.Date.today()&&e.dateChange.emit(this.control.selectionDay)}ngDoCheck(){this.control&&(this.updateOptions(),this.updateEvents(),this._requestUpdate&&(this.control.update(),this._requestUpdate=!1))}dispose(){this.control&&(this.control.dispose(),this.control=null)}updateOptions(){let e=this.control,i=a_(this.config);if(i!==this._hashOptions)for(let o in this.config)"selectionDay"!==o&&("onTimeRangeSelected"===o?this._onTrs=this.config.onTimeRangeSelected:e[o]=this.config[o],this._requestUpdate=!0);this._dateSet&&this.date&&(this._dateSet=!1,this._currentDate=e.selectionDay,e.select(this.date)),this._hashOptions=i}updateEvents(){let e=a_(this.events);e!==this._hashEvents&&(this.control.events.list=this.events,this._requestUpdate=!0),this._hashEvents=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["daypilot-navigator"]],inputs:{events:"events",config:"config",date:"date"},outputs:{dateChange:"dateChange"},decls:1,vars:1,consts:[[3,"id"]],template:function(e,i){1&e&&u._UZ(0,"div",0),2&e&&u.s9C("id",i.id)}}),n})(),iV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[]]}),n})();var rV=z(305);function Dl(n,t){const e="object"==typeof t;return new Promise((i,o)=>{const r=new rV.Hp({next:l=>{i(l),r.unsubscribe()},error:o,complete:()=>{e?i(t.defaultValue):o(new vs)}});n.subscribe(r)})}let fF=(()=>{var n;class t{constructor(i,o){this.http=i,this.userService=o,this.events=[]}getEvents(i,o){return new Ri.y(r=>{setTimeout(()=>{r.next(this.events)},200)})}getCalendar(){return this.userService.calendar()}}return(n=t).\u0275fac=function(i){return new(i||n)(u.LFG(zy),u.LFG(cc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),t})();function RM(){return(0,fr.e)((n,t)=>{let e,i=!1;n.subscribe((0,qi.x)(t,o=>{const r=e;e=o,i&&t.next([r,o]),i=!0}))})}z(8661);var St,oV=z(3106),sV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fc={},kM=kM||{},_n=sV||self;function P1(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function mb(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var PM="closure_uid_"+(1e9*Math.random()>>>0),lV=0;function cV(n,t,e){return n.call.apply(n.bind,arguments)}function uV(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,i),n.apply(t,o)}}return function(){return n.apply(t,arguments)}}function rs(n,t,e){return(rs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cV:uV).apply(null,arguments)}function F1(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function _o(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,o,r){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return t.prototype[o].apply(i,l)}}function Xh(){this.s=this.s,this.o=this.o}Xh.prototype.s=!1,Xh.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function aV(n){Object.prototype.hasOwnProperty.call(n,PM)&&n[PM]||(n[PM]=++lV)}(this)},Xh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pF=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function FM(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function gF(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(P1(i)){const o=n.length||0,r=i.length||0;n.length=o+r;for(let l=0;l<r;l++)n[o+l]=i[l]}else n.push(i)}}function os(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}os.prototype.h=function(){this.defaultPrevented=!0};var hV=function(){if(!_n.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{_n.addEventListener("test",()=>{},t),_n.removeEventListener("test",()=>{},t)}catch{}return n}();function vb(n){return/^[\s\xa0]*$/.test(n)}function L1(){var n=_n.navigator;return n&&(n=n.userAgent)?n:""}function tu(n){return-1!=L1().indexOf(n)}function LM(n){return LM[" "](n),n}LM[" "]=function(){};var BM,pV=tu("Opera"),l_=tu("Trident")||tu("MSIE"),mF=tu("Edge"),UM=mF||l_,vF=tu("Gecko")&&!(-1!=L1().toLowerCase().indexOf("webkit")&&!tu("Edge"))&&!(tu("Trident")||tu("MSIE"))&&!tu("Edge"),gV=-1!=L1().toLowerCase().indexOf("webkit")&&!tu("Edge");function _F(){var n=_n.document;return n?n.documentMode:void 0}e:{var HM="",VM=function(){var n=L1();return vF?/rv:([^\);]+)(\)|;)/.exec(n):mF?/Edge\/([\d\.]+)/.exec(n):l_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):gV?/WebKit\/(\S+)/.exec(n):pV?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(VM&&(HM=VM?VM[1]:""),l_){var jM=_F();if(null!=jM&&jM>parseFloat(HM)){BM=String(jM);break e}}BM=HM}var mV=_n.document&&l_&&(_F()||parseInt(BM,10))||void 0;function _b(n,t){if(os.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(vF){e:{try{LM(t.nodeName);var o=!0;break e}catch{}o=!1}o||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:vV[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&_b.$.h.call(this)}}_o(_b,os);var vV={2:"touch",3:"pen",4:"mouse"};_b.prototype.h=function(){_b.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yb="closure_listenable_"+(1e6*Math.random()|0),_V=0;function yV(n,t,e,i,o){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=o,this.key=++_V,this.fa=this.ia=!1}function U1(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function $M(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function bF(n){const t={};for(const e in n)t[e]=n[e];return t}const wF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CF(n,t){let e,i;for(let o=1;o<arguments.length;o++){for(e in i=arguments[o],i)n[e]=i[e];for(let r=0;r<wF.length;r++)e=wF[r],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function B1(n){this.src=n,this.g={},this.h=0}function zM(n,t){var e=t.type;if(e in n.g){var r,i=n.g[e],o=pF(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(U1(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function WM(n,t,e,i){for(var o=0;o<n.length;++o){var r=n[o];if(!r.fa&&r.listener==t&&r.capture==!!e&&r.la==i)return o}return-1}B1.prototype.add=function(n,t,e,i,o){var r=n.toString();(n=this.g[r])||(n=this.g[r]=[],this.h++);var l=WM(n,t,i,o);return-1<l?(t=n[l],e||(t.ia=!1)):((t=new yV(t,this.src,r,!!i,o)).ia=e,n.push(t)),t};var qM="closure_lm_"+(1e6*Math.random()|0),ZM={};function DF(n,t,e,i,o){if(i&&i.once)return TF(n,t,e,i,o);if(Array.isArray(t)){for(var r=0;r<t.length;r++)DF(n,t[r],e,i,o);return null}return e=QM(e),n&&n[yb]?n.O(t,e,mb(i)?!!i.capture:!!i,o):EF(n,t,e,!1,i,o)}function EF(n,t,e,i,o,r){if(!t)throw Error("Invalid event type");var l=mb(o)?!!o.capture:!!o,d=KM(n);if(d||(n[qM]=d=new B1(n)),(e=d.add(t,e,i,l,r)).proxy)return e;if(i=function wV(){const t=CV;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)hV||(o=l),void 0===o&&(o=!1),n.addEventListener(t.toString(),i,o);else if(n.attachEvent)n.attachEvent(IF(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function TF(n,t,e,i,o){if(Array.isArray(t)){for(var r=0;r<t.length;r++)TF(n,t[r],e,i,o);return null}return e=QM(e),n&&n[yb]?n.P(t,e,mb(i)?!!i.capture:!!i,o):EF(n,t,e,!0,i,o)}function SF(n,t,e,i,o){if(Array.isArray(t))for(var r=0;r<t.length;r++)SF(n,t[r],e,i,o);else i=mb(i)?!!i.capture:!!i,e=QM(e),n&&n[yb]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=WM(r=n.g[t],e,i,o))&&(U1(r[e]),Array.prototype.splice.call(r,e,1),0==r.length&&(delete n.g[t],n.h--))):n&&(n=KM(n))&&(t=n.g[t.toString()],n=-1,t&&(n=WM(t,e,i,o)),(e=-1<n?t[n]:null)&&YM(e))}function YM(n){if("number"!=typeof n&&n&&!n.fa){var t=n.src;if(t&&t[yb])zM(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(IF(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=KM(t))?(zM(e,n),0==e.h&&(e.src=null,t[qM]=null)):U1(n)}}}function IF(n){return n in ZM?ZM[n]:ZM[n]="on"+n}function CV(n,t){if(n.fa)n=!0;else{t=new _b(t,this);var e=n.listener,i=n.la||n.src;n.ia&&YM(n),n=e.call(i,t)}return n}function KM(n){return(n=n[qM])instanceof B1?n:null}var JM="__closure_events_fn_"+(1e9*Math.random()>>>0);function QM(n){return"function"==typeof n?n:(n[JM]||(n[JM]=function(t){return n.handleEvent(t)}),n[JM])}function yo(){Xh.call(this),this.i=new B1(this),this.S=this,this.J=null}function Po(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,"string"==typeof t)t=new os(t,n);else if(t instanceof os)t.target=t.target||n;else{var o=t;CF(t=new os(i,n),o)}if(o=!0,e)for(var r=e.length-1;0<=r;r--){var l=t.g=e[r];o=H1(l,i,!0,t)&&o}if(o=H1(l=t.g=n,i,!0,t)&&o,o=H1(l,i,!1,t)&&o,e)for(r=0;r<e.length;r++)o=H1(l=t.g=e[r],i,!1,t)&&o}function H1(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var o=!0,r=0;r<t.length;++r){var l=t[r];if(l&&!l.fa&&l.capture==e){var d=l.listener,f=l.la||l.src;l.ia&&zM(n.i,l),o=!1!==d.call(f,i)&&o}}return o&&!i.defaultPrevented}_o(yo,Xh),yo.prototype[yb]=!0,yo.prototype.removeEventListener=function(n,t,e,i){SF(this,n,t,e,i)},yo.prototype.N=function(){if(yo.$.N.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)U1(e[i]);delete n.g[t],n.h--}}this.J=null},yo.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},yo.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var XM=_n.JSON.stringify;function EV(){var n=ex;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var AF=new class DV{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new SV,n=>n.reset());class SV{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function IV(n){var t=1;n=n.split(":");const e=[];for(;0<t&&n.length;)e.push(n.shift()),t--;return n.length&&e.push(n.join(":")),e}function AV(n){_n.setTimeout(()=>{throw n},0)}let bb,wb=!1,ex=new class TV{constructor(){this.h=this.g=null}add(t,e){const i=AF.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}},NF=()=>{const n=_n.Promise.resolve(void 0);bb=()=>{n.then(NV)}};var NV=()=>{for(var n;n=EV();){try{n.h.call(n.g)}catch(e){AV(e)}var t=AF;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}wb=!1};function V1(n,t){yo.call(this),this.h=n||1,this.g=t||_n,this.j=rs(this.qb,this),this.l=Date.now()}function tx(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function nx(n,t,e){if("function"==typeof n)e&&(n=rs(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=rs(n.handleEvent,n)}return 2147483647<Number(t)?-1:_n.setTimeout(n,t||0)}function MF(n){n.g=nx(()=>{n.g=null,n.i&&(n.i=!1,MF(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}_o(V1,yo),(St=V1.prototype).ga=!1,St.T=null,St.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Po(this,"tick"),this.ga&&(tx(this),this.start()))}},St.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},St.N=function(){V1.$.N.call(this),tx(this),delete this.g};class MV extends Xh{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:MF(this)}N(){super.N(),this.g&&(_n.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cb(n){Xh.call(this),this.h=n,this.g={}}_o(Cb,Xh);var xF=[];function OF(n,t,e,i){Array.isArray(e)||(e&&(xF[0]=e.toString()),e=xF);for(var o=0;o<e.length;o++){var r=DF(t,e[o],i||n.handleEvent,!1,n.h||n);if(!r)break;n.g[r.key]=r}}function RF(n){$M(n.g,function(t,e){this.g.hasOwnProperty(e)&&YM(t)},n),n.g={}}function j1(){this.g=!0}function c_(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function kV(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var o=i[1];if(Array.isArray(o)&&!(1>o.length)){var r=o[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var l=1;l<o.length;l++)o[l]=""}}}return XM(e)}catch{return t}}(n,e)+(i?" "+i:"")})}Cb.prototype.N=function(){Cb.$.N.call(this),RF(this)},Cb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},j1.prototype.Ea=function(){this.g=!1},j1.prototype.info=function(){};var sg={},kF=null;function G1(){return kF=kF||new yo}function PF(n){os.call(this,sg.Ta,n)}function Db(n){const t=G1();Po(t,new PF(t))}function FF(n,t){os.call(this,sg.STAT_EVENT,n),this.stat=t}function xs(n){const t=G1();Po(t,new FF(t,n))}function LF(n,t){os.call(this,sg.Ua,n),this.size=t}function Eb(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return _n.setTimeout(function(){n()},t)}sg.Ta="serverreachability",_o(PF,os),sg.STAT_EVENT="statevent",_o(FF,os),sg.Ua="timingevent",_o(LF,os);var $1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},UF={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ix(){}function HF(){}ix.prototype.h=null;var sx,Tb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rx(){os.call(this,"d")}function ox(){os.call(this,"c")}function z1(){}function Sb(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new Cb(this),this.P=PV,this.V=new V1(n=UM?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new VF}function VF(){this.i=null,this.g="",this.h=!1}_o(rx,os),_o(ox,os),_o(z1,ix),z1.prototype.g=function(){return new XMLHttpRequest},z1.prototype.i=function(){return{}},sx=new z1;var PV=45e3,ax={},W1={};function lx(n,t,e){n.L=1,n.v=K1(vd(t)),n.s=e,n.S=!0,jF(n,null)}function jF(n,t){n.G=Date.now(),Ib(n),n.A=vd(n.v);var e=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),QF(e.i,"t",i),n.C=0,e=n.l.J,n.h=new VF,n.g=CL(n.l,e?t:null,!n.s),0<n.O&&(n.M=new MV(rs(n.Pa,n,n.g),n.O)),OF(n.U,n.g,"readystatechange",n.nb),t=n.I?bF(n.I):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,t)):(n.u="GET",n.g.ha(n.A,n.u,null,t)),Db(),function xV(n,t,e,i,o,r){n.info(function(){if(n.g)if(r)for(var l="",d=r.split("&"),f=0;f<d.length;f++){var g=d[f].split("=");if(1<g.length){var _=g[0];g=g[1];var w=_.split("_");l=2<=w.length&&"type"==w[1]?l+(_+"=")+g+"&":l+(_+"=redacted&")}}else l=null;else l=r;return"XMLHTTP REQ ("+i+") [attempt "+o+"]: "+t+"\n"+e+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function GF(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function $F(n,t,e){let o,i=!0;for(;!n.J&&n.C<e.length;){if(o=FV(n,e),o==W1){4==t&&(n.o=4,xs(14),i=!1),c_(n.j,n.m,null,"[Incomplete Response]");break}if(o==ax){n.o=4,xs(15),c_(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}c_(n.j,n.m,o,null),cx(n,o)}GF(n)&&o!=W1&&o!=ax&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,xs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ba&&(n.ba=!0,(t=n.l).g==n&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),mx(t),t.M=!0,xs(11))):(c_(n.j,n.m,e,"[Invalid Chunked Response]"),ag(n),Ab(n))}function FV(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?W1:(e=Number(t.substring(e,i)),isNaN(e)?ax:(i+=1)+e>t.length?W1:(t=t.slice(i,i+e),n.C=i+e,t))}function Ib(n){n.Y=Date.now()+n.P,zF(n,n.P)}function zF(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Eb(rs(n.lb,n),t)}function q1(n){n.B&&(_n.clearTimeout(n.B),n.B=null)}function Ab(n){0==n.l.H||n.J||_L(n.l,n)}function ag(n){q1(n);var t=n.M;t&&"function"==typeof t.sa&&t.sa(),n.M=null,tx(n.V),RF(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.sa())}function cx(n,t){try{var e=n.l;if(0!=e.H&&(e.g==n||ux(e.i,n)))if(!n.K&&ux(e.i,n)&&3==e.H){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var o=i;if(0==o[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<n.G))break e;nT(e),eT(e)}gx(e),xs(18)}}else e.Fa=o[1],0<e.Fa-e.V&&37500>o[2]&&e.G&&0==e.A&&!e.v&&(e.v=Eb(rs(e.ib,e),6e3));if(1>=tL(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else cg(e,11)}else if((n.K||e.g==n)&&nT(e),!vb(t))for(o=e.Ja.g.parse(t),t=0;t<o.length;t++){let g=o[t];if(e.V=g[0],g=g[1],2==e.H)if("c"==g[0]){e.K=g[1],e.pa=g[2];const _=g[3];null!=_&&(e.ra=_,e.l.info("VER="+e.ra));const w=g[4];null!=w&&(e.Ga=w,e.l.info("SVER="+e.Ga));const C=g[5];null!=C&&"number"==typeof C&&0<C&&(e.L=i=1.5*C,e.l.info("backChannelRequestTimeoutMs_="+i)),i=e;const E=n.g;if(E){const N=E.g?E.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(N){var r=i.i;r.g||-1==N.indexOf("spdy")&&-1==N.indexOf("quic")&&-1==N.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(dx(r,r.h),r.h=null))}if(i.F){const A=E.g?E.g.getResponseHeader("X-HTTP-Session-Id"):null;A&&(i.Da=A,Li(i.I,i.F,A))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-n.G,e.l.info("Handshake RTT: "+e.S+"ms"));var l=n;if((i=e).wa=wL(i,i.J?i.pa:null,i.Y),l.K){nL(i.i,l);var d=l,f=i.L;f&&d.setTimeout(f),d.B&&(q1(d),Ib(d)),i.g=l}else mL(i);0<e.j.length&&tT(e)}else"stop"!=g[0]&&"close"!=g[0]||cg(e,7);else 3==e.H&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?cg(e,7):px(e):"noop"!=g[0]&&e.h&&e.h.Aa(g),e.A=0)}Db()}catch{}}function WF(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(P1(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function UV(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(P1(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function LV(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(P1(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),o=i.length,r=0;r<o;r++)t.call(void 0,i[r],e&&e[r],n)}(St=Sb.prototype).setTimeout=function(n){this.P=n},St.nb=function(n){n=n.target;const t=this.M;t&&3==nu(n)?t.l():this.Pa(n)},St.Pa=function(n){try{if(n==this.g)e:{const _=nu(this.g);var t=this.g.Ia();if(this.g.da(),!(3>_)&&(3!=_||UM||this.g&&(this.h.h||this.g.ja()||uL(this.g)))){this.J||4!=_||7==t||Db(),q1(this);var e=this.g.da();this.ca=e;t:if(GF(this)){var i=uL(this.g);n="";var o=i.length,r=4==nu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ag(this),Ab(this);var l="";break t}this.h.i=new _n.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:r&&t==o-1});i.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==e,function OV(n,t,e,i,o,r,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+o+"]: "+t+"\n"+e+"\n"+r+" "+l})}(this.j,this.u,this.A,this.m,this.W,_,e),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vb(d)){var g=d;break t}}g=null}if(!(e=g)){this.i=!1,this.o=3,xs(12),ag(this),Ab(this);break e}c_(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cx(this,e)}this.S?($F(this,_,l),UM&&this.i&&3==_&&(OF(this.U,this.V,"tick",this.mb),this.V.start())):(c_(this.j,this.m,l,null),cx(this,l)),4==_&&ag(this),this.i&&!this.J&&(4==_?_L(this.l,this):(this.i=!1,Ib(this)))}else(function nj(n){const t={};n=(n.g&&2<=nu(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(vb(n[i]))continue;var e=IV(n[i]);const o=e[0];if("string"!=typeof(e=e[1]))continue;e=e.trim();const r=t[o]||[];t[o]=r,r.push(e)}!function bV(n,t){for(const e in n)t.call(void 0,n[e],e,n)}(t,function(i){return i.join(", ")})})(this.g),400==e&&0<l.indexOf("Unknown SID")?(this.o=3,xs(12)):(this.o=0,xs(13)),ag(this),Ab(this)}}}catch{}},St.mb=function(){if(this.g){var n=nu(this.g),t=this.g.ja();this.C<t.length&&(q1(this),$F(this,n,t),this.i&&4!=n&&Ib(this))}},St.cancel=function(){this.J=!0,ag(this)},St.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function RV(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Db(),xs(17)),ag(this),this.o=2,Ab(this)):zF(this,this.Y-n)};var qF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lg(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lg){this.h=n.h,Z1(this,n.j),this.s=n.s,this.g=n.g,Y1(this,n.m),this.l=n.l;var t=n.i,e=new xb;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),ZF(this,e),this.o=n.o}else n&&(t=String(n).match(qF))?(this.h=!1,Z1(this,t[1]||"",!0),this.s=Nb(t[2]||""),this.g=Nb(t[3]||"",!0),Y1(this,t[4]),this.l=Nb(t[5]||"",!0),ZF(this,t[6]||"",!0),this.o=Nb(t[7]||"")):(this.h=!1,this.i=new xb(null,this.h))}function vd(n){return new lg(n)}function Z1(n,t,e){n.j=e?Nb(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Y1(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function ZF(n,t,e){t instanceof xb?(n.i=t,function zV(n,t){t&&!n.j&&(ef(n),n.i=null,n.g.forEach(function(e,i){var o=i.toLowerCase();i!=o&&(KF(this,i),QF(this,o,e))},n)),n.j=t}(n.i,n.h)):(e||(t=Mb(t,GV)),n.i=new xb(t,n.h))}function Li(n,t,e){n.i.set(t,e)}function K1(n){return Li(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Nb(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mb(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,HV),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function HV(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lg.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Mb(t,YF,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Mb(t,YF,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(Mb(e,"/"==e.charAt(0)?jV:VV,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Mb(e,$V)),n.join("")};var YF=/[#\/\?@]/g,VV=/[#\?:]/g,jV=/[#\?]/g,GV=/[#\?@]/g,$V=/#/g;function xb(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function ef(n){n.g||(n.g=new Map,n.h=0,n.i&&function BV(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),o=null;if(0<=i){var r=n[e].substring(0,i);o=n[e].substring(i+1)}else r=n[e];t(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function KF(n,t){ef(n),t=u_(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function JF(n,t){return ef(n),t=u_(n,t),n.g.has(t)}function QF(n,t,e){KF(n,t),0<e.length&&(n.i=null,n.g.set(u_(n,t),FM(e)),n.h+=e.length)}function u_(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function XF(n){this.l=n||qV,n=_n.PerformanceNavigationTiming?0<(n=_n.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(_n.g&&_n.g.Ka&&_n.g.Ka()&&_n.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(St=xb.prototype).add=function(n,t){ef(this),this.i=null,n=u_(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},St.forEach=function(n,t){ef(this),this.g.forEach(function(e,i){e.forEach(function(o){n.call(t,o,i,this)},this)},this)},St.ta=function(){ef(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const o=n[i];for(let r=0;r<o.length;r++)e.push(t[i])}return e},St.Z=function(n){ef(this);let t=[];if("string"==typeof n)JF(this,n)&&(t=t.concat(this.g.get(u_(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},St.set=function(n,t){return ef(this),this.i=null,JF(this,n=u_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},St.get=function(n,t){return n&&0<(n=this.Z(n)).length?String(n[0]):t},St.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const r=encodeURIComponent(String(i)),l=this.Z(i);for(i=0;i<l.length;i++){var o=r;""!==l[i]&&(o+="="+encodeURIComponent(String(l[i]))),n.push(o)}}return this.i=n.join("&")};var qV=10;function eL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tL(n){return n.h?1:n.g?n.g.size:0}function ux(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function dx(n,t){n.g?n.g.add(t):n.h=t}function nL(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function iL(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.F);return t}return FM(n.i)}XF.prototype.cancel=function(){if(this.i=iL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ZV=class{stringify(n){return _n.JSON.stringify(n,void 0)}parse(n){return _n.JSON.parse(n,void 0)}};function YV(){this.g=new ZV}function KV(n,t,e){const i=e||"";try{WF(n,function(o,r){let l=o;mb(o)&&(l=XM(o)),t.push(i+r+"="+encodeURIComponent(l))})}catch(o){throw t.push(i+"type="+encodeURIComponent("_badmap")),o}}function J1(n,t,e,i,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(i)}catch{}}function Ob(n){this.l=n.fc||null,this.j=n.ob||!1}function Q1(n,t){yo.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=hx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_o(Ob,ix),Ob.prototype.g=function(){return new Q1(this.l,this.j)},Ob.prototype.i=function(n){return function(){return n}}({}),_o(Q1,yo);var hx=0;function rL(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Rb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kb(n)}function kb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(St=Q1.prototype).open=function(n,t){if(this.readyState!=hx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,kb(this)},St.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||_n).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},St.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rb(this)),this.readyState=hx},St.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kb(this)),this.g&&(this.readyState=3,kb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof _n.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rL(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},St.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Rb(this):kb(this),3==this.readyState&&rL(this)}},St.Za=function(n){this.g&&(this.response=this.responseText=n,Rb(this))},St.Ya=function(n){this.g&&(this.response=n,Rb(this))},St.ka=function(){this.g&&Rb(this)},St.setRequestHeader=function(n,t){this.v.append(n,t)},St.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},St.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Q1.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var QV=_n.JSON.parse;function vr(n){yo.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=oL,this.L=this.M=!1}_o(vr,yo);var oL="",XV=/^https?$/i,ej=["POST","PUT"];function sL(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,aL(n),X1(n)}function aL(n){n.F||(n.F=!0,Po(n,"complete"),Po(n,"error"))}function lL(n){if(n.h&&typeof kM<"u"&&(!n.C[1]||4!=nu(n)||2!=n.da()))if(n.v&&4==nu(n))nx(n.La,0,n);else if(Po(n,"readystatechange"),4==nu(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===l){var o=String(n.I).match(qF)[1]||null;!o&&_n.self&&_n.self.location&&(o=_n.self.location.protocol.slice(0,-1)),i=!XV.test(o?o.toLowerCase():"")}e=i}if(e)Po(n,"complete"),Po(n,"success");else{n.m=6;try{var r=2<nu(n)?n.g.statusText:""}catch{r=""}n.j=r+" ["+n.da()+"]",aL(n)}}finally{X1(n)}}}function X1(n,t){if(n.g){cL(n);const e=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,t||Po(n,"ready");try{e.onreadystatechange=i}catch{}}}function cL(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(_n.clearTimeout(n.A),n.A=null)}function nu(n){return n.g?n.g.readyState:0}function uL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case oL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dL(n){let t="";return $M(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function fx(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=dL(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Li(n,t,e))}function Pb(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function hL(n){this.Ga=0,this.j=[],this.l=new j1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pb("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pb("baseRetryDelayMs",5e3,n),this.hb=Pb("retryDelaySeedMs",1e4,n),this.eb=Pb("forwardChannelMaxRetries",2,n),this.xa=Pb("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new XF(n&&n.concurrentRequestLimit),this.Ja=new YV,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function px(n){if(fL(n),3==n.H){var t=n.W++,e=vd(n.I);if(Li(e,"SID",n.K),Li(e,"RID",t),Li(e,"TYPE","terminate"),Fb(n,e),(t=new Sb(n,n.l,t)).L=2,t.v=K1(vd(e)),e=!1,_n.navigator&&_n.navigator.sendBeacon)try{e=_n.navigator.sendBeacon(t.v.toString(),"")}catch{}!e&&_n.Image&&((new Image).src=t.v,e=!0),e||(t.g=CL(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ib(t)}bL(n)}function eT(n){n.g&&(mx(n),n.g.cancel(),n.g=null)}function fL(n){eT(n),n.u&&(_n.clearTimeout(n.u),n.u=null),nT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&_n.clearTimeout(n.m),n.m=null)}function tT(n){if(!eL(n.i)&&!n.m){n.m=!0;var t=n.Na;bb||NF(),wb||(bb(),wb=!0),ex.add(t,n),n.C=0}}function pL(n,t){var e;e=t?t.m:n.W++;const i=vd(n.I);Li(i,"SID",n.K),Li(i,"RID",e),Li(i,"AID",n.V),Fb(n,i),n.o&&n.s&&fx(i,n.o,n.s),e=new Sb(n,n.l,e,n.C+1),null===n.o&&(e.I=n.s),t&&(n.j=t.F.concat(n.j)),t=gL(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),dx(n.i,e),lx(e,i,t)}function Fb(n,t){n.na&&$M(n.na,function(e,i){Li(t,i,e)}),n.h&&WF({},function(e,i){Li(t,i,e)})}function gL(n,t,e){e=Math.min(n.j.length,e);var i=n.h?rs(n.h.Va,n.h,n):null;e:{var o=n.j;let r=-1;for(;;){const l=["count="+e];-1==r?0<e?(r=o[0].g,l.push("ofs="+r)):r=0:l.push("ofs="+r);let d=!0;for(let f=0;f<e;f++){let g=o[f].g;const _=o[f].map;if(g-=r,0>g)r=Math.max(0,o[f].g-100),d=!1;else try{KV(_,l,"req"+g+"_")}catch{i&&i(_)}}if(d){i=l.join("&");break e}}}return n=n.j.splice(0,e),t.F=n,i}function mL(n){if(!n.g&&!n.u){n.ba=1;var t=n.Ma;bb||NF(),wb||(bb(),wb=!0),ex.add(t,n),n.A=0}}function gx(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Eb(rs(n.Ma,n),yL(n,n.A)),n.A++,0))}function mx(n){null!=n.B&&(_n.clearTimeout(n.B),n.B=null)}function vL(n){n.g=new Sb(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var t=vd(n.wa);Li(t,"RID","rpc"),Li(t,"SID",n.K),Li(t,"AID",n.V),Li(t,"CI",n.G?"0":"1"),!n.G&&n.qa&&Li(t,"TO",n.qa),Li(t,"TYPE","xmlhttp"),Fb(n,t),n.o&&n.s&&fx(t,n.o,n.s),n.L&&n.g.setTimeout(n.L);var e=n.g;n=n.pa,e.L=1,e.v=K1(vd(t)),e.s=null,e.S=!0,jF(e,n)}function nT(n){null!=n.v&&(_n.clearTimeout(n.v),n.v=null)}function _L(n,t){var e=null;if(n.g==t){nT(n),mx(n),n.g=null;var i=2}else{if(!ux(n.i,t))return;e=t.F,nL(n.i,t),i=1}if(0!=n.H)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.G;var o=n.C;Po(i=G1(),new LF(i,e)),tT(n)}else mL(n);else if(3==(o=t.o)||0==o&&0<t.ca||!(1==i&&function ij(n,t){return!(tL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=t.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Eb(rs(n.Na,n,t),yL(n,n.C)),n.C++,0)))}(n,t)||2==i&&gx(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),o){case 1:cg(n,5);break;case 4:cg(n,10);break;case 3:cg(n,6);break;default:cg(n,2)}}function yL(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(e*=2),e*t}function cg(n,t){if(n.l.info("Error code "+t),2==t){var e=null;n.h&&(e=null);var i=rs(n.pb,n);e||(e=new lg("//www.google.com/images/cleardot.gif"),_n.location&&"http"==_n.location.protocol||Z1(e,"https"),K1(e)),function JV(n,t){const e=new j1;if(_n.Image){const i=new Image;i.onload=F1(J1,e,i,"TestLoadImage: loaded",!0,t),i.onerror=F1(J1,e,i,"TestLoadImage: error",!1,t),i.onabort=F1(J1,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=F1(J1,e,i,"TestLoadImage: timeout",!1,t),_n.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else xs(2);n.H=0,n.h&&n.h.za(t),bL(n),fL(n)}function bL(n){if(n.H=0,n.ma=[],n.h){const t=iL(n.i);(0!=t.length||0!=n.j.length)&&(gF(n.ma,t),gF(n.ma,n.j),n.i.i.length=0,FM(n.j),n.j.length=0),n.h.ya()}}function wL(n,t,e){var i=e instanceof lg?vd(e):new lg(e);if(""!=i.g)t&&(i.g=t+"."+i.g),Y1(i,i.m);else{var o=_n.location;i=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var r=new lg(null);i&&Z1(r,i),t&&(r.g=t),o&&Y1(r,o),e&&(r.l=e),i=r}return t=n.Da,(e=n.F)&&t&&Li(i,e,t),Li(i,"VER",n.ra),Fb(n,i),i}function CL(n,t,e){if(t&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new vr(e&&n.Ha&&!n.va?new Ob({ob:!0}):n.va)).Oa(n.J),t}function DL(){}function iT(){if(l_&&!(10<=Number(mV)))throw Error("Environmental error: no available transport.")}function xa(n,t){yo.call(this),this.g=new hL(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!vb(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vb(t)&&(this.g.F=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new d_(this)}function EL(n){rx.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function TL(){ox.call(this),this.status=1}function d_(n){this.g=n}function pc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function vx(n,t,e){e||(e=0);var i=Array(16);if("string"==typeof t)for(var o=0;16>o;++o)i[o]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(o=0;16>o;++o)i[o]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var r=n.g[3],l=(t=n.g[0])+(r^(e=n.g[1])&((o=n.g[2])^r))+i[0]+3614090360&4294967295;l=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=(e=(o=(r=(t=e+(l<<7&4294967295|l>>>25))+((l=r+(o^t&(e^o))+i[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(e^r&(t^e))+i[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=e+(t^o&(r^t))+i[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=t+(r^e&(o^r))+i[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=r+(o^t&(e^o))+i[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(e^r&(t^e))+i[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=e+(t^o&(r^t))+i[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=t+(r^e&(o^r))+i[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=r+(o^t&(e^o))+i[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(e^r&(t^e))+i[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=e+(t^o&(r^t))+i[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=t+(r^e&(o^r))+i[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=r+(o^t&(e^o))+i[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(e^r&(t^e))+i[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=e+(t^o&(r^t))+i[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=t+(o^r&(e^o))+i[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=r+(e^o&(t^e))+i[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(t^e&(r^t))+i[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=e+(r^t&(o^r))+i[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=t+(o^r&(e^o))+i[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=r+(e^o&(t^e))+i[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(t^e&(r^t))+i[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=e+(r^t&(o^r))+i[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=t+(o^r&(e^o))+i[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=r+(e^o&(t^e))+i[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(t^e&(r^t))+i[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=e+(r^t&(o^r))+i[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=t+(o^r&(e^o))+i[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=r+(e^o&(t^e))+i[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(t^e&(r^t))+i[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=e+(r^t&(o^r))+i[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=t+(e^o^r)+i[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=r+(t^e^o)+i[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(r^t^e)+i[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=e+(o^r^t)+i[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=t+(e^o^r)+i[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=r+(t^e^o)+i[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(r^t^e)+i[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=e+(o^r^t)+i[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=t+(e^o^r)+i[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=r+(t^e^o)+i[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(r^t^e)+i[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=e+(o^r^t)+i[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=t+(e^o^r)+i[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=r+(t^e^o)+i[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(r^t^e)+i[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=e+(o^r^t)+i[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=t+(o^(e|~r))+i[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=r+(e^(t|~o))+i[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(t^(r|~e))+i[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=e+(r^(o|~t))+i[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=t+(o^(e|~r))+i[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=r+(e^(t|~o))+i[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(t^(r|~e))+i[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=e+(r^(o|~t))+i[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=t+(o^(e|~r))+i[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=r+(e^(t|~o))+i[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(t^(r|~e))+i[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=e+(r^(o|~t))+i[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((r=(t=e+((l=t+(o^(e|~r))+i[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=r+(e^(t|~o))+i[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=r+((l=o+(t^(r|~e))+i[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+r&4294967295}function _i(n,t){this.h=t;for(var e=[],i=!0,o=n.length-1;0<=o;o--){var r=0|n[o];i&&r==t||(e[o]=r,i=!1)}this.g=e}(St=vr.prototype).Oa=function(n){this.M=n},St.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sx.g(),this.C=function BF(n){return n.h||(n.h=n.i())}(this.u?this.u:sx),this.g.onreadystatechange=rs(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(r){return void sL(this,r)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var o in i)e.set(o,i[o]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const r of i.keys())e.set(r,i.get(r))}i=Array.from(e.keys()).find(r=>"content-type"==r.toLowerCase()),o=_n.FormData&&n instanceof _n.FormData,!(0<=pF(ej,t))||i||o||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,l]of e)this.g.setRequestHeader(r,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{cL(this),0<this.B&&((this.L=function tj(n){return l_&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.ua,this)):this.A=nx(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(r){sL(this,r)}},St.ua=function(){typeof kM<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Po(this,"timeout"),this.abort(8))},St.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Po(this,"complete"),Po(this,"abort"),X1(this))},St.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),X1(this,!0)),vr.$.N.call(this)},St.La=function(){this.s||(this.G||this.v||this.l?lL(this):this.kb())},St.kb=function(){lL(this)},St.isActive=function(){return!!this.g},St.da=function(){try{return 2<nu(this)?this.g.status:-1}catch{return-1}},St.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},St.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),QV(t)}},St.Ia=function(){return this.m},St.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(St=hL.prototype).ra=8,St.H=1,St.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new Sb(this,this.l,n);let r=this.s;if(this.U&&(r?(r=bF(r),CF(r,this.U)):r=this.U),null!==this.o||this.O||(o.I=r,r=null),this.P)e:{for(var t=0,e=0;e<this.j.length;e++){var i=this.j[e];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.j.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=gL(this,o,t),Li(e=vd(this.I),"RID",n),Li(e,"CVER",22),this.F&&Li(e,"X-HTTP-Session-Id",this.F),Fb(this,e),r&&(this.O?t="headers="+encodeURIComponent(String(dL(r)))+"&"+t:this.o&&fx(e,this.o,r)),dx(this.i,o),this.bb&&Li(e,"TYPE","init"),this.P?(Li(e,"$req",t),Li(e,"SID","null"),o.aa=!0,lx(o,e,null)):lx(o,e,t),this.H=2}}else 3==this.H&&(n?pL(this,n):0==this.j.length||eL(this.i)||pL(this))},St.Ma=function(){if(this.u=null,vL(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Eb(rs(this.jb,this),n)}},St.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xs(10),eT(this),vL(this))},St.ib=function(){null!=this.v&&(this.v=null,eT(this),gx(this),xs(19))},St.pb=function(n){n?(this.l.info("Successfully pinged google.com"),xs(2)):(this.l.info("Failed to ping google.com"),xs(1))},St.isActive=function(){return!!this.h&&this.h.isActive(this)},(St=DL.prototype).Ba=function(){},St.Aa=function(){},St.za=function(){},St.ya=function(){},St.isActive=function(){return!0},St.Va=function(){},iT.prototype.g=function(n,t){return new xa(n,t)},_o(xa,yo),xa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,t=this.l,e=this.h||void 0;xs(0),n.Y=t,n.na=e||{},n.G=n.aa,n.I=wL(n,null,n.Y),tT(n)},xa.prototype.close=function(){px(this.g)},xa.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=XM(n),n=e);t.j.push(new class{constructor(n,t){this.g=n,this.map=t}}(t.fb++,n)),3==t.H&&tT(t)},xa.prototype.N=function(){this.g.h=null,delete this.j,px(this.g),delete this.g,xa.$.N.call(this)},_o(EL,rx),_o(TL,ox),_o(d_,DL),d_.prototype.Ba=function(){Po(this.g,"a")},d_.prototype.Aa=function(n){Po(this.g,new EL(n))},d_.prototype.za=function(n){Po(this.g,new TL)},d_.prototype.ya=function(){Po(this.g,"b")},_o(pc,function rj(){this.blockSize=-1}),pc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},pc.prototype.j=function(n,t){void 0===t&&(t=n.length);for(var e=t-this.blockSize,i=this.m,o=this.h,r=0;r<t;){if(0==o)for(;r<=e;)vx(this,n,r),r+=this.blockSize;if("string"==typeof n){for(;r<t;)if(i[o++]=n.charCodeAt(r++),o==this.blockSize){vx(this,i),o=0;break}}else for(;r<t;)if(i[o++]=n[r++],o==this.blockSize){vx(this,i),o=0;break}}this.h=o,this.i+=t},pc.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=255&e,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};var oj={};function _x(n){return-128<=n&&128>n?function fV(n,t){var e=oj;return Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=t(n)}(n,function(t){return new _i([0|t],0>t?-1:0)}):new _i([0|n],0>n?-1:0)}function iu(n){if(isNaN(n)||!isFinite(n))return h_;if(0>n)return Fo(iu(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=yx;return new _i(t,0)}var yx=4294967296,h_=_x(0),bx=_x(1),IL=_x(16777216);function _d(n){if(0!=n.h)return!1;for(var t=0;t<n.g.length;t++)if(0!=n.g[t])return!1;return!0}function El(n){return-1==n.h}function Fo(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new _i(e,~n.h).add(bx)}function rT(n,t){return n.add(Fo(t))}function oT(n,t){for(;(65535&n[t])!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function Lb(n,t){this.g=n,this.h=t}function sT(n,t){if(_d(t))throw Error("division by zero");if(_d(n))return new Lb(h_,h_);if(El(n))return t=sT(Fo(n),t),new Lb(Fo(t.g),Fo(t.h));if(El(t))return t=sT(n,Fo(t)),new Lb(Fo(t.g),t.h);if(30<n.g.length){if(El(n)||El(t))throw Error("slowDivide_ only works with positive integers.");for(var e=bx,i=t;0>=i.X(n);)e=AL(e),i=AL(i);var o=f_(e,1),r=f_(i,1);for(i=f_(i,2),e=f_(e,2);!_d(i);){var l=r.add(i);0>=l.X(n)&&(o=o.add(e),r=l),i=f_(i,1),e=f_(e,1)}return t=rT(n,o.R(t)),new Lb(o,t)}for(o=h_;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),l=(r=iu(e)).R(t);El(l)||0<l.X(n);)l=(r=iu(e-=i)).R(t);_d(r)&&(r=bx),o=o.add(r),n=rT(n,l)}return new Lb(o,n)}function AL(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new _i(e,n.h)}function f_(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,o=[],r=0;r<i;r++)o[r]=0<t?n.D(r+e)>>>t|n.D(r+e+1)<<32-t:n.D(r+e);return new _i(o,n.h)}(St=_i.prototype).ea=function(){if(El(this))return-Fo(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:yx+i)*t,t*=yx}return n},St.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(_d(this))return"0";if(El(this))return"-"+Fo(this).toString(n);for(var t=iu(Math.pow(n,6)),e=this,i="";;){var o=sT(e,t).g,r=((0<(e=rT(e,o.R(t))).g.length?e.g[0]:e.h)>>>0).toString(n);if(_d(e=o))return r+i;for(;6>r.length;)r="0"+r;i=r+i}},St.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},St.X=function(n){return El(n=rT(this,n))?-1:_d(n)?0:1},St.abs=function(){return El(this)?Fo(this):this},St.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,o=0;o<=t;o++){var r=i+(65535&this.D(o))+(65535&n.D(o)),l=(r>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);i=l>>>16,e[o]=(l&=65535)<<16|(r&=65535)}return new _i(e,-2147483648&e[e.length-1]?-1:0)},St.R=function(n){if(_d(this)||_d(n))return h_;if(El(this))return El(n)?Fo(this).R(Fo(n)):Fo(Fo(this).R(n));if(El(n))return Fo(this.R(Fo(n)));if(0>this.X(IL)&&0>n.X(IL))return iu(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<n.g.length;o++){var r=this.D(i)>>>16,l=65535&this.D(i),d=n.D(o)>>>16,f=65535&n.D(o);e[2*i+2*o]+=l*f,oT(e,2*i+2*o),e[2*i+2*o+1]+=r*f,oT(e,2*i+2*o+1),e[2*i+2*o+1]+=l*d,oT(e,2*i+2*o+1),e[2*i+2*o+2]+=r*d,oT(e,2*i+2*o+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new _i(e,0)},St.gb=function(n){return sT(this,n).h},St.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new _i(e,this.h&n.h)},St.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new _i(e,this.h|n.h)},St.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new _i(e,this.h^n.h)},iT.prototype.createWebChannel=iT.prototype.g,xa.prototype.send=xa.prototype.u,xa.prototype.open=xa.prototype.m,xa.prototype.close=xa.prototype.close,$1.NO_ERROR=0,$1.TIMEOUT=8,$1.HTTP_ERROR=6,UF.COMPLETE="complete",HF.EventType=Tb,Tb.OPEN="a",Tb.CLOSE="b",Tb.ERROR="c",Tb.MESSAGE="d",yo.prototype.listen=yo.prototype.O,vr.prototype.listenOnce=vr.prototype.P,vr.prototype.getLastError=vr.prototype.Sa,vr.prototype.getLastErrorCode=vr.prototype.Ia,vr.prototype.getStatus=vr.prototype.da,vr.prototype.getResponseJson=vr.prototype.Wa,vr.prototype.getResponseText=vr.prototype.ja,vr.prototype.send=vr.prototype.ha,vr.prototype.setWithCredentials=vr.prototype.Oa,pc.prototype.digest=pc.prototype.l,pc.prototype.reset=pc.prototype.reset,pc.prototype.update=pc.prototype.j,_i.prototype.add=_i.prototype.add,_i.prototype.multiply=_i.prototype.R,_i.prototype.modulo=_i.prototype.gb,_i.prototype.compare=_i.prototype.X,_i.prototype.toNumber=_i.prototype.ea,_i.prototype.toString=_i.prototype.toString,_i.prototype.getBits=_i.prototype.D,_i.fromNumber=iu,_i.fromString=function SL(n,t){if(0==n.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==n.charAt(0))return Fo(SL(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=iu(Math.pow(t,8)),i=h_,o=0;o<n.length;o+=8){var r=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+r),t);8>r?(r=iu(Math.pow(t,r)),i=i.R(r).add(iu(l))):i=(i=i.R(e)).add(iu(l))}return i};var sj=fc.createWebChannelTransport=function(){return new iT},aj=fc.getStatEventTarget=function(){return G1()},wx=fc.ErrorCode=$1,lj=fc.EventType=UF,cj=fc.Event=sg,NL=fc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uj=fc.FetchXmlHttpFactory=Ob,aT=fc.WebChannel=HF,dj=fc.XhrIo=vr,hj=fc.Md5=pc,p_=fc.Integer=_i;const ML="@firebase/firestore";class bo{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}bo.UNAUTHENTICATED=new bo(null),bo.GOOGLE_CREDENTIALS=new bo("google-credentials-uid"),bo.FIRST_PARTY=new bo("first-party-uid"),bo.MOCK_USER=new bo("mock-user");let g_="9.23.0";const tf=new Yu.Yd("@firebase/firestore");function Cx(){return tf.logLevel}function lt(n,...t){if(tf.logLevel<=Yu.in.DEBUG){const e=t.map(Dx);tf.debug(`Firestore (${g_}): ${n}`,...e)}}function Nr(n,...t){if(tf.logLevel<=Yu.in.ERROR){const e=t.map(Dx);tf.error(`Firestore (${g_}): ${n}`,...e)}}function Tl(n,...t){if(tf.logLevel<=Yu.in.WARN){const e=t.map(Dx);tf.warn(`Firestore (${g_}): ${n}`,...e)}}function Dx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ft(n="Unexpected state"){const t=`FIRESTORE (${g_}) INTERNAL ASSERTION FAILED: `+n;throw Nr(t),new Error(t)}function Wt(n,t){n||Ft()}function Tt(n,t){return n}const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends Zn.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oo{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class xL{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(bo.UNAUTHENTICATED))}shutdown(){}}class mj{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class vj{constructor(t){this.t=t,this.currentUser=bo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let o=this.i;const r=g=>this.i!==o?(o=this.i,e(g)):Promise.resolve();let l=new oo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new oo,t.enqueueRetryable(()=>r(this.currentUser))};const d=()=>{const g=l;t.enqueueRetryable((0,Me.Z)(function*(){yield g.promise,yield r(i.currentUser)}))},f=g=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new oo)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Wt("string"==typeof i.accessToken),new xL(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Wt(null===t||"string"==typeof t),new bo(t)}}class _j{constructor(t,e,i){this.h=t,this.l=e,this.m=i,this.type="FirstParty",this.user=bo.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class yj{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new _j(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(bo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OL{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bj{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const i=r=>{null!=r.error&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const l=r.token!==this.T;return this.T=r.token,lt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const o=r=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.I.onInit(r=>o(r)),setTimeout(()=>{if(!this.appCheck){const r=this.I.getImmediate({optional:!0});r?o(r):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Wt("string"==typeof e.token),this.T=e.token,new OL(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wj(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class RL{static A(){const e=62*Math.floor(256/62);let i="";for(;i.length<20;){const o=wj(40);for(let r=0;r<o.length;++r)i.length<20&&o[r]<e&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[r]%62))}return i}}function vn(n,t){return n<t?-1:n>t?1:0}function m_(n,t,e){return n.length===t.length&&n.every((i,o)=>e(i,t[o]))}function kL(n){return n+"\0"}class Qi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Qe(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Qe(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Qe(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qe(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Qi.fromMillis(Date.now())}static fromDate(t){return Qi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Qi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vn(this.nanoseconds,t.nanoseconds):vn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new qt(t)}static min(){return new qt(new Qi(0,0))}static max(){return new qt(new Qi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ub{constructor(t,e,i){void 0===e?e=0:e>t.length&&Ft(),void 0===i?i=t.length-e:i>t.length-e&&Ft(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===Ub.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ub?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let o=0;o<i;o++){const r=t.get(o),l=e.get(o);if(r<l)return-1;if(r>l)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Yn extends Ub{construct(t,e,i){return new Yn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(o=>o.length>0))}return new Yn(e)}static emptyPath(){return new Yn([])}}const Cj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _r extends Ub{construct(t,e,i){return new _r(t,e,i)}static isValidIdentifier(t){return Cj.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_r.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _r(["__name__"])}static fromServerFormat(t){const e=[];let i="",o=0;const r=()=>{if(0===i.length)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;o<t.length;){const d=t[o];if("\\"===d){if(o+1===t.length)throw new Qe(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[o+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Qe(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,o+=2}else"`"===d?(l=!l,o++):"."!==d||l?(i+=d,o++):(r(),o++)}if(r(),l)throw new Qe(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new _r(e)}static emptyPath(){return new _r([])}}class Ct{constructor(t){this.path=t}static fromPath(t){return new Ct(Yn.fromString(t))}static fromName(t){return new Ct(Yn.fromString(t).popFirst(5))}static empty(){return new Ct(Yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Yn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Yn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ct(new Yn(t.slice()))}}class lT{constructor(t,e,i,o){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=o}}function Ex(n){return n.fields.find(t=>2===t.kind)}function ug(n){return n.fields.filter(t=>2!==t.kind)}lT.UNKNOWN_ID=-1;class cT{constructor(t,e){this.fieldPath=t,this.kind=e}}class Bb{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Bb(0,Oa.min())}}function PL(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=qt.fromTimestamp(1e9===i?new Qi(e+1,0):new Qi(e,i));return new Oa(o,Ct.empty(),t)}function FL(n){return new Oa(n.readTime,n.key,-1)}class Oa{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Oa(qt.min(),Ct.empty(),-1)}static max(){return new Oa(qt.max(),Ct.empty(),-1)}}function Tx(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Ct.comparator(n.documentKey,t.documentKey),0!==e?e:vn(n.largestBatchId,t.largestBatchId))}const LL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function nf(n){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,Me.Z)(function*(n){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==LL)throw n;lt("LocalStore","Unexpectedly lost primary lease")}),Sx.apply(this,arguments)}class be{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new be((i,o)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,o)},this.catchCallback=r=>{this.wrapFailure(e,r).next(i,o)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof be?e:be.resolve(e)}catch(e){return be.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):be.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):be.reject(e)}static resolve(t){return new be((e,i)=>{e(t)})}static reject(t){return new be((e,i)=>{i(t)})}static waitFor(t){return new be((e,i)=>{let o=0,r=0,l=!1;t.forEach(d=>{++o,d.next(()=>{++r,l&&r===o&&e()},f=>i(f))}),l=!0,r===o&&e()})}static or(t){let e=be.resolve(!1);for(const i of t)e=e.next(o=>o?be.resolve(o):i());return e}static forEach(t,e){const i=[];return t.forEach((o,r)=>{i.push(e.call(this,o,r))}),this.waitFor(i)}static mapArray(t,e){return new be((i,o)=>{const r=t.length,l=new Array(r);let d=0;for(let f=0;f<r;f++){const g=f;e(t[g]).next(_=>{l[g]=_,++d,d===r&&i(l)},_=>o(_))}})}static doWhile(t,e){return new be((i,o)=>{const r=()=>{!0===t()?e().next(()=>{r()},o):i()};r()})}}class uT{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new oo,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new Hb(t,e.error)):this.v.resolve()},this.transaction.onerror=i=>{const o=Ix(i.target.error);this.v.reject(new Hb(t,o))}}static open(t,e,i,o){try{return new uT(e,t.transaction(o,i))}catch(r){throw new Hb(e,r)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(lt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Sj(e)}}class gc{constructor(t,e,i){this.name=t,this.version=e,this.V=i,12.2===gc.S((0,Zn.z$)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return lt("SimpleDb","Removing database:",t),dg(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,Zn.hl)())return!1;if(gc.C())return!0;const t=(0,Zn.z$)(),e=gc.S(t),i=0<e&&e<10,o=gc.N(t),r=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||r)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(t){var e=this;return(0,Me.Z)(function*(){return e.db||(lt("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,o)=>{const r=indexedDB.open(e.name,e.version);r.onsuccess=l=>{i(l.target.result)},r.onblocked=()=>{o(new Hb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=l=>{const d=l.target.error;o("VersionError"===d.name?new Qe(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Qe(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Hb(t,d))},r.onupgradeneeded=l=>{lt("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',l.oldVersion),e.V.O(l.target.result,r.transaction,l.oldVersion,e.version).next(()=>{lt("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=i=>e.F(i)),e.db})()}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,o){var r=this;return(0,Me.Z)(function*(){const l="readonly"===e;let d=0;for(;;){++d;try{r.db=yield r.$(t);const f=uT.open(r.db,t,l?"readonly":"readwrite",i),g=o(f).next(_=>(f.P(),_)).catch(_=>(f.abort(_),be.reject(_))).toPromise();return g.catch(()=>{}),yield f.R,g}catch(f){const g=f,_="FirebaseError"!==g.name&&d<3;if(lt("SimpleDb","Transaction failed with error:",g.message,"Retrying:",_),r.close(),!_)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Tj{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return dg(this.L.delete())}}class Hb extends Qe{constructor(t,e){super(Ie.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function rf(n){return"IndexedDbTransactionError"===n.name}class Sj{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(lt("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(lt("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),dg(i)}add(t){return lt("SimpleDb","ADD",this.store.name,t,t),dg(this.store.add(t))}get(t){return dg(this.store.get(t)).next(e=>(void 0===e&&(e=null),lt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return lt("SimpleDb","DELETE",this.store.name,t),dg(this.store.delete(t))}count(){return lt("SimpleDb","COUNT",this.store.name),dg(this.store.count())}j(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const o=this.cursor(i),r=[];return this.W(o,(l,d)=>{r.push(d)}).next(()=>r)}{const o=this.store.getAll(i.range);return new be((r,l)=>{o.onerror=d=>{l(d.target.error)},o.onsuccess=d=>{r(d.target.result)}})}}H(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new be((o,r)=>{i.onerror=l=>{r(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}J(t,e){lt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const o=this.cursor(i);return this.W(o,(r,l,d)=>d.delete())}X(t,e){let i;e?i=t:(i={},e=t);const o=this.cursor(i);return this.W(o,e)}Z(t){const e=this.cursor({});return new be((i,o)=>{e.onerror=r=>{const l=Ix(r.target.error);o(l)},e.onsuccess=r=>{const l=r.target.result;l?t(l.primaryKey,l.value).next(d=>{d?l.continue():i()}):i()}})}W(t,e){const i=[];return new be((o,r)=>{t.onerror=l=>{r(l.target.error)},t.onsuccess=l=>{const d=l.target.result;if(!d)return void o();const f=new Tj(d),g=e(d.primaryKey,d.value,f);if(g instanceof be){const _=g.catch(w=>(f.done(),be.reject(w)));i.push(_)}f.isDone?o():null===f.K?d.continue():d.continue(f.K)}}).next(()=>be.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function dg(n){return new be((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const o=Ix(i.target.error);e(o)}})}let BL=!1;function Ix(n){const t=gc.S((0,Zn.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BL||(BL=!0,setTimeout(()=>{throw i},0)),i}}return n}class Ij{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){var e=this;lt("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Me.Z)(function*(){e.task=null;try{lt("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(i){rf(i)?lt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield nf(i)}yield e.et(6e4)}))}}class Aj{constructor(t,e){this.localStore=t,this.persistence=e}nt(t=50){var e=this;return(0,Me.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.st(i,t))})()}st(t,e){const i=new Set;let o=e,r=!0;return be.doWhile(()=>!0===r&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(l=>{if(null!==l&&!i.has(l))return lt("IndexBackiller",`Processing collection: ${l}`),this.it(t,l,o).next(d=>{o-=d,i.add(l)});r=!1})).next(()=>e-o)}it(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(o=>this.localStore.localDocuments.getNextDocuments(t,e,o,i).next(r=>{const l=r.changes;return this.localStore.indexManager.updateIndexEntries(t,l).next(()=>this.rt(o,r)).next(d=>(lt("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>l.size)}))}rt(t,e){let i=t;return e.changes.forEach((o,r)=>{const l=FL(r);Tx(l,i)>0&&(i=l)}),new Oa(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Ra=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>i.writeSequenceNumber(o))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return n.ct=-1,n})();function Vb(n){return null==n}function jb(n){return 0===n&&1/n==-1/0}function HL(n){return"number"==typeof n&&Number.isInteger(n)&&!jb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ss(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=VL(t)),t=Nj(n.get(e),t);return VL(t)}function Nj(n,t){let e=t;const i=n.length;for(let o=0;o<i;o++){const r=n.charAt(o);switch(r){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=r}}return e}function VL(n){return n+"\x01\x01"}function ru(n){const t=n.length;if(Wt(t>=2),2===t)return Wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yn.emptyPath();const e=t-2,i=[];let o="";for(let r=0;r<t;){const l=n.indexOf("\x01",r);switch((l<0||l>e)&&Ft(),n.charAt(l+1)){case"\x01":const d=n.substring(r,l);let f;0===o.length?f=d:(o+=d,f=o,o=""),i.push(f);break;case"\x10":o+=n.substring(r,l),o+="\0";break;case"\x11":o+=n.substring(r,l+1);break;default:Ft()}r=l+2}return new Yn(i)}const jL=["userId","batchId"];function dT(n,t){return[n,ss(t)]}function GL(n,t,e){return[n,ss(t),e]}const Mj={},xj=["prefixPath","collectionGroup","readTime","documentId"],Oj=["prefixPath","collectionGroup","documentId"],Rj=["collectionGroup","readTime","prefixPath","documentId"],kj=["canonicalId","targetId"],Pj=["targetId","path"],Fj=["path","targetId"],Lj=["collectionId","parent"],Uj=["indexId","uid"],Bj=["uid","sequenceNumber"],Hj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vj=["indexId","uid","orderedDocumentKey"],jj=["userId","collectionPath","documentId"],Gj=["userId","collectionPath","largestBatchId"],$j=["userId","collectionGroup","largestBatchId"],$L=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zj=[...$L,"documentOverlays"],zL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WL=zL,Wj=[...WL,"indexConfiguration","indexState","indexEntries"];class Ax extends UL{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function wo(n,t){const e=Tt(n);return gc.M(e.ht,t)}function qL(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function sf(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function ZL(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Ni{constructor(t,e){this.comparator=t,this.root=e||Lo.EMPTY}insert(t,e){return new Ni(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Lo.BLACK,null,null))}remove(t){return new Ni(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Lo.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(t,i.key);if(0===o)return e+i.left.size;o<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hT(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hT(this.root,t,this.comparator,!1)}getReverseIterator(){return new hT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hT(this.root,t,this.comparator,!0)}}class hT{constructor(t,e,i,o){this.isReverse=o,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?i(t.key,e):1,e&&o&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Lo{constructor(t,e,i,o,r){this.key=t,this.value=e,this.color=i??Lo.RED,this.left=o??Lo.EMPTY,this.right=r??Lo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,o,r){return new Lo(t??this.key,e??this.value,i??this.color,o??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let o=this;const r=i(t,o.key);return o=r<0?o.copy(null,null,null,o.left.insert(t,e,i),null):0===r?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===e(t,o.key)){if(o.right.isEmpty())return Lo.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Lo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Lo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ft();const t=this.left.check();if(t!==this.right.check())throw Ft();return t+(this.isRed()?0:1)}}Lo.EMPTY=null,Lo.RED=!0,Lo.BLACK=!1,Lo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft()}get value(){throw Ft()}get color(){throw Ft()}get left(){throw Ft()}get right(){throw Ft()}copy(n,t,e,i,o){return this}insert(n,t,e){return new Lo(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ui{constructor(t){this.comparator=t,this.data=new Ni(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new YL(this.data.getIterator())}getIteratorFrom(t){return new YL(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Ui)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,r=i.getNext().key;if(0!==this.comparator(o,r))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ui(this.comparator);return e.data=t,e}}class YL{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function v_(n){return n.hasNext()?n.getNext():void 0}class sa{constructor(t){this.fields=t,t.sort(_r.comparator)}static empty(){return new sa([])}unionWith(t){let e=new Ui(_r.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new sa(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return m_(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class KL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class so{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new KL("Invalid base64 string: "+o):o}}(t);return new so(e)}static fromUint8Array(t){const e=function(i){let o="";for(let r=0;r<i.length;++r)o+=String.fromCharCode(i[r]);return o}(t);return new so(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}so.EMPTY_BYTE_STRING=new so("");const Zj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function af(n){if(Wt(!!n),"string"==typeof n){let t=0;const e=Zj.exec(n);if(Wt(!!e),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:yr(n.seconds),nanos:yr(n.nanos)}}function yr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yd(n){return"string"==typeof n?so.fromBase64String(n):so.fromUint8Array(n)}function fT(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function pT(n){const t=n.mapValue.fields.__previous_value__;return fT(t)?pT(t):t}function Gb(n){const t=af(n.mapValue.fields.__local_write_time__.timestampValue);return new Qi(t.seconds,t.nanos)}class Yj{constructor(t,e,i,o,r,l,d,f,g){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=o,this.ssl=r,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=g}}class lf{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new lf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof lf&&t.projectId===this.projectId&&t.database===this.database}}const cf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gT={nullValue:"NULL_VALUE"};function uf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fT(n)?4:e2(n)?9007199254740991:10:Ft()}function ou(n,t){if(n===t)return!0;const e=uf(n);if(e!==uf(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Gb(n).isEqual(Gb(t));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const r=af(i.timestampValue),l=af(o.timestampValue);return r.seconds===l.seconds&&r.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return o=t,yd(n.bytesValue).isEqual(yd(o.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,o){return yr(i.geoPointValue.latitude)===yr(o.geoPointValue.latitude)&&yr(i.geoPointValue.longitude)===yr(o.geoPointValue.longitude)}(n,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return yr(i.integerValue)===yr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const r=yr(i.doubleValue),l=yr(o.doubleValue);return r===l?jb(r)===jb(l):isNaN(r)&&isNaN(l)}return!1}(n,t);case 9:return m_(n.arrayValue.values||[],t.arrayValue.values||[],ou);case 10:return function(i,o){const r=i.mapValue.fields||{},l=o.mapValue.fields||{};if(qL(r)!==qL(l))return!1;for(const d in r)if(r.hasOwnProperty(d)&&(void 0===l[d]||!ou(r[d],l[d])))return!1;return!0}(n,t);default:return Ft()}var o}function $b(n,t){return void 0!==(n.values||[]).find(e=>ou(e,t))}function df(n,t){if(n===t)return 0;const e=uf(n),i=uf(t);if(e!==i)return vn(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return vn(n.booleanValue,t.booleanValue);case 2:return function(o,r){const l=yr(o.integerValue||o.doubleValue),d=yr(r.integerValue||r.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,t);case 3:return JL(n.timestampValue,t.timestampValue);case 4:return JL(Gb(n),Gb(t));case 5:return vn(n.stringValue,t.stringValue);case 6:return function(o,r){const l=yd(o),d=yd(r);return l.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,r){const l=o.split("/"),d=r.split("/");for(let f=0;f<l.length&&f<d.length;f++){const g=vn(l[f],d[f]);if(0!==g)return g}return vn(l.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,r){const l=vn(yr(o.latitude),yr(r.latitude));return 0!==l?l:vn(yr(o.longitude),yr(r.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(o,r){const l=o.values||[],d=r.values||[];for(let f=0;f<l.length&&f<d.length;++f){const g=df(l[f],d[f]);if(g)return g}return vn(l.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(o,r){if(o===cf.mapValue&&r===cf.mapValue)return 0;if(o===cf.mapValue)return 1;if(r===cf.mapValue)return-1;const l=o.fields||{},d=Object.keys(l),f=r.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let _=0;_<d.length&&_<g.length;++_){const w=vn(d[_],g[_]);if(0!==w)return w;const C=df(l[d[_]],f[g[_]]);if(0!==C)return C}return vn(d.length,g.length)}(n.mapValue,t.mapValue);default:throw Ft()}}function JL(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return vn(n,t);const e=af(n),i=af(t),o=vn(e.seconds,i.seconds);return 0!==o?o:vn(e.nanos,i.nanos)}function __(n){return Nx(n)}function Nx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const o=af(i);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yd(n.bytesValue).toBase64():"referenceValue"in n?Ct.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let o="[",r=!0;for(const l of i.values||[])r?r=!1:o+=",",o+=Nx(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(i){const o=Object.keys(i.fields||{}).sort();let r="{",l=!0;for(const d of o)l?l=!1:r+=",",r+=`${d}:${Nx(i.fields[d])}`;return r+"}"}(n.mapValue):Ft();var t}function hg(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Mx(n){return!!n&&"integerValue"in n}function zb(n){return!!n&&"arrayValue"in n}function QL(n){return!!n&&"nullValue"in n}function XL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vT(n){return!!n&&"mapValue"in n}function Wb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return sf(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Wb(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Wb(n.arrayValue.values[e]);return t}return Object.assign({},n)}function e2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kj(n){return"nullValue"in n?gT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hg(lf.empty(),Ct.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ft()}function Jj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hg(lf.empty(),Ct.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?cf:Ft()}function t2(n,t){const e=df(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function n2(n,t){const e=df(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Uo{constructor(t){this.value=t}static empty(){return new Uo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!vT(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Wb(e)}setAll(t){let e=_r.emptyPath(),i={},o=[];t.forEach((l,d)=>{if(!e.isImmediateParentOf(d)){const f=this.getFieldsMap(e);this.applyChanges(f,i,o),i={},o=[],e=d.popLast()}l?i[d.lastSegment()]=Wb(l):o.push(d.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,i,o)}delete(t){const e=this.field(t.popLast());vT(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ou(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let o=e.mapValue.fields[t.get(i)];vT(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,i){sf(e,(o,r)=>t[o]=r);for(const o of i)delete t[o]}clone(){return new Uo(Wb(this.value))}}function i2(n){const t=[];return sf(n.fields,(e,i)=>{const o=new _r([e]);if(vT(i)){const r=i2(i.mapValue).fields;if(0===r.length)t.push(o);else for(const l of r)t.push(o.child(l))}else t.push(o)}),new sa(t)}class Bi{constructor(t,e,i,o,r,l,d){this.key=t,this.documentType=e,this.version=i,this.readTime=o,this.createTime=r,this.data=l,this.documentState=d}static newInvalidDocument(t){return new Bi(t,0,qt.min(),qt.min(),qt.min(),Uo.empty(),0)}static newFoundDocument(t,e,i,o){return new Bi(t,1,e,qt.min(),i,o,0)}static newNoDocument(t,e){return new Bi(t,2,e,qt.min(),qt.min(),Uo.empty(),0)}static newUnknownDocument(t,e){return new Bi(t,3,e,qt.min(),qt.min(),Uo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(qt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Uo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Uo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Bi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Bi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hf{constructor(t,e){this.position=t,this.inclusive=e}}function r2(n,t,e){let i=0;for(let o=0;o<n.position.length;o++){const r=t[o],l=n.position[o];if(i=r.field.isKeyField()?Ct.comparator(Ct.fromName(l.referenceValue),e.key):df(l,e.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function o2(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ou(n.position[e],t.position[e]))return!1;return!0}class y_{constructor(t,e="asc"){this.field=t,this.dir=e}}function Qj(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class s2{}class Bn extends s2{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new Xj(t,e,i):"array-contains"===e?new n3(t,i):"in"===e?new h2(t,i):"not-in"===e?new i3(t,i):"array-contains-any"===e?new r3(t,i):new Bn(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new e3(t,i):new t3(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(df(e,this.value)):null!==e&&uf(this.value)===uf(e)&&this.matchesComparison(df(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class yi extends s2{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new yi(t,e)}matches(t){return b_(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft(e=>e.isInequality());return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function b_(n){return"and"===n.op}function xx(n){return"or"===n.op}function Ox(n){return a2(n)&&b_(n)}function a2(n){for(const t of n.filters)if(t instanceof yi)return!1;return!0}function Rx(n){if(n instanceof Bn)return n.field.canonicalString()+n.op.toString()+__(n.value);if(Ox(n))return n.filters.map(t=>Rx(t)).join(",");{const t=n.filters.map(e=>Rx(e)).join(",");return`${n.op}(${t})`}}function l2(n,t){return n instanceof Bn?(e=n,(i=t)instanceof Bn&&e.op===i.op&&e.field.isEqual(i.field)&&ou(e.value,i.value)):n instanceof yi?function(e,i){return i instanceof yi&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((o,r,l)=>o&&l2(r,i.filters[l]),!0)}(n,t):void Ft();var e,i}function c2(n,t){const e=n.filters.concat(t);return yi.create(e,n.op)}function u2(n){return n instanceof Bn?`${(t=n).field.canonicalString()} ${t.op} ${__(t.value)}`:n instanceof yi?function(t){return t.op.toString()+" {"+t.getFilters().map(u2).join(" ,")+"}"}(n):"Filter";var t}class Xj extends Bn{constructor(t,e,i){super(t,e,i),this.key=Ct.fromName(i.referenceValue)}matches(t){const e=Ct.comparator(t.key,this.key);return this.matchesComparison(e)}}class e3 extends Bn{constructor(t,e){super(t,"in",e),this.keys=d2(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class t3 extends Bn{constructor(t,e){super(t,"not-in",e),this.keys=d2(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function d2(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Ct.fromName(i.referenceValue))}class n3 extends Bn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return zb(e)&&$b(e.arrayValue,this.value)}}class h2 extends Bn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&$b(this.value.arrayValue,e)}}class i3 extends Bn{constructor(t,e){super(t,"not-in",e)}matches(t){if($b(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!$b(this.value.arrayValue,e)}}class r3 extends Bn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!zb(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>$b(this.value.arrayValue,i))}}class o3{constructor(t,e=null,i=[],o=[],r=null,l=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=o,this.limit=r,this.startAt=l,this.endAt=d,this.dt=null}}function kx(n,t=null,e=[],i=[],o=null,r=null,l=null){return new o3(n,t,e,i,o,r,l)}function fg(n){const t=Tt(n);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Rx(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(o=i).field.canonicalString()+o.dir;var o}).join(","),Vb(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>__(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>__(i)).join(",")),t.dt=e}return t.dt}function qb(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Qj(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!l2(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!o2(n.startAt,t.startAt)&&o2(n.endAt,t.endAt)}function _T(n){return Ct.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function yT(n,t){return n.filters.filter(e=>e instanceof Bn&&e.field.isEqual(t))}function f2(n,t,e){let i=gT,o=!0;for(const r of yT(n,t)){let l=gT,d=!0;switch(r.op){case"<":case"<=":l=Kj(r.value);break;case"==":case"in":case">=":l=r.value;break;case">":l=r.value,d=!1;break;case"!=":case"not-in":l=gT}t2({value:i,inclusive:o},{value:l,inclusive:d})<0&&(i=l,o=d)}if(null!==e)for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(t)){const l=e.position[r];t2({value:i,inclusive:o},{value:l,inclusive:e.inclusive})<0&&(i=l,o=e.inclusive);break}return{value:i,inclusive:o}}function p2(n,t,e){let i=cf,o=!0;for(const r of yT(n,t)){let l=cf,d=!0;switch(r.op){case">=":case">":l=Jj(r.value),d=!1;break;case"==":case"in":case"<=":l=r.value;break;case"<":l=r.value,d=!1;break;case"!=":case"not-in":l=cf}n2({value:i,inclusive:o},{value:l,inclusive:d})>0&&(i=l,o=d)}if(null!==e)for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(t)){const l=e.position[r];n2({value:i,inclusive:o},{value:l,inclusive:e.inclusive})>0&&(i=l,o=e.inclusive);break}return{value:i,inclusive:o}}class bd{constructor(t,e=null,i=[],o=[],r=null,l="F",d=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=o,this.limit=r,this.limitType=l,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function g2(n,t,e,i,o,r,l,d){return new bd(n,t,e,i,o,r,l,d)}function w_(n){return new bd(n)}function m2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Px(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bT(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Fx(n){return null!==n.collectionGroup}function pg(n){const t=Tt(n);if(null===t.wt){t.wt=[];const e=bT(t),i=Px(t);if(null!==e&&null===i)e.isKeyField()||t.wt.push(new y_(e)),t.wt.push(new y_(_r.keyField(),"asc"));else{let o=!1;for(const r of t.explicitOrderBy)t.wt.push(r),r.field.isKeyField()&&(o=!0);if(!o){const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new y_(_r.keyField(),r))}}}return t.wt}function Os(n){const t=Tt(n);if(!t._t)if("F"===t.limitType)t._t=kx(t.path,t.collectionGroup,pg(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of pg(t))e.push(new y_(r.field,"desc"===r.dir?"asc":"desc"));const i=t.endAt?new hf(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new hf(t.startAt.position,t.startAt.inclusive):null;t._t=kx(t.path,t.collectionGroup,e,t.filters,t.limit,i,o)}return t._t}function Lx(n,t){t.getFirstInequalityField(),bT(n);const e=n.filters.concat([t]);return new bd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function wT(n,t,e){return new bd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Zb(n,t){return qb(Os(n),Os(t))&&n.limitType===t.limitType}function v2(n){return`${fg(Os(n))}|lt:${n.limitType}`}function Ux(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>u2(i)).join(", ")}]`),Vb(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>__(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>__(i)).join(",")),`Target(${e})`}(Os(n))}; limitType=${n.limitType})`}function Yb(n,t){return t.isFoundDocument()&&function(e,i){const o=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(o):Ct.isDocumentKey(e.path)?e.path.isEqual(o):e.path.isImmediateParentOf(o)}(n,t)&&function(e,i){for(const o of pg(e))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,t)&&function(e,i){for(const o of e.filters)if(!o.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(o,r,l){const d=r2(o,r,l);return o.inclusive?d<=0:d<0}(e.startAt,pg(e),i)||e.endAt&&!function(o,r,l){const d=r2(o,r,l);return o.inclusive?d>=0:d>0}(e.endAt,pg(e),i)));var e,i}function _2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y2(n){return(t,e)=>{let i=!1;for(const o of pg(n)){const r=s3(o,t,e);if(0!==r)return r;i=i||o.field.isKeyField()}return 0}}function s3(n,t,e){const i=n.field.isKeyField()?Ct.comparator(t.key,e.key):function(o,r,l){const d=r.data.field(o),f=l.data.field(o);return null!==d&&null!==f?df(d,f):Ft()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ft()}}class wd{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[o,r]of i)if(this.equalsFn(o,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),o=this.inner[i];if(void 0===o)return this.inner[i]=[[t,e]],void this.innerSize++;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],t))return void(o[r]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return 1===i.length?delete this.inner[e]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(t){sf(this.inner,(e,i)=>{for(const[o,r]of i)t(o,r)})}isEmpty(){return ZL(this.inner)}size(){return this.innerSize}}const a3=new Ni(Ct.comparator);function aa(){return a3}const b2=new Ni(Ct.comparator);function Kb(...n){let t=b2;for(const e of n)t=t.insert(e.key,e);return t}function w2(n){let t=b2;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function su(){return Jb()}function C2(){return Jb()}function Jb(){return new wd(n=>n.toString(),(n,t)=>n.isEqual(t))}const l3=new Ni(Ct.comparator),c3=new Ui(Ct.comparator);function En(...n){let t=c3;for(const e of n)t=t.add(e);return t}const u3=new Ui(vn);function Bx(){return u3}function D2(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jb(t)?"-0":t}}function E2(n){return{integerValue:""+n}}function T2(n,t){return HL(t)?E2(t):D2(n,t)}class CT{constructor(){this._=void 0}}function d3(n,t,e){return n instanceof C_?function(i,o){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&fT(o)&&(o=pT(o)),o&&(r.fields.__previous_value__=o),{mapValue:r}}(e,t):n instanceof gg?I2(n,t):n instanceof mg?A2(n,t):function(i,o){const r=S2(i,o),l=N2(r)+N2(i.gt);return Mx(r)&&Mx(i.gt)?E2(l):D2(i.serializer,l)}(n,t)}function h3(n,t,e){return n instanceof gg?I2(n,t):n instanceof mg?A2(n,t):e}function S2(n,t){return n instanceof D_?Mx(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class C_ extends CT{}class gg extends CT{constructor(t){super(),this.elements=t}}function I2(n,t){const e=M2(t);for(const i of n.elements)e.some(o=>ou(o,i))||e.push(i);return{arrayValue:{values:e}}}class mg extends CT{constructor(t){super(),this.elements=t}}function A2(n,t){let e=M2(t);for(const i of n.elements)e=e.filter(o=>!ou(o,i));return{arrayValue:{values:e}}}class D_ extends CT{constructor(t,e){super(),this.serializer=t,this.gt=e}}function N2(n){return yr(n.integerValue||n.doubleValue)}function M2(n){return zb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Qb{constructor(t,e){this.field=t,this.transform=e}}class p3{constructor(t,e){this.version=t,this.transformResults=e}}class Xi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Xi}static exists(t){return new Xi(void 0,t)}static updateTime(t){return new Xi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function DT(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class ET{}function x2(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new T_(n.key,Xi.none()):new E_(n.key,n.data,Xi.none());{const e=n.data,i=Uo.empty();let o=new Ui(_r.comparator);for(let r of t.fields)if(!o.has(r)){let l=e.field(r);null===l&&r.length>1&&(r=r.popLast(),l=e.field(r)),null===l?i.delete(r):i.set(r,l),o=o.add(r)}return new Cd(n.key,i,new sa(o.toArray()),Xi.none())}}function g3(n,t,e){n instanceof E_?function(i,o,r){const l=i.value.clone(),d=k2(i.fieldTransforms,o,r.transformResults);l.setAll(d),o.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(n,t,e):n instanceof Cd?function(i,o,r){if(!DT(i.precondition,o))return void o.convertToUnknownDocument(r.version);const l=k2(i.fieldTransforms,o,r.transformResults),d=o.data;d.setAll(R2(i)),d.setAll(l),o.convertToFoundDocument(r.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function Xb(n,t,e,i){return n instanceof E_?function(o,r,l,d){if(!DT(o.precondition,r))return l;const f=o.value.clone(),g=P2(o.fieldTransforms,d,r);return f.setAll(g),r.convertToFoundDocument(r.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof Cd?function(o,r,l,d){if(!DT(o.precondition,r))return l;const f=P2(o.fieldTransforms,d,r),g=r.data;return g.setAll(R2(o)),g.setAll(f),r.convertToFoundDocument(r.version,g).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(n,t,e,i):(l=e,DT(n.precondition,r=t)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):l);var r,l}function m3(n,t){let e=null;for(const i of n.fieldTransforms){const o=t.data.field(i.field),r=S2(i.transform,o||null);null!=r&&(null===e&&(e=Uo.empty()),e.set(i.field,r))}return e||null}function O2(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&m_(e,i,(o,r)=>function f3(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof gg&&i instanceof gg||e instanceof mg&&i instanceof mg?m_(e.elements,i.elements,ou):e instanceof D_&&i instanceof D_?ou(e.gt,i.gt):e instanceof C_&&i instanceof C_);var e,i}(o,r))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class E_ extends ET{constructor(t,e,i,o=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cd extends ET{constructor(t,e,i,o,r=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=o,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function R2(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function k2(n,t,e){const i=new Map;Wt(n.length===e.length);for(let o=0;o<e.length;o++){const r=n[o],l=r.transform,d=t.data.field(r.field);i.set(r.field,h3(l,d,e[o]))}return i}function P2(n,t,e){const i=new Map;for(const o of n){const r=o.transform,l=e.data.field(o.field);i.set(o.field,d3(r,l,t))}return i}class T_ extends ET{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hx extends ET{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vx{constructor(t,e,i,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const r=this.mutations[o];r.key.isEqual(t.key)&&g3(r,t,i[o])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Xb(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Xb(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=C2();return this.mutations.forEach(o=>{const r=t.get(o.key),l=r.overlayedDocument;let d=this.applyToLocalView(l,r.mutatedFields);d=e.has(o.key)?null:d;const f=x2(l,d);null!==f&&i.set(o.key,f),l.isValidDocument()||l.convertToNoDocument(qt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),En())}isEqual(t){return this.batchId===t.batchId&&m_(this.mutations,t.mutations,(e,i)=>O2(e,i))&&m_(this.baseMutations,t.baseMutations,(e,i)=>O2(e,i))}}class jx{constructor(t,e,i,o){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=o}static from(t,e,i){Wt(t.mutations.length===i.length);let o=l3;const r=t.mutations;for(let l=0;l<r.length;l++)o=o.insert(r[l].key,i[l].version);return new jx(t,e,i,o)}}class Gx{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _3{constructor(t,e){this.count=t,this.unchangedNames=e}}var jr,Kn;function F2(n){switch(n){default:return Ft();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function L2(n){if(void 0===n)return Nr("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case jr.OK:return Ie.OK;case jr.CANCELLED:return Ie.CANCELLED;case jr.UNKNOWN:return Ie.UNKNOWN;case jr.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case jr.INTERNAL:return Ie.INTERNAL;case jr.UNAVAILABLE:return Ie.UNAVAILABLE;case jr.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case jr.NOT_FOUND:return Ie.NOT_FOUND;case jr.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case jr.ABORTED:return Ie.ABORTED;case jr.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case jr.DATA_LOSS:return Ie.DATA_LOSS;default:return Ft()}}(Kn=jr||(jr={}))[Kn.OK=0]="OK",Kn[Kn.CANCELLED=1]="CANCELLED",Kn[Kn.UNKNOWN=2]="UNKNOWN",Kn[Kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kn[Kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kn[Kn.NOT_FOUND=5]="NOT_FOUND",Kn[Kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kn[Kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kn[Kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kn[Kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kn[Kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kn[Kn.ABORTED=10]="ABORTED",Kn[Kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kn[Kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kn[Kn.INTERNAL=13]="INTERNAL",Kn[Kn.UNAVAILABLE=14]="UNAVAILABLE",Kn[Kn.DATA_LOSS=15]="DATA_LOSS";class $x{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return TT}static getOrCreateInstance(){return null===TT&&(TT=new $x),TT}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(t))}}let TT=null;function U2(){return new TextEncoder}const y3=new p_([4294967295,4294967295],0);function B2(n){const t=U2().encode(n),e=new hj;return e.update(t),new Uint8Array(e.digest())}function H2(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),o=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new p_([e,i],0),new p_([o,r],0)]}class zx{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ew(`Invalid padding: ${e}`);if(i<0)throw new ew(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new ew(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new ew(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=p_.fromNumber(this.It)}Et(t,e,i){let o=t.add(e.multiply(p_.fromNumber(i)));return 1===o.compare(y3)&&(o=new p_([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=B2(t),[i,o]=H2(e);for(let r=0;r<this.hashCount;r++){const l=this.Et(i,o,r);if(!this.At(l))return!1}return!0}static create(t,e,i){const o=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),l=new zx(r,o,e);return i.forEach(d=>l.insert(d)),l}insert(t){if(0===this.It)return;const e=B2(t),[i,o]=H2(e);for(let r=0;r<this.hashCount;r++){const l=this.Et(i,o,r);this.Rt(l)}}Rt(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class ew extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tw{constructor(t,e,i,o,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const o=new Map;return o.set(t,nw.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new tw(qt.min(),o,new Ni(vn),aa(),En())}}class nw{constructor(t,e,i,o,r){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new nw(i,e,En(),En(),En())}}class ST{constructor(t,e,i,o){this.Pt=t,this.removedTargetIds=e,this.key=i,this.bt=o}}class V2{constructor(t,e){this.targetId=t,this.Vt=e}}class j2{constructor(t,e,i=so.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=o}}class G2{constructor(){this.St=0,this.Dt=z2(),this.Ct=so.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=En(),e=En(),i=En();return this.Dt.forEach((o,r)=>{switch(r){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:i=i.add(o);break;default:Ft()}}),new nw(this.Ct,this.xt,t,e,i)}Ft(){this.Nt=!1,this.Dt=z2()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class b3{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=aa(),this.zt=$2(),this.Wt=new Ni(vn)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,e=>{const i=this.Zt(e);switch(t.state){case 0:this.te(e)&&i.$t(t.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(t.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(e);break;case 3:this.te(e)&&(i.Kt(),i.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),i.$t(t.resumeToken));break;default:Ft()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach((i,o)=>{this.te(o)&&e(o)})}ne(t){var e;const i=t.targetId,o=t.Vt.count,r=this.se(i);if(r){const l=r.target;if(_T(l))if(0===o){const d=new Ct(l.path);this.Yt(i,d,Bi.newNoDocument(d,qt.min()))}else Wt(1===o);else{const d=this.ie(i);if(d!==o){const f=this.re(t,d);0!==f&&(this.ee(i),this.Wt=this.Wt.insert(i,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=$x.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(g,_,w){var C,E,N,A,R,F;const j={localCacheCount:_,existenceFilterCount:w.count},V=w.unchangedNames;return V&&(j.bloomFilter={applied:0===g,hashCount:null!==(C=V?.hashCount)&&void 0!==C?C:0,bitmapLength:null!==(A=null===(N=null===(E=V?.bits)||void 0===E?void 0:E.bitmap)||void 0===N?void 0:N.length)&&void 0!==A?A:0,padding:null!==(F=null===(R=V?.bits)||void 0===R?void 0:R.padding)&&void 0!==F?F:0}),j}(f,d,t.Vt))}}}}re(t,e){const{unchangedNames:i,count:o}=t.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:r="",padding:l=0},hashCount:d=0}=i;let f,g;try{f=yd(r).toUint8Array()}catch(_){if(_ instanceof KL)return Tl("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw _}try{g=new zx(f,l,d)}catch(_){return Tl(_ instanceof ew?"BloomFilter error: ":"Applying bloom filter failed: ",_),1}return 0===g.It?1:o!==e-this.oe(t.targetId,g)?2:0}oe(t,e){const i=this.Gt.getRemoteKeysForTarget(t);let o=0;return i.forEach(r=>{const l=this.Gt.ue(),d=`projects/${l.projectId}/databases/${l.database}/documents/${r.path.canonicalString()}`;e.vt(d)||(this.Yt(t,r,null),o++)}),o}ce(t){const e=new Map;this.Qt.forEach((r,l)=>{const d=this.se(l);if(d){if(r.current&&_T(d.target)){const f=new Ct(d.target.path);null!==this.jt.get(f)||this.ae(l,f)||this.Yt(l,f,Bi.newNoDocument(f,t))}r.Mt&&(e.set(l,r.Ot()),r.Ft())}});let i=En();this.zt.forEach((r,l)=>{let d=!0;l.forEachWhile(f=>{const g=this.se(f);return!g||"TargetPurposeLimboResolution"===g.purpose||(d=!1,!1)}),d&&(i=i.add(r))}),this.jt.forEach((r,l)=>l.setReadTime(t));const o=new tw(t,e,this.Wt,this.jt,i);return this.jt=aa(),this.zt=$2(),this.Wt=new Ni(vn),o}Jt(t,e){if(!this.te(t))return;const i=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,i),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,i){if(!this.te(t))return;const o=this.Zt(t);this.ae(t,e)?o.Bt(e,1):o.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),i&&(this.jt=this.jt.insert(e,i))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new G2,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Ui(vn),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||lt("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new G2),this.Gt.getRemoteKeysForTarget(t).forEach(e=>{this.Yt(t,e,null)})}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function $2(){return new Ni(Ct.comparator)}function z2(){return new Ni(Ct.comparator)}const w3={asc:"ASCENDING",desc:"DESCENDING"},C3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D3={and:"AND",or:"OR"};class E3{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Wx(n,t){return n.useProto3Json||Vb(t)?t:{value:t}}function S_(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function W2(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function T3(n,t){return S_(n,t.toTimestamp())}function Mr(n){return Wt(!!n),qt.fromTimestamp(function(t){const e=af(t);return new Qi(e.seconds,e.nanos)}(n))}function qx(n,t){return(e=n,new Yn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function q2(n){const t=Yn.fromString(n);return Wt(nU(t)),t}function iw(n,t){return qx(n.databaseId,t.path)}function au(n,t){const e=q2(t);if(e.get(1)!==n.databaseId.projectId)throw new Qe(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Qe(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ct(Y2(e))}function Zx(n,t){return qx(n.databaseId,t)}function Z2(n){const t=q2(n);return 4===t.length?Yn.emptyPath():Y2(t)}function rw(n){return new Yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Y2(n){return Wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function K2(n,t,e){return{name:iw(n,t),fields:e.value.mapValue.fields}}function J2(n,t,e){const i=au(n,t.name),o=Mr(t.updateTime),r=t.createTime?Mr(t.createTime):qt.min(),l=new Uo({mapValue:{fields:t.fields}}),d=Bi.newFoundDocument(i,o,r,l);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function ow(n,t){let e;if(t instanceof E_)e={update:K2(n,t.key,t.value)};else if(t instanceof T_)e={delete:iw(n,t.key)};else if(t instanceof Cd)e={update:K2(n,t.key,t.data),updateMask:R3(t.fieldMask)};else{if(!(t instanceof Hx))return Ft();e={verify:iw(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,r){const l=r.transform;if(l instanceof C_)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof gg)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof mg)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof D_)return{fieldPath:r.field.canonicalString(),increment:l.gt};throw Ft()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(o=t.precondition).updateTime?{updateTime:T3(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ft()),e;var o}function Yx(n,t){const e=t.currentDocument?void 0!==(o=t.currentDocument).updateTime?Xi.updateTime(Mr(o.updateTime)):void 0!==o.exists?Xi.exists(o.exists):Xi.none():Xi.none(),i=t.updateTransforms?t.updateTransforms.map(o=>function(r,l){let d=null;"setToServerValue"in l?(Wt("REQUEST_TIME"===l.setToServerValue),d=new C_):"appendMissingElements"in l?d=new gg(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new mg(l.removeAllFromArray.values||[]):"increment"in l?d=new D_(r,l.increment):Ft();const f=_r.fromServerFormat(l.fieldPath);return new Qb(f,d)}(n,o)):[];var o;if(t.update){const o=au(n,t.update.name),r=new Uo({mapValue:{fields:t.update.fields}});if(t.updateMask){const l=new sa((t.updateMask.fieldPaths||[]).map(g=>_r.fromServerFormat(g)));return new Cd(o,r,l,e,i)}return new E_(o,r,e,i)}if(t.delete){const o=au(n,t.delete);return new T_(o,e)}if(t.verify){const o=au(n,t.verify);return new Hx(o,e)}return Ft()}function Q2(n,t){return{documents:[Zx(n,t.path)]}}function Kx(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=Zx(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=Zx(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const o=function(f){if(0!==f.length)return tU(yi.create(f,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const r=function(f){if(0!==f.length)return f.map(g=>{return{field:ff((_=g).field),direction:M3(_.dir)};var _})}(t.orderBy);r&&(e.structuredQuery.orderBy=r);const l=Wx(n,t.limit);var d,f;return null!==l&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(f=t.endAt).inclusive,values:f.position}),e}function X2(n){let t=Z2(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let o=null;if(i>0){Wt(1===i);const _=e.from[0];_.allDescendants?o=_.collectionId:t=t.child(_.collectionId)}let r=[];e.where&&(r=function(_){const w=eU(_);return w instanceof yi&&Ox(w)?w.getFilters():[w]}(e.where));let l=[];e.orderBy&&(l=e.orderBy.map(_=>{return new y_(I_((w=_).field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let d=null;e.limit&&(d=function(_){let w;return w="object"==typeof _?_.value:_,Vb(w)?null:w}(e.limit));let f=null;var _;e.startAt&&(f=new hf((_=e.startAt).values||[],!!_.before));let g=null;return e.endAt&&(g=function(_){return new hf(_.values||[],!_.before)}(e.endAt)),g2(t,o,l,r,d,"F",f,g)}function eU(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=I_(t.unaryFilter.field);return Bn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=I_(t.unaryFilter.field);return Bn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=I_(t.unaryFilter.field);return Bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=I_(t.unaryFilter.field);return Bn.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ft()}}(n):void 0!==n.fieldFilter?Bn.create(I_((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ft()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return yi.create(t.compositeFilter.filters.map(e=>eU(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ft()}}(t.compositeFilter.op))}(n):Ft();var t}function M3(n){return w3[n]}function x3(n){return C3[n]}function O3(n){return D3[n]}function ff(n){return{fieldPath:n.canonicalString()}}function I_(n){return _r.fromServerFormat(n.fieldPath)}function tU(n){return n instanceof Bn?function(t){if("=="===t.op){if(XL(t.value))return{unaryFilter:{field:ff(t.field),op:"IS_NAN"}};if(QL(t.value))return{unaryFilter:{field:ff(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(XL(t.value))return{unaryFilter:{field:ff(t.field),op:"IS_NOT_NAN"}};if(QL(t.value))return{unaryFilter:{field:ff(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ff(t.field),op:x3(t.op),value:t.value}}}(n):n instanceof yi?function(t){const e=t.getFilters().map(i=>tU(i));return 1===e.length?e[0]:{compositeFilter:{op:O3(t.op),filters:e}}}(n):Ft()}function R3(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function nU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Dd{constructor(t,e,i,o,r=qt.min(),l=qt.min(),d=so.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(t){return new Dd(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Dd(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Dd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Dd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class iU{constructor(t){this.fe=t}}function rU(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:IT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:iw(o=n.fe,(r=t).key),fields:r.data.value.mapValue.fields,updateTime:S_(o,r.version.toTimestamp()),createTime:S_(o,r.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:vg(t.version)};else{if(!t.isUnknownDocument())return Ft();i.unknownDocument={path:e.path.toArray(),version:vg(t.version)}}var o,r;return i}function IT(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function vg(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _g(n){const t=new Qi(n.seconds,n.nanoseconds);return qt.fromTimestamp(t)}function yg(n,t){const e=(t.baseMutations||[]).map(r=>Yx(n.fe,r));for(let r=0;r<t.mutations.length-1;++r)r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(t.mutations[r].updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r);const i=t.mutations.map(r=>Yx(n.fe,r)),o=Qi.fromMillis(t.localWriteTimeMs);return new Vx(t.batchId,o,e,i)}function sw(n){const t=_g(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?_g(n.lastLimboFreeSnapshotVersion):qt.min();let i;var o;return void 0!==n.query.documents?(Wt(1===(o=n.query).documents.length),i=Os(w_(Z2(o.documents[0])))):i=Os(X2(n.query)),new Dd(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,so.fromBase64String(n.resumeToken))}function oU(n,t){const e=vg(t.snapshotVersion),i=vg(t.lastLimboFreeSnapshotVersion);let o;o=_T(t.target)?Q2(n.fe,t.target):Kx(n.fe,t.target);const r=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fg(t.target),readTime:e,resumeToken:r,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:o}}function Jx(n){const t=X2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wT(t,t.limit,"L"):t}function Qx(n,t){return new Gx(t.largestBatchId,Yx(n.fe,t.overlayMutation))}function sU(n,t){const e=t.path.lastSegment();return[n,ss(t.path.popLast()),e]}function aU(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:vg(i.readTime),documentKey:ss(i.documentKey.path),largestBatchId:i.largestBatchId}}class P3{getBundleMetadata(t,e){return lU(t).get(e).next(i=>{if(i)return{id:(o=i).bundleId,createTime:_g(o.createTime),version:o.version};var o})}saveBundleMetadata(t,e){return lU(t).put({bundleId:(i=e).id,createTime:vg(Mr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return cU(t).get(e).next(i=>{if(i)return{name:(o=i).name,query:Jx(o.bundledQuery),readTime:_g(o.readTime)};var o})}saveNamedQuery(t,e){return cU(t).put({name:(i=e).name,readTime:vg(Mr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function lU(n){return wo(n,"bundles")}function cU(n){return wo(n,"namedQueries")}class AT{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){return new AT(t,e.uid||"")}getOverlay(t,e){return aw(t).get(sU(this.userId,e)).next(i=>i?Qx(this.serializer,i):null)}getOverlays(t,e){const i=su();return be.forEach(e,o=>this.getOverlay(t,o).next(r=>{null!==r&&i.set(o,r)})).next(()=>i)}saveOverlays(t,e,i){const o=[];return i.forEach((r,l)=>{const d=new Gx(e,l);o.push(this.we(t,d))}),be.waitFor(o)}removeOverlaysForBatchId(t,e,i){const o=new Set;e.forEach(l=>o.add(ss(l.getCollectionPath())));const r=[];return o.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);r.push(aw(t).J("collectionPathOverlayIndex",d))}),be.waitFor(r)}getOverlaysForCollection(t,e,i){const o=su(),r=ss(e),l=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return aw(t).j("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const g=Qx(this.serializer,f);o.set(g.getKey(),g)}return o})}getOverlaysForCollectionGroup(t,e,i,o){const r=su();let l;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return aw(t).X({index:"collectionGroupOverlayIndex",range:d},(f,g,_)=>{const w=Qx(this.serializer,g);r.size()<o||w.largestBatchId===l?(r.set(w.getKey(),w),l=w.largestBatchId):_.done()}).next(()=>r)}we(t,e){return aw(t).put(function(i,o,r){const[l,d,f]=sU(o,r.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:ow(i.fe,r.mutation)}}(this.serializer,this.userId,e))}}function aw(n){return wo(n,"documentOverlays")}class bg{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(yr(t.integerValue));else if("doubleValue"in t){const i=yr(t.doubleValue);isNaN(i)?this.ye(e,13):(this.ye(e,15),jb(i)?e.pe(0):e.pe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ye(e,20),"string"==typeof i?e.Ie(i):(e.Ie(`${i.seconds||""}`),e.pe(i.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(yd(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ye(e,45),e.pe(i.latitude||0),e.pe(i.longitude||0)}else"mapValue"in t?e2(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):Ft()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const i=t.fields||{};this.ye(e,55);for(const o of Object.keys(i))this.Te(o,e),this.me(i[o],e)}Pe(t,e){const i=t.values||[];this.ye(e,50);for(const o of i)this.me(o,e)}ve(t,e){this.ye(e,37),Ct.fromName(t).path.forEach(i=>{this.ye(e,60),this.be(i,e)})}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function F3(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function uU(n){const t=64-function(e){let i=0;for(let o=0;o<8;++o){const r=F3(255&e[o]);if(i+=r,8!==r)break}return i}(n);return Math.ceil(t/8)}bg.Ve=new bg;class L3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.De(i.value),i=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ne(i.value),i=e.next();this.ke()}Me(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const o=e.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const o=e.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(t){const e=this.Fe(t),i=uU(e);this.Be(1+i),this.buffer[this.position++]=255&i;for(let o=e.length-i;o<e.length;++o)this.buffer[this.position++]=255&e[o]}Le(t){const e=this.Fe(t),i=uU(e);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let o=e.length-i;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(o){const r=new DataView(new ArrayBuffer(8));return r.setFloat64(0,o,!1),new Uint8Array(r.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let o=1;o<e.length;++o)e[o]^=i?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const o=new Uint8Array(i);o.set(this.buffer),this.buffer=o}}class U3{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class B3{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class lw{constructor(){this.je=new L3,this.ze=new U3(this.je),this.We=new B3(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class wg{constructor(t,e,i,o){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=o}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new wg(this.indexId,this.documentKey,this.arrayValue,i)}}function pf(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=dU(n.arrayValue,t.arrayValue),0!==e?e:(e=dU(n.directionalValue,t.directionalValue),0!==e?e:Ct.comparator(n.documentKey,t.documentKey)))}function dU(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class H3{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const i=e;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(t){Wt(t.collectionGroup===this.collectionId);const e=Ex(t);if(void 0!==e&&!this.en(e))return!1;const i=ug(t);let o=new Set,r=0,l=0;for(;r<i.length&&this.en(i[r]);++r)o=o.add(i[r].fieldPath.canonicalString());if(r===i.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const d=i[r];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[l++],d))return!1}++r}for(;r<i.length;++r)if(l>=this.Ye.length||!this.sn(this.Ye[l++],i[r]))return!1;return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function hU(n){var t,e;if(Wt(n instanceof Bn||n instanceof yi),n instanceof Bn){if(n instanceof h2){const o=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(r=>Bn.create(n.field,"==",r)))||[];return yi.create(o,"or")}return n}const i=n.filters.map(o=>hU(o));return yi.create(i,n.op)}function V3(n){if(0===n.getFilters().length)return[];const t=tO(hU(n));return Wt(fU(t)),Xx(t)||eO(t)?[t]:t.getFilters()}function Xx(n){return n instanceof Bn}function eO(n){return n instanceof yi&&Ox(n)}function fU(n){return Xx(n)||eO(n)||function(t){if(t instanceof yi&&xx(t)){for(const e of t.getFilters())if(!Xx(e)&&!eO(e))return!1;return!0}return!1}(n)}function tO(n){if(Wt(n instanceof Bn||n instanceof yi),n instanceof Bn)return n;if(1===n.filters.length)return tO(n.filters[0]);const t=n.filters.map(i=>tO(i));let e=yi.create(t,n.op);return e=NT(e),fU(e)?e:(Wt(e instanceof yi),Wt(b_(e)),Wt(e.filters.length>1),e.filters.reduce((i,o)=>nO(i,o)))}function nO(n,t){let e;return Wt(n instanceof Bn||n instanceof yi),Wt(t instanceof Bn||t instanceof yi),e=n instanceof Bn?t instanceof Bn?yi.create([n,t],"and"):pU(n,t):t instanceof Bn?pU(t,n):function(i,o){if(Wt(i.filters.length>0&&o.filters.length>0),b_(i)&&b_(o))return c2(i,o.getFilters());const r=xx(i)?i:o,l=xx(i)?o:i,d=r.filters.map(f=>nO(f,l));return yi.create(d,"or")}(n,t),NT(e)}function pU(n,t){if(b_(t))return c2(t,n.getFilters());{const e=t.filters.map(i=>nO(n,i));return yi.create(e,"or")}}function NT(n){if(Wt(n instanceof Bn||n instanceof yi),n instanceof Bn)return n;const t=n.getFilters();if(1===t.length)return NT(t[0]);if(a2(n))return n;const e=t.map(o=>NT(o)),i=[];return e.forEach(o=>{o instanceof Bn?i.push(o):o instanceof yi&&(o.op===n.op?i.push(...o.filters):i.push(o))}),1===i.length?i[0]:yi.create(i,n.op)}class j3{constructor(){this.rn=new iO}addToCollectionParentIndex(t,e){return this.rn.add(e),be.resolve()}getCollectionParents(t,e){return be.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return be.resolve()}deleteFieldIndex(t,e){return be.resolve()}getDocumentsMatchingTarget(t,e){return be.resolve(null)}getIndexType(t,e){return be.resolve(0)}getFieldIndexes(t,e){return be.resolve([])}getNextCollectionGroupToUpdate(t){return be.resolve(null)}getMinOffset(t,e){return be.resolve(Oa.min())}getMinOffsetFromCollectionGroup(t,e){return be.resolve(Oa.min())}updateCollectionGroup(t,e,i){return be.resolve()}updateIndexEntries(t,e){return be.resolve()}}class iO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),o=this.index[e]||new Ui(Yn.comparator),r=!o.has(i);return this.index[e]=o.add(i),r}has(t){const e=t.lastSegment(),i=t.popLast(),o=this.index[e];return o&&o.has(i)}getEntries(t){return(this.index[t]||new Ui(Yn.comparator)).toArray()}}const MT=new Uint8Array(0);class G3{constructor(t,e){this.user=t,this.databaseId=e,this.on=new iO,this.un=new wd(i=>fg(i),(i,o)=>qb(i,o)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const i=e.lastSegment(),o=e.popLast();t.addOnCommittedListener(()=>{this.on.add(e)});const r={collectionId:i,parent:ss(o)};return gU(t).put(r)}return be.resolve()}getCollectionParents(t,e){const i=[],o=IDBKeyRange.bound([e,""],[kL(e),""],!1,!0);return gU(t).j(o).next(r=>{for(const l of r){if(l.collectionId!==e)break;i.push(ru(l.parent))}return i})}addFieldIndex(t,e){const i=xT(t),o={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete o.indexId;const r=i.add(o);if(e.indexState){const l=uw(t);return r.next(d=>{l.put(aU(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return r.next()}deleteFieldIndex(t,e){const i=xT(t),o=uw(t),r=cw(t);return i.delete(e.indexId).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=cw(t);let o=!0;const r=new Map;return be.forEach(this.cn(e),l=>this.an(t,l).next(d=>{o&&(o=!!d),r.set(l,d)})).next(()=>{if(o){let l=En();const d=[];return be.forEach(r,(f,g)=>{var _;lt("IndexedDbIndexManager",`Using index ${_=f,`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(V=>`${V.fieldPath}:${V.kind}`).join(",")}`} to execute ${fg(e)}`);const w=function(V,W){const re=Ex(W);if(void 0===re)return null;for(const ue of yT(V,re.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null}(g,f),C=function(V,W){const re=new Map;for(const ue of ug(W))for(const we of yT(V,ue.fieldPath))switch(we.op){case"==":case"in":re.set(ue.fieldPath.canonicalString(),we.value);break;case"not-in":case"!=":return re.set(ue.fieldPath.canonicalString(),we.value),Array.from(re.values())}return null}(g,f),E=function(V,W){const re=[];let ue=!0;for(const we of ug(W)){const De=0===we.kind?f2(V,we.fieldPath,V.startAt):p2(V,we.fieldPath,V.startAt);re.push(De.value),ue&&(ue=De.inclusive)}return new hf(re,ue)}(g,f),N=function(V,W){const re=[];let ue=!0;for(const we of ug(W)){const De=0===we.kind?p2(V,we.fieldPath,V.endAt):f2(V,we.fieldPath,V.endAt);re.push(De.value),ue&&(ue=De.inclusive)}return new hf(re,ue)}(g,f),A=this.hn(f,g,E),R=this.hn(f,g,N),F=this.ln(f,g,C),j=this.fn(f.indexId,w,A,E.inclusive,R,N.inclusive,F);return be.forEach(j,V=>i.H(V,e.limit).next(W=>{W.forEach(re=>{const ue=Ct.fromSegments(re.documentKey);l.has(ue)||(l=l.add(ue),d.push(ue))})}))}).next(()=>d)}return be.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:V3(yi.create(t.filters,"and")).map(i=>kx(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}fn(t,e,i,o,r,l,d){const f=(null!=e?e.length:1)*Math.max(i.length,r.length),g=f/(null!=e?e.length:1),_=[];for(let w=0;w<f;++w){const C=e?this.dn(e[w/g]):MT,E=this.wn(t,C,i[w%g],o),N=this._n(t,C,r[w%g],l),A=d.map(R=>this.wn(t,C,R,!0));_.push(...this.createRange(E,N,A))}return _}wn(t,e,i,o){const r=new wg(t,Ct.empty(),e,i);return o?r:r.Je()}_n(t,e,i,o){const r=new wg(t,Ct.empty(),e,i);return o?r.Je():r}an(t,e){const i=new H3(e),o=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next(r=>{let l=null;for(const d of r)i.tn(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(t,e){let i=2;const o=this.cn(e);return be.forEach(o,r=>this.an(t,r).next(l=>{l?0!==i&&l.fields.length<function(d){let f=new Ui(_r.comparator),g=!1;for(const _ of d.filters)for(const w of _.getFlattenedFilters())w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?g=!0:f=f.add(w.field));for(const _ of d.orderBy)_.field.isKeyField()||(f=f.add(_.field));return f.size+(g?1:0)}(r)&&(i=1):i=0})).next(()=>null!==e.limit&&o.length>1&&2===i?1:i)}mn(t,e){const i=new lw;for(const o of ug(t)){const r=e.data.field(o.fieldPath);if(null==r)return null;const l=i.He(o.kind);bg.Ve._e(r,l)}return i.Qe()}dn(t){const e=new lw;return bg.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const i=new lw;return bg.Ve._e(hg(this.databaseId,e),i.He(function(o){const r=ug(o);return 0===r.length?0:r[r.length-1].kind}(t))),i.Qe()}ln(t,e,i){if(null===i)return[];let o=[];o.push(new lw);let r=0;for(const l of ug(t)){const d=i[r++];for(const f of o)if(this.yn(e,l.fieldPath)&&zb(d))o=this.pn(o,l,d);else{const g=f.He(l.kind);bg.Ve._e(d,g)}}return this.In(o)}hn(t,e,i){return this.ln(t,e,i.position)}In(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Qe();return e}pn(t,e,i){const o=[...t],r=[];for(const l of i.arrayValue.values||[])for(const d of o){const f=new lw;f.seed(d.Qe()),bg.Ve._e(l,f.He(e.kind)),r.push(f)}return r}yn(t,e){return!!t.filters.find(i=>i instanceof Bn&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=xT(t),o=uw(t);return(e?i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.j()).next(r=>{const l=[];return be.forEach(r,d=>o.get([d.indexId,this.uid]).next(f=>{l.push(function(g,_){const w=_?new Bb(_.sequenceNumber,new Oa(_g(_.readTime),new Ct(ru(_.documentKey)),_.largestBatchId)):Bb.empty(),C=g.fields.map(([E,N])=>new cT(_r.fromServerFormat(E),N));return new lT(g.indexId,g.collectionGroup,C,w)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,o)=>{const r=i.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==r?r:vn(i.collectionGroup,o.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const o=xT(t),r=uw(t);return this.Tn(t).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>be.forEach(d,f=>r.put(aU(f.indexId,this.user,l,i)))))}updateIndexEntries(t,e){const i=new Map;return be.forEach(e,(o,r)=>{const l=i.get(o.collectionGroup);return(l?be.resolve(l):this.getFieldIndexes(t,o.collectionGroup)).next(d=>(i.set(o.collectionGroup,d),be.forEach(d,f=>this.En(t,o,f).next(g=>{const _=this.An(r,f);return g.isEqual(_)?be.resolve():this.vn(t,r,f,g,_)}))))})}Rn(t,e,i,o){return cw(t).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(i,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,i,o){return cw(t).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(i,e.key),e.key.path.toArray()])}En(t,e,i){const o=cw(t);let r=new Ui(pf);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,e)])},(l,d)=>{r=r.add(new wg(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>r)}An(t,e){let i=new Ui(pf);const o=this.mn(e,t);if(null==o)return i;const r=Ex(e);if(null!=r){const l=t.data.field(r.fieldPath);if(zb(l))for(const d of l.arrayValue.values||[])i=i.add(new wg(e.indexId,t.key,this.dn(d),o))}else i=i.add(new wg(e.indexId,t.key,MT,o));return i}vn(t,e,i,o,r){lt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const l=[];return function(d,f,g,_,w){const C=d.getIterator(),E=f.getIterator();let N=v_(C),A=v_(E);for(;N||A;){let R=!1,F=!1;if(N&&A){const j=g(N,A);j<0?F=!0:j>0&&(R=!0)}else null!=N?F=!0:R=!0;R?(_(A),A=v_(E)):F?(w(N),N=v_(C)):(N=v_(C),A=v_(E))}}(o,r,pf,d=>{l.push(this.Rn(t,e,i,d))},d=>{l.push(this.Pn(t,e,i,d))}),be.waitFor(l)}Tn(t){let e=1;return uw(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,o,r)=>{r.done(),e=o.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((l,d)=>pf(l,d)).filter((l,d,f)=>!d||0!==pf(l,f[d-1]));const o=[];o.push(t);for(const l of i){const d=pf(l,t),f=pf(l,e);if(0===d)o[0]=t.Je();else if(d>0&&f<0)o.push(l),o.push(l.Je());else if(f>0)break}o.push(e);const r=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];r.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,MT,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,MT,[]]))}return r}bn(t,e){return pf(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(mU)}getMinOffset(t,e){return be.mapArray(this.cn(e),i=>this.an(t,i).next(o=>o||Ft())).next(mU)}}function gU(n){return wo(n,"collectionParents")}function cw(n){return wo(n,"indexEntries")}function xT(n){return wo(n,"indexConfiguration")}function uw(n){return wo(n,"indexState")}function mU(n){Wt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const o=n[i].indexState.offset;Tx(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Oa(t.readTime,t.documentKey,e)}const vU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class as{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new as(t,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _U(n,t,e){const i=n.store("mutations"),o=n.store("documentMutations"),r=[],l=IDBKeyRange.only(e.batchId);let d=0;const f=i.X({range:l},(_,w,C)=>(d++,C.delete()));r.push(f.next(()=>{Wt(1===d)}));const g=[];for(const _ of e.mutations){const w=GL(t,_.key.path,e.batchId);r.push(o.delete(w)),g.push(_.key)}return be.waitFor(r).next(()=>g)}function OT(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Ft();t=n.noDocument}return JSON.stringify(t).length}as.DEFAULT_COLLECTION_PERCENTILE=10,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,as.DEFAULT=new as(41943040,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),as.DISABLED=new as(-1,0,0);class RT{constructor(t,e,i,o){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=o,this.Vn={}}static de(t,e,i,o){Wt(""!==t.uid);const r=t.isAuthenticated()?t.uid:"";return new RT(r,e,i,o)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gf(t).X({index:"userMutationsIndex",range:i},(o,r,l)=>{e=!1,l.done()}).next(()=>e)}addMutationBatch(t,e,i,o){const r=A_(t),l=gf(t);return l.add({}).next(d=>{Wt("number"==typeof d);const f=new Vx(d,e,i,o),g=function(C,E,N){const A=N.baseMutations.map(F=>ow(C.fe,F)),R=N.mutations.map(F=>ow(C.fe,F));return{userId:E,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:A,mutations:R}}(this.serializer,this.userId,f),_=[];let w=new Ui((C,E)=>vn(C.canonicalString(),E.canonicalString()));for(const C of o){const E=GL(this.userId,C.key.path,d);w=w.add(C.key.path.popLast()),_.push(l.put(g)),_.push(r.put(E,Mj))}return w.forEach(C=>{_.push(this.indexManager.addToCollectionParentIndex(t,C))}),t.addOnCommittedListener(()=>{this.Vn[d]=f.keys()}),be.waitFor(_).next(()=>f)})}lookupMutationBatch(t,e){return gf(t).get(e).next(i=>i?(Wt(i.userId===this.userId),yg(this.serializer,i)):null)}Sn(t,e){return this.Vn[e]?be.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const o=i.keys();return this.Vn[e]=o,o}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,o=IDBKeyRange.lowerBound([this.userId,i]);let r=null;return gf(t).X({index:"userMutationsIndex",range:o},(l,d,f)=>{d.userId===this.userId&&(Wt(d.batchId>=i),r=yg(this.serializer,d)),f.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return gf(t).X({index:"userMutationsIndex",range:e,reverse:!0},(o,r,l)=>{i=r.batchId,l.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gf(t).j("userMutationsIndex",e).next(i=>i.map(o=>yg(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=dT(this.userId,e.path),o=IDBKeyRange.lowerBound(i),r=[];return A_(t).X({range:o},(l,d,f)=>{const[g,_,w]=l,C=ru(_);if(g===this.userId&&e.path.isEqual(C))return gf(t).get(w).next(E=>{if(!E)throw Ft();Wt(E.userId===this.userId),r.push(yg(this.serializer,E))});f.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ui(vn);const o=[];return e.forEach(r=>{const l=dT(this.userId,r.path),d=IDBKeyRange.lowerBound(l),f=A_(t).X({range:d},(g,_,w)=>{const[C,E,N]=g,A=ru(E);C===this.userId&&r.path.isEqual(A)?i=i.add(N):w.done()});o.push(f)}),be.waitFor(o).next(()=>this.Dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,o=i.length+1,r=dT(this.userId,i),l=IDBKeyRange.lowerBound(r);let d=new Ui(vn);return A_(t).X({range:l},(f,g,_)=>{const[w,C,E]=f,N=ru(C);w===this.userId&&i.isPrefixOf(N)?N.length===o&&(d=d.add(E)):_.done()}).next(()=>this.Dn(t,d))}Dn(t,e){const i=[],o=[];return e.forEach(r=>{o.push(gf(t).get(r).next(l=>{if(null===l)throw Ft();Wt(l.userId===this.userId),i.push(yg(this.serializer,l))}))}),be.waitFor(o).next(()=>i)}removeMutationBatch(t,e){return _U(t.ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Cn(e.batchId)}),be.forEach(i,o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return be.resolve();const i=IDBKeyRange.lowerBound([this.userId]),o=[];return A_(t).X({range:i},(r,l,d)=>{if(r[0]===this.userId){const f=ru(r[1]);o.push(f)}else d.done()}).next(()=>{Wt(0===o.length)})})}containsKey(t,e){return yU(t,this.userId,e)}xn(t){return bU(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yU(n,t,e){const i=dT(t,e.path),o=i[1],r=IDBKeyRange.lowerBound(i);let l=!1;return A_(n).X({range:r,Y:!0},(d,f,g)=>{const[_,w,C]=d;_===t&&w===o&&(l=!0),g.done()}).next(()=>l)}function gf(n){return wo(n,"mutations")}function A_(n){return wo(n,"documentMutations")}function bU(n){return wo(n,"mutationQueues")}class Cg{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new Cg(0)}static Mn(){return new Cg(-1)}}class $3{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next(e=>{const i=new Cg(e.highestTargetId);return e.highestTargetId=i.next(),this.On(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.$n(t).next(e=>qt.fromTimestamp(new Qi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.$n(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.$n(t).next(o=>(o.highestListenSequenceNumber=e,i&&(o.lastRemoteSnapshotVersion=i.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.On(t,o)))}addTargetData(t,e){return this.Fn(t,e).next(()=>this.$n(t).next(i=>(i.targetCount+=1,this.Bn(e,i),this.On(t,i))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>N_(t).delete(e.targetId)).next(()=>this.$n(t)).next(i=>(Wt(i.targetCount>0),i.targetCount-=1,this.On(t,i)))}removeTargets(t,e,i){let o=0;const r=[];return N_(t).X((l,d)=>{const f=sw(d);f.sequenceNumber<=e&&null===i.get(f.targetId)&&(o++,r.push(this.removeTargetData(t,f)))}).next(()=>be.waitFor(r)).next(()=>o)}forEachTarget(t,e){return N_(t).X((i,o)=>{const r=sw(o);e(r)})}$n(t){return wU(t).get("targetGlobalKey").next(e=>(Wt(null!==e),e))}On(t,e){return wU(t).put("targetGlobalKey",e)}Fn(t,e){return N_(t).put(oU(this.serializer,e))}Bn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.$n(t).next(e=>e.targetCount)}getTargetData(t,e){const i=fg(e),o=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let r=null;return N_(t).X({range:o,index:"queryTargetsIndex"},(l,d,f)=>{const g=sw(d);qb(e,g.target)&&(r=g,f.done())}).next(()=>r)}addMatchingKeys(t,e,i){const o=[],r=mf(t);return e.forEach(l=>{const d=ss(l.path);o.push(r.put({targetId:i,path:d})),o.push(this.referenceDelegate.addReference(t,i,l))}),be.waitFor(o)}removeMatchingKeys(t,e,i){const o=mf(t);return be.forEach(e,r=>{const l=ss(r.path);return be.waitFor([o.delete([i,l]),this.referenceDelegate.removeReference(t,i,r)])})}removeMatchingKeysForTargetId(t,e){const i=mf(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(o)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),o=mf(t);let r=En();return o.X({range:i,Y:!0},(l,d,f)=>{const g=ru(l[1]),_=new Ct(g);r=r.add(_)}).next(()=>r)}containsKey(t,e){const i=ss(e.path),o=IDBKeyRange.bound([i],[kL(i)],!1,!0);let r=0;return mf(t).X({index:"documentTargetsIndex",Y:!0,range:o},([l,d],f,g)=>{0!==l&&(r++,g.done())}).next(()=>r>0)}le(t,e){return N_(t).get(e).next(i=>i?sw(i):null)}}function N_(n){return wo(n,"targets")}function wU(n){return wo(n,"targetGlobal")}function mf(n){return wo(n,"targetDocuments")}function CU([n,t],[e,i]){const o=vn(n,e);return 0===o?vn(t,i):o}class z3{constructor(t){this.Ln=t,this.buffer=new Ui(CU),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();CU(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class DU{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){var e=this;lt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Me.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){rf(i)?lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield nf(i)}yield e.Qn(3e5)}))}}class W3{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return be.resolve(Ra.ct);const i=new z3(e);return this.jn.forEachTarget(t,o=>i.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(t,o=>i.Kn(o))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(vU)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vU):this.Hn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let i,o,r,l,d,f,g;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,l=Date.now(),this.nthSequenceNumber(t,o))).next(w=>(i=w,d=Date.now(),this.removeTargets(t,i,e))).next(w=>(r=w,f=Date.now(),this.removeOrphanedDocuments(t,i))).next(w=>(g=Date.now(),Cx()<=Yu.in.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-_}ms\n\tDetermined least recently used ${o} in `+(d-l)+`ms\n\tRemoved ${r} targets in `+(f-d)+`ms\n\tRemoved ${w} documents in `+(g-f)+`ms\nTotal Duration: ${g-_}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:r,documentsRemoved:w})))}}class q3{constructor(t,e){this.db=t,this.garbageCollector=function EU(n,t){return new W3(n,t)}(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(o=>i+o))}Jn(t){let e=0;return this.Wn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,(i,o)=>e(o))}addReference(t,e,i){return kT(t,i)}removeReference(t,e,i){return kT(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return kT(t,e)}Xn(t,e){return function(i,o){let r=!1;return bU(i).Z(l=>yU(i,l,o).next(d=>(d&&(r=!0),be.resolve(!d)))).next(()=>r)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let r=0;return this.Yn(t,(l,d)=>{if(d<=e){const f=this.Xn(t,l).next(g=>{if(!g)return r++,i.getEntry(t,l).next(()=>(i.removeEntry(l,qt.min()),mf(t).delete([0,ss(l.path)])))});o.push(f)}}).next(()=>be.waitFor(o)).next(()=>i.apply(t)).next(()=>r)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return kT(t,e)}Yn(t,e){const i=mf(t);let o,r=Ra.ct;return i.X({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:g})=>{0===l?(r!==Ra.ct&&e(new Ct(ru(o)),r),r=g,o=f):r=Ra.ct}).next(()=>{r!==Ra.ct&&e(new Ct(ru(o)),r)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function kT(n,t){return mf(n).put((i=n.currentSequenceNumber,{targetId:0,path:ss(t.path),sequenceNumber:i}));var i}class TU{constructor(){this.changes=new wd(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Bi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?be.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Z3{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Dg(t).put(i)}removeEntry(t,e,i){return Dg(t).delete(function(o,r){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],IT(r),l[l.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Zn(t,i)))}getEntry(t,e){let i=Bi.newInvalidDocument(e);return Dg(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(dw(e))},(o,r)=>{i=this.ts(e,r)}).next(()=>i)}es(t,e){let i={size:0,document:Bi.newInvalidDocument(e)};return Dg(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(dw(e))},(o,r)=>{i={document:this.ts(e,r),size:OT(r)}}).next(()=>i)}getEntries(t,e){let i=aa();return this.ns(t,e,(o,r)=>{const l=this.ts(o,r);i=i.insert(o,l)}).next(()=>i)}ss(t,e){let i=aa(),o=new Ni(Ct.comparator);return this.ns(t,e,(r,l)=>{const d=this.ts(r,l);i=i.insert(r,d),o=o.insert(r,OT(l))}).next(()=>({documents:i,rs:o}))}ns(t,e,i){if(e.isEmpty())return be.resolve();let o=new Ui(NU);e.forEach(f=>o=o.add(f));const r=IDBKeyRange.bound(dw(o.first()),dw(o.last())),l=o.getIterator();let d=l.getNext();return Dg(t).X({index:"documentKeyIndex",range:r},(f,g,_)=>{const w=Ct.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&NU(d,w)<0;)i(d,null),d=l.getNext();d&&d.isEqual(w)&&(i(d,g),d=l.hasNext()?l.getNext():null),d?_.G(dw(d)):_.done()}).next(()=>{for(;d;)i(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(t,e,i,o){const r=e.path,l=[r.popLast().toArray(),r.lastSegment(),IT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dg(t).j(IDBKeyRange.bound(l,d,!0)).next(f=>{let g=aa();for(const _ of f){const w=this.ts(Ct.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);w.isFoundDocument()&&(Yb(e,w)||o.has(w.key))&&(g=g.insert(w.key,w))}return g})}getAllFromCollectionGroup(t,e,i,o){let r=aa();const l=AU(e,i),d=AU(e,Oa.max());return Dg(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,g,_)=>{const w=this.ts(Ct.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);r=r.insert(w.key,w),r.size===o&&_.done()}).next(()=>r)}newChangeBuffer(t){return new Y3(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return IU(t).get("remoteDocumentGlobalKey").next(e=>(Wt(!!e),e))}Zn(t,e){return IU(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const i=function k3(n,t){let e;if(t.document)e=J2(n.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Ct.fromSegments(t.noDocument.path),o=_g(t.noDocument.readTime);e=Bi.newNoDocument(i,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ft();{const i=Ct.fromSegments(t.unknownDocument.path),o=_g(t.unknownDocument.version);e=Bi.newUnknownDocument(i,o)}}return t.readTime&&e.setReadTime(function(i){const o=new Qi(i[0],i[1]);return qt.fromTimestamp(o)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(qt.min()))return i}return Bi.newInvalidDocument(t)}}function SU(n){return new Z3(n)}class Y3 extends TU{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new wd(i=>i.toString(),(i,o)=>i.isEqual(o))}applyChanges(t){const e=[];let i=0,o=new Ui((r,l)=>vn(r.canonicalString(),l.canonicalString()));return this.changes.forEach((r,l)=>{const d=this.us.get(r);if(e.push(this.os.removeEntry(t,r,d.readTime)),l.isValidDocument()){const f=rU(this.os.serializer,l);o=o.add(r.path.popLast());const g=OT(f);i+=g-d.size,e.push(this.os.addEntry(t,r,f))}else if(i-=d.size,this.trackRemovals){const f=rU(this.os.serializer,l.convertToNoDocument(qt.min()));e.push(this.os.addEntry(t,r,f))}}),o.forEach(r=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,r))}),e.push(this.os.updateMetadata(t,i)),be.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next(i=>(this.us.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.os.ss(t,e).next(({documents:i,rs:o})=>(o.forEach((r,l)=>{this.us.set(r,{size:l,readTime:i.get(r).readTime})}),i))}}function IU(n){return wo(n,"remoteDocumentGlobal")}function Dg(n){return wo(n,"remoteDocumentsV14")}function dw(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function AU(n,t){const e=t.documentKey.path.toArray();return[n,IT(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function NU(n,t){const e=n.path.toArray(),i=t.path.toArray();let o=0;for(let r=0;r<e.length-2&&r<i.length-2;++r)if(o=vn(e[r],i[r]),o)return o;return o=vn(e.length,i.length),o||(o=vn(e[e.length-2],i[i.length-2]),o||vn(e[e.length-1],i[i.length-1]))}class K3{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class MU{constructor(t,e,i,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=o}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(o=>(i=o,this.remoteDocumentCache.getEntry(t,e))).next(o=>(null!==i&&Xb(i.mutation,o,sa.empty(),Qi.now()),o))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,En()).next(()=>i))}getLocalViewOfDocuments(t,e,i=En()){const o=su();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,i).next(r=>{let l=Kb();return r.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=su();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,En()))}populateOverlays(t,e,i){const o=[];return i.forEach(r=>{e.has(r)||o.push(r)}),this.documentOverlayCache.getOverlays(t,o).next(r=>{r.forEach((l,d)=>{e.set(l,d)})})}computeViews(t,e,i,o){let r=aa();const l=Jb(),d=Jb();return e.forEach((f,g)=>{const _=i.get(g.key);o.has(g.key)&&(void 0===_||_.mutation instanceof Cd)?r=r.insert(g.key,g):void 0!==_?(l.set(g.key,_.mutation.getFieldMask()),Xb(_.mutation,g,_.mutation.getFieldMask(),Qi.now())):l.set(g.key,sa.empty())}),this.recalculateAndSaveOverlays(t,r).next(f=>(f.forEach((g,_)=>l.set(g,_)),e.forEach((g,_)=>{var w;return d.set(g,new K3(_,null!==(w=l.get(g))&&void 0!==w?w:null))}),d))}recalculateAndSaveOverlays(t,e){const i=Jb();let o=new Ni((l,d)=>l-d),r=En();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const d of l)d.keys().forEach(f=>{const g=e.get(f);if(null===g)return;let _=i.get(f)||sa.empty();_=d.applyToLocalView(g,_),i.set(f,_);const w=(o.get(d.batchId)||En()).add(f);o=o.insert(d.batchId,w)})}).next(()=>{const l=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),g=f.key,_=f.value,w=C2();_.forEach(C=>{if(!r.has(C)){const E=x2(e.get(C),i.get(C));null!==E&&w.set(C,E),r=r.add(C)}}),l.push(this.documentOverlayCache.saveOverlays(t,g,w))}return be.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return Ct.isDocumentKey((o=e).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):Fx(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var o}getNextDocuments(t,e,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,o).next(r=>{const l=o-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,o-r.size):be.resolve(su());let d=-1,f=r;return l.next(g=>be.forEach(g,(_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),r.get(_)?be.resolve():this.remoteDocumentCache.getEntry(t,_).next(C=>{f=f.insert(_,C)}))).next(()=>this.populateOverlays(t,g,r)).next(()=>this.computeViews(t,f,g,En())).next(_=>({batchId:d,changes:w2(_)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ct(e)).next(i=>{let o=Kb();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const o=e.collectionGroup;let r=Kb();return this.indexManager.getCollectionParents(t,o).next(l=>be.forEach(l,d=>{const f=(g=e,_=d.child(o),new bd(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(t,f,i).next(g=>{g.forEach((_,w)=>{r=r.insert(_,w)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(t,e,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(r=>(o=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o))).next(r=>{o.forEach((d,f)=>{const g=f.getKey();null===r.get(g)&&(r=r.insert(g,Bi.newInvalidDocument(g)))});let l=Kb();return r.forEach((d,f)=>{const g=o.get(d);void 0!==g&&Xb(g.mutation,f,sa.empty(),Qi.now()),Yb(e,f)&&(l=l.insert(d,f))}),l})}}class J3{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return be.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var i;return this.cs.set(e.id,{id:(i=e).id,version:i.version,createTime:Mr(i.createTime)}),be.resolve()}getNamedQuery(t,e){return be.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,{name:(i=e).name,query:Jx(i.bundledQuery),readTime:Mr(i.readTime)}),be.resolve();var i}}class Q3{constructor(){this.overlays=new Ni(Ct.comparator),this.ls=new Map}getOverlay(t,e){return be.resolve(this.overlays.get(e))}getOverlays(t,e){const i=su();return be.forEach(e,o=>this.getOverlay(t,o).next(r=>{null!==r&&i.set(o,r)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((o,r)=>{this.we(t,e,r)}),be.resolve()}removeOverlaysForBatchId(t,e,i){const o=this.ls.get(i);return void 0!==o&&(o.forEach(r=>this.overlays=this.overlays.remove(r)),this.ls.delete(i)),be.resolve()}getOverlaysForCollection(t,e,i){const o=su(),r=e.length+1,l=new Ct(e.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,g=f.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===r&&f.largestBatchId>i&&o.set(f.getKey(),f)}return be.resolve(o)}getOverlaysForCollectionGroup(t,e,i,o){let r=new Ni((g,_)=>g-_);const l=this.overlays.getIterator();for(;l.hasNext();){const g=l.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let _=r.get(g.largestBatchId);null===_&&(_=su(),r=r.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=su(),f=r.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=o)););return be.resolve(d)}we(t,e,i){const o=this.overlays.get(i.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(i.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Gx(e,i));let r=this.ls.get(e);void 0===r&&(r=En(),this.ls.set(e,r)),this.ls.set(e,r.add(i.key))}}class rO{constructor(){this.fs=new Ui(Co.ds),this.ws=new Ui(Co._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const i=new Co(t,e);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.ys(new Co(t,e))}ps(t,e){t.forEach(i=>this.removeReference(i,e))}Is(t){const e=new Ct(new Yn([])),i=new Co(e,t),o=new Co(e,t+1),r=[];return this.ws.forEachInRange([i,o],l=>{this.ys(l),r.push(l.key)}),r}Ts(){this.fs.forEach(t=>this.ys(t))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new Ct(new Yn([])),i=new Co(e,t),o=new Co(e,t+1);let r=En();return this.ws.forEachInRange([i,o],l=>{r=r.add(l.key)}),r}containsKey(t){const e=new Co(t,0),i=this.fs.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Co{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return Ct.comparator(t.key,e.key)||vn(t.As,e.As)}static _s(t,e){return vn(t.As,e.As)||Ct.comparator(t.key,e.key)}}class X3{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Ui(Co.ds)}checkEmpty(t){return be.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,o){const r=this.vs;this.vs++;const l=new Vx(r,e,i,o);this.mutationQueue.push(l);for(const d of o)this.Rs=this.Rs.add(new Co(d.key,r)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return be.resolve(l)}lookupMutationBatch(t,e){return be.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const o=this.bs(e+1),r=o<0?0:o;return be.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Co(e,0),o=new Co(e,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([i,o],l=>{const d=this.Ps(l.As);r.push(d)}),be.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ui(vn);return e.forEach(o=>{const r=new Co(o,0),l=new Co(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([r,l],d=>{i=i.add(d.As)})}),be.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,o=i.length+1;let r=i;Ct.isDocumentKey(r)||(r=r.child(""));const l=new Co(new Ct(r),0);let d=new Ui(vn);return this.Rs.forEachWhile(f=>{const g=f.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(d=d.add(f.As)),!0)},l),be.resolve(this.Vs(d))}Vs(t){const e=[];return t.forEach(i=>{const o=this.Ps(i);null!==o&&e.push(o)}),e}removeMutationBatch(t,e){Wt(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return be.forEach(e.mutations,o=>{const r=new Co(o.key,e.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Rs=i})}Cn(t){}containsKey(t,e){const i=new Co(e,0),o=this.Rs.firstAfterOrEqual(i);return be.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return be.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class eG{constructor(t){this.Ds=t,this.docs=new Ni(Ct.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,o=this.docs.get(i),r=o?o.size:0,l=this.Ds(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return be.resolve(i?i.document.mutableCopy():Bi.newInvalidDocument(e))}getEntries(t,e){let i=aa();return e.forEach(o=>{const r=this.docs.get(o);i=i.insert(o,r?r.document.mutableCopy():Bi.newInvalidDocument(o))}),be.resolve(i)}getDocumentsMatchingQuery(t,e,i,o){let r=aa();const l=e.path,d=new Ct(l.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:g,value:{document:_}}=f.getNext();if(!l.isPrefixOf(g.path))break;g.path.length>l.length+1||Tx(FL(_),i)<=0||(o.has(_.key)||Yb(e,_))&&(r=r.insert(_.key,_.mutableCopy()))}return be.resolve(r)}getAllFromCollectionGroup(t,e,i,o){Ft()}Cs(t,e){return be.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new tG(this)}getSize(t){return be.resolve(this.size)}}class tG extends TU{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?e.push(this.os.addEntry(t,o)):this.os.removeEntry(i)}),be.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class nG{constructor(t){this.persistence=t,this.xs=new wd(e=>fg(e),qb),this.lastRemoteSnapshotVersion=qt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new rO,this.targetCount=0,this.Ms=Cg.kn()}forEachTarget(t,e){return this.xs.forEach((i,o)=>e(o)),be.resolve()}getLastRemoteSnapshotVersion(t){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return be.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ns&&(this.Ns=e),be.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new Cg(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,be.resolve()}updateTargetData(t,e){return this.Fn(e),be.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,be.resolve()}removeTargets(t,e,i){let o=0;const r=[];return this.xs.forEach((l,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.xs.delete(l),r.push(this.removeMatchingKeysForTargetId(t,d.targetId)),o++)}),be.waitFor(r).next(()=>o)}getTargetCount(t){return be.resolve(this.targetCount)}getTargetData(t,e){const i=this.xs.get(e)||null;return be.resolve(i)}addMatchingKeys(t,e,i){return this.ks.gs(e,i),be.resolve()}removeMatchingKeys(t,e,i){this.ks.ps(e,i);const o=this.persistence.referenceDelegate,r=[];return o&&e.forEach(l=>{r.push(o.markPotentiallyOrphaned(t,l))}),be.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),be.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ks.Es(e);return be.resolve(i)}containsKey(t,e){return be.resolve(this.ks.containsKey(e))}}class oO{constructor(t,e){this.$s={},this.overlays={},this.Os=new Ra(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new nG(this),this.indexManager=new j3,this.remoteDocumentCache=new eG(i=>this.referenceDelegate.Ls(i)),this.serializer=new iU(e),this.qs=new J3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Q3,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.$s[t.toKey()];return i||(i=new X3(e,this.referenceDelegate),this.$s[t.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,i){lt("MemoryPersistence","Starting transaction:",t);const o=new iG(this.Os.next());return this.referenceDelegate.Us(),i(o).next(r=>this.referenceDelegate.Ks(o).next(()=>r)).toPromise().then(r=>(o.raiseOnCommittedEvent(),r))}Gs(t,e){return be.or(Object.values(this.$s).map(i=>()=>i.containsKey(t,e)))}}class iG extends UL{constructor(t){super(),this.currentSequenceNumber=t}}class PT{constructor(t){this.persistence=t,this.Qs=new rO,this.js=null}static zs(t){return new PT(t)}get Ws(){if(this.js)return this.js;throw Ft()}addReference(t,e,i){return this.Qs.addReference(i,e),this.Ws.delete(i.toString()),be.resolve()}removeReference(t,e,i){return this.Qs.removeReference(i,e),this.Ws.add(i.toString()),be.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),be.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach(o=>this.Ws.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(o=>{o.forEach(r=>this.Ws.add(r.toString()))}).next(()=>i.removeTargetData(t,e))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Ws,i=>{const o=Ct.fromPath(i);return this.Hs(t,o).next(r=>{r||e.removeEntry(o,qt.min())})}).next(()=>(this.js=null,e.apply(t)))}updateLimboDocument(t,e){return this.Hs(t,e).next(i=>{i?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(t){return 0}Hs(t,e){return be.or([()=>be.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class rG{constructor(t){this.serializer=t}O(t,e,i,o){const r=new uT("createOrUpgrade",e);var d;i<1&&o>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jL,{unique:!0}),d.createObjectStore("documentMutations"),xU(t),function(d){d.createObjectStore("remoteDocuments")}(t));let l=be.resolve();return i<3&&o>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),xU(t)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",g)}(r))),i<4&&o>=4&&(0!==i&&(l=l.next(()=>function(d,f){return f.store("mutations").j().next(g=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jL,{unique:!0});const _=f.store("mutations"),w=g.map(C=>_.put(C));return be.waitFor(w)})}(t,r))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&o>=5&&(l=l.next(()=>this.Ys(r))),i<6&&o>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(r)))),i<7&&o>=7&&(l=l.next(()=>this.Zs(r))),i<8&&o>=8&&(l=l.next(()=>this.ti(t,r))),i<9&&o>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&o>=10&&(l=l.next(()=>this.ei(r))),i<11&&o>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&o>=12&&(l=l.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:jj});f.createIndex("collectionPathOverlayIndex",Gj,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",$j,{unique:!1})}(t)})),i<13&&o>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:xj});f.createIndex("documentKeyIndex",Oj),f.createIndex("collectionGroupIndex",Rj)}(t)).next(()=>this.ni(t,r)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&o>=14&&(l=l.next(()=>this.si(t,r))),i<15&&o>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Uj}).createIndex("sequenceNumberIndex",Bj,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Hj}).createIndex("documentKeyIndex",Vj,{unique:!1})}(t))),l}Xs(t){let e=0;return t.store("remoteDocuments").X((i,o)=>{e+=OT(o)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.j().next(o=>be.forEach(o,r=>{const l=IDBKeyRange.bound([r.userId,-1],[r.userId,r.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",l).next(d=>be.forEach(d,f=>{Wt(f.userId===r.userId);const g=yg(this.serializer,f);return _U(t,r.userId,g).next(()=>{})}))}))}Zs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(o=>{const r=[];return i.X((l,d)=>{const f=new Yn(l),g=[0,ss(f)];r.push(e.get(g).next(_=>_?be.resolve():e.put({targetId:0,path:ss(f),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>be.waitFor(r))})}ti(t,e){t.createObjectStore("collectionParents",{keyPath:Lj});const i=e.store("collectionParents"),o=new iO,r=l=>{if(o.add(l)){const d=l.lastSegment(),f=l.popLast();return i.put({collectionId:d,parent:ss(f)})}};return e.store("remoteDocuments").X({Y:!0},(l,d)=>{const f=new Yn(l);return r(f.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([l,d,f],g)=>{const _=ru(d);return r(_.popLast())}))}ei(t){const e=t.store("targets");return e.X((i,o)=>{const r=sw(o),l=oU(this.serializer,r);return e.put(l)})}ni(t,e){const i=e.store("remoteDocuments"),o=[];return i.X((r,l)=>{const d=e.store("remoteDocumentsV14"),f=(g=l,g.document?new Ct(Yn.fromString(g.document.name).popFirst(5)):g.noDocument?Ct.fromSegments(g.noDocument.path):g.unknownDocument?Ct.fromSegments(g.unknownDocument.path):Ft()).path.toArray();var g;const _={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(d.put(_))}).next(()=>be.waitFor(o))}si(t,e){const i=e.store("mutations"),o=SU(this.serializer),r=new oO(PT.zs,this.serializer.fe);return i.j().next(l=>{const d=new Map;return l.forEach(f=>{var g;let _=null!==(g=d.get(f.userId))&&void 0!==g?g:En();yg(this.serializer,f).keys().forEach(w=>_=_.add(w)),d.set(f.userId,_)}),be.forEach(d,(f,g)=>{const _=new bo(g),w=AT.de(this.serializer,_),C=r.getIndexManager(_),E=RT.de(_,this.serializer,C,r.referenceDelegate);return new MU(o,E,w,C).recalculateAndSaveOverlaysForDocumentKeys(new Ax(e,Ra.ct),f).next()})})}}function xU(n){n.createObjectStore("targetDocuments",{keyPath:Pj}).createIndex("documentTargetsIndex",Fj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kj,{unique:!0}),n.createObjectStore("targetGlobal")}const sO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aO{constructor(t,e,i,o,r,l,d,f,g,_,w=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ii=r,this.window=l,this.document=d,this.ri=g,this.oi=_,this.ui=w,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=C=>Promise.resolve(),!aO.D())throw new Qe(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new q3(this,o),this.di=e+"main",this.serializer=new iU(f),this.wi=new gc(this.di,this.ui,new rG(this.serializer)),this.Bs=new $3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SU(this.serializer),this.qs=new P3,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===_&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qe(Ie.FAILED_PRECONDITION,sO);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Bs.getHighestSequenceNumber(t))}).then(t=>{this.Os=new Ra(t,this.ri)}).then(()=>{this.Fs=!0}).catch(t=>(this.wi&&this.wi.close(),Promise.reject(t)))}Ii(t){var e=this;return this.fi=function(){var i=(0,Me.Z)(function*(o){if(e.started)return t(o)});return function(o){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B(function(){var e=(0,Me.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((0,Me.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>LT(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(t).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(t)).next(e=>this.isPrimary&&!e?this.Ai(t).next(()=>!1):!!e&&this.vi(t).next(()=>!0))).catch(t=>{if(rf(t))return lt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return lt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ii.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Ti(t){return hw(t).get("owner").next(e=>be.resolve(this.Ri(e)))}Pi(t){return LT(t).delete(this.clientId)}bi(){var t=this;return(0,Me.Z)(function*(){if(t.isPrimary&&!t.Vi(t.li,18e5)){t.li=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const o=wo(i,"clientMetadata");return o.j().next(r=>{const l=t.Si(r,18e5),d=r.filter(f=>-1===l.indexOf(f));return be.forEach(d,f=>o.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(t._i)for(const i of e)t._i.removeItem(t.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?be.resolve(!0):hw(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new Qe(Ie.FAILED_PRECONDITION,sO);return!1}}return!(!this.networkEnabled||!this.inForeground)||LT(t).j().next(i=>void 0===this.Si(i,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(e=>(this.isPrimary!==e&&lt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Me.Z)(function*(){t.Fs=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Ni(),t.ki(),yield t.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new Ax(e,Ra.ct);return t.Ai(i).next(()=>t.Pi(i))}),t.wi.close(),t.Mi()})()}Si(t,e){return t.filter(i=>this.Vi(i.updateTimeMs,e)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",t=>LT(t).j().next(e=>this.Si(e,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(t,e){return RT.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new G3(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return AT.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,i){lt("IndexedDbPersistence","Starting transaction:",t);const o="readonly"===e?"readonly":"readwrite",r=15===(l=this.ui)?Wj:14===l?WL:13===l?zL:12===l?zj:11===l?$L:void Ft();var l;let d;return this.wi.runTransaction(t,o,r,f=>(d=new Ax(f,this.Os?this.Os.next():Ra.ct),"readwrite-primary"===e?this.Ti(d).next(g=>!!g||this.Ei(d)).next(g=>{if(!g)throw Nr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Qe(Ie.FAILED_PRECONDITION,LL);return i(d)}).next(g=>this.vi(d).next(()=>g)):this.Oi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Oi(t){return hw(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Qe(Ie.FAILED_PRECONDITION,sO)})}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hw(t).put("owner",e)}static D(){return gc.D()}Ai(t){const e=hw(t);return e.get("owner").next(i=>this.Ri(i)?(lt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):be.resolve())}Vi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Nr(`Detected an update time that is in the future: ${t} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,Zn.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const i=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return lt("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Nr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){Nr("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function hw(n){return wo(n,"owner")}function LT(n){return wo(n,"clientMetadata")}function lO(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class cO{constructor(t,e,i,o){this.targetId=t,this.fromCache=e,this.Fi=i,this.Bi=o}static Li(t,e){let i=En(),o=En();for(const r of e.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:o=o.add(r.doc.key)}return new cO(t,e.fromCache,i,o)}}class OU{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,i,o){return this.Ki(t,e).next(r=>r||this.Gi(t,e,o,i)).next(r=>r||this.Qi(t,e))}Ki(t,e){if(m2(e))return be.resolve(null);let i=Os(e);return this.indexManager.getIndexType(t,i).next(o=>0===o?null:(null!==e.limit&&1===o&&(e=wT(e,null,"F"),i=Os(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const l=En(...r);return this.Ui.getDocuments(t,l).next(d=>this.indexManager.getMinOffset(t,i).next(f=>{const g=this.ji(e,d);return this.zi(e,g,l,f.readTime)?this.Ki(t,wT(e,null,"F")):this.Wi(t,g,e,f)}))})))}Gi(t,e,i,o){return m2(e)||o.isEqual(qt.min())?this.Qi(t,e):this.Ui.getDocuments(t,i).next(r=>{const l=this.ji(e,r);return this.zi(e,l,i,o)?this.Qi(t,e):(Cx()<=Yu.in.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ux(e)),this.Wi(t,l,e,PL(o,-1)))})}ji(t,e){let i=new Ui(y2(t));return e.forEach((o,r)=>{Yb(t,r)&&(i=i.add(r))}),i}zi(t,e,i,o){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(o)>0)}Qi(t,e){return Cx()<=Yu.in.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",Ux(e)),this.Ui.getDocumentsMatchingQuery(t,e,Oa.min())}Wi(t,e,i,o){return this.Ui.getDocumentsMatchingQuery(t,i,o).next(r=>(e.forEach(l=>{r=r.insert(l.key,l)}),r))}}class oG{constructor(t,e,i,o){this.persistence=t,this.Hi=e,this.serializer=o,this.Ji=new Ni(vn),this.Yi=new wd(r=>fg(r),qb),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(i)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new MU(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ji))}}function RU(n,t,e,i){return new oG(n,t,e,i)}function kU(n,t){return uO.apply(this,arguments)}function uO(){return uO=(0,Me.Z)(function*(n,t){const e=Tt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let o;return e.mutationQueue.getAllMutationBatches(i).next(r=>(o=r,e.tr(t),e.mutationQueue.getAllMutationBatches(i))).next(r=>{const l=[],d=[];let f=En();for(const g of o){l.push(g.batchId);for(const _ of g.mutations)f=f.add(_.key)}for(const g of r){d.push(g.batchId);for(const _ of g.mutations)f=f.add(_.key)}return e.localDocuments.getDocuments(i,f).next(g=>({er:g,removedBatchIds:l,addedBatchIds:d}))})})}),uO.apply(this,arguments)}function PU(n){const t=Tt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function FU(n,t,e){let i=En(),o=En();return e.forEach(r=>i=i.add(r)),t.getEntries(n,i).next(r=>{let l=aa();return e.forEach((d,f)=>{const g=r.get(d);f.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(qt.min())?(t.removeEntry(d,f.readTime),l=l.insert(d,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||0===f.version.compareTo(g.version)&&g.hasPendingWrites?(t.addEntry(f),l=l.insert(d,f)):lt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",f.version)}),{nr:l,sr:o}})}function lG(n,t){const e=Tt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function M_(n,t){const e=Tt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return e.Bs.getTargetData(i,t).next(r=>r?(o=r,be.resolve(o)):e.Bs.allocateTargetId(i).next(l=>(o=new Dd(t,l,"TargetPurposeListen",i.currentSequenceNumber),e.Bs.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=e.Ji.get(i.targetId);return(null===o||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(i.targetId,i),e.Yi.set(t,i.targetId)),i})}function x_(n,t,e){return dO.apply(this,arguments)}function dO(){return dO=(0,Me.Z)(function*(n,t,e){const i=Tt(n),o=i.Ji.get(t),r=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",r,l=>i.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!rf(l))throw l;lt("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(o.target)}),dO.apply(this,arguments)}function UT(n,t,e){const i=Tt(n);let o=qt.min(),r=En();return i.persistence.runTransaction("Execute query","readonly",l=>function(d,f,g){const _=Tt(d),w=_.Yi.get(g);return void 0!==w?be.resolve(_.Ji.get(w)):_.Bs.getTargetData(f,g)}(i,l,Os(t)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(l,d.targetId).next(f=>{r=f})}).next(()=>i.Hi.getDocumentsMatchingQuery(l,t,e?o:qt.min(),e?r:En())).next(d=>(BU(i,_2(t),d),{documents:d,ir:r})))}function LU(n,t){const e=Tt(n),i=Tt(e.Bs),o=e.Ji.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",r=>i.le(r,t).next(l=>l?l.target:null))}function UU(n,t){const e=Tt(n),i=e.Xi.get(t)||qt.min();return e.persistence.runTransaction("Get new document changes","readonly",o=>e.Zi.getAllFromCollectionGroup(o,t,PL(i,-1),Number.MAX_SAFE_INTEGER)).then(o=>(BU(e,t,o),o))}function BU(n,t,e){let i=n.Xi.get(t)||qt.min();e.forEach((o,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.Xi.set(t,i)}function hO(){return hO=(0,Me.Z)(function*(n,t,e,i){const o=Tt(n);let r=En(),l=aa();for(const g of e){const _=t.rr(g.metadata.name);g.document&&(r=r.add(_));const w=t.ur(g);w.setReadTime(t.cr(g.metadata.readTime)),l=l.insert(_,w)}const d=o.Zi.newChangeBuffer({trackRemovals:!0}),f=yield M_(o,(g=i,Os(w_(Yn.fromString(`__bundle__/docs/${g}`)))));var g;return o.persistence.runTransaction("Apply bundle documents","readwrite",g=>FU(g,d,l).next(_=>(d.apply(g),_)).next(_=>o.Bs.removeMatchingKeysForTargetId(g,f.targetId).next(()=>o.Bs.addMatchingKeys(g,r,f.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(g,_.nr,_.sr)).next(()=>_.nr)))}),hO.apply(this,arguments)}function uG(n,t){return fO.apply(this,arguments)}function fO(){return fO=(0,Me.Z)(function*(n,t,e=En()){const i=yield M_(n,Os(Jx(t.bundledQuery))),o=Tt(n);return o.persistence.runTransaction("Save named query","readwrite",r=>{const l=Mr(t.readTime);if(i.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(r,t);const d=i.withResumeToken(so.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(d.targetId,d),o.Bs.updateTargetData(r,d).next(()=>o.Bs.removeMatchingKeysForTargetId(r,i.targetId)).next(()=>o.Bs.addMatchingKeys(r,e,i.targetId)).next(()=>o.qs.saveNamedQuery(r,t))})}),fO.apply(this,arguments)}function HU(n,t){return`firestore_clients_${n}_${t}`}function VU(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function pO(n,t){return`firestore_targets_${n}_${t}`}class BT{constructor(t,e,i,o){this.user=t,this.batchId=e,this.state=i,this.error=o}static ar(t,e,i){const o=JSON.parse(i);let r,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(r=new Qe(o.error.code,o.error.message))),l?new BT(t,e,o.state,r):(Nr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class fw{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static ar(t,e){const i=JSON.parse(e);let o,r="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code,r&&(o=new Qe(i.error.code,i.error.message))),r?new fw(t,i.state,o):(Nr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class HT{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const i=JSON.parse(e);let o="object"==typeof i&&i.activeTargetIds instanceof Array,r=Bx();for(let l=0;o&&l<i.activeTargetIds.length;++l)o=HL(i.activeTargetIds[l]),r=r.add(i.activeTargetIds[l]);return o?new HT(t,r):(Nr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class gO{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new gO(e.clientId,e.onlineState):(Nr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class mO{constructor(){this.activeTargetIds=Bx()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class vO{constructor(t,e,i,o,r){this.window=t,this.ii=e,this.persistenceKey=i,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ni(vn),this.started=!1,this.yr=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.pr=HU(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new mO),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Me.Z)(function*(){const e=yield t.syncEngine.$i();for(const o of e){if(o===t.wr)continue;const r=t.getItem(HU(t.persistenceKey,o));if(r){const l=HT.ar(o,r);l&&(t.gr=t.gr.insert(l.clientId,l))}}t.Pr();const i=t.storage.getItem(t.vr);if(i){const o=t.br(i);o&&t.Vr(o)}for(const o of t.yr)t.mr(o);t.yr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach((i,o)=>{o.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,i){this.Dr(t,e,i),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(pO(this.persistenceKey,t));if(i){const o=fw.ar(t,i);o&&(e=o.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(pO(this.persistenceKey,t))}updateQueryState(t,e,i){this.kr(t,e,i)}handleUserChange(t,e,i){e.forEach(o=>{this.Cr(o)}),this.currentUser=t,i.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return lt("SharedClientState","READ",t,e),e}setItem(t,e){lt("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){lt("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(lt("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Me.Z)(function*(){if(e.started){if(null!==i.key)if(e.Tr.test(i.key)){if(null==i.newValue){const o=e.Or(i.key);return e.Fr(o,null)}{const o=e.Br(i.key,i.newValue);if(o)return e.Fr(o.clientId,o)}}else if(e.Er.test(i.key)){if(null!==i.newValue){const o=e.Lr(i.key,i.newValue);if(o)return e.qr(o)}}else if(e.Ar.test(i.key)){if(null!==i.newValue){const o=e.Ur(i.key,i.newValue);if(o)return e.Kr(o)}}else if(i.key===e.vr){if(null!==i.newValue){const o=e.br(i.newValue);if(o)return e.Vr(o)}}else if(i.key===e.Ir){const o=function(r){let l=Ra.ct;if(null!=r)try{const d=JSON.parse(r);Wt("number"==typeof d),l=d}catch(d){Nr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(i.newValue);o!==Ra.ct&&e.sequenceNumberHandler(o)}else if(i.key===e.Rr){const o=e.Gr(i.newValue);yield Promise.all(o.map(r=>e.syncEngine.Qr(r)))}}else e.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,i){const o=new BT(this.currentUser,t,e,i),r=VU(this.persistenceKey,this.currentUser,t);this.setItem(r,o.hr())}Cr(t){const e=VU(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:t}))}kr(t,e,i){const o=pO(this.persistenceKey,t),r=new fw(t,e,i);this.setItem(o,r.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const i=this.Or(t);return HT.ar(i,e)}Lr(t,e){const i=this.Er.exec(t),o=Number(i[1]);return BT.ar(new bo(void 0!==i[2]?i[2]:null),o,e)}Ur(t,e){const i=this.Ar.exec(t),o=Number(i[1]);return fw.ar(o,e)}br(t){return gO.ar(t)}Gr(t){return JSON.parse(t)}qr(t){var e=this;return(0,Me.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.jr(t.batchId,t.state,t.error);lt("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const i=e?this.gr.insert(t,e):this.gr.remove(t),o=this.Sr(this.gr),r=this.Sr(i),l=[],d=[];return r.forEach(f=>{o.has(f)||l.push(f)}),o.forEach(f=>{r.has(f)||d.push(f)}),this.syncEngine.Wr(l,d).then(()=>{this.gr=i})}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=Bx();return t.forEach((i,o)=>{e=e.unionWith(o.activeTargetIds)}),e}}class jU{constructor(){this.Hr=new mO,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,i){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new mO,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class dG{Yr(t){}shutdown(){}}class GU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let VT=null;function _O(){return null===VT?VT=268435456+Math.round(2147483648*Math.random()):VT++,"0x"+VT.toString(16)}const hG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fG{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const ls="WebChannelConnection";class pG extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.mo=(t.ssl?"https":"http")+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,i,o,r){const l=_O(),d=this.To(t,e);lt("RestConnection",`Sending RPC '${t}' ${l}:`,d,i);const f={};return this.Eo(f,o,r),this.Ao(t,d,f,i).then(g=>(lt("RestConnection",`Received RPC '${t}' ${l}: `,g),g),g=>{throw Tl("RestConnection",`RPC '${t}' ${l} failed with error: `,g,"url: ",d,"request:",i),g})}vo(t,e,i,o,r,l){return this.Io(t,e,i,o,r)}Eo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+g_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((o,r)=>t[r]=o),i&&i.headers.forEach((o,r)=>t[r]=o)}To(t,e){return`${this.mo}/v1/${e}:${hG[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,i,o){const r=_O();return new Promise((l,d)=>{const f=new dj;f.setWithCredentials(!0),f.listenOnce(lj.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case wx.NO_ERROR:const _=f.getResponseJson();lt(ls,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(_)),l(_);break;case wx.TIMEOUT:lt(ls,`RPC '${t}' ${r} timed out`),d(new Qe(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case wx.HTTP_ERROR:const w=f.getStatus();if(lt(ls,`RPC '${t}' ${r} failed with status:`,w,"response text:",f.getResponseText()),w>0){let C=f.getResponseJson();Array.isArray(C)&&(C=C[0]);const E=C?.error;if(E&&E.status&&E.message){const N=function(A){const R=A.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(R)>=0?R:Ie.UNKNOWN}(E.status);d(new Qe(N,E.message))}else d(new Qe(Ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Qe(Ie.UNAVAILABLE,"Connection failed."));break;default:Ft()}}finally{lt(ls,`RPC '${t}' ${r} completed.`)}});const g=JSON.stringify(o);lt(ls,`RPC '${t}' ${r} sending request:`,o),f.send(e,"POST",g,i,15)})}Ro(t,e,i){const o=_O(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=sj(),d=aj(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;void 0!==g&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.xmlHttpFactory=new uj({})),this.Eo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const _=r.join("");lt(ls,`Creating RPC '${t}' stream ${o}: ${_}`,f);const w=l.createWebChannel(_,f);let C=!1,E=!1;const N=new fG({ro:R=>{E?lt(ls,`Not sending because RPC '${t}' stream ${o} is closed:`,R):(C||(lt(ls,`Opening RPC '${t}' stream ${o} transport.`),w.open(),C=!0),lt(ls,`RPC '${t}' stream ${o} sending:`,R),w.send(R))},oo:()=>w.close()}),A=(R,F,j)=>{R.listen(F,V=>{try{j(V)}catch(W){setTimeout(()=>{throw W},0)}})};return A(w,aT.EventType.OPEN,()=>{E||lt(ls,`RPC '${t}' stream ${o} transport opened.`)}),A(w,aT.EventType.CLOSE,()=>{E||(E=!0,lt(ls,`RPC '${t}' stream ${o} transport closed`),N.wo())}),A(w,aT.EventType.ERROR,R=>{E||(E=!0,Tl(ls,`RPC '${t}' stream ${o} transport errored:`,R),N.wo(new Qe(Ie.UNAVAILABLE,"The operation could not be completed")))}),A(w,aT.EventType.MESSAGE,R=>{var F;if(!E){const j=R.data[0];Wt(!!j);const W=j.error||(null===(F=j[0])||void 0===F?void 0:F.error);if(W){lt(ls,`RPC '${t}' stream ${o} received error:`,W);const re=W.status;let ue=function(De){const tt=jr[De];if(void 0!==tt)return L2(tt)}(re),we=W.message;void 0===ue&&(ue=Ie.INTERNAL,we="Unknown error status: "+re+" with message "+W.message),E=!0,N.wo(new Qe(ue,we)),w.close()}else lt(ls,`RPC '${t}' stream ${o} received:`,j),N._o(j)}}),A(d,cj.STAT_EVENT,R=>{R.stat===NL.PROXY?lt(ls,`RPC '${t}' stream ${o} detected buffering proxy`):R.stat===NL.NOPROXY&&lt(ls,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{N.fo()},0),N}}function $U(){return typeof window<"u"?window:null}function jT(){return typeof document<"u"?document:null}function pw(n){return new E3(n,!0)}class yO{constructor(t,e,i=1e3,o=1.5,r=6e4){this.ii=t,this.timerId=e,this.Po=i,this.bo=o,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),o=Math.max(0,e-i);o>0&&lt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),t())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class zU{constructor(t,e,i,o,r,l,d,f){this.ii=t,this.$o=i,this.Oo=o,this.connection=r,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new yO(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var t=this;return(0,Me.Z)(function*(){t.Uo()&&(yield t.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(t){this.Ho(),this.stream.send(t)}zo(){var t=this;return(0,Me.Z)(function*(){if(t.Ko())return t.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(t,e){var i=this;return(0,Me.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==t?i.qo.reset():e&&e.code===Ie.RESOURCE_EXHAUSTED?(Nr(e.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):e&&e.code===Ie.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.ao(e)})()}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Fo===e&&this.Zo(i,o)},i=>{t(()=>{const o=new Qe(Ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(o)})})}Zo(t,e){const i=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{i(()=>this.tu(o))}),this.stream.onMessage(o=>{i(()=>this.onMessage(o))})}Go(){var t=this;this.state=5,this.qo.No((0,Me.Z)(function*(){t.state=0,t.start()}))}tu(t){return lt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget(()=>this.Fo===t?e():(lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gG extends zU{constructor(t,e,i,o,r,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,o,l),this.serializer=r}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function I3(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(f=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:Ft(),o=t.targetChange.targetIds||[],r=function(f,g){return f.useProto3Json?(Wt(void 0===g||"string"==typeof g),so.fromBase64String(g||"")):(Wt(void 0===g||g instanceof Uint8Array),so.fromUint8Array(g||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,d=l&&function(f){const g=void 0===f.code?Ie.UNKNOWN:L2(f.code);return new Qe(g,f.message||"")}(l);e=new j2(i,o,r,d||null)}else if("documentChange"in t){const i=t.documentChange,o=au(n,i.document.name),r=Mr(i.document.updateTime),l=i.document.createTime?Mr(i.document.createTime):qt.min(),d=new Uo({mapValue:{fields:i.document.fields}}),f=Bi.newFoundDocument(o,r,l,d);e=new ST(i.targetIds||[],i.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const i=t.documentDelete,o=au(n,i.document),r=i.readTime?Mr(i.readTime):qt.min(),l=Bi.newNoDocument(o,r);e=new ST([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in t){const i=t.documentRemove,o=au(n,i.document);e=new ST([],i.removedTargetIds||[],o,null)}else{if(!("filter"in t))return Ft();{const i=t.filter,{count:o=0,unchangedNames:r}=i,l=new _3(o,r);e=new V2(i.targetId,l)}}var f;return e}(this.serializer,t),i=function(o){if(!("targetChange"in o))return qt.min();const r=o.targetChange;return r.targetIds&&r.targetIds.length?qt.min():r.readTime?Mr(r.readTime):qt.min()}(t);return this.listener.nu(e,i)}su(t){const e={};e.database=rw(this.serializer),e.addTarget=function(o,r){let l;const d=r.target;if(l=_T(d)?{documents:Q2(o,d)}:{query:Kx(o,d)},l.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){l.resumeToken=W2(o,r.resumeToken);const f=Wx(o,r.expectedCount);null!==f&&(l.expectedCount=f)}else if(r.snapshotVersion.compareTo(qt.min())>0){l.readTime=S_(o,r.snapshotVersion.toTimestamp());const f=Wx(o,r.expectedCount);null!==f&&(l.expectedCount=f)}return l}(this.serializer,t);const i=function N3(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Wo(e)}iu(t){const e={};e.database=rw(this.serializer),e.removeTarget=t,this.Wo(e)}}class mG extends zU{constructor(t,e,i,o,r,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,o,l),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(Wt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function A3(n,t){return n&&n.length>0?(Wt(void 0!==t),n.map(e=>function(i,o){let r=Mr(i.updateTime?i.updateTime:o);return r.isEqual(qt.min())&&(r=Mr(o)),new p3(r,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Mr(t.commitTime);return this.listener.cu(i,e)}return Wt(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=rw(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>ow(this.serializer,i))};this.Wo(e)}}class vG extends class{}{constructor(t,e,i,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new Qe(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,r])=>this.connection.Io(t,e,i,o,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Qe(Ie.UNKNOWN,o.toString())})}vo(t,e,i,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,l])=>this.connection.vo(t,e,i,r,l,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Qe(Ie.UNKNOWN,r.toString())})}terminate(){this.lu=!0}}class yG{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Nr(e),this.mu=!1):lt("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class bG{constructor(t,e,i,o,r){var l=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr(d=>{i.enqueueAndForget((0,Me.Z)(function*(){var f;vf(l)&&(lt("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Me.Z)(function*(g){const _=Tt(g);_.vu.add(4),yield O_(_),_.bu.set("Unknown"),_.vu.delete(4),yield gw(_)}),function(g){return f.apply(this,arguments)})(l))}))}),this.bu=new yG(i,o)}}function gw(n){return wO.apply(this,arguments)}function wO(){return wO=(0,Me.Z)(function*(n){if(vf(n))for(const t of n.Ru)yield t(!0)}),wO.apply(this,arguments)}function O_(n){return CO.apply(this,arguments)}function CO(){return CO=(0,Me.Z)(function*(n){for(const t of n.Ru)yield t(!1)}),CO.apply(this,arguments)}function GT(n,t){const e=Tt(n);e.Au.has(t.targetId)||(e.Au.set(t.targetId,t),TO(e)?EO(e):k_(e).Ko()&&DO(e,t))}function mw(n,t){const e=Tt(n),i=k_(e);e.Au.delete(t),i.Ko()&&WU(e,t),0===e.Au.size&&(i.Ko()?i.jo():vf(e)&&e.bu.set("Unknown"))}function DO(n,t){if(n.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(qt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}k_(n).su(t)}function WU(n,t){n.Vu.qt(t),k_(n).iu(t)}function EO(n){n.Vu=new b3({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),le:t=>n.Au.get(t)||null,ue:()=>n.datastore.serializer.databaseId}),k_(n).start(),n.bu.gu()}function TO(n){return vf(n)&&!k_(n).Uo()&&n.Au.size>0}function vf(n){return 0===Tt(n).vu.size}function qU(n){n.Vu=void 0}function wG(n){return SO.apply(this,arguments)}function SO(){return SO=(0,Me.Z)(function*(n){n.Au.forEach((t,e)=>{DO(n,t)})}),SO.apply(this,arguments)}function CG(n,t){return IO.apply(this,arguments)}function IO(){return IO=(0,Me.Z)(function*(n,t){qU(n),TO(n)?(n.bu.Iu(t),EO(n)):n.bu.set("Unknown")}),IO.apply(this,arguments)}function DG(n,t,e){return AO.apply(this,arguments)}function AO(){return AO=(0,Me.Z)(function*(n,t,e){if(n.bu.set("Online"),t instanceof j2&&2===t.state&&t.cause)try{yield(i=(0,Me.Z)(function*(o,r){const l=r.cause;for(const d of r.targetIds)o.Au.has(d)&&(yield o.remoteSyncer.rejectListen(d,l),o.Au.delete(d),o.Vu.removeTarget(d))}),function(o,r){return i.apply(this,arguments)})(n,t)}catch(i){lt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield $T(n,i)}else if(t instanceof ST?n.Vu.Ht(t):t instanceof V2?n.Vu.ne(t):n.Vu.Xt(t),!e.isEqual(qt.min()))try{const i=yield PU(n.localStore);e.compareTo(i)>=0&&(yield function(o,r){const l=o.Vu.ce(r);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Au.get(f);g&&o.Au.set(f,g.withResumeToken(d.resumeToken,r))}}),l.targetMismatches.forEach((d,f)=>{const g=o.Au.get(d);if(!g)return;o.Au.set(d,g.withResumeToken(so.EMPTY_BYTE_STRING,g.snapshotVersion)),WU(o,d);const _=new Dd(g.target,d,f,g.sequenceNumber);DO(o,_)}),o.remoteSyncer.applyRemoteEvent(l)}(n,e))}catch(i){lt("RemoteStore","Failed to raise snapshot:",i),yield $T(n,i)}var i}),AO.apply(this,arguments)}function $T(n,t,e){return NO.apply(this,arguments)}function NO(){return NO=(0,Me.Z)(function*(n,t,e){if(!rf(t))throw t;n.vu.add(1),yield O_(n),n.bu.set("Offline"),e||(e=()=>PU(n.localStore)),n.asyncQueue.enqueueRetryable((0,Me.Z)(function*(){lt("RemoteStore","Retrying IndexedDB access"),yield e(),n.vu.delete(1),yield gw(n)}))}),NO.apply(this,arguments)}function ZU(n,t){return t().catch(e=>$T(n,e,t))}function R_(n){return MO.apply(this,arguments)}function MO(){return MO=(0,Me.Z)(function*(n){const t=Tt(n),e=_f(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;EG(t);)try{const o=yield lG(t.localStore,i);if(null===o){0===t.Eu.length&&e.jo();break}i=o.batchId,TG(t,o)}catch(o){yield $T(t,o)}YU(t)&&KU(t)}),MO.apply(this,arguments)}function EG(n){return vf(n)&&n.Eu.length<10}function TG(n,t){n.Eu.push(t);const e=_f(n);e.Ko()&&e.ou&&e.uu(t.mutations)}function YU(n){return vf(n)&&!_f(n).Uo()&&n.Eu.length>0}function KU(n){_f(n).start()}function SG(n){return xO.apply(this,arguments)}function xO(){return xO=(0,Me.Z)(function*(n){_f(n).hu()}),xO.apply(this,arguments)}function IG(n){return OO.apply(this,arguments)}function OO(){return OO=(0,Me.Z)(function*(n){const t=_f(n);for(const e of n.Eu)t.uu(e.mutations)}),OO.apply(this,arguments)}function AG(n,t,e){return RO.apply(this,arguments)}function RO(){return RO=(0,Me.Z)(function*(n,t,e){const i=n.Eu.shift(),o=jx.from(i,t,e);yield ZU(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield R_(n)}),RO.apply(this,arguments)}function NG(n,t){return kO.apply(this,arguments)}function kO(){return kO=(0,Me.Z)(function*(n,t){var e;t&&_f(n).ou&&(yield(e=(0,Me.Z)(function*(i,o){if(F2(r=o.code)&&r!==Ie.ABORTED){const l=i.Eu.shift();_f(i).Qo(),yield ZU(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield R_(i)}var r}),function(i,o){return e.apply(this,arguments)})(n,t)),YU(n)&&KU(n)}),kO.apply(this,arguments)}function JU(n,t){return PO.apply(this,arguments)}function PO(){return PO=(0,Me.Z)(function*(n,t){const e=Tt(n);e.asyncQueue.verifyOperationInProgress(),lt("RemoteStore","RemoteStore received new credentials");const i=vf(e);e.vu.add(3),yield O_(e),i&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.vu.delete(3),yield gw(e)}),PO.apply(this,arguments)}function FO(n,t){return LO.apply(this,arguments)}function LO(){return LO=(0,Me.Z)(function*(n,t){const e=Tt(n);t?(e.vu.delete(2),yield gw(e)):t||(e.vu.add(2),yield O_(e),e.bu.set("Unknown"))}),LO.apply(this,arguments)}function k_(n){return n.Su||(n.Su=function(t,e,i){const o=Tt(t);return o.fu(),new gG(e,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{uo:wG.bind(null,n),ao:CG.bind(null,n),nu:DG.bind(null,n)}),n.Ru.push(function(){var t=(0,Me.Z)(function*(e){e?(n.Su.Qo(),TO(n)?EO(n):n.bu.set("Unknown")):(yield n.Su.stop(),qU(n))});return function(e){return t.apply(this,arguments)}}())),n.Su}function _f(n){return n.Du||(n.Du=function(t,e,i){const o=Tt(t);return o.fu(),new mG(e,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{uo:SG.bind(null,n),ao:NG.bind(null,n),au:IG.bind(null,n),cu:AG.bind(null,n)}),n.Ru.push(function(){var t=(0,Me.Z)(function*(e){e?(n.Du.Qo(),yield R_(n)):(yield n.Du.stop(),n.Eu.length>0&&(lt("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Du}class UO{constructor(t,e,i,o,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=o,this.removalCallback=r,this.deferred=new oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(t,e,i,o,r){const l=Date.now()+i,d=new UO(t,e,l,o,r);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qe(Ie.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function P_(n,t){if(Nr("AsyncQueue",`${t}: ${n}`),rf(n))return new Qe(Ie.UNAVAILABLE,`${t}: ${n}`);throw n}class F_{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Ct.comparator(e.key,i.key):(e,i)=>Ct.comparator(e.key,i.key),this.keyedMap=Kb(),this.sortedSet=new Ni(this.comparator)}static emptySet(t){return new F_(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof F_)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,r=i.getNext().key;if(!o.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new F_;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class QU{constructor(){this.Cu=new Ni(Ct.comparator)}track(t){const e=t.doc.key,i=this.Cu.get(e);i?0!==t.type&&3===i.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==i.type?this.Cu=this.Cu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Cu=this.Cu.remove(e):1===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):Ft():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal((e,i)=>{t.push(i)}),t}}class L_{constructor(t,e,i,o,r,l,d,f,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=r,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,o,r){const l=[];return e.forEach(d=>{l.push({type:0,doc:d})}),new L_(t,e,F_.emptySet(e),l,i,o,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==i[o].type||!e[o].doc.isEqual(i[o].doc))return!1;return!0}}class MG{constructor(){this.Nu=void 0,this.listeners=[]}}class xG{constructor(){this.queries=new wd(t=>v2(t),Zb),this.onlineState="Unknown",this.ku=new Set}}function BO(n,t){return HO.apply(this,arguments)}function HO(){return HO=(0,Me.Z)(function*(n,t){const e=Tt(n),i=t.query;let o=!1,r=e.queries.get(i);if(r||(o=!0,r=new MG),o)try{r.Nu=yield e.onListen(i)}catch(l){const d=P_(l,`Initialization of query '${Ux(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,r),r.listeners.push(t),t.Mu(e.onlineState),r.Nu&&t.$u(r.Nu)&&GO(e)}),HO.apply(this,arguments)}function VO(n,t){return jO.apply(this,arguments)}function jO(){return jO=(0,Me.Z)(function*(n,t){const e=Tt(n),i=t.query;let o=!1;const r=e.queries.get(i);if(r){const l=r.listeners.indexOf(t);l>=0&&(r.listeners.splice(l,1),o=0===r.listeners.length)}if(o)return e.queries.delete(i),e.onUnlisten(i)}),jO.apply(this,arguments)}function OG(n,t){const e=Tt(n);let i=!1;for(const o of t){const l=e.queries.get(o.query);if(l){for(const d of l.listeners)d.$u(o)&&(i=!0);l.Nu=o}}i&&GO(e)}function RG(n,t,e){const i=Tt(n),o=i.queries.get(t);if(o)for(const r of o.listeners)r.onError(e);i.queries.delete(t)}function GO(n){n.ku.forEach(t=>{t.next()})}class $O{constructor(t,e,i){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(t){if(!this.options.includeMetadataChanges){const i=[];for(const o of t.docChanges)3!==o.type&&i.push(o);t=new L_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){return!t.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(t){t=L_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class kG{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class XU{constructor(t){this.serializer=t}rr(t){return au(this.serializer,t)}ur(t){return t.metadata.exists?J2(this.serializer,t.document,!1):Bi.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return Mr(t)}}class PG{constructor(t,e,i){this.ju=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eB(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const i=Yn.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,i=new XU(this.serializer);for(const o of t)if(o.metadata.queries){const r=i.rr(o.metadata.name);for(const l of o.metadata.queries){const d=(e.get(l)||En()).add(r);e.set(l,d)}}return e}complete(){var t=this;return(0,Me.Z)(function*(){const e=yield function cG(n,t,e,i){return hO.apply(this,arguments)}(t.localStore,new XU(t.serializer),t.documents,t.ju.id),i=t.Wu(t.documents);for(const o of t.queries)yield uG(t.localStore,o,i.get(o.name));return t.progress.taskState="Success",{progress:t.progress,Hu:t.collectionGroups,Ju:e}})()}}function eB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class tB{constructor(t){this.key=t}}class nB{constructor(t){this.key=t}}class iB{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=En(),this.mutatedKeys=En(),this.tc=y2(t),this.ec=new F_(this.tc)}get nc(){return this.Yu}sc(t,e){const i=e?e.ic:new QU,o=e?e.ec:this.ec;let r=e?e.mutatedKeys:this.mutatedKeys,l=o,d=!1;const f="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,g="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((_,w)=>{const C=o.get(_),E=Yb(this.query,w)?w:null,N=!!C&&this.mutatedKeys.has(C.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;C&&E?C.data.isEqual(E.data)?N!==A&&(i.track({type:3,doc:E}),R=!0):this.rc(C,E)||(i.track({type:2,doc:E}),R=!0,(f&&this.tc(E,f)>0||g&&this.tc(E,g)<0)&&(d=!0)):!C&&E?(i.track({type:0,doc:E}),R=!0):C&&!E&&(i.track({type:1,doc:C}),R=!0,(f||g)&&(d=!0)),R&&(E?(l=l.add(E),r=A?r.add(_):r.delete(_)):(l=l.delete(_),r=r.delete(_)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const _="F"===this.query.limitType?l.last():l.first();l=l.delete(_.key),r=r.delete(_.key),i.track({type:1,doc:_})}return{ec:l,ic:i,zi:d,mutatedKeys:r}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const o=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const r=t.ic.xu();r.sort((g,_)=>function(w,C){const E=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft()}};return E(w)-E(C)}(g.type,_.type)||this.tc(g.doc,_.doc)),this.oc(i);const l=e?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==r.length||f?{snapshot:new L_(this.query,t.ec,o,r,t.mutatedKeys,0===d,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new QU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=En(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const e=[];return t.forEach(i=>{this.Zu.has(i)||e.push(new nB(i))}),this.Zu.forEach(i=>{t.has(i)||e.push(new tB(i))}),e}hc(t){this.Yu=t.ir,this.Zu=En();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return L_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class FG{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class LG{constructor(t){this.key=t,this.fc=!1}}class UG{constructor(t,e,i,o,r,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=o,this.currentUser=r,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new wd(d=>v2(d),Zb),this._c=new Map,this.mc=new Set,this.gc=new Ni(Ct.comparator),this.yc=new Map,this.Ic=new rO,this.Tc={},this.Ec=new Map,this.Ac=Cg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function BG(n,t){return zO.apply(this,arguments)}function zO(){return zO=(0,Me.Z)(function*(n,t){const e=pR(n);let i,o;const r=e.wc.get(t);if(r)i=r.targetId,e.sharedClientState.addLocalQueryTarget(i),o=r.view.lc();else{const l=yield M_(e.localStore,Os(t)),d=e.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,o=yield WO(e,t,i,"current"===d,l.resumeToken),e.isPrimaryClient&&GT(e.remoteStore,l)}return o}),zO.apply(this,arguments)}function WO(n,t,e,i,o){return qO.apply(this,arguments)}function qO(){return qO=(0,Me.Z)(function*(n,t,e,i,o){n.Rc=(w,C,E)=>{return(N=(0,Me.Z)(function*(A,R,F,j){let V=R.view.sc(F);V.zi&&(V=yield UT(A.localStore,R.query,!1).then(({documents:ue})=>R.view.sc(ue,V)));const W=j&&j.targetChanges.get(R.targetId),re=R.view.applyChanges(V,A.isPrimaryClient,W);return iR(A,R.targetId,re.cc),re.snapshot}),function(A,R,F,j){return N.apply(this,arguments)})(n,w,C,E);var N};const r=yield UT(n.localStore,t,!0),l=new iB(t,r.ir),d=l.sc(r.documents),f=nw.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,o),g=l.applyChanges(d,n.isPrimaryClient,f);iR(n,e,g.cc);const _=new FG(t,e,l);return n.wc.set(t,_),n._c.has(e)?n._c.get(e).push(t):n._c.set(e,[t]),g.snapshot}),qO.apply(this,arguments)}function HG(n,t){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,Me.Z)(function*(n,t){const e=Tt(n),i=e.wc.get(t),o=e._c.get(i.targetId);if(o.length>1)return e._c.set(i.targetId,o.filter(r=>!Zb(r,t))),void e.wc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield x_(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),mw(e.remoteStore,i.targetId),U_(e,i.targetId)}).catch(nf))):(U_(e,i.targetId),yield x_(e.localStore,i.targetId,!0))}),ZO.apply(this,arguments)}function YO(){return YO=(0,Me.Z)(function*(n,t,e){const i=gR(n);try{const o=yield function(r,l){const d=Tt(r),f=Qi.now(),g=l.reduce((C,E)=>C.add(E.key),En());let _,w;return d.persistence.runTransaction("Locally write mutations","readwrite",C=>{let E=aa(),N=En();return d.Zi.getEntries(C,g).next(A=>{E=A,E.forEach((R,F)=>{F.isValidDocument()||(N=N.add(R))})}).next(()=>d.localDocuments.getOverlayedDocuments(C,E)).next(A=>{_=A;const R=[];for(const F of l){const j=m3(F,_.get(F.key).overlayedDocument);null!=j&&R.push(new Cd(F.key,j,i2(j.value.mapValue),Xi.exists(!0)))}return d.mutationQueue.addMutationBatch(C,f,R,l)}).next(A=>{w=A;const R=A.applyToLocalDocumentSet(_,N);return d.documentOverlayCache.saveOverlays(C,A.batchId,R)})}).then(()=>({batchId:w.batchId,changes:w2(_)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(o.batchId),function(r,l,d){let f=r.Tc[r.currentUser.toKey()];f||(f=new Ni(vn)),f=f.insert(l,d),r.Tc[r.currentUser.toKey()]=f}(i,o.batchId,e),yield Ed(i,o.changes),yield R_(i.remoteStore)}catch(o){const r=P_(o,"Failed to persist write");e.reject(r)}}),YO.apply(this,arguments)}function rB(n,t){return KO.apply(this,arguments)}function KO(){return KO=(0,Me.Z)(function*(n,t){const e=Tt(n);try{const i=yield function aG(n,t){const e=Tt(n),i=t.snapshotVersion;let o=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const l=e.Zi.newChangeBuffer({trackRemovals:!0});o=e.Ji;const d=[];t.targetChanges.forEach((_,w)=>{const C=o.get(w);if(!C)return;d.push(e.Bs.removeMatchingKeys(r,_.removedDocuments,w).next(()=>e.Bs.addMatchingKeys(r,_.addedDocuments,w)));let E=C.withSequenceNumber(r.currentSequenceNumber);var N,A,R;null!==t.targetMismatches.get(w)?E=E.withResumeToken(so.EMPTY_BYTE_STRING,qt.min()).withLastLimboFreeSnapshotVersion(qt.min()):_.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(_.resumeToken,i)),o=o.insert(w,E),A=E,R=_,(0===(N=C).resumeToken.approximateByteSize()||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0)&&d.push(e.Bs.updateTargetData(r,E))});let f=aa(),g=En();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(r,_))}),d.push(FU(r,l,t.documentUpdates).next(_=>{f=_.nr,g=_.sr})),!i.isEqual(qt.min())){const _=e.Bs.getLastRemoteSnapshotVersion(r).next(w=>e.Bs.setTargetsMetadata(r,r.currentSequenceNumber,i));d.push(_)}return be.waitFor(d).next(()=>l.apply(r)).next(()=>e.localDocuments.getLocalViewOfDocuments(r,f,g)).next(()=>f)}).then(r=>(e.Ji=o,r))}(e.localStore,t);t.targetChanges.forEach((o,r)=>{const l=e.yc.get(r);l&&(Wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?Wt(l.fc):o.removedDocuments.size>0&&(Wt(l.fc),l.fc=!1))}),yield Ed(e,i,t)}catch(i){yield nf(i)}}),KO.apply(this,arguments)}function oB(n,t,e){const i=Tt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const o=[];i.wc.forEach((r,l)=>{const d=l.view.Mu(t);d.snapshot&&o.push(d.snapshot)}),function(r,l){const d=Tt(r);d.onlineState=l;let f=!1;d.queries.forEach((g,_)=>{for(const w of _.listeners)w.Mu(l)&&(f=!0)}),f&&GO(d)}(i.eventManager,t),o.length&&i.dc.nu(o),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function jG(n,t,e){return JO.apply(this,arguments)}function JO(){return JO=(0,Me.Z)(function*(n,t,e){const i=Tt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const o=i.yc.get(t),r=o&&o.key;if(r){let l=new Ni(Ct.comparator);l=l.insert(r,Bi.newNoDocument(r,qt.min()));const d=En().add(r),f=new tw(qt.min(),new Map,new Ni(vn),l,d);yield rB(i,f),i.gc=i.gc.remove(r),i.yc.delete(t),rR(i)}else yield x_(i.localStore,t,!1).then(()=>U_(i,t,e)).catch(nf)}),JO.apply(this,arguments)}function GG(n,t){return QO.apply(this,arguments)}function QO(){return QO=(0,Me.Z)(function*(n,t){const e=Tt(n),i=t.batch.batchId;try{const o=yield function sG(n,t){const e=Tt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=t.batch.keys(),r=e.Zi.newChangeBuffer({trackRemovals:!0});return function(l,d,f,g){const _=f.batch,w=_.keys();let C=be.resolve();return w.forEach(E=>{C=C.next(()=>g.getEntry(d,E)).next(N=>{const A=f.docVersions.get(E);Wt(null!==A),N.version.compareTo(A)<0&&(_.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),g.addEntry(N)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(d,_))}(e,i,t,r).next(()=>r.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,o,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let d=En();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,o))})}(e.localStore,t);nR(e,i,null),tR(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Ed(e,o)}catch(o){yield nf(o)}}),QO.apply(this,arguments)}function $G(n,t,e){return XO.apply(this,arguments)}function XO(){return XO=(0,Me.Z)(function*(n,t,e){const i=Tt(n);try{const o=yield function(r,l){const d=Tt(r);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,l).next(_=>(Wt(null!==_),g=_.keys(),d.mutationQueue.removeMutationBatch(f,_))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(i.localStore,t);nR(i,t,e),tR(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Ed(i,o)}catch(o){yield nf(o)}}),XO.apply(this,arguments)}function eR(){return eR=(0,Me.Z)(function*(n,t){const e=Tt(n);vf(e.remoteStore)||lt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(r){const l=Tt(r);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const o=e.Ec.get(i)||[];o.push(t),e.Ec.set(i,o)}catch(i){const o=P_(i,"Initialization of waitForPendingWrites() operation failed");t.reject(o)}}),eR.apply(this,arguments)}function tR(n,t){(n.Ec.get(t)||[]).forEach(e=>{e.resolve()}),n.Ec.delete(t)}function nR(n,t,e){const i=Tt(n);let o=i.Tc[i.currentUser.toKey()];if(o){const r=o.get(t);r&&(e?r.reject(e):r.resolve(),o=o.remove(t)),i.Tc[i.currentUser.toKey()]=o}}function U_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n._c.get(t))n.wc.delete(i),e&&n.dc.Pc(i,e);n._c.delete(t),n.isPrimaryClient&&n.Ic.Is(t).forEach(i=>{n.Ic.containsKey(i)||sB(n,i)})}function sB(n,t){n.mc.delete(t.path.canonicalString());const e=n.gc.get(t);null!==e&&(mw(n.remoteStore,e),n.gc=n.gc.remove(t),n.yc.delete(e),rR(n))}function iR(n,t,e){for(const i of e)i instanceof tB?(n.Ic.addReference(i.key,t),WG(n,i)):i instanceof nB?(lt("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,t),n.Ic.containsKey(i.key)||sB(n,i.key)):Ft()}function WG(n,t){const e=t.key,i=e.path.canonicalString();n.gc.get(e)||n.mc.has(i)||(lt("SyncEngine","New document in limbo: "+e),n.mc.add(i),rR(n))}function rR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const t=n.mc.values().next().value;n.mc.delete(t);const e=new Ct(Yn.fromString(t)),i=n.Ac.next();n.yc.set(i,new LG(e)),n.gc=n.gc.insert(e,i),GT(n.remoteStore,new Dd(Os(w_(e.path)),i,"TargetPurposeLimboResolution",Ra.ct))}}function Ed(n,t,e){return oR.apply(this,arguments)}function oR(){return oR=(0,Me.Z)(function*(n,t,e){const i=Tt(n),o=[],r=[],l=[];var d;i.wc.isEmpty()||(i.wc.forEach((d,f)=>{l.push(i.Rc(f,t,e).then(g=>{if((g||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,g?.fromCache?"not-current":"current"),g){o.push(g);const _=cO.Li(f.targetId,g);r.push(_)}}))}),yield Promise.all(l),i.dc.nu(o),yield(d=(0,Me.Z)(function*(f,g){const _=Tt(f);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>be.forEach(g,C=>be.forEach(C.Fi,E=>_.persistence.referenceDelegate.addReference(w,C.targetId,E)).next(()=>be.forEach(C.Bi,E=>_.persistence.referenceDelegate.removeReference(w,C.targetId,E)))))}catch(w){if(!rf(w))throw w;lt("LocalStore","Failed to update sequence numbers: "+w)}for(const w of g){const C=w.targetId;if(!w.fromCache){const E=_.Ji.get(C),A=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);_.Ji=_.Ji.insert(C,A)}}}),function(f,g){return d.apply(this,arguments)})(i.localStore,r))}),oR.apply(this,arguments)}function qG(n,t){return sR.apply(this,arguments)}function sR(){return sR=(0,Me.Z)(function*(n,t){const e=Tt(n);if(!e.currentUser.isEqual(t)){lt("SyncEngine","User change. New user:",t.toKey());const i=yield kU(e.localStore,t);e.currentUser=t,(o=e).Ec.forEach(l=>{l.forEach(d=>{d.reject(new Qe(Ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Ed(e,i.er)}var o}),sR.apply(this,arguments)}function ZG(n,t){const e=Tt(n),i=e.yc.get(t);if(i&&i.fc)return En().add(i.key);{let o=En();const r=e._c.get(t);if(!r)return o;for(const l of r){const d=e.wc.get(l);o=o.unionWith(d.view.nc)}return o}}function YG(n,t){return aR.apply(this,arguments)}function aR(){return aR=(0,Me.Z)(function*(n,t){const e=Tt(n),i=yield UT(e.localStore,t.query,!0),o=t.view.hc(i);return e.isPrimaryClient&&iR(e,t.targetId,o.cc),o}),aR.apply(this,arguments)}function KG(n,t){return lR.apply(this,arguments)}function lR(){return lR=(0,Me.Z)(function*(n,t){const e=Tt(n);return UU(e.localStore,t).then(i=>Ed(e,i))}),lR.apply(this,arguments)}function JG(n,t,e,i){return cR.apply(this,arguments)}function cR(){return cR=(0,Me.Z)(function*(n,t,e,i){const o=Tt(n),r=yield function(l,d){const f=Tt(l),g=Tt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",_=>g.Sn(_,d).next(w=>w?f.localDocuments.getDocuments(_,w):be.resolve(null)))}(o.localStore,t);var d;null!==r?("pending"===e?yield R_(o.remoteStore):"acknowledged"===e||"rejected"===e?(nR(o,t,i||null),tR(o,t),d=t,Tt(Tt(o.localStore).mutationQueue).Cn(d)):Ft(),yield Ed(o,r)):lt("SyncEngine","Cannot apply mutation batch with id: "+t)}),cR.apply(this,arguments)}function uR(){return uR=(0,Me.Z)(function*(n,t){const e=Tt(n);if(pR(e),gR(e),!0===t&&!0!==e.vc){const i=e.sharedClientState.getAllActiveQueryTargets(),o=yield aB(e,i.toArray());e.vc=!0,yield FO(e.remoteStore,!0);for(const r of o)GT(e.remoteStore,r)}else if(!1===t&&!1!==e.vc){const i=[];let o=Promise.resolve();e._c.forEach((r,l)=>{e.sharedClientState.isLocalQueryTarget(l)?i.push(l):o=o.then(()=>(U_(e,l),x_(e.localStore,l,!0))),mw(e.remoteStore,l)}),yield o,yield aB(e,i),function(r){const l=Tt(r);l.yc.forEach((d,f)=>{mw(l.remoteStore,f)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Ni(Ct.comparator)}(e),e.vc=!1,yield FO(e.remoteStore,!1)}}),uR.apply(this,arguments)}function aB(n,t,e){return dR.apply(this,arguments)}function dR(){return dR=(0,Me.Z)(function*(n,t,e){const i=Tt(n),o=[],r=[];for(const l of t){let d;const f=i._c.get(l);if(f&&0!==f.length){d=yield M_(i.localStore,Os(f[0]));for(const g of f){const _=i.wc.get(g),w=yield YG(i,_);w.snapshot&&r.push(w.snapshot)}}else{const g=yield LU(i.localStore,l);d=yield M_(i.localStore,g),yield WO(i,lB(g),l,!1,d.resumeToken)}o.push(d)}return i.dc.nu(r),o}),dR.apply(this,arguments)}function lB(n){return g2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function XG(n){const t=Tt(n);return Tt(Tt(t.localStore).persistence).$i()}function e$(n,t,e,i){return hR.apply(this,arguments)}function hR(){return hR=(0,Me.Z)(function*(n,t,e,i){const o=Tt(n);if(o.vc)return void lt("SyncEngine","Ignoring unexpected query state notification.");const r=o._c.get(t);if(r&&r.length>0)switch(e){case"current":case"not-current":{const l=yield UU(o.localStore,_2(r[0])),d=tw.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,so.EMPTY_BYTE_STRING);yield Ed(o,l,d);break}case"rejected":yield x_(o.localStore,t,!0),U_(o,t,i);break;default:Ft()}}),hR.apply(this,arguments)}function t$(n,t,e){return fR.apply(this,arguments)}function fR(){return fR=(0,Me.Z)(function*(n,t,e){const i=pR(n);if(i.vc){for(const o of t){if(i._c.has(o)){lt("SyncEngine","Adding an already active target "+o);continue}const r=yield LU(i.localStore,o),l=yield M_(i.localStore,r);yield WO(i,lB(r),l.targetId,!1,l.resumeToken),GT(i.remoteStore,l)}for(const o of e)i._c.has(o)&&(yield x_(i.localStore,o,!1).then(()=>{mw(i.remoteStore,o),U_(i,o)}).catch(nf))}}),fR.apply(this,arguments)}function pR(n){const t=Tt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=rB.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZG.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jG.bind(null,t),t.dc.nu=OG.bind(null,t.eventManager),t.dc.Pc=RG.bind(null,t.eventManager),t}function gR(n){const t=Tt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=GG.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$G.bind(null,t),t}class vw{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Me.Z)(function*(){e.serializer=pw(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return RU(this.persistence,new OU,t.initialUser,this.serializer)}createPersistence(t){return new oO(PT.zs,this.serializer)}createSharedClientState(t){return new jU}terminate(){var t=this;return(0,Me.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class mR extends vw{constructor(t,e,i){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Me.Z)(function*(){yield e().call(i,t),yield i.Vc.initialize(i,t),yield gR(i.Vc.syncEngine),yield R_(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return RU(this.persistence,new OU,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new DU(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new Aj(e,this.persistence);return new Ij(t.asyncQueue,i)}createPersistence(t){const e=lO(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?as.withCacheSize(this.cacheSizeBytes):as.DEFAULT;return new aO(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,$U(),jT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new jU}}class cB extends mR{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Me.Z)(function*(){yield e().call(i,t);const o=i.Vc.syncEngine;i.sharedClientState instanceof vO&&(i.sharedClientState.syncEngine={jr:JG.bind(null,o),zr:e$.bind(null,o),Wr:t$.bind(null,o),$i:XG.bind(null,o),Qr:KG.bind(null,o)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var r=(0,Me.Z)(function*(l){yield function QG(n,t){return uR.apply(this,arguments)}(i.Vc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return r.apply(this,arguments)}}())})()}createSharedClientState(t){const e=$U();if(!vO.D(e))throw new Qe(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=lO(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new vO(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class B_{initialize(t,e){var i=this;return(0,Me.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>oB(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=qG.bind(null,i.syncEngine),yield FO(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new xG}createDatastore(t){const e=pw(t.databaseInfo.databaseId),i=new pG(t.databaseInfo);return new vG(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,o=t.asyncQueue,r=d=>oB(this.syncEngine,d,0),l=GU.D()?new GU:new dG,new bG(e,i,o,r,l);var e,i,o,r,l}createSyncEngine(t,e){return function(i,o,r,l,d,f,g){const _=new UG(i,o,r,l,d,f);return g&&(_.vc=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Me.Z)(function*(e){const i=Tt(e);lt("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield O_(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function uB(n,t=10240){let e=0;return{read:()=>(0,Me.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class zT{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):Nr("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class r${constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new oo,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var t=this;return(0,Me.Z)(function*(){return t.metadata.promise})()}bc(){var t=this;return(0,Me.Z)(function*(){return yield t.getMetadata(),t.Nc()})()}Nc(){var t=this;return(0,Me.Z)(function*(){const e=yield t.kc();if(null===e)return null;const i=t.xc.decode(e),o=Number(i);isNaN(o)&&t.Mc(`length string (${i}) is not valid number`);const r=yield t.$c(o);return new kG(JSON.parse(r),e.length+o)})()}Oc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}kc(){var t=this;return(0,Me.Z)(function*(){for(;t.Oc()<0&&!(yield t.Fc()););if(0===t.buffer.length)return null;const e=t.Oc();e<0&&t.Mc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}$c(t){var e=this;return(0,Me.Z)(function*(){for(;e.buffer.length<t;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const i=e.xc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}Fc(){var t=this;return(0,Me.Z)(function*(){const e=yield t.Cc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class o${constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Me.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Qe(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(o=(0,Me.Z)(function*(r,l){const d=Tt(r),f=rw(d.serializer)+"/documents",g={documents:l.map(E=>iw(d.serializer,E))},_=yield d.vo("BatchGetDocuments",f,g,l.length),w=new Map;_.forEach(E=>{const N=function S3(n,t){return"found"in t?function(e,i){Wt(!!i.found);const o=au(e,i.found.name),r=Mr(i.found.updateTime),l=i.found.createTime?Mr(i.found.createTime):qt.min(),d=new Uo({mapValue:{fields:i.found.fields}});return Bi.newFoundDocument(o,r,l,d)}(n,t):"missing"in t?function(e,i){Wt(!!i.missing),Wt(!!i.readTime);const o=au(e,i.missing),r=Mr(i.readTime);return Bi.newNoDocument(o,r)}(n,t):Ft()}(d.serializer,E);w.set(N.key.toString(),N)});const C=[];return l.forEach(E=>{const N=w.get(E.toString());Wt(!!N),C.push(N)}),C}),function(r,l){return o.apply(this,arguments)})(e.datastore,t);var o;return i.forEach(o=>e.recordVersion(o)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new T_(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Me.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,o)=>{const r=Ct.fromPath(o);t.mutations.push(new Hx(r,t.precondition(r)))}),yield(i=(0,Me.Z)(function*(o,r){const l=Tt(o),d=rw(l.serializer)+"/documents",f={writes:r.map(g=>ow(l.serializer,g))};yield l.Io("Commit",d,f)}),function(o,r){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ft();e=qt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Qe(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(qt.min())?Xi.exists(!1):Xi.updateTime(e):Xi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(qt.min()))throw new Qe(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xi.updateTime(e)}return Xi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class s${constructor(t,e,i,o,r){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=o,this.deferred=r,this.Bc=i.maxAttempts,this.qo=new yO(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var t=this;this.qo.No((0,Me.Z)(function*(){const e=new o$(t.datastore),i=t.qc(e);i&&i.then(o=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(o)}).catch(r=>{t.Uc(r)}))}).catch(o=>{t.Uc(o)})}))}qc(t){try{const e=this.updateFunction(t);return!Vb(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!F2(e)}return!1}}class a${constructor(t,e,i,o){var r=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=o,this.user=bo.UNAUTHENTICATED,this.clientId=RL.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,Me.Z)(function*(d){lt("FirestoreClient","Received user=",d.uid),yield r.authCredentialListener(d),r.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(lt("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var t=this;return(0,Me.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qe(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const o=P_(i,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}function WT(n,t){return vR.apply(this,arguments)}function vR(){return vR=(0,Me.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),lt("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var o=(0,Me.Z)(function*(r){i.isEqual(r)||(yield kU(t.localStore,r),i=r)});return function(r){return o.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),vR.apply(this,arguments)}function _R(n,t){return yR.apply(this,arguments)}function yR(){return yR=(0,Me.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield bR(n);lt("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(o=>JU(t.remoteStore,o)),n.setAppCheckTokenChangeListener((o,r)=>JU(t.remoteStore,r)),n._onlineComponents=t}),yR.apply(this,arguments)}function dB(n){return"FirebaseError"===n.name?n.code===Ie.FAILED_PRECONDITION||n.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function bR(n){return wR.apply(this,arguments)}function wR(){return wR=(0,Me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){lt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield WT(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!dB(e))throw e;Tl("Error using user provided cache. Falling back to memory cache: "+e),yield WT(n,new vw)}}else lt("FirestoreClient","Using default OfflineComponentProvider"),yield WT(n,new vw);return n._offlineComponents}),wR.apply(this,arguments)}function qT(n){return CR.apply(this,arguments)}function CR(){return CR=(0,Me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(lt("FirestoreClient","Using user provided OnlineComponentProvider"),yield _R(n,n._uninitializedComponentsProvider._online)):(lt("FirestoreClient","Using default OnlineComponentProvider"),yield _R(n,new B_))),n._onlineComponents}),CR.apply(this,arguments)}function hB(n){return bR(n).then(t=>t.persistence)}function ZT(n){return bR(n).then(t=>t.localStore)}function fB(n){return qT(n).then(t=>t.remoteStore)}function DR(n){return qT(n).then(t=>t.syncEngine)}function H_(n){return ER.apply(this,arguments)}function ER(){return ER=(0,Me.Z)(function*(n){const t=yield qT(n),e=t.eventManager;return e.onListen=BG.bind(null,t.syncEngine),e.onUnlisten=HG.bind(null,t.syncEngine),e}),ER.apply(this,arguments)}function gB(n,t,e={}){const i=new oo;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(o,r,l,d,f){const g=new zT({next:w=>{r.enqueueAndForget(()=>VO(o,_));const C=w.docs.has(l);!C&&w.fromCache?f.reject(new Qe(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&d&&"server"===d.source?f.reject(new Qe(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),_=new $O(w_(l.path),g,{includeMetadataChanges:!0,Ku:!0});return BO(o,_)}(yield H_(n),n.asyncQueue,t,e,i)})),i.promise}function mB(n,t,e={}){const i=new oo;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(o,r,l,d,f){const g=new zT({next:w=>{r.enqueueAndForget(()=>VO(o,_)),w.fromCache&&"server"===d.source?f.reject(new Qe(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),_=new $O(l,g,{includeMetadataChanges:!0,Ku:!0});return BO(o,_)}(yield H_(n),n.asyncQueue,t,e,i)})),i.promise}function vB(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const _B=new Map;function TR(n,t,e){if(!e)throw new Qe(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function yB(n,t,e,i){if(!0===t&&!0===i)throw new Qe(Ie.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function bB(n){if(!Ct.isDocumentKey(n))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wB(n){if(Ct.isDocumentKey(n))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":Ft()}function Hn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Qe(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=YT(n);throw new Qe(Ie.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function CB(n,t){if(t<=0)throw new Qe(Ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class DB{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Qe(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qe(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}yB("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vB(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class _w{constructor(t,e,i,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qe(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Qe(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DB(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new gj;switch(e.type){case"firstParty":return new yj(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Qe(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=_B.get(t);e&&(lt("ComponentProvider","Removing Datastore"),_B.delete(t),e.terminate())}(this),Promise.resolve()}}class Hi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Hi(this.firestore,t,this._key)}}class Bo{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Bo(this.firestore,t,this._query)}}class lu extends Bo{constructor(t,e,i){super(t,e,w_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Hi(this.firestore,null,new Ct(t))}withConverter(t){return new lu(this.firestore,t,this._path)}}function TB(n,t,...e){if(n=(0,Zn.m9)(n),TR("collection","path",t),n instanceof _w){const i=Yn.fromString(t,...e);return wB(i),new lu(n,null,i)}{if(!(n instanceof Hi||n instanceof lu))throw new Qe(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Yn.fromString(t,...e));return wB(i),new lu(n.firestore,null,i)}}function KT(n,t,...e){if(n=(0,Zn.m9)(n),1===arguments.length&&(t=RL.A()),TR("doc","path",t),n instanceof _w){const i=Yn.fromString(t,...e);return bB(i),new Hi(n,null,new Ct(i))}{if(!(n instanceof Hi||n instanceof lu))throw new Qe(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Yn.fromString(t,...e));return bB(i),new Hi(n.firestore,n instanceof lu?n.converter:null,new Ct(i))}}function SB(n,t){return n=(0,Zn.m9)(n),t=(0,Zn.m9)(t),(n instanceof Hi||n instanceof lu)&&(t instanceof Hi||t instanceof lu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function SR(n,t){return n=(0,Zn.m9)(n),t=(0,Zn.m9)(t),n instanceof Bo&&t instanceof Bo&&n.firestore===t.firestore&&Zb(n._query,t._query)&&n.converter===t.converter}class v${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new yO(this,"async_queue_retry"),this.Xc=()=>{const e=jT();e&&lt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const t=jT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=jT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new oo;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qc.push(t),this.ea()))}ea(){var t=this;return(0,Me.Z)(function*(){if(0!==t.Qc.length){try{yield t.Qc[0](),t.Qc.shift(),t.qo.reset()}catch(e){if(!rf(e))throw e;lt("AsyncQueue","Operation failed with retryable error: "+e)}t.Qc.length>0&&t.qo.No(()=>t.ea())}})()}ta(t){const e=this.Gc.then(()=>(this.Hc=!0,t().catch(i=>{throw this.Wc=i,this.Hc=!1,Nr("INTERNAL UNHANDLED ERROR: ",function(r){let l=r.message||"";return r.stack&&(l=r.stack.includes(r.message)?r.stack:r.message+"\n"+r.stack),l}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=e,e}enqueueAfterDelay(t,e,i){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const o=UO.createAndSchedule(this,t,e,i,r=>this.na(r));return this.zc.push(o),o}Zc(){this.Wc&&Ft()}verifyOperationInProgress(){}sa(){var t=this;return(0,Me.Z)(function*(){let e;do{e=t.Gc,yield e}while(e!==t.Gc)})()}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then(()=>{this.zc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()})}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function IR(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class _${constructor(){this._progressObserver={},this._taskCompletionResolver=new oo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Vi extends _w{constructor(t,e,i,o){super(t,e,i,o),this.type="firestore",this._queue=new v$,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||IB(this),this._firestoreClient.terminate()}}function xr(n){return n._firestoreClient||IB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function IB(n){var t,e,i;const o=n._freezeSettings(),r=(d=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new Yj(n._databaseId,d,n._persistenceKey,(g=o).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,vB(g.experimentalLongPollingOptions),g.useFetchStreams));var d,g;n._firestoreClient=new a$(n._authCredentials,n._appCheckCredentials,n._queue,r),null!==(e=o.cache)&&void 0!==e&&e._offlineComponentProvider&&null!==(i=o.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function AB(n,t,e){const i=new oo;return n.asyncQueue.enqueue((0,Me.Z)(function*(){try{yield WT(n,e),yield _R(n,t),i.resolve()}catch(o){const r=o;if(!dB(r))throw r;Tl("Error enabling indexeddb cache. Falling back to memory cache: "+r),i.reject(r)}})).then(()=>i.promise)}function NB(n){if(n._initialized||n._terminated)throw new Qe(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new cu(so.fromBase64String(t))}catch(e){throw new Qe(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new cu(so.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Td{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Qe(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Eg{constructor(t){this._methodName=t}}class JT{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Qe(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Qe(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vn(this._lat,t._lat)||vn(this._long,t._long)}}const N$=/^__.*__$/;class M${constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Cd(t,this.data,this.fieldMask,e,this.fieldTransforms):new E_(t,this.data,e,this.fieldTransforms)}}class MB{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Cd(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function xB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft()}}class QT{constructor(t,e,i,o,r,l){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=o,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new QT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),o=this.aa({path:i,la:!1});return o.fa(t),o}da(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),o=this.aa({path:i,la:!1});return o.ua(),o}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return tS(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(xB(this.ca)&&N$.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class x${constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||pw(t)}ya(t,e,i,o=!1){return new QT({ca:t,methodName:e,ga:i,path:_r.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tg(n){const t=n._freezeSettings(),e=pw(n._databaseId);return new x$(n._databaseId,!!t.ignoreUndefinedProperties,e)}function XT(n,t,e,i,o,r={}){const l=n.ya(r.merge||r.mergeFields?2:0,t,e,o);xR("Data must be an object, but it was:",l,i);const d=kB(i,l);let f,g;if(r.merge)f=new sa(l.fieldMask),g=l.fieldTransforms;else if(r.mergeFields){const _=[];for(const w of r.mergeFields){const C=ww(t,w,e);if(!l.contains(C))throw new Qe(Ie.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);FB(_,C)||_.push(C)}f=new sa(_),g=l.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,g=l.fieldTransforms;return new M$(new Uo(d),f,g)}class bw extends Eg{_toFieldTransform(t){if(2!==t.ca)throw t._a(1===t.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof bw}}function OB(n,t,e){return new QT({ca:3,ga:t.settings.ga,methodName:n._methodName,la:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class AR extends Eg{_toFieldTransform(t){return new Qb(t.path,new C_)}isEqual(t){return t instanceof AR}}class O$ extends Eg{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=OB(this,t,!0),i=this.pa.map(r=>Sg(r,e)),o=new gg(i);return new Qb(t.path,o)}isEqual(t){return this===t}}class R$ extends Eg{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=OB(this,t,!0),i=this.pa.map(r=>Sg(r,e)),o=new mg(i);return new Qb(t.path,o)}isEqual(t){return this===t}}class k$ extends Eg{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new D_(t.serializer,T2(t.serializer,this.Ia));return new Qb(t.path,e)}isEqual(t){return this===t}}function NR(n,t,e,i){const o=n.ya(1,t,e);xR("Data must be an object, but it was:",o,i);const r=[],l=Uo.empty();sf(i,(f,g)=>{const _=eS(t,f,e);g=(0,Zn.m9)(g);const w=o.da(_);if(g instanceof bw)r.push(_);else{const C=Sg(g,w);null!=C&&(r.push(_),l.set(_,C))}});const d=new sa(r);return new MB(l,d,o.fieldTransforms)}function MR(n,t,e,i,o,r){const l=n.ya(1,t,e),d=[ww(t,i,e)],f=[o];if(r.length%2!=0)throw new Qe(Ie.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<r.length;C+=2)d.push(ww(t,r[C])),f.push(r[C+1]);const g=[],_=Uo.empty();for(let C=d.length-1;C>=0;--C)if(!FB(g,d[C])){const E=d[C];let N=f[C];N=(0,Zn.m9)(N);const A=l.da(E);if(N instanceof bw)g.push(E);else{const R=Sg(N,A);null!=R&&(g.push(E),_.set(E,R))}}const w=new sa(g);return new MB(_,w,l.fieldTransforms)}function RB(n,t,e,i=!1){return Sg(e,n.ya(i?4:3,t))}function Sg(n,t){if(PB(n=(0,Zn.m9)(n)))return xR("Unsupported field value:",t,n),kB(n,t);if(n instanceof Eg)return function(e,i){if(!xB(i.ca))throw i._a(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${e._methodName}() is not currently supported inside arrays`);const o=e._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,i){const o=[];let r=0;for(const l of e){let d=Sg(l,i.wa(r));null==d&&(d={nullValue:"NULL_VALUE"}),o.push(d),r++}return{arrayValue:{values:o}}}(n,t)}return function(e,i){if(null===(e=(0,Zn.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return T2(i.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const o=Qi.fromDate(e);return{timestampValue:S_(i.serializer,o)}}if(e instanceof Qi){const o=new Qi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:S_(i.serializer,o)}}if(e instanceof JT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cu)return{bytesValue:W2(i.serializer,e._byteString)};if(e instanceof Hi){const o=i.databaseId,r=e.firestore._databaseId;if(!r.isEqual(o))throw i._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qx(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i._a(`Unsupported field value: ${YT(e)}`)}(n,t)}function kB(n,t){const e={};return ZL(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sf(n,(i,o)=>{const r=Sg(o,t.ha(i));null!=r&&(e[i]=r)}),{mapValue:{fields:e}}}function PB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qi||n instanceof JT||n instanceof cu||n instanceof Hi||n instanceof Eg)}function xR(n,t,e){if(!PB(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=YT(e);throw t._a("an object"===i?n+" a custom object":n+" "+i)}var i}function ww(n,t,e){if((t=(0,Zn.m9)(t))instanceof Td)return t._internalPath;if("string"==typeof t)return eS(n,t);throw tS("Field path arguments must be of type string or ",n,!1,void 0,e)}const P$=new RegExp("[~\\*/\\[\\]]");function eS(n,t,e){if(t.search(P$)>=0)throw tS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Td(...t.split("."))._internalPath}catch{throw tS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function tS(n,t,e,i,o){const r=i&&!i.isEmpty(),l=void 0!==o;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(r||l)&&(f+=" (found",r&&(f+=` in field ${i}`),l&&(f+=` in document ${o}`),f+=")"),new Qe(Ie.INVALID_ARGUMENT,d+n+f)}function FB(n,t){return n.some(e=>e.isEqual(t))}class Cw{constructor(t,e,i,o,r){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=o,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Hi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new F$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(nS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class F$ extends Cw{data(){return super.data()}}function nS(n,t){return"string"==typeof t?eS(n,t):t instanceof Td?t._internalPath:t._delegate._internalPath}function LB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Qe(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OR{}class Dw extends OR{}function yf(n,t,...e){let i=[];t instanceof OR&&i.push(t),i=i.concat(e),function(o){const r=o.filter(d=>d instanceof V_).length,l=o.filter(d=>d instanceof Ew).length;if(r>1||r>0&&l>0)throw new Qe(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class Ew extends Dw{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Ew(t,e,i)}_apply(t){const e=this._parse(t);return VB(t._query,e),new Bo(t.firestore,t.converter,Lx(t._query,e))}_parse(t){const e=Tg(t.firestore);return function(o,r,l,d,f,g,_){let w;if(f.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){HB(_,g);const C=[];for(const E of _)C.push(BB(d,o,E));w={arrayValue:{values:C}}}else w=BB(d,o,_)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||HB(_,g),w=RB(l,"where",_,"in"===g||"not-in"===g);return Bn.create(f,g,w)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class V_ extends OR{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new V_(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:yi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,o){let r=i;const l=o.getFlattenedFilters();for(const d of l)VB(r,d),r=Lx(r,d)}(t._query,e),new Bo(t.firestore,t.converter,Lx(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class RR extends Dw{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new RR(t,e)}_apply(t){const e=function(i,o,r){if(null!==i.startAt)throw new Qe(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Qe(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new y_(o,r);return function(d,f){if(null===Px(d)){const g=bT(d);null!==g&&jB(0,g,f.field)}}(i,l),l}(t._query,this._field,this._direction);return new Bo(t.firestore,t.converter,function(i,o){const r=i.explicitOrderBy.concat([o]);return new bd(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class iS extends Dw{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new iS(t,e,i)}_apply(t){return new Bo(t.firestore,t.converter,wT(t._query,this._limit,this._limitType))}}class rS extends Dw{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new rS(t,e,i)}_apply(t){const e=UB(t,this.type,this._docOrFields,this._inclusive);return new Bo(t.firestore,t.converter,(o=e,new bd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class oS extends Dw{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new oS(t,e,i)}_apply(t){const e=UB(t,this.type,this._docOrFields,this._inclusive);return new Bo(t.firestore,t.converter,(o=e,new bd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function UB(n,t,e,i){if(e[0]=(0,Zn.m9)(e[0]),e[0]instanceof Cw)return function(o,r,l,d,f){if(!d)throw new Qe(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const g=[];for(const _ of pg(o))if(_.field.isKeyField())g.push(hg(r,d.key));else{const w=d.data.field(_.field);if(fT(w))throw new Qe(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===w){const C=_.field.canonicalString();throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}g.push(w)}return new hf(g,f)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const o=Tg(n.firestore);return function(r,l,d,f,g,_){const w=r.explicitOrderBy;if(g.length>w.length)throw new Qe(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let E=0;E<g.length;E++){const N=g[E];if(w[E].field.isKeyField()){if("string"!=typeof N)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof N}`);if(!Fx(r)&&-1!==N.indexOf("/"))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${N}' contains a slash.`);const A=r.path.child(Yn.fromString(N));if(!Ct.isDocumentKey(A))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const R=new Ct(A);C.push(hg(l,R))}else{const A=RB(d,f,N);C.push(A)}}return new hf(C,_)}(n._query,n.firestore._databaseId,o,t,e,i)}}function BB(n,t,e){if("string"==typeof(e=(0,Zn.m9)(e))){if(""===e)throw new Qe(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fx(t)&&-1!==e.indexOf("/"))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Yn.fromString(e));if(!Ct.isDocumentKey(i))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return hg(n,new Ct(i))}if(e instanceof Hi)return hg(n,e._key);throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${YT(e)}.`)}function HB(n,t){if(!Array.isArray(n)||0===n.length)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function VB(n,t){if(t.isInequality()){const i=bT(n),o=t.field;if(null!==i&&!i.isEqual(o))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${o.toString()}'`);const r=Px(n);null!==r&&jB(0,o,r)}const e=function(i,o){for(const r of i)for(const l of r.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Qe(Ie.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function jB(n,t,e){if(!e.isEqual(t))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class kR{convertValue(t,e="none"){switch(uf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return yr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(yd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ft()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return sf(t,(o,r)=>{i[o]=this.convertValue(r,e)}),i}convertGeoPoint(t){return new JT(yr(t.latitude),yr(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=pT(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Gb(t));default:return null}}convertTimestamp(t){const e=af(t);return new Qi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Yn.fromString(t);Wt(nU(i));const o=new lf(i.get(1),i.get(3)),r=new Ct(i.popFirst(5));return o.isEqual(e)||Nr(`Document ${r} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}function sS(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class z$ extends kR{constructor(t){super(),this.firestore=t}convertBytes(t){return new cu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Hi(this.firestore,null,e)}}class Ig{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Sd extends Cw{constructor(t,e,i,o,r,l){super(t,e,i,o,l),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Tw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(nS("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Tw extends Sd{data(t={}){return super.data(t)}}class bf{constructor(t,e,i,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new Ig(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Tw(this._firestore,this._userDataWriter,i.key,i,new Ig(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qe(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new Tw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ig(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:r++}))}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const d=new Tw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ig(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return 0!==l.type&&(f=r.indexOf(l.doc.key),r=r.delete(l.doc.key)),1!==l.type&&(r=r.add(l.doc),g=r.indexOf(l.doc.key)),{type:q$(l.type),doc:d,oldIndex:f,newIndex:g}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function q$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft()}}function $B(n,t){return n instanceof Sd&&t instanceof Sd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof bf&&t instanceof bf&&n._firestore===t._firestore&&SR(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class wf extends kR{constructor(t){super(),this.firestore=t}convertBytes(t){return new cu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Hi(this.firestore,null,e)}}function zB(n,t,e){n=Hn(n,Hi);const i=Hn(n.firestore,Vi),o=sS(n.converter,t,e);return j_(i,[XT(Tg(i),"setDoc",n._key,o,null!==n.converter,e).toMutation(n._key,Xi.none())])}function WB(n,t,e,...i){n=Hn(n,Hi);const o=Hn(n.firestore,Vi),r=Tg(o);let l;return l="string"==typeof(t=(0,Zn.m9)(t))||t instanceof Td?MR(r,"updateDoc",n._key,t,e,i):NR(r,"updateDoc",n._key,t),j_(o,[l.toMutation(n._key,Xi.exists(!0))])}function qB(n,...t){var e,i,o;n=(0,Zn.m9)(n);let r={includeMetadataChanges:!1},l=0;"object"!=typeof t[l]||IR(t[l])||(r=t[l],l++);const d={includeMetadataChanges:r.includeMetadataChanges};if(IR(t[l])){const w=t[l];t[l]=null===(e=w.next)||void 0===e?void 0:e.bind(w),t[l+1]=null===(i=w.error)||void 0===i?void 0:i.bind(w),t[l+2]=null===(o=w.complete)||void 0===o?void 0:o.bind(w)}let f,g,_;if(n instanceof Hi)g=Hn(n.firestore,Vi),_=w_(n._key.path),f={next:w=>{t[l]&&t[l](PR(g,n,w))},error:t[l+1],complete:t[l+2]};else{const w=Hn(n,Bo);g=Hn(w.firestore,Vi),_=w._query;const C=new wf(g);f={next:E=>{t[l]&&t[l](new bf(g,C,w,E))},error:t[l+1],complete:t[l+2]},LB(n._query)}return function(w,C,E,N){const A=new zT(N),R=new $O(C,A,E);return w.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return BO(yield H_(w),R)})),()=>{A.Dc(),w.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return VO(yield H_(w),R)}))}}(xr(g),_,d,f)}function j_(n,t){return function(e,i){const o=new oo;return e.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function VG(n,t,e){return YO.apply(this,arguments)}(yield DR(e),i,o)})),o.promise}(xr(n),t)}function PR(n,t,e){const i=e.docs.get(t._key),o=new wf(n);return new Sd(n,o,t._key,i,new Ig(e.hasPendingWrites,e.fromCache),t.converter)}const dz={maxAttempts:5};class ZB{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Tg(t)}set(t,e,i){this._verifyNotCommitted();const o=Cf(t,this._firestore),r=sS(o.converter,e,i),l=XT(this._dataReader,"WriteBatch.set",o._key,r,null!==o.converter,i);return this._mutations.push(l.toMutation(o._key,Xi.none())),this}update(t,e,i,...o){this._verifyNotCommitted();const r=Cf(t,this._firestore);let l;return l="string"==typeof(e=(0,Zn.m9)(e))||e instanceof Td?MR(this._dataReader,"WriteBatch.update",r._key,e,i,o):NR(this._dataReader,"WriteBatch.update",r._key,e),this._mutations.push(l.toMutation(r._key,Xi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Cf(t,this._firestore);return this._mutations=this._mutations.concat(new T_(e._key,Xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qe(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cf(n,t){if((n=(0,Zn.m9)(n)).firestore!==t)throw new Qe(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hz extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Tg(t)}get(t){const e=Cf(t,this._firestore),i=new z$(this._firestore);return this._transaction.lookup([e._key]).then(o=>{if(!o||1!==o.length)return Ft();const r=o[0];if(r.isFoundDocument())return new Cw(this._firestore,i,r.key,r,e.converter);if(r.isNoDocument())return new Cw(this._firestore,i,e._key,null,e.converter);throw Ft()})}set(t,e,i){const o=Cf(t,this._firestore),r=sS(o.converter,e,i),l=XT(this._dataReader,"Transaction.set",o._key,r,null!==o.converter,i);return this._transaction.set(o._key,l),this}update(t,e,i,...o){const r=Cf(t,this._firestore);let l;return l="string"==typeof(e=(0,Zn.m9)(e))||e instanceof Td?MR(this._dataReader,"Transaction.update",r._key,e,i,o):NR(this._dataReader,"Transaction.update",r._key,e),this._transaction.update(r._key,l),this}delete(t){const e=Cf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Cf(t,this._firestore),i=new wf(this._firestore);return super.get(t).then(o=>new Sd(this._firestore,i,e._key,o._document,new Ig(!1,!1),e.converter))}}function FR(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Qe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function KB(){if(typeof Uint8Array>"u")throw new Qe("unimplemented","Uint8Arrays are not available in this environment.")}function JB(){if(!function qj(){return typeof atob<"u"}())throw new Qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){g_=Zu.SDK_VERSION,(0,Zu._registerComponent)(new Cy.wA("firestore",(e,{instanceIdentifier:i,options:o})=>{const r=e.getProvider("app").getImmediate(),l=new Vi(new vj(e.getProvider("auth-internal")),new bj(e.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Qe(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lf(d.options.projectId,f)}(r,i),r);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Zu.registerVersion)(ML,"3.13.0",n),(0,Zu.registerVersion)(ML,"3.13.0","esm2017")}();class Sw{constructor(t){this._delegate=t}static fromBase64String(t){return JB(),new Sw(cu.fromBase64String(t))}static fromUint8Array(t){return KB(),new Sw(cu.fromUint8Array(t))}toBase64(){return JB(),this._delegate.toBase64()}toUint8Array(){return KB(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LR(n){return function wz(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class Cz{enableIndexedDbPersistence(t,e){return function b$(n,t){NB(n=Hn(n,Vi));const e=xr(n);if(e._uninitializedComponentsProvider)throw new Qe(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");Tl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),o=new B_;return AB(e,o,new mR(o,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function w$(n){NB(n=Hn(n,Vi));const t=xr(n);if(t._uninitializedComponentsProvider)throw new Qe(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");Tl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new B_;return AB(t,i,new cB(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function C$(n){if(n._initialized&&!n._terminated)throw new Qe(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new oo;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{yield(e=(0,Me.Z)(function*(i){if(!gc.D())return Promise.resolve();const o=i+"main";yield gc.delete(o)}),function(i){return e.apply(this,arguments)})(lO(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class QB{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof lf||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Tl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function EB(n,t,e,i={}){var o;const r=(n=Hn(n,_w))._getSettings(),l=`${t}:${e}`;if("firestore.googleapis.com"!==r.host&&r.host!==l&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},r),{host:l,ssl:!1})),i.mockUserToken){let d,f;if("string"==typeof i.mockUserToken)d=i.mockUserToken,f=bo.MOCK_USER;else{d=(0,Zn.Sg)(i.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new Qe(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new bo(g)}n._authCredentials=new mj(new xL(d,f))}}(this._delegate,t,e,i)}enableNetwork(){return function E$(n){return function l$(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const t=yield hB(n),e=yield fB(n);return t.setNetworkEnabled(!0),function(i){const o=Tt(i);return o.vu.delete(0),gw(o)}(e)}))}(xr(n=Hn(n,Vi)))}(this._delegate)}disableNetwork(){return function T$(n){return function c$(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const t=yield hB(n),e=yield fB(n);return t.setNetworkEnabled(!1),(i=(0,Me.Z)(function*(o){const r=Tt(o);r.vu.add(0),yield O_(r),r.bu.set("Offline")}),function(o){return i.apply(this,arguments)})(e);var i}))}(xr(n=Hn(n,Vi)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,yB("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function D$(n){return function(t){const e=new oo;return t.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function zG(n,t){return eR.apply(this,arguments)}(yield DR(t),e)})),e.promise}(xr(n=Hn(n,Vi)))}(this._delegate)}onSnapshotsInSync(t){return function nz(n,t){return function h$(n,t){const e=new zT(t);return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return i=yield H_(n),o=e,Tt(i).ku.add(o),void o.next();var i,o})),()=>{e.Dc(),n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return i=yield H_(n),o=e,void Tt(i).ku.delete(o);var i,o}))}}(xr(n=Hn(n,Vi)),IR(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new G_(this,TB(this._delegate,t))}catch(e){throw Rs(e,"collection()","Firestore.collection()")}}doc(t){try{return new Sl(this,KT(this._delegate,t))}catch(e){throw Rs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ks(this,function m$(n,t){if(n=Hn(n,_w),TR("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bo(n,null,(e=t,new bd(Yn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Rs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function fz(n,t,e){n=Hn(n,Vi);const i=Object.assign(Object.assign({},dz),e);return function(o){if(o.maxAttempts<1)throw new Qe(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,r,l){const d=new oo;return o.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){const f=yield function pB(n){return qT(n).then(t=>t.datastore)}(o);new s$(o.asyncQueue,f,l,r,d).run()})),d.promise}(xr(n),o=>t(new hz(n,o)),i)}(this._delegate,e=>t(new XB(this,e)))}batch(){return xr(this._delegate),new eH(new ZB(this._delegate,t=>j_(this._delegate,t)))}loadBundle(t){return function S$(n,t){const e=xr(n=Hn(n,Vi)),i=new _$;return function f$(n,t,e,i){const o=function(r,l){let d;return d="string"==typeof r?U2().encode(r):r,f=function(f,g){if(f instanceof Uint8Array)return uB(f,g);if(f instanceof ArrayBuffer)return uB(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new r$(f,l);var f}(e,pw(t));n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){!function n$(n,t,e){const i=Tt(n);var o;(o=(0,Me.Z)(function*(r,l,d){try{const f=yield l.getMetadata();if(yield function(C,E){const N=Tt(C),A=Mr(E.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",R=>N.qs.getBundleMetadata(R,E.id)).then(R=>!!R&&R.createTime.compareTo(A)>=0)}(r.localStore,f))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(C=f).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);d._updateProgress(eB(f));const g=new PG(f,r.localStore,l.serializer);let _=yield l.bc();for(;_;){const C=yield g.zu(_);C&&d._updateProgress(C),_=yield l.bc()}const w=yield g.complete();return yield Ed(r,w.Ju,void 0),yield function(C,E){const N=Tt(C);return N.persistence.runTransaction("Save bundle","readwrite",A=>N.qs.saveBundleMetadata(A,E))}(r.localStore,f),d._completeWith(w.progress),Promise.resolve(w.Hu)}catch(f){return Tl("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var C}),function(r,l,d){return o.apply(this,arguments)})(i,t,e).then(o=>{i.sharedClientState.notifyBundleLoaded(o)})}(yield DR(n),o,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function I$(n,t){return function p$(n,t){return n.asyncQueue.enqueue((0,Me.Z)(function*(){return function(e,i){const o=Tt(e);return o.persistence.runTransaction("Get named query","readonly",r=>o.qs.getNamedQuery(r,i))}(yield ZT(n),t)}))}(xr(n=Hn(n,Vi)),t).then(e=>e?new Bo(n,null,e.query):null)}(this._delegate,t).then(e=>e?new ks(this,e):null)}}class aS extends kR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Sw(new cu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Sl.forKey(e,this.firestore,null)}}class XB{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new aS(t)}get(t){const e=Ng(t);return this._delegate.get(e).then(i=>new Iw(this._firestore,new Sd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const o=Ng(t);return i?(FR("Transaction.set",i),this._delegate.set(o,e,i)):this._delegate.set(o,e),this}update(t,e,i,...o){const r=Ng(t);return 2===arguments.length?this._delegate.update(r,e):this._delegate.update(r,e,i,...o),this}delete(t){const e=Ng(t);return this._delegate.delete(e),this}}class eH{constructor(t){this._delegate=t}set(t,e,i){const o=Ng(t);return i?(FR("WriteBatch.set",i),this._delegate.set(o,e,i)):this._delegate.set(o,e),this}update(t,e,i,...o){const r=Ng(t);return 2===arguments.length?this._delegate.update(r,e):this._delegate.update(r,e,i,...o),this}delete(t){const e=Ng(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Ag{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new Tw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Aw(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Ag.INSTANCES;let o=i.get(t);o||(o=new WeakMap,i.set(t,o));let r=o.get(e);return r||(r=new Ag(t,new aS(t),e),o.set(e,r)),r}}Ag.INSTANCES=new WeakMap;class Sl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new aS(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Sl(e,new Hi(e._delegate,i,new Ct(t)))}static forKey(t,e,i){return new Sl(e,new Hi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new G_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new G_(this.firestore,TB(this._delegate,t))}catch(e){throw Rs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,Zn.m9)(t))instanceof Hi&&SB(this._delegate,t)}set(t,e){e=FR("DocumentReference.set",e);try{return e?zB(this._delegate,t,e):zB(this._delegate,t)}catch(i){throw Rs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?WB(this._delegate,t):WB(this._delegate,t,e,...i)}catch(o){throw Rs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function ez(n){return j_(Hn(n.firestore,Vi),[new T_(n._key,Xi.none())])}(this._delegate)}onSnapshot(...t){const e=tH(t),i=nH(t,o=>new Iw(this.firestore,new Sd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return qB(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function Y$(n){n=Hn(n,Hi);const t=Hn(n.firestore,Vi),e=xr(t),i=new wf(t);return function u$(n,t){const e=new oo;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(i=(0,Me.Z)(function*(o,r,l){try{const d=yield function(f,g){const _=Tt(f);return _.persistence.runTransaction("read document","readonly",w=>_.localDocuments.getDocument(w,g))}(o,r);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Qe(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=P_(d,`Failed to get document '${r} from cache`);l.reject(f)}}),function(o,r,l){return i.apply(this,arguments)})(yield ZT(n),t,e);var i})),e.promise}(e,n._key).then(o=>new Sd(t,i,n._key,o,new Ig(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function K$(n){n=Hn(n,Hi);const t=Hn(n.firestore,Vi);return gB(xr(t),n._key,{source:"server"}).then(e=>PR(t,n,e))}(this._delegate):function Z$(n){n=Hn(n,Hi);const t=Hn(n.firestore,Vi);return gB(xr(t),n._key).then(e=>PR(t,n,e))}(this._delegate),e.then(i=>new Iw(this.firestore,new Sd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Sl(this.firestore,this._delegate.withConverter(t?Ag.getInstance(this.firestore,t):null))}}function Rs(n,t,e){return n.message=n.message.replace(t,e),n}function tH(n){for(const t of n)if("object"==typeof t&&!LR(t))return t;return{}}function nH(n,t){var e,i;let o;return o=LR(n[0])?n[0]:LR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:r=>{o.next&&o.next(t(r))},error:null===(e=o.error)||void 0===e?void 0:e.bind(o),complete:null===(i=o.complete)||void 0===i?void 0:i.bind(o)}}class Iw{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Sl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return $B(this._delegate,t._delegate)}}class Aw extends Iw{data(t){const e=this._delegate.data(t);return function pj(n,t){n||Ft()}(void 0!==e),e}}class ks{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new aS(t)}where(t,e,i){try{return new ks(this.firestore,yf(this._delegate,function L$(n,t,e){const i=t,o=nS("where",n);return Ew._create(o,i,e)}(t,e,i)))}catch(o){throw Rs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ks(this.firestore,yf(this._delegate,function U$(n,t="asc"){const e=t,i=nS("orderBy",n);return RR._create(i,e)}(t,e)))}catch(i){throw Rs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ks(this.firestore,yf(this._delegate,function B$(n){return CB("limit",n),iS._create("limit",n,"F")}(t)))}catch(e){throw Rs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ks(this.firestore,yf(this._delegate,function H$(n){return CB("limitToLast",n),iS._create("limitToLast",n,"L")}(t)))}catch(e){throw Rs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ks(this.firestore,yf(this._delegate,function V$(...n){return rS._create("startAt",n,!0)}(...t)))}catch(e){throw Rs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ks(this.firestore,yf(this._delegate,function j$(...n){return rS._create("startAfter",n,!1)}(...t)))}catch(e){throw Rs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ks(this.firestore,yf(this._delegate,function G$(...n){return oS._create("endBefore",n,!1)}(...t)))}catch(e){throw Rs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ks(this.firestore,yf(this._delegate,function $$(...n){return oS._create("endAt",n,!0)}(...t)))}catch(e){throw Rs(e,"endAt()","Query.endAt()")}}isEqual(t){return SR(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function Q$(n){n=Hn(n,Bo);const t=Hn(n.firestore,Vi),e=xr(t),i=new wf(t);return function d$(n,t){const e=new oo;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(i=(0,Me.Z)(function*(o,r,l){try{const d=yield UT(o,r,!0),f=new iB(r,d.ir),g=f.sc(d.documents),_=f.applyChanges(g,!1);l.resolve(_.snapshot)}catch(d){const f=P_(d,`Failed to execute query '${r} against cache`);l.reject(f)}}),function(o,r,l){return i.apply(this,arguments)})(yield ZT(n),t,e);var i})),e.promise}(e,n._query).then(o=>new bf(t,i,n,o))}(this._delegate):"server"===t?.source?function X$(n){n=Hn(n,Bo);const t=Hn(n.firestore,Vi),e=xr(t),i=new wf(t);return mB(e,n._query,{source:"server"}).then(o=>new bf(t,i,n,o))}(this._delegate):function J$(n){n=Hn(n,Bo);const t=Hn(n.firestore,Vi),e=xr(t),i=new wf(t);return LB(n._query),mB(e,n._query).then(o=>new bf(t,i,n,o))}(this._delegate),e.then(i=>new UR(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=tH(t),i=nH(t,o=>new UR(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return qB(this._delegate,e,i)}withConverter(t){return new ks(this.firestore,this._delegate.withConverter(t?Ag.getInstance(this.firestore,t):null))}}class Ez{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Aw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UR{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Aw(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new Ez(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new Aw(this._firestore,i))})}isEqual(t){return $B(this._delegate,t._delegate)}}class G_ extends ks{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Sl(this.firestore,t):null}doc(t){try{return new Sl(this.firestore,void 0===t?KT(this._delegate):KT(this._delegate,t))}catch(e){throw Rs(e,"doc()","CollectionReference.doc()")}}add(t){return function tz(n,t){const e=Hn(n.firestore,Vi),i=KT(n),o=sS(n.converter,t);return j_(e,[XT(Tg(n.firestore),"addDoc",i._key,o,null!==n.converter,{}).toMutation(i._key,Xi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Sl(this.firestore,e))}isEqual(t){return SB(this._delegate,t._delegate)}withConverter(t){return new G_(this.firestore,this._delegate.withConverter(t?Ag.getInstance(this.firestore,t):null))}}function Ng(n){return Hn(n,Hi)}class BR{constructor(...t){this._delegate=new Td(...t)}static documentId(){return new BR(_r.keyField().canonicalString())}isEqual(t){return(t=(0,Zn.m9)(t))instanceof Td&&this._delegate._internalPath.isEqual(t._internalPath)}}class Mg{constructor(t){this._delegate=t}static serverTimestamp(){const t=function gz(){return new AR("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Mg(t)}static delete(){const t=function pz(){return new bw("deleteField")}();return t._methodName="FieldValue.delete",new Mg(t)}static arrayUnion(...t){const e=function mz(...n){return new O$("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Mg(e)}static arrayRemove(...t){const e=function vz(...n){return new R$("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Mg(e)}static increment(t){const e=function _z(n){return new k$("increment",n)}(t);return e._methodName="FieldValue.increment",new Mg(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Tz={Firestore:QB,GeoPoint:JT,Timestamp:Qi,Blob:Sw,Transaction:XB,WriteBatch:eH,DocumentReference:Sl,DocumentSnapshot:Iw,Query:ks,QueryDocumentSnapshot:Aw,QuerySnapshot:UR,CollectionReference:G_,FieldPath:BR,FieldValue:Mg,setLogLevel:function Dz(n){!function fj(n){tf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function iH(n,t){return function Az(n,t=Iv.z){return new Ri.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function HR(n,t){return iH(n,t).pipe((0,Lt.U)(e=>({payload:e,type:"query"})))}function lS(n,t){return HR(n,t).pipe(Ko(void 0),RM(),(0,Lt.U)(([e,i])=>{const o=i.payload.docChanges(),r=o.map(l=>({type:l.type,payload:l}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,d)=>{const f=o.find(_=>_.doc.ref.isEqual(l.ref)),g=e?.payload.docs.find(_=>_.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&g&&JSON.stringify(g.metadata)===JSON.stringify(l.metadata)||r.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),r}))}function rH(n,t,e){return lS(n,e).pipe(Zs((i,o)=>function Mz(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function xz(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return VR(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return VR(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return VR(n,t.oldIndex,1)}return n}(n,i))}),n}(i,o.map(r=>r.payload),t),[]),(0,Bh.x)(),(0,Lt.U)(i=>i.map(o=>({type:o.type,payload:o}))))}function VR(n,t,e,...i){const o=n.slice();return o.splice(t,e,...i),o}function oH(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Iz(n){(function Sz(n,t){n.INTERNAL.registerComponent(new Cy.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),o=e.getProvider("firestore").getImmediate();return t(i,o)},"PUBLIC").setServiceProps(Object.assign({},Tz)))})(n,(t,e)=>new QB(t,e,new Cz)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(oV.Z);class sH{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=lS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Lt.U)(i=>i.filter(o=>t.indexOf(o.type)>-1)))),e.pipe(Ko(void 0),RM(),Wn(([i,o])=>o.length>0||!i),(0,Lt.U)(([i,o])=>o),Ir.iC)}auditTrail(t){return this.stateChanges(t).pipe(Zs((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=oH(t);return rH(this.query,e,this.afs.schedulers.outsideAngular).pipe(Ir.iC)}valueChanges(t={}){return HR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Ir.iC)}get(t){return(0,Rn.D)(this.query.get(t)).pipe(Ir.iC)}add(t){return this.ref.add(t)}doc(t){return new aH(this.ref.doc(t),this.afs)}}class aH{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:o,query:r}=lH(i,e);return new sH(o,r,this.afs)}snapshotChanges(){return function Nz(n,t){return iH(n,t).pipe(Ko(void 0),RM(),(0,Lt.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ir.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Lt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Rn.D)(this.ref.get(t)).pipe(Ir.iC)}}class Oz{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?lS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Wn(e=>e.length>0),Ir.iC):lS(this.query,this.afs.schedulers.outsideAngular).pipe(Ir.iC)}auditTrail(t){return this.stateChanges(t).pipe(Zs((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=oH(t);return rH(this.query,e,this.afs.schedulers.outsideAngular).pipe(Ir.iC)}valueChanges(t={}){return HR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(i=>i.payload.docs.map(o=>t.idField?Object.assign({[t.idField]:o.id},o.data()):o.data())),Ir.iC)}get(t){return(0,Rn.D)(this.query.get(t)).pipe(Ir.iC)}}const Rz=new u.OlP("angularfire2.enableFirestorePersistence"),kz=new u.OlP("angularfire2.firestore.persistenceSettings"),Pz=new u.OlP("angularfire2.firestore.settings"),Fz=new u.OlP("angularfire2.firestore.use-emulator");function lH(n,t=(e=>e)){return{query:t(n),ref:n}}let jR=(()=>{class n{constructor(e,i,o,r,l,d,f,g,_,w,C,E,N,A,R,F,j){this.schedulers=f;const V=(0,xo.on)(e,d,i),W=_;w&&pI(V,d,C,N,A,R,E,F),[this.firestore,this.persistenceEnabled$]=(0,xo.cc)(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{const re=d.runOutsideAngular(()=>V.firestore());if(r&&re.settings(r),W&&re.useEmulator(...W),o&&!ds(l)){const ue=()=>{try{return(0,Rn.D)(re.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(we){return typeof console<"u"&&console.warn(we),(0,Ut.of)(!1)}};return[re,d.runOutsideAngular(ue)]}return[re,(0,Ut.of)(!1)]},[r,W,o])}collection(e,i){let o;o="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:l}=lH(o,i),d=this.schedulers.ngZone.run(()=>r);return new sH(d,l,this)}collectionGroup(e,i){const o=i||(l=>l),r=this.firestore.collectionGroup(e);return new Oz(o(r),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const o=this.schedulers.ngZone.run(()=>i);return new aH(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(xo.Dh),u.LFG(xo.xv,8),u.LFG(Rz,8),u.LFG(Pz,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Ir.HU),u.LFG(kz,8),u.LFG(Fz,8),u.LFG(sc,8),u.LFG(Uy,8),u.LFG(BC,8),u.LFG(By,8),u.LFG(Hy,8),u.LFG(dp,8),u.LFG(Xm,8),u.LFG(kC,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const Lz=["day"],Uz=["week"],Bz=["month"],Hz=["navigator"];function Vz(n,t){if(1&n&&(u.TgZ(0,"option",14),u._uU(1),u.qZA()),2&n){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}let jz=(()=>{var n;class t{selectTomorrow(){this.date=x.Date.today().addDays(1)}changeDate(i){this.configDay.startDate=i,this.configWeek.startDate=i,this.configMonth.startDate=i}constructor(i,o){this.ds=i,this.afs=o,this.events=[],this.clinics=[],this.date=x.Date.today(),this.configNavigator={showMonths:2,cellWidth:25,cellHeight:25,onVisibleRangeChanged:r=>{this.loadEvents()}},this.configDay={eventMoveHandling:"Disabled",businessBeginsHour:0},this.configWeek={viewType:"Week",eventMoveHandling:"Disabled"},this.configMonth={eventMoveHandling:"Disabled"},this.viewMonth()}ngAfterViewInit(){this.clinics=this.getClinics(),this.loadEvents()}loadEvents(){const i=this.nav.control.visibleStart(),o=this.nav.control.visibleEnd();this.ds.getEvents(i,o).subscribe(r=>{this.events=r})}viewDay(){this.configNavigator.selectMode="Day",this.configDay.visible=!0,this.configWeek.visible=!1,this.configMonth.visible=!1}viewWeek(){this.configNavigator.selectMode="Week",this.configDay.visible=!1,this.configWeek.visible=!0,this.configMonth.visible=!1}viewMonth(){this.configNavigator.selectMode="Month",this.configDay.visible=!1,this.configWeek.visible=!1,this.configMonth.visible=!0}getClinics(){const i=this.afs.collection("clinics");let o=[];return Dl((0,Rn.D)(i.get())).then(r=>{r?r.forEach(l=>{o.push(l.id)}):console.error("No documents found.")}).catch(r=>{console.error("Error getting documents: ",r)}),o}update(i){var o=this;return(0,Me.Z)(function*(){const r=i.target.value;let l=[];if(""==r)o.ds.events=[],o.loadEvents();else{const d=yield Dl(o.afs.collection("clinics").doc(r).get()).then(f=>f.data().shifts);for(const f in d)l.push({start:new x.Date(d[f].start+"T00:00:00"),end:new x.Date(d[f].end+"T24:00:00"),text:d[f].text});o.ds.events=l,o.loadEvents()}})()}}return(n=t).\u0275fac=function(i){return new(i||n)(u.Y36(fF),u.Y36(jR))},n.\u0275cmp=u.Xpm({type:n,selectors:[["calendar-component"]],viewQuery:function(i,o){if(1&i&&(u.Gf(Lz,5),u.Gf(Uz,5),u.Gf(Bz,5),u.Gf(Hz,5)),2&i){let r;u.iGM(r=u.CRH())&&(o.day=r.first),u.iGM(r=u.CRH())&&(o.week=r.first),u.iGM(r=u.CRH())&&(o.month=r.first),u.iGM(r=u.CRH())&&(o.nav=r.first)}},decls:19,vars:14,consts:[[1,"container"],[1,"navigator"],[3,"config","events","date","dateChange"],["navigator",""],[1,"content"],[1,"buttons"],[3,"click"],["id","clinic","name","clinic",1,"form-select",2,"float","right","width","25%","vertical-align","middle",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"config","events"],["day",""],["week",""],["month",""],[3,"value"]],template:function(i,o){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"daypilot-navigator",2,3),u.NdJ("dateChange",function(l){return o.date=l})("dateChange",function(l){return o.changeDate(l)}),u.qZA()(),u.TgZ(4,"div",4)(5,"div",5)(6,"button",6),u.NdJ("click",function(){return o.viewDay()}),u._uU(7,"Day"),u.qZA(),u.TgZ(8,"button",6),u.NdJ("click",function(){return o.viewMonth()}),u._uU(9,"Month"),u.qZA(),u.TgZ(10,"select",7),u.NdJ("change",function(l){return o.update(l)}),u._UZ(11,"option",8),u.YNc(12,Vz,2,2,"option",9),u.qZA()(),u._UZ(13,"daypilot-calendar",10,11)(15,"daypilot-calendar",10,12)(17,"daypilot-month",10,13),u.qZA()()),2&i&&(u.xp6(2),u.Q6J("config",o.configNavigator)("events",o.events)("date",o.date),u.xp6(4),u.Tol("Day"==o.configNavigator.selectMode?"selected":""),u.xp6(2),u.Tol("Month"==o.configNavigator.selectMode?"selected":""),u.xp6(4),u.Q6J("ngForOf",o.clinics),u.xp6(1),u.Q6J("config",o.configDay)("events",o.events),u.xp6(2),u.Q6J("config",o.configWeek)("events",o.events),u.xp6(2),u.Q6J("config",o.configMonth)("events",o.events))},dependencies:[Pr,Up,Bp,uF,dF,hF],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.navigator[_ngcontent-%COMP%]{margin-right:10px}.content[_ngcontent-%COMP%]{flex-grow:1}.buttons[_ngcontent-%COMP%]{margin-bottom:10px}button[_ngcontent-%COMP%]{background-color:#3c78d8;color:#fff;border:0;padding:.5rem 1rem;width:80px;font-size:14px;cursor:pointer;margin-right:5px}button.selected[_ngcontent-%COMP%]{background-color:#1c4587}"]}),t})();function Gz(n,t){1&n&&(u.TgZ(0,"button",11),u._uU(1,"Control Panel"),u.qZA())}function $z(n,t){1&n&&(u.TgZ(0,"button",12),u._uU(1,"Clinic Portal"),u.qZA())}function zz(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div")(1,"nav",1)(2,"a",2),u._UZ(3,"img",3),u._uU(4," Kingston Locums Project "),u.qZA(),u.TgZ(5,"h4",4),u._uU(6),u.qZA(),u.TgZ(7,"div",5),u.YNc(8,Gz,2,0,"button",6),u._uU(9," \xa0 "),u.YNc(10,$z,2,0,"button",7),u._uU(11," \xa0 "),u.TgZ(12,"button",8),u._uU(13,"Contact a Clinic"),u.qZA(),u._uU(14," \xa0 "),u.TgZ(15,"button",9),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.logout())}),u._uU(16,"Logout"),u.qZA()()(),u.TgZ(17,"div",10),u._UZ(18,"br")(19,"calendar-component")(20,"br"),u.qZA()()}if(2&n){const e=t.$implicit;u.xp6(6),u.hij(" Welcome back ",e.displayName,"! "),u.xp6(2),u.Q6J("ngIf","admin"==e.role),u.xp6(2),u.Q6J("ngIf","admin"==e.role||"clinic"==e.role)}}let Wz=(()=>{var n;class t{constructor(i,o,r,l,d){this.userService=i,this.userForm=o,this.modal=r,this.afAuth=l,this.auth=d}ngOnInit(){this.users$=this.userService.users$,this.user$=this.afAuth.user.pipe(Wn(i=>!!i),(0,ti.w)(i=>this.userService.user$(i.uid)))}create(){this.userForm.create(),this.modal.open(cF).result.then(o=>{this.userService.create(o).subscribe(r=>{alert("User Created. Logging you out."),this.logout()})}).catch(o=>{alert("Error. Please contact Admin. "+o)})}edit(i){this.userForm.edit(i),this.modal.open(cF).result.then(r=>{this.userService.edit(r).subscribe(l=>{alert("User Updated. Logging you out."),this.logout()})}).catch(r=>{"modal dismissed"!=r&&0!=r&&alert("Error. Please contact Admin. "+r)})}userData(i){var o="";for(var r of Object.keys(i))o+=r+": "+i[r]+"\n";return o}logout(){this.auth.logout()}}return(n=t).\u0275fac=function(i){return new(i||n)(u.Y36(cc),u.Y36(lF),u.Y36(MM),u.Y36(sc),u.Y36(Ss))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"navbar","navbar-dark",2,"background-color","var(--tertiary-color)"],["href","#",1,"navbar-brand",2,"padding-left","1%"],["src","../../../assets/city_logo_white.png","width","80","height","80","alt","",1,"d-inline-block",2,"vertical-align","middle"],[2,"text-align","center","color","var(--secondary-color)"],[2,"float","right","padding-right","1%"],["routerLink","/admin","class","btn",4,"ngIf"],["routerLink","/clinic","class","btn",4,"ngIf"],["routerLink","/locum",1,"btn"],["type","button",1,"btn",3,"click"],["id","calendar"],["routerLink","/admin",1,"btn"],["routerLink","/clinic",1,"btn"]],template:function(i,o){1&i&&(u.YNc(0,zz,21,3,"div",0),u.ALo(1,"async")),2&i&&u.Q6J("ngIf",u.lcZ(1,1,o.user$))},dependencies:[Cr,hl,jz,Fs],styles:["button[_ngcontent-%COMP%]{color:var(--secondary-color);border-color:var(--primary-color);border-color:var(--tertiary-color)}button[_ngcontent-%COMP%]:hover{color:var(--secondary-color);background-color:var(--shaded-primary);border-color:var(--primary-color)}#calendar[_ngcontent-%COMP%]{background-color:var(--secondary-color)}"]}),t})(),qz=(()=>{class n{constructor(e){this.auth=e,this.email=""}ngOnInit(){}forgotPassword(){this.auth.forgotPassword(this.email),this.email=""}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(Ss))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-forgot-password"]],decls:15,vars:1,consts:[[1,"signupContents"],[1,"col-md-4","mt-3",2,"margin","auto"],["src","../../../assets/city_logo_white.png",2,"display","block","margin-left","auto","margin-right","auto","width","50%","height","50%"],["action","",1,"mt-5","p-5",2,"background-color","var(--tertiary-color)","border-radius","3%"],[1,"mb-3",2,"color","var(--secondary-color)"],[1,"form-floating","mb-3"],["type","text","id","floatingInput","placeholder","Username","name","username",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput",2,"color","var(--primary-color)"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","me-md-2",2,"color","var(--secondary-color)","border-color","var(--primary-color)",3,"click"],["routerLink","/"]],template:function(e,i){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.TgZ(3,"form",3)(4,"h5",4),u._uU(5,"Reset Password"),u.qZA(),u.TgZ(6,"div",5)(7,"input",6),u.NdJ("ngModelChange",function(r){return i.email=r}),u.qZA(),u.TgZ(8,"label",7),u._uU(9,"Email Address"),u.qZA()(),u.TgZ(10,"div",8)(11,"button",9),u.NdJ("click",function(){return i.forgotPassword()}),u._uU(12,"Send Link"),u.qZA()(),u.TgZ(13,"a",10),u._uU(14,"Back to Login"),u.qZA()()()()),2&e&&(u.xp6(7),u.Q6J("ngModel",i.email))},dependencies:[hl,na,uc,Ta,vl,Kc,Fp],styles:["button[_ngcontent-%COMP%]{color:var(--secondary-color);border-color:var(--primary-color)}button[_ngcontent-%COMP%]:hover{color:var(--secondary-color);background-color:var(--shaded-primary);border-color:var(--primary-color)}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--secondary-color)}a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:var(--secondary-color)}"]}),n})();function Zz(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",16)(1,"h4",17),u._uU(2,"Set User Role"),u.qZA(),u.TgZ(3,"button",18),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.dismiss())}),u.qZA()(),u.TgZ(4,"div",19)(5,"form",20)(6,"div",21)(7,"label"),u._uU(8,"Email"),u.qZA(),u._UZ(9,"input",22),u.qZA(),u.TgZ(10,"div",21)(11,"label"),u._uU(12,"Select Role"),u.qZA(),u.TgZ(13,"select",23)(14,"option",24),u._uU(15,"Locum"),u.qZA(),u.TgZ(16,"option",25),u._uU(17,"Clinic"),u.qZA(),u.TgZ(18,"option",26),u._uU(19,"Admin"),u.qZA()()(),u._UZ(20,"br"),u.qZA()(),u.TgZ(21,"div",27)(22,"button",28),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.dismiss())}),u._uU(23,"Cancel"),u.qZA(),u.TgZ(24,"button",29),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.close("role"))}),u._uU(25,"Save"),u.qZA()()}if(2&n){const e=u.oxw(3);u.xp6(5),u.Q6J("formGroup",e.setRole)}}function Yz(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",16)(1,"h4",17),u._uU(2,"Delete User"),u.qZA(),u.TgZ(3,"button",18),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.dismiss())}),u.qZA()(),u.TgZ(4,"div",19)(5,"form",20)(6,"div",21)(7,"label"),u._uU(8,"Email"),u.qZA(),u._UZ(9,"input",30),u.qZA()()(),u.TgZ(10,"div",27)(11,"button",28),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.dismiss())}),u._uU(12,"Cancel"),u.qZA(),u.TgZ(13,"button",31),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.close("del"))}),u._uU(14,"Save"),u.qZA()()}if(2&n){const e=u.oxw(3);u.xp6(5),u.Q6J("formGroup",e.deleteUser)}}function Kz(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",16)(1,"h4",17),u._uU(2,"Check User Role"),u.qZA(),u.TgZ(3,"button",18),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.dismiss())}),u.qZA()(),u.TgZ(4,"div",19)(5,"form",20)(6,"div",21)(7,"label"),u._uU(8,"Email"),u.qZA(),u._UZ(9,"input",32),u.qZA()()(),u.TgZ(10,"div",27)(11,"button",28),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.dismiss())}),u._uU(12,"Cancel"),u.qZA(),u.TgZ(13,"button",31),u.NdJ("click",function(){const r=u.CHM(e).$implicit;return u.KtG(r.close("check"))}),u._uU(14,"Save"),u.qZA()()}if(2&n){const e=u.oxw(3);u.xp6(5),u.Q6J("formGroup",e.getRole)}}function Jz(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",9),u.YNc(1,Zz,26,1,"ng-template",null,10,u.W1O),u.YNc(3,Yz,15,1,"ng-template",null,11,u.W1O),u.YNc(5,Kz,15,1,"ng-template",null,12,u.W1O),u.TgZ(7,"h4",13),u._uU(8,"Admin Control Panel"),u.qZA(),u.TgZ(9,"span",14),u._uU(10,"Click this button to get all relevant metadata on the user, including registration email, phone number, and role. "),u.qZA(),u._uU(11,"\xa0"),u.TgZ(12,"button",15),u.NdJ("click",function(){u.CHM(e);const o=u.MAs(6),r=u.oxw(2);return u.KtG(r.open(o))}),u._uU(13,"Check User Information"),u.qZA(),u._UZ(14,"br")(15,"br"),u.TgZ(16,"span",14),u._uU(17,"Click this button to set a user's role (locum, clinic, or admin) by their email. Please do NOT set people as admins unless they are trusted."),u.qZA(),u._uU(18,"\xa0"),u.TgZ(19,"button",15),u.NdJ("click",function(){u.CHM(e);const o=u.MAs(2),r=u.oxw(2);return u.KtG(r.open(o))}),u._uU(20,"Set User Role"),u.qZA(),u._UZ(21,"br")(22,"br"),u.TgZ(23,"span",14),u._uU(24,"Click this button to delete a user from their email. THIS ACTION IS NON-REVERSIBLE! Please verify the deletion through Firebase Console."),u.qZA(),u._uU(25,"\xa0"),u.TgZ(26,"button",15),u.NdJ("click",function(){u.CHM(e);const o=u.MAs(4),r=u.oxw(2);return u.KtG(r.open(o))}),u._uU(27,"Delete User"),u.qZA()()}}function Qz(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",1)(1,"nav",2)(2,"a",3),u._UZ(3,"img",4),u._uU(4," Kingston Locums Project "),u.qZA(),u.TgZ(5,"div",5)(6,"button",6),u._uU(7,"Back to Dashboard"),u.qZA(),u._uU(8," \xa0 "),u.TgZ(9,"button",7),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.logout())}),u._uU(10,"Logout"),u.qZA()()(),u.YNc(11,Jz,28,0,"div",8),u.qZA()}if(2&n){const e=t.$implicit;u.xp6(11),u.Q6J("ngIf","admin"==e.role)}}let Xz=(()=>{var n;class t{constructor(i,o,r,l,d){this.userService=i,this.afAuth=o,this.auth=r,this.modalService=l,this.fb=d,this.email="",this.role="",this.delEmail="",this.roleEmail="",this.setRole=this.fb.group({email:"",role:""}),this.deleteUser=this.fb.group({delEmail:""}),this.getRole=this.fb.group({roleEmail:""})}ngOnInit(){this.users$=this.userService.users$,this.user$=this.afAuth.user.pipe(Wn(i=>!!i),(0,ti.w)(i=>this.userService.user$(i.uid)))}open(i){var o=this;this.modalService.open(i).result.then(function(){var r=(0,Me.Z)(function*(l){if("role"==l){if(o.email=o.setRole.get("email")?.value,o.role=o.setRole.get("role")?.value,""==o.email||""==o.role)alert("Error: Missing Fields");else if(yield o.auth.checkEmailExists(o.email).then(f=>f).catch(()=>!1)){let f=yield Dl(yield o.userService.editUser(o.email,o.role)),g="USER DATA: \n\n";for(const _ in f)g+=`${_}: ${f[_]}\n`;alert(g)}else alert("User with that Email does not exist!");o.email="",o.role="",o.setRole=o.fb.group({email:"",role:""})}if("del"==l&&(o.delEmail=o.deleteUser.get("delEmail")?.value,""==o.delEmail?alert("Please enter an Email"):(yield o.auth.checkEmailExists(o.delEmail).then(f=>f).catch(()=>!1))?(o.userService.delete(o.delEmail),alert("User Successfully Deleted!")):alert("User with that Email does not exist!"),o.delEmail="",o.deleteUser=o.fb.group({delEmail:""})),"check"==l){if(o.roleEmail=o.getRole.get("roleEmail")?.value,""==o.roleEmail)alert("Please enter an Email");else if(yield o.auth.checkEmailExists(o.roleEmail).then(f=>f).catch(()=>!1)){let f=yield Dl(yield o.userService.getUser(o.roleEmail)),g="USER DATA: \n\n";for(const _ in f)g+=`${_}: ${f[_]}\n`;alert(g)}else alert("User with that Email does not exist!");o.roleEmail="",o.getRole=o.fb.group({roleEmail:""})}});return function(l){return r.apply(this,arguments)}}(),r=>{this.email="",this.role="",this.delEmail="",this.roleEmail="",this.setRole=this.fb.group({email:"",role:""}),this.deleteUser=this.fb.group({delEmail:""}),this.getRole=this.fb.group({roleEmail:""})})}logout(){this.auth.logout()}}return(n=t).\u0275fac=function(i){return new(i||n)(u.Y36(cc),u.Y36(sc),u.Y36(Ss),u.Y36(MM),u.Y36(KD))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-admin"]],decls:2,vars:3,consts:[["id","adminContainer",4,"ngIf"],["id","adminContainer"],[1,"navbar","navbar-dark",2,"background-color","var(--tertiary-color)"],["href","#",1,"navbar-brand",2,"padding-left","1%"],["src","../../../assets/city_logo_white.png","width","80","height","80","alt","",1,"d-inline-block",2,"vertical-align","middle"],[2,"float","right","padding-right","1%"],["routerLink","/dashboard",1,"btn"],[1,"btn",3,"click"],["class","container","id","admin",4,"ngIf"],["id","admin",1,"container"],["content",""],["del",""],["check",""],[2,"color","var(--secondary-color)"],[2,"color","var(--secondary-color)","vertical-align","middle"],["type","button",1,"btn",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["type","string","formControlName","email","placeholder","Enter user email",1,"form-control"],["formControlName","role",1,"form-select"],["value","locum"],["value","clinic"],["value","admin"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger",2,"border-color","red","color","red",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["type","string","formControlName","delEmail","placeholder","Enter user email",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click"],["type","string","formControlName","roleEmail","placeholder","Enter user email",1,"form-control"]],template:function(i,o){1&i&&(u.YNc(0,Qz,12,1,"div",0),u.ALo(1,"async")),2&i&&u.Q6J("ngIf",u.lcZ(1,1,o.user$))},dependencies:[Cr,hl,na,Up,Bp,uc,kh,Ta,vl,dc,cd,Fs],styles:["#admin[_ngcontent-%COMP%]{background-color:var(--tertiary-color);padding:2%;border-radius:5%;width:50%;margin-top:1%}button[_ngcontent-%COMP%]{color:var(--secondary-color);border-color:var(--primary-color);border-color:var(--tertiary-color)}button[_ngcontent-%COMP%]:hover{color:var(--secondary-color);background-color:var(--shaded-primary);border-color:var(--primary-color)}"]}),t})();function e6(n,t){if(1&n&&(u.TgZ(0,"option",26),u._uU(1),u.qZA()),2&n){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function t6(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",9)(1,"div",10)(2,"form",11),u.NdJ("ngSubmit",function(){u.CHM(e);const o=u.oxw(2);return u.KtG(o.addShift())}),u.TgZ(3,"h4"),u._uU(4,"Submit Timesheet"),u.qZA(),u.TgZ(5,"label",12),u._uU(6,"Clinic Email:"),u.qZA(),u._uU(7," \xa0 "),u.TgZ(8,"label",13),u._uU(9),u.qZA(),u._UZ(10,"br")(11,"br"),u.TgZ(12,"label",14),u._uU(13,"Start Date:"),u.qZA(),u._uU(14,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),u._UZ(15,"input",15)(16,"br")(17,"br"),u.TgZ(18,"label",16),u._uU(19,"End Date:"),u.qZA(),u._uU(20,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),u._UZ(21,"input",17)(22,"br")(23,"br"),u.TgZ(24,"label",18),u._uU(25,"Clinic Address:"),u.qZA(),u._uU(26,"\xa0 "),u._UZ(27,"input",19)(28,"br")(29,"br"),u.TgZ(30,"label",20),u._uU(31,"Main Doctor:"),u.qZA(),u._uU(32,"\xa0\xa0\xa0\xa0\xa0 "),u._UZ(33,"input",21)(34,"br")(35,"br"),u.TgZ(36,"label",22),u._uU(37,"Additional Notes:"),u.qZA(),u._UZ(38,"br")(39,"textarea",23)(40,"br")(41,"br"),u.TgZ(42,"button",24),u._uU(43),u.qZA()()(),u._UZ(44,"hr")(45,"br"),u.TgZ(46,"div",10)(47,"form",11),u.NdJ("ngSubmit",function(){u.CHM(e);const o=u.oxw(2);return u.KtG(o.deleteShift())}),u.TgZ(48,"h4"),u._uU(49,"Delete Timesheet"),u.qZA(),u.TgZ(50,"label",14),u._uU(51,"Select Shift:"),u.qZA(),u._uU(52,"\xa0 "),u.TgZ(53,"select",25),u._UZ(54,"option",26),u.YNc(55,e6,2,2,"option",27),u.qZA(),u._UZ(56,"br")(57,"br"),u.TgZ(58,"button",24),u._uU(59),u.qZA()()()()}if(2&n){const e=u.oxw().$implicit,i=u.oxw();u.xp6(2),u.Q6J("formGroup",i.form),u.xp6(7),u.Oqu(e.email),u.xp6(33),u.Q6J("disabled",i.isSaving),u.xp6(1),u.hij(" ",i.isSaving?"Updating Shift..":"Submit"," "),u.xp6(4),u.Q6J("formGroup",i.deleteForm),u.xp6(8),u.Q6J("ngForOf",i.clinicShifts),u.xp6(3),u.Q6J("disabled",i.isSaving),u.xp6(1),u.hij(" ",i.isSaving?"Updating Shift..":"Submit"," ")}}function n6(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",1)(1,"nav",2)(2,"a",3),u._UZ(3,"img",4),u._uU(4," Kingston Locums Project "),u.qZA(),u.TgZ(5,"div",5)(6,"button",6),u._uU(7,"Back to Dashboard"),u.qZA(),u._uU(8," \xa0 "),u.TgZ(9,"button",7),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.logout())}),u._uU(10,"Logout"),u.qZA()()(),u.YNc(11,t6,60,8,"div",8),u.qZA()}if(2&n){const e=t.$implicit;u.xp6(11),u.Q6J("ngIf","admin"==e.role||"clinic"==e.role)}}let i6=(()=>{var n;class t{constructor(i,o,r,l){this.auth=i,this.afAuth=o,this.userService=r,this.afs=l,this.originalShift={},this.isSaving=!1,this.form=new _l({startingDate:new vi(""),endingDate:new vi(""),clinicName:new vi(""),mainDoctor:new vi(""),additionalNotes:new vi("")}),this.deleteForm=new _l({delShift:new vi("")})}ngOnInit(){var i=this;return(0,Me.Z)(function*(){i.user$=i.afAuth.user.pipe(Wn(o=>!!o),(0,ti.w)(o=>i.userService.user$(o.uid))),i.clinicShifts=yield i.getShifts()})()}logout(){this.auth.logout()}getShifts(){var i=this;return(0,Me.Z)(function*(){const o=yield Dl(i.afAuth.user).then(l=>l?.email||"err"),r=yield Dl(i.afs.collection("clinics").doc(o).get()).then(l=>l.data().shifts);if(0==Object.keys(r).length)return["No Shifts Submitted"];{let l=[];for(let d in r){let f=new Date(i.convertDateFormat(r[d].start));f=f.toDateString(),f=f.substring(3,15);let g=new Date(i.convertDateFormat(r[d].end));g=g.toDateString(),g=g.substring(4,15);let _=f+" - "+g;l.push(_),i.originalShift[_]=d}return l.sort((d,f)=>d.localeCompare(f)),l}})()}convertDateFormat(i){const[o,r,l]=i.split("-");return`${r}/${l}/${o}`}addShift(){var i=this;return(0,Me.Z)(function*(){let{startingDate:o,endingDate:r,clinicName:l,mainDoctor:d,additionalNotes:f}=i.form.value;if(o&&r&&f&&l&&d)if(r<o)alert("Invalid Dates!");else{i.isSaving=!0;try{let g=yield Dl(i.afAuth.user).then(C=>C?.email||"err"),_={start:o,end:r,text:l+"\n"+d+"\n"+f},w=yield Dl(yield i.userService.addShift(g,_));alert(w.message)}catch(g){console.error(g),alert("An error occurred.")}finally{i.isSaving=!1,window.location.reload()}}else alert("Missing Fields!")})()}deleteShift(){var i=this;return(0,Me.Z)(function*(){let{delShift:o}=i.deleteForm.value;if(""==o||null==o)alert("Please select a shift!");else{i.isSaving=!0;try{let r=yield Dl(i.afAuth.user).then(f=>f?.email||"err"),l=i.originalShift[o],d=yield Dl(yield i.userService.deleteShift(r,l));alert(d.message)}catch(r){console.error(r),alert("An error occurred.")}finally{i.isSaving=!1,window.location.reload()}}})()}}return(n=t).\u0275fac=function(i){return new(i||n)(u.Y36(Ss),u.Y36(sc),u.Y36(cc),u.Y36(jR))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-clinic"]],decls:2,vars:3,consts:[["id","clinicContainer",4,"ngIf"],["id","clinicContainer"],[1,"navbar","navbar-dark",2,"background-color","var(--tertiary-color)"],["href","#",1,"navbar-brand",2,"padding-left","1%"],["src","../../../assets/city_logo_white.png","width","80","height","80","alt","",1,"d-inline-block",2,"vertical-align","middle"],[2,"float","right","padding-right","1%"],["routerLink","/dashboard",1,"btn"],[1,"btn",3,"click"],["class","container","id","clinic",4,"ngIf"],["id","clinic",1,"container"],[1,"container"],[3,"formGroup","ngSubmit"],["for","clinic"],["for","clinicName"],["for","start_date"],["type","date","id","start_date","name","start_date","formControlName","startingDate"],["for","end_date"],["type","date","id","end_date","name","end_date","formControlName","endingDate"],["for","clinic_name"],["type","text","id","clinic_name","name","clinic_name","formControlName","clinicName"],["for","main_doctor"],["type","text","id","main_doctor","name","main_doctor","formControlName","mainDoctor"],["for","notes"],["id","notes","name","notes","rows","4","cols","50","formControlName","additionalNotes"],["type","submit",1,"btn",3,"disabled"],["id","clinic","name","clinic","formControlName","delShift"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(i,o){1&i&&(u.YNc(0,n6,12,1,"div",0),u.ALo(1,"async")),2&i&&u.Q6J("ngIf",u.lcZ(1,1,o.user$))},dependencies:[Pr,Cr,hl,na,Up,Bp,uc,kh,Ta,vl,dc,cd,Fs],styles:["button[_ngcontent-%COMP%]{color:var(--secondary-color);border-color:var(--primary-color);border-color:var(--tertiary-color)}button[_ngcontent-%COMP%]:hover{color:var(--secondary-color);background-color:var(--shaded-primary);border-color:var(--primary-color)}#clinic[_ngcontent-%COMP%]{background-color:var(--tertiary-color);padding:2%;border-radius:5%;width:50%;margin-top:1%;color:var(--secondary-color)}"]}),t})();function r6(n,t){if(1&n&&(u.TgZ(0,"option",19),u._uU(1),u.qZA()),2&n){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function o6(n,t){if(1&n&&(u.TgZ(0,"option",19),u._uU(1),u.qZA()),2&n){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function s6(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",1)(1,"nav",2)(2,"a",3),u._UZ(3,"img",4),u._uU(4," Kingston Locums Project "),u.qZA(),u.TgZ(5,"div",5)(6,"button",6),u._uU(7,"Back to Dashboard"),u.qZA(),u._uU(8," \xa0 "),u.TgZ(9,"button",7),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.logout())}),u._uU(10,"Logout"),u.qZA()()(),u.TgZ(11,"div",8)(12,"h4"),u._uU(13,"Inquire about Clinic Shift"),u.qZA(),u.TgZ(14,"label",9),u._uU(15,"Select Clinic:"),u.qZA(),u._UZ(16,"br"),u.TgZ(17,"select",10),u.NdJ("ngModelChange",function(o){u.CHM(e);const r=u.oxw();return u.KtG(r.selectedClinic=o)})("change",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.updateSecondSelect())}),u._UZ(18,"option",11),u.YNc(19,r6,2,2,"option",12),u.qZA(),u._UZ(20,"br")(21,"br"),u.TgZ(22,"label",13),u._uU(23,"Select Shift:"),u.qZA(),u._UZ(24,"br"),u.TgZ(25,"select",14),u.NdJ("ngModelChange",function(o){u.CHM(e);const r=u.oxw();return u.KtG(r.selectedShift=o)}),u._UZ(26,"option",11),u.YNc(27,o6,2,2,"option",12),u.qZA(),u._UZ(28,"br")(29,"br"),u.TgZ(30,"form",15),u.NdJ("ngSubmit",function(){const r=u.CHM(e).$implicit,l=u.oxw();return u.KtG(l.sendEmail(l.selectedClinic,l.selectedShift,r.email))}),u.TgZ(31,"label",16),u._uU(32,"Tell the clinic about yourself! Include contact information. Minimum 150 characters."),u.qZA(),u._UZ(33,"br")(34,"textarea",17)(35,"br")(36,"br"),u.TgZ(37,"button",18),u._uU(38),u.qZA()()()()}if(2&n){const e=u.oxw();u.xp6(17),u.Q6J("ngModel",e.selectedClinic),u.xp6(2),u.Q6J("ngForOf",e.clinics),u.xp6(6),u.Q6J("ngModel",e.selectedShift),u.xp6(2),u.Q6J("ngForOf",e.shifts),u.xp6(3),u.Q6J("formGroup",e.form),u.xp6(7),u.Q6J("disabled",e.isSaving),u.xp6(1),u.hij(" ",e.isSaving?"Sending Email..":"Submit"," ")}}const a6=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"login",component:vA},{path:"register",component:Fh},{path:"dashboard",component:Wz,canActivate:[Ss]},{path:"forgot-password",component:qz},{path:"admin",component:Xz,canActivate:[Ss]},{path:"clinic",component:i6,canActivate:[Ss]},{path:"locum",component:(()=>{var n;class t{updateSecondSelect(){var i=this;return(0,Me.Z)(function*(){i.selectedClinic?i.shifts=yield i.getClinicShift(i.selectedClinic):(i.shifts=[],i.selectedShift="")})()}get emailSubject(){return`Shift Inquiry | ${this.selectedShift} | ${this.selectedClinic}`}constructor(i,o,r,l){this.auth=i,this.userService=o,this.afAuth=r,this.afs=l,this.selectedClinic="",this.selectedShift="",this.clinics=this.getClinics(),this.shifts=[],this.originalShift={},this.isSaving=!1,this.form=new _l({text:new vi("")})}ngOnInit(){var i=this;return(0,Me.Z)(function*(){i.user$=i.afAuth.user.pipe(Wn(o=>!!o),(0,ti.w)(o=>i.userService.user$(o.uid)))})()}logout(){this.auth.logout()}getClinics(){const i=this.afs.collection("clinics");let o=[];return Dl((0,Rn.D)(i.get())).then(r=>{r?r.forEach(l=>{o.push(l.id)}):console.error("No documents found.")}).catch(r=>{console.error("Error getting documents: ",r)}),o}getClinicShift(i){var o=this;return(0,Me.Z)(function*(){const r=yield Dl(o.afs.collection("clinics").doc(i).get()).then(l=>l.data().shifts);if(0==Object.keys(r).length)return["No Shifts Submitted"];{let l=[];for(let d in r){let f=new Date(o.convertDateFormat(r[d].start));f=f.toDateString(),f=f.substring(3,15);let g=new Date(o.convertDateFormat(r[d].end));g=g.toDateString(),g=g.substring(4,15);let _=f+" - "+g;l.push(_),o.originalShift[_]=d}return l.sort((d,f)=>d.localeCompare(f)),l}})()}convertDateFormat(i){const[o,r,l]=i.split("-");return`${r}/${l}/${o}`}sendEmail(i,o,r){let{text:l}=this.form.value;if(null!=i&&null!=o&&null!=l&&l.length>150){this.isSaving=!0;try{Email.send({Host:"smtp.elasticemail.com",Username:"hsami@cityofkingston.ca",Password:"836E0ED8F2ACBA227760A1EEFB93715D1B0B",To:i,From:"hsami@cityofkingston.ca",Subject:`Shift Inquiry: ${o} - ${r}: `,Body:l}),alert("Email sent successfully")}catch(d){console.error(d),alert("An error occurred")}finally{this.isSaving=!1,window.location.reload()}}else alert("Please select a valid shift, clinic, and enter a message.")}}return(n=t).\u0275fac=function(i){return new(i||n)(u.Y36(Ss),u.Y36(cc),u.Y36(sc),u.Y36(jR))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-locum"]],decls:2,vars:3,consts:[["id","locumContainer",4,"ngIf"],["id","locumContainer"],[1,"navbar","navbar-dark",2,"background-color","var(--tertiary-color)"],["href","#",1,"navbar-brand",2,"padding-left","1%"],["src","../../../assets/city_logo_white.png","width","80","height","80","alt","",1,"d-inline-block",2,"vertical-align","middle"],[2,"float","right","padding-right","1%"],["routerLink","/dashboard",1,"btn"],[1,"btn",3,"click"],["id","locum",1,"container"],["for","firstSelect"],["id","firstSelect","id","locumSelector","name","clinic",1,"forms-select",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","secondSelect"],["id","secondSelect","name","shift","id","locumSelector",1,"forms-select",3,"ngModel","ngModelChange"],[3,"formGroup","ngSubmit"],["for","message"],["id","message","name","body","formControlName","text","placeholder","I am messaging you to declare my interest in this role. My email is example@example.com, phone number is 000-111-2222. I am a licensed professional for 2 years.",2,"width","100%","height","200px"],["type","submit",1,"btn",3,"disabled"],[3,"value"]],template:function(i,o){1&i&&(u.YNc(0,s6,39,7,"div",0),u.ALo(1,"async")),2&i&&u.Q6J("ngIf",u.lcZ(1,1,o.user$))},dependencies:[Pr,Cr,hl,na,Up,Bp,uc,kh,Ta,vl,Kc,dc,cd,Fs],styles:["button[_ngcontent-%COMP%]{color:var(--secondary-color);border-color:var(--primary-color);border-color:var(--tertiary-color)}button[_ngcontent-%COMP%]:hover{color:var(--secondary-color);background-color:var(--shaded-primary);border-color:var(--primary-color)}#locum[_ngcontent-%COMP%]{background-color:var(--tertiary-color);padding:2%;border-radius:5%;width:50%;margin-top:1%;color:var(--secondary-color)}#locumSelector[_ngcontent-%COMP%]{padding:2%;border-radius:5%;width:50%;margin-top:1%}"]}),t})(),canActivate:[Ss]}];let l6=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Sm.forRoot(a6),Sm]}),t})(),c6=(()=>{var n;class t{constructor(){this.title="Kingston Locums Project"}}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){1&i&&u._UZ(0,"router-outlet")},dependencies:[oy]}),t})();const u6_firebase={apiKey:"AIzaSyBeh_Me19JA8wjOy1thoR8SzZv4yjLRIiY",authDomain:"locumsfunc.firebaseapp.com",databaseURL:"https://locumsfunc-default-rtdb.firebaseio.com",projectId:"locumsfunc",storageBucket:"locumsfunc.appspot.com",messagingSenderId:"665404422752",appId:"1:665404422752:web:41b6cac9db1a746bf6a105"},d6={provide:zC,useClass:(()=>{class n{constructor(e){this.auth=e}intercept(e,i){return this.auth.idToken.pipe(ki(1),(0,ti.w)(o=>{let r=e.clone();return o&&(r=r.clone({headers:e.headers.set("Authorization","Bearer "+o)})),i.handle(r)}))}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(sc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),multi:!0};let h6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[fF],imports:[Gl,JD,rd,iV]}),n})(),f6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[c6]}),n.\u0275inj=u.cJS({providers:[d6],imports:[Gl,l6,JD,xo.hO.initializeApp(u6_firebase),tV,rd,h6,mA]}),n})();Eu().bootstrapModule(f6).catch(n=>console.error(n))},5619:(It,Le,z)=>{z.d(Le,{X:()=>K});var u=z(8645);class K extends u.x{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const ge=super._subscribe(ae);return!ge.closed&&ae.next(this._value),ge}getValue(){const{hasError:ae,thrownError:ge,_value:Te}=this;if(ae)throw ge;return this._throwIfClosed(),Te}next(ae){super.next(this._value=ae)}}},5592:(It,Le,z)=>{z.d(Le,{y:()=>We});var u=z(305),K=z(7394),G=z(4850),ae=z(8407),ge=z(2653),Te=z(4674),Oe=z(1441);let We=(()=>{class he{constructor($e){$e&&(this._subscribe=$e)}lift($e){const ht=new he;return ht.source=this,ht.operator=$e,ht}subscribe($e,ht,Ye){const pt=function ee(he){return he&&he instanceof u.Lv||function Q(he){return he&&(0,Te.m)(he.next)&&(0,Te.m)(he.error)&&(0,Te.m)(he.complete)}(he)&&(0,K.Nn)(he)}($e)?$e:new u.Hp($e,ht,Ye);return(0,Oe.x)(()=>{const{operator:it,source:Bt}=this;pt.add(it?it.call(pt,Bt):Bt?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe($e){try{return this._subscribe($e)}catch(ht){$e.error(ht)}}forEach($e,ht){return new(ht=xe(ht))((Ye,pt)=>{const it=new u.Hp({next:Bt=>{try{$e(Bt)}catch(Mt){pt(Mt),it.unsubscribe()}},error:pt,complete:Ye});this.subscribe(it)})}_subscribe($e){var ht;return null===(ht=this.source)||void 0===ht?void 0:ht.subscribe($e)}[G.L](){return this}pipe(...$e){return(0,ae.U)($e)(this)}toPromise($e){return new($e=xe($e))((ht,Ye)=>{let pt;this.subscribe(it=>pt=it,it=>Ye(it),()=>ht(pt))})}}return he.create=nt=>new he(nt),he})();function xe(he){var nt;return null!==(nt=he??ge.config.Promise)&&void 0!==nt?nt:Promise}},8645:(It,Le,z)=>{z.d(Le,{x:()=>Oe});var u=z(5592),K=z(7394);const ae=(0,z(2306).d)(xe=>function(){xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=z(9039),Te=z(1441);let Oe=(()=>{class xe extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const he=new We(this,this);return he.operator=ee,he}_throwIfClosed(){if(this.closed)throw new ae}next(ee){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const he of this.currentObservers)he.next(ee)}})}error(ee){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:he}=this;for(;he.length;)he.shift().error(ee)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:he,isStopped:nt,observers:$e}=this;return he||nt?K.Lc:(this.currentObservers=null,$e.push(ee),new K.w0(()=>{this.currentObservers=null,(0,ge.P)($e,ee)}))}_checkFinalizedStatuses(ee){const{hasError:he,thrownError:nt,isStopped:$e}=this;he?ee.error(nt):$e&&ee.complete()}asObservable(){const ee=new u.y;return ee.source=this,ee}}return xe.create=(Q,ee)=>new We(Q,ee),xe})();class We extends Oe{constructor(Q,ee){super(),this.destination=Q,this.source=ee}next(Q){var ee,he;null===(he=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===he||he.call(ee,Q)}error(Q){var ee,he;null===(he=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===he||he.call(ee,Q)}complete(){var Q,ee;null===(ee=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===ee||ee.call(Q)}_subscribe(Q){var ee,he;return null!==(he=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(Q))&&void 0!==he?he:K.Lc}}},305:(It,Le,z)=>{z.d(Le,{Hp:()=>Ye,Lv:()=>he});var u=z(4674),K=z(7394),G=z(2653),ae=z(3894),ge=z(2420);const Te=xe("C",void 0,void 0);function xe(_e,Ve,me){return{kind:_e,value:Ve,error:me}}var Q=z(7599),ee=z(1441);class he extends K.w0{constructor(Ve){super(),this.isStopped=!1,Ve?(this.destination=Ve,(0,K.Nn)(Ve)&&Ve.add(this)):this.destination=Mt}static create(Ve,me,Re){return new Ye(Ve,me,Re)}next(Ve){this.isStopped?Bt(function We(_e){return xe("N",_e,void 0)}(Ve),this):this._next(Ve)}error(Ve){this.isStopped?Bt(function Oe(_e){return xe("E",void 0,_e)}(Ve),this):(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped?Bt(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ve){this.destination.next(Ve)}_error(Ve){try{this.destination.error(Ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function $e(_e,Ve){return nt.call(_e,Ve)}class ht{constructor(Ve){this.partialObserver=Ve}next(Ve){const{partialObserver:me}=this;if(me.next)try{me.next(Ve)}catch(Re){pt(Re)}}error(Ve){const{partialObserver:me}=this;if(me.error)try{me.error(Ve)}catch(Re){pt(Re)}else pt(Ve)}complete(){const{partialObserver:Ve}=this;if(Ve.complete)try{Ve.complete()}catch(me){pt(me)}}}class Ye extends he{constructor(Ve,me,Re){let qe;if(super(),(0,u.m)(Ve)||!Ve)qe={next:Ve??void 0,error:me??void 0,complete:Re??void 0};else{let ot;this&&G.config.useDeprecatedNextContext?(ot=Object.create(Ve),ot.unsubscribe=()=>this.unsubscribe(),qe={next:Ve.next&&$e(Ve.next,ot),error:Ve.error&&$e(Ve.error,ot),complete:Ve.complete&&$e(Ve.complete,ot)}):qe=Ve}this.destination=new ht(qe)}}function pt(_e){G.config.useDeprecatedSynchronousErrorHandling?(0,ee.O)(_e):(0,ae.h)(_e)}function Bt(_e,Ve){const{onStoppedNotification:me}=G.config;me&&Q.z.setTimeout(()=>me(_e,Ve))}const Mt={closed:!0,next:ge.Z,error:function it(_e){throw _e},complete:ge.Z}},7394:(It,Le,z)=>{z.d(Le,{Lc:()=>Te,w0:()=>ge,Nn:()=>Oe});var u=z(4674);const G=(0,z(2306).d)(xe=>function(ee){xe(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((he,nt)=>`${nt+1}) ${he.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var ae=z(9039);class ge{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const $e of ee)$e.remove(this);else ee.remove(this);const{initialTeardown:he}=this;if((0,u.m)(he))try{he()}catch($e){Q=$e instanceof G?$e.errors:[$e]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const $e of nt)try{We($e)}catch(ht){Q=Q??[],ht instanceof G?Q=[...Q,...ht.errors]:Q.push(ht)}}if(Q)throw new G(Q)}}add(Q){var ee;if(Q&&Q!==this)if(this.closed)We(Q);else{if(Q instanceof ge){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=null!==(ee=this._finalizers)&&void 0!==ee?ee:[]).push(Q)}}_hasParent(Q){const{_parentage:ee}=this;return ee===Q||Array.isArray(ee)&&ee.includes(Q)}_addParent(Q){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(Q),ee):ee?[ee,Q]:Q}_removeParent(Q){const{_parentage:ee}=this;ee===Q?this._parentage=null:Array.isArray(ee)&&(0,ae.P)(ee,Q)}remove(Q){const{_finalizers:ee}=this;ee&&(0,ae.P)(ee,Q),Q instanceof ge&&Q._removeParent(this)}}ge.EMPTY=(()=>{const xe=new ge;return xe.closed=!0,xe})();const Te=ge.EMPTY;function Oe(xe){return xe instanceof ge||xe&&"closed"in xe&&(0,u.m)(xe.remove)&&(0,u.m)(xe.add)&&(0,u.m)(xe.unsubscribe)}function We(xe){(0,u.m)(xe)?xe():xe.unsubscribe()}},2653:(It,Le,z)=>{z.d(Le,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(It,Le,z)=>{z.d(Le,{E:()=>K});const K=new(z(5592).y)(ge=>ge.complete())},2459:(It,Le,z)=>{z.d(Le,{D:()=>Ve});var u=z(4829),K=z(3093),G=z(5137),Te=z(5592),We=z(4971),xe=z(4674),Q=z(7103);function he(me,Re){if(!me)throw new Error("Iterable cannot be null");return new Te.y(qe=>{(0,Q.f)(qe,Re,()=>{const ot=me[Symbol.asyncIterator]();(0,Q.f)(qe,Re,()=>{ot.next().then(At=>{At.done?qe.complete():qe.next(At.value)})},0,!0)})})}var nt=z(8382),$e=z(4026),ht=z(4266),Ye=z(3664),pt=z(5726),it=z(9853),Bt=z(541);function Ve(me,Re){return Re?function _e(me,Re){if(null!=me){if((0,nt.c)(me))return function ae(me,Re){return(0,u.Xf)(me).pipe((0,G.R)(Re),(0,K.Q)(Re))}(me,Re);if((0,ht.z)(me))return function Oe(me,Re){return new Te.y(qe=>{let ot=0;return Re.schedule(function(){ot===me.length?qe.complete():(qe.next(me[ot++]),qe.closed||this.schedule())})})}(me,Re);if((0,$e.t)(me))return function ge(me,Re){return(0,u.Xf)(me).pipe((0,G.R)(Re),(0,K.Q)(Re))}(me,Re);if((0,pt.D)(me))return he(me,Re);if((0,Ye.T)(me))return function ee(me,Re){return new Te.y(qe=>{let ot;return(0,Q.f)(qe,Re,()=>{ot=me[We.h](),(0,Q.f)(qe,Re,()=>{let At,vt;try{({value:At,done:vt}=ot.next())}catch(Nn){return void qe.error(Nn)}vt?qe.complete():qe.next(At)},0,!0)}),()=>(0,xe.m)(ot?.return)&&ot.return()})}(me,Re);if((0,Bt.L)(me))return function Mt(me,Re){return he((0,Bt.Q)(me),Re)}(me,Re)}throw(0,it.z)(me)}(me,Re):(0,u.Xf)(me)}},4829:(It,Le,z)=>{z.d(Le,{Xf:()=>nt});var u=z(7582),K=z(4266),G=z(4026),ae=z(5592),ge=z(8382),Te=z(5726),Oe=z(9853),We=z(3664),xe=z(541),Q=z(4674),ee=z(3894),he=z(4850);function nt(_e){if(_e instanceof ae.y)return _e;if(null!=_e){if((0,ge.c)(_e))return function $e(_e){return new ae.y(Ve=>{const me=_e[he.L]();if((0,Q.m)(me.subscribe))return me.subscribe(Ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(_e);if((0,K.z)(_e))return function ht(_e){return new ae.y(Ve=>{for(let me=0;me<_e.length&&!Ve.closed;me++)Ve.next(_e[me]);Ve.complete()})}(_e);if((0,G.t)(_e))return function Ye(_e){return new ae.y(Ve=>{_e.then(me=>{Ve.closed||(Ve.next(me),Ve.complete())},me=>Ve.error(me)).then(null,ee.h)})}(_e);if((0,Te.D)(_e))return it(_e);if((0,We.T)(_e))return function pt(_e){return new ae.y(Ve=>{for(const me of _e)if(Ve.next(me),Ve.closed)return;Ve.complete()})}(_e);if((0,xe.L)(_e))return function Bt(_e){return it((0,xe.Q)(_e))}(_e)}throw(0,Oe.z)(_e)}function it(_e){return new ae.y(Ve=>{(function Mt(_e,Ve){var me,Re,qe,ot;return(0,u.mG)(this,void 0,void 0,function*(){try{for(me=(0,u.KL)(_e);!(Re=yield me.next()).done;)if(Ve.next(Re.value),Ve.closed)return}catch(At){qe={error:At}}finally{try{Re&&!Re.done&&(ot=me.return)&&(yield ot.call(me))}finally{if(qe)throw qe.error}}Ve.complete()})})(_e,Ve).catch(me=>Ve.error(me))})}},3019:(It,Le,z)=>{z.d(Le,{T:()=>Te});var u=z(7537),K=z(4829),G=z(6232),ae=z(9940),ge=z(2459);function Te(...Oe){const We=(0,ae.yG)(Oe),xe=(0,ae._6)(Oe,1/0),Q=Oe;return Q.length?1===Q.length?(0,K.Xf)(Q[0]):(0,u.J)(xe)((0,ge.D)(Q,We)):G.E}},2096:(It,Le,z)=>{z.d(Le,{of:()=>G});var u=z(9940),K=z(2459);function G(...ae){const ge=(0,u.yG)(ae);return(0,K.D)(ae,ge)}},8251:(It,Le,z)=>{z.d(Le,{x:()=>K});var u=z(305);function K(ae,ge,Te,Oe,We){return new G(ae,ge,Te,Oe,We)}class G extends u.Lv{constructor(ge,Te,Oe,We,xe,Q){super(ge),this.onFinalize=xe,this.shouldUnsubscribe=Q,this._next=Te?function(ee){try{Te(ee)}catch(he){ge.error(he)}}:super._next,this._error=We?function(ee){try{We(ee)}catch(he){ge.error(he)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(ee){ge.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(It,Le,z)=>{z.d(Le,{x:()=>ae});var u=z(2737),K=z(9360),G=z(8251);function ae(Te,Oe=u.y){return Te=Te??ge,(0,K.e)((We,xe)=>{let Q,ee=!0;We.subscribe((0,G.x)(xe,he=>{const nt=Oe(he);(ee||!Te(Q,nt))&&(ee=!1,Q=nt,xe.next(he))}))})}function ge(Te,Oe){return Te===Oe}},7398:(It,Le,z)=>{z.d(Le,{U:()=>G});var u=z(9360),K=z(8251);function G(ae,ge){return(0,u.e)((Te,Oe)=>{let We=0;Te.subscribe((0,K.x)(Oe,xe=>{Oe.next(ae.call(ge,xe,We++))}))})}},7537:(It,Le,z)=>{z.d(Le,{J:()=>G});var u=z(1631),K=z(2737);function G(ae=1/0){return(0,u.z)(K.y,ae)}},1631:(It,Le,z)=>{z.d(Le,{z:()=>We});var u=z(7398),K=z(4829),G=z(9360),ae=z(7103),ge=z(8251),Oe=z(4674);function We(xe,Q,ee=1/0){return(0,Oe.m)(Q)?We((he,nt)=>(0,u.U)(($e,ht)=>Q(he,$e,nt,ht))((0,K.Xf)(xe(he,nt))),ee):("number"==typeof Q&&(ee=Q),(0,G.e)((he,nt)=>function Te(xe,Q,ee,he,nt,$e,ht,Ye){const pt=[];let it=0,Bt=0,Mt=!1;const _e=()=>{Mt&&!pt.length&&!it&&Q.complete()},Ve=Re=>it<he?me(Re):pt.push(Re),me=Re=>{$e&&Q.next(Re),it++;let qe=!1;(0,K.Xf)(ee(Re,Bt++)).subscribe((0,ge.x)(Q,ot=>{nt?.(ot),$e?Ve(ot):Q.next(ot)},()=>{qe=!0},void 0,()=>{if(qe)try{for(it--;pt.length&&it<he;){const ot=pt.shift();ht?(0,ae.f)(Q,ht,()=>me(ot)):me(ot)}_e()}catch(ot){Q.error(ot)}}))};return xe.subscribe((0,ge.x)(Q,Ve,()=>{Mt=!0,_e()})),()=>{Ye?.()}}(he,nt,xe,ee)))}},3093:(It,Le,z)=>{z.d(Le,{Q:()=>ae});var u=z(7103),K=z(9360),G=z(8251);function ae(ge,Te=0){return(0,K.e)((Oe,We)=>{Oe.subscribe((0,G.x)(We,xe=>(0,u.f)(We,ge,()=>We.next(xe),Te),()=>(0,u.f)(We,ge,()=>We.complete(),Te),xe=>(0,u.f)(We,ge,()=>We.error(xe),Te)))})}},3020:(It,Le,z)=>{z.d(Le,{B:()=>ge});var u=z(4829),K=z(8645),G=z(305),ae=z(9360);function ge(Oe={}){const{connector:We=(()=>new K.x),resetOnError:xe=!0,resetOnComplete:Q=!0,resetOnRefCountZero:ee=!0}=Oe;return he=>{let nt,$e,ht,Ye=0,pt=!1,it=!1;const Bt=()=>{$e?.unsubscribe(),$e=void 0},Mt=()=>{Bt(),nt=ht=void 0,pt=it=!1},_e=()=>{const Ve=nt;Mt(),Ve?.unsubscribe()};return(0,ae.e)((Ve,me)=>{Ye++,!it&&!pt&&Bt();const Re=ht=ht??We();me.add(()=>{Ye--,0===Ye&&!it&&!pt&&($e=Te(_e,ee))}),Re.subscribe(me),!nt&&Ye>0&&(nt=new G.Hp({next:qe=>Re.next(qe),error:qe=>{it=!0,Bt(),$e=Te(Mt,xe,qe),Re.error(qe)},complete:()=>{pt=!0,Bt(),$e=Te(Mt,Q),Re.complete()}}),(0,u.Xf)(Ve).subscribe(nt))})(he)}}function Te(Oe,We,...xe){if(!0===We)return void Oe();if(!1===We)return;const Q=new G.Hp({next:()=>{Q.unsubscribe(),Oe()}});return(0,u.Xf)(We(...xe)).subscribe(Q)}},5137:(It,Le,z)=>{z.d(Le,{R:()=>K});var u=z(9360);function K(G,ae=0){return(0,u.e)((ge,Te)=>{Te.add(G.schedule(()=>ge.subscribe(Te),ae))})}},4664:(It,Le,z)=>{z.d(Le,{w:()=>ae});var u=z(4829),K=z(9360),G=z(8251);function ae(ge,Te){return(0,K.e)((Oe,We)=>{let xe=null,Q=0,ee=!1;const he=()=>ee&&!xe&&We.complete();Oe.subscribe((0,G.x)(We,nt=>{xe?.unsubscribe();let $e=0;const ht=Q++;(0,u.Xf)(ge(nt,ht)).subscribe(xe=(0,G.x)(We,Ye=>We.next(Te?Te(nt,Ye,ht,$e++):Ye),()=>{xe=null,he()}))},()=>{ee=!0,he()}))})}},9397:(It,Le,z)=>{z.d(Le,{b:()=>ge});var u=z(4674),K=z(9360),G=z(8251),ae=z(2737);function ge(Te,Oe,We){const xe=(0,u.m)(Te)||Oe||We?{next:Te,error:Oe,complete:We}:Te;return xe?(0,K.e)((Q,ee)=>{var he;null===(he=xe.subscribe)||void 0===he||he.call(xe);let nt=!0;Q.subscribe((0,G.x)(ee,$e=>{var ht;null===(ht=xe.next)||void 0===ht||ht.call(xe,$e),ee.next($e)},()=>{var $e;nt=!1,null===($e=xe.complete)||void 0===$e||$e.call(xe),ee.complete()},$e=>{var ht;nt=!1,null===(ht=xe.error)||void 0===ht||ht.call(xe,$e),ee.error($e)},()=>{var $e,ht;nt&&(null===($e=xe.unsubscribe)||void 0===$e||$e.call(xe)),null===(ht=xe.finalize)||void 0===ht||ht.call(xe)}))}):ae.y}},1954:(It,Le,z)=>{z.d(Le,{o:()=>ge});var u=z(7394);class K extends u.w0{constructor(Oe,We){super()}schedule(Oe,We=0){return this}}const G={setInterval(Te,Oe,...We){const{delegate:xe}=G;return xe?.setInterval?xe.setInterval(Te,Oe,...We):setInterval(Te,Oe,...We)},clearInterval(Te){const{delegate:Oe}=G;return(Oe?.clearInterval||clearInterval)(Te)},delegate:void 0};var ae=z(9039);class ge extends K{constructor(Oe,We){super(Oe,We),this.scheduler=Oe,this.work=We,this.pending=!1}schedule(Oe,We=0){var xe;if(this.closed)return this;this.state=Oe;const Q=this.id,ee=this.scheduler;return null!=Q&&(this.id=this.recycleAsyncId(ee,Q,We)),this.pending=!0,this.delay=We,this.id=null!==(xe=this.id)&&void 0!==xe?xe:this.requestAsyncId(ee,this.id,We),this}requestAsyncId(Oe,We,xe=0){return G.setInterval(Oe.flush.bind(Oe,this),xe)}recycleAsyncId(Oe,We,xe=0){if(null!=xe&&this.delay===xe&&!1===this.pending)return We;null!=We&&G.clearInterval(We)}execute(Oe,We){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const xe=this._execute(Oe,We);if(xe)return xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,We){let Q,xe=!1;try{this.work(Oe)}catch(ee){xe=!0,Q=ee||new Error("Scheduled action threw falsy error")}if(xe)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:We}=this,{actions:xe}=We;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(xe,this),null!=Oe&&(this.id=this.recycleAsyncId(We,Oe,null)),this.delay=null,super.unsubscribe()}}}},2631:(It,Le,z)=>{z.d(Le,{v:()=>G});var u=z(4552);class K{constructor(ge,Te=K.now){this.schedulerActionCtor=ge,this.now=Te}schedule(ge,Te=0,Oe){return new this.schedulerActionCtor(this,ge).schedule(Oe,Te)}}K.now=u.l.now;class G extends K{constructor(ge,Te=K.now){super(ge,Te),this.actions=[],this._active=!1}flush(ge){const{actions:Te}=this;if(this._active)return void Te.push(ge);let Oe;this._active=!0;do{if(Oe=ge.execute(ge.state,ge.delay))break}while(ge=Te.shift());if(this._active=!1,Oe){for(;ge=Te.shift();)ge.unsubscribe();throw Oe}}}},6321:(It,Le,z)=>{z.d(Le,{P:()=>ae,z:()=>G});var u=z(1954);const G=new(z(2631).v)(u.o),ae=G},4552:(It,Le,z)=>{z.d(Le,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},7599:(It,Le,z)=>{z.d(Le,{z:()=>u});const u={setTimeout(K,G,...ae){const{delegate:ge}=u;return ge?.setTimeout?ge.setTimeout(K,G,...ae):setTimeout(K,G,...ae)},clearTimeout(K){const{delegate:G}=u;return(G?.clearTimeout||clearTimeout)(K)},delegate:void 0}},4971:(It,Le,z)=>{z.d(Le,{h:()=>K});const K=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(It,Le,z)=>{z.d(Le,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(It,Le,z)=>{z.d(Le,{_6:()=>Te,jO:()=>ae,yG:()=>ge});var u=z(4674),K=z(671);function G(Oe){return Oe[Oe.length-1]}function ae(Oe){return(0,u.m)(G(Oe))?Oe.pop():void 0}function ge(Oe){return(0,K.K)(G(Oe))?Oe.pop():void 0}function Te(Oe,We){return"number"==typeof G(Oe)?Oe.pop():We}},9039:(It,Le,z)=>{function u(K,G){if(K){const ae=K.indexOf(G);0<=ae&&K.splice(ae,1)}}z.d(Le,{P:()=>u})},2306:(It,Le,z)=>{function u(K){const ae=K(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}z.d(Le,{d:()=>u})},1441:(It,Le,z)=>{z.d(Le,{O:()=>ae,x:()=>G});var u=z(2653);let K=null;function G(ge){if(u.config.useDeprecatedSynchronousErrorHandling){const Te=!K;if(Te&&(K={errorThrown:!1,error:null}),ge(),Te){const{errorThrown:Oe,error:We}=K;if(K=null,Oe)throw We}}else ge()}function ae(ge){u.config.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=ge)}},7103:(It,Le,z)=>{function u(K,G,ae,ge=0,Te=!1){const Oe=G.schedule(function(){ae(),Te?K.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(K.add(Oe),!Te)return Oe}z.d(Le,{f:()=>u})},2737:(It,Le,z)=>{function u(K){return K}z.d(Le,{y:()=>u})},4266:(It,Le,z)=>{z.d(Le,{z:()=>u});const u=K=>K&&"number"==typeof K.length&&"function"!=typeof K},5726:(It,Le,z)=>{z.d(Le,{D:()=>K});var u=z(4674);function K(G){return Symbol.asyncIterator&&(0,u.m)(G?.[Symbol.asyncIterator])}},4674:(It,Le,z)=>{function u(K){return"function"==typeof K}z.d(Le,{m:()=>u})},8382:(It,Le,z)=>{z.d(Le,{c:()=>G});var u=z(4850),K=z(4674);function G(ae){return(0,K.m)(ae[u.L])}},3664:(It,Le,z)=>{z.d(Le,{T:()=>G});var u=z(4971),K=z(4674);function G(ae){return(0,K.m)(ae?.[u.h])}},4026:(It,Le,z)=>{z.d(Le,{t:()=>K});var u=z(4674);function K(G){return(0,u.m)(G?.then)}},541:(It,Le,z)=>{z.d(Le,{L:()=>ae,Q:()=>G});var u=z(7582),K=z(4674);function G(ge){return(0,u.FC)(this,arguments,function*(){const Oe=ge.getReader();try{for(;;){const{value:We,done:xe}=yield(0,u.qq)(Oe.read());if(xe)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(We)}}finally{Oe.releaseLock()}})}function ae(ge){return(0,K.m)(ge?.getReader)}},671:(It,Le,z)=>{z.d(Le,{K:()=>K});var u=z(4674);function K(G){return G&&(0,u.m)(G.schedule)}},9360:(It,Le,z)=>{z.d(Le,{A:()=>K,e:()=>G});var u=z(4674);function K(ae){return(0,u.m)(ae?.lift)}function G(ae){return ge=>{if(K(ge))return ge.lift(function(Te){try{return ae(Te,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(It,Le,z)=>{function u(){}z.d(Le,{Z:()=>u})},8407:(It,Le,z)=>{z.d(Le,{U:()=>G,z:()=>K});var u=z(2737);function K(...ae){return G(ae)}function G(ae){return 0===ae.length?u.y:1===ae.length?ae[0]:function(Te){return ae.reduce((Oe,We)=>We(Oe),Te)}}},3894:(It,Le,z)=>{z.d(Le,{h:()=>G});var u=z(2653),K=z(7599);function G(ae){K.z.setTimeout(()=>{const{onUnhandledError:ge}=u.config;if(!ge)throw ae;ge(ae)})}},9853:(It,Le,z)=>{function u(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}z.d(Le,{z:()=>u})},5879:(It,Le,z)=>{z.d(Le,{$8M:()=>Jo,$WT:()=>Ba,$Z:()=>AC,AFp:()=>$S,ALo:()=>kE,AaK:()=>he,CHM:()=>Zd,CRH:()=>qE,EJc:()=>s1,EpF:()=>BI,F$t:()=>pv,F4k:()=>ED,FYo:()=>pC,FiY:()=>ya,Gf:()=>zE,GfV:()=>Um,GkF:()=>CD,Gpc:()=>ht,HDt:()=>ob,Hsn:()=>TD,Ikx:()=>Ev,JOm:()=>k,KtG:()=>Vl,LFG:()=>jn,LMc:()=>BP,Lbi:()=>lC,Lck:()=>HA,MAs:()=>go,MGl:()=>gv,MMx:()=>_E,MR2:()=>eC,NdJ:()=>fv,Ojb:()=>Zn,OlP:()=>qn,Oqu:()=>dc,P3R:()=>US,PXZ:()=>XN,Q6J:()=>ml,QGY:()=>DD,Qsj:()=>to,R0b:()=>is,RDi:()=>ph,Rgc:()=>Yp,SBq:()=>ap,SDv:()=>hE,Sil:()=>l1,Suo:()=>WE,TTD:()=>fs,TgZ:()=>e0,Tol:()=>MD,VKq:()=>B0,VuI:()=>r_,W1O:()=>JE,WLB:()=>IE,X6Q:()=>iM,XFs:()=>Ke,Xpm:()=>ca,Xq5:()=>JC,Xts:()=>wm,Y36:()=>Th,YKP:()=>Gh,YNc:()=>Xy,Yjl:()=>Ef,Yz7:()=>Jt,Z0I:()=>Je,ZZ4:()=>M1,_Bn:()=>gE,_UZ:()=>vl,_c5:()=>OP,_uU:()=>yv,aQg:()=>x1,c2e:()=>o1,cJS:()=>$n,cg1:()=>YD,dDg:()=>wP,dqk:()=>Rt,eFA:()=>g1,eJc:()=>J0,ekj:()=>_v,eoX:()=>KN,f3M:()=>Mn,g9A:()=>zS,h0i:()=>jh,hGG:()=>RP,hij:()=>bv,iGM:()=>$E,ifc:()=>Vt,ip1:()=>Jp,jDz:()=>yE,kEZ:()=>AE,kL8:()=>KD,lG2:()=>us,lcZ:()=>nN,lqb:()=>qu,lri:()=>ZN,n5z:()=>Pi,oAB:()=>Ua,oxw:()=>sd,q4F:()=>lp,qFp:()=>HP,qLn:()=>Ch,qOj:()=>qC,qZA:()=>Ta,rWj:()=>YN,rg0:()=>Bd,s9C:()=>xp,sBO:()=>T1,s_b:()=>Vv,soG:()=>Qp,tb:()=>ab,tp0:()=>Vr,uIk:()=>Ky,vHH:()=>_e,vpe:()=>Cl,wAp:()=>an,xp6:()=>up,z2F:()=>ko,zSh:()=>rC,zW0:()=>YC,zs3:()=>qc});var u=z(8645),K=z(7394),G=z(5619),ae=z(5592),ge=z(3019),Te=z(2096),Oe=z(3020),We=z(4664),xe=z(3997);function Q(s){for(let a in s)if(s[a]===Q)return a;throw Error("Could not find renamed property on target object.")}function ee(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function nt(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const $e=Q({__forward_ref__:Q});function ht(s){return s.__forward_ref__=ht,s.toString=function(){return he(this())},s}function Ye(s){return pt(s)?s():s}function pt(s){return"function"==typeof s&&s.hasOwnProperty($e)&&s.__forward_ref__===ht}function it(s){return s&&!!s.\u0275providers}const Mt="https://g.co/ng/security#xss";class _e extends Error{constructor(a,c){super(function Ve(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,c)),this.code=a}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function vt(s,a){throw new _e(-201,!1)}function Ot(s,a,c,h){throw new Error(`ASSERTION ERROR: ${s}`+(null==h?"":` [Expected=> ${c} ${h} ${a} <=Actual]`))}function Jt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function $n(s){return{providers:s.providers||[],imports:s.imports||[]}}function wi(s){return de(s,He)||de(s,_t)}function Je(s){return null!==wi(s)}function de(s,a){return s.hasOwnProperty(a)?s[a]:null}function Se(s){return s&&(s.hasOwnProperty(rt)||s.hasOwnProperty(Qn))?s[rt]:null}const He=Q({\u0275prov:Q}),rt=Q({\u0275inj:Q}),_t=Q({ngInjectableDef:Q}),Qn=Q({ngInjectorDef:Q});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let ut;function wn(s){const a=ut;return ut=s,a}function si(s,a,c){const h=wi(s);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&Ke.Optional?null:void 0!==a?a:void vt(he(s))}const Rt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ln={},on="__NG_DI_FLAG__",Xn="ngTempTokenPath",$r=/\n/gm,Si="__source";let xi;function di(s){const a=xi;return xi=s,a}function zr(s,a=Ke.Default){if(void 0===xi)throw new _e(-203,!1);return null===xi?si(s,void 0,a):xi.get(s,a&Ke.Optional?null:void 0,a)}function jn(s,a=Ke.Default){return(function yt(){return ut}()||zr)(Ye(s),a)}function Mn(s,a=Ke.Default){return jn(s,te(a))}function te(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function J(s){const a=[];for(let c=0;c<s.length;c++){const h=Ye(s[c]);if(Array.isArray(h)){if(0===h.length)throw new _e(900,!1);let p,v=Ke.Default;for(let b=0;b<h.length;b++){const S=h[b],M=q(S);"number"==typeof M?-1===M?p=S.token:v|=M:p=S}a.push(jn(p,v))}else a.push(jn(h))}return a}function $(s,a){return s[on]=a,s.prototype[on]=a,s}function q(s){return s[on]}function Pe(s){return{toString:s}.toString()}var gt=(()=>((gt=gt||{})[gt.OnPush=0]="OnPush",gt[gt.Default=1]="Default",gt))(),Vt=(()=>{return(s=Vt||(Vt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Vt;var s})();const Ht={},kt=[],en=Q({\u0275cmp:Q}),Un=Q({\u0275dir:Q}),hn=Q({\u0275pipe:Q}),$i=Q({\u0275mod:Q}),ar=Q({\u0275fac:Q}),Ne=Q({__NG_ELEMENT_ID__:Q}),pe=Q({__NG_ENV_ID__:Q});function Xe(s,a,c){let h=s.length;for(;;){const p=s.indexOf(a,c);if(-1===p)return p;if(0===p||s.charCodeAt(p-1)<=32){const v=a.length;if(p+v===h||s.charCodeAt(p+v)<=32)return p}c=p+1}}function xt(s,a,c){let h=0;for(;h<c.length;){const p=c[h];if("number"==typeof p){if(0!==p)break;h++;const v=c[h++],b=c[h++],S=c[h++];s.setAttribute(a,b,S,v)}else{const v=p,b=c[++h];Qt(v)?s.setProperty(a,v,b):s.setAttribute(a,v,b),h++}}return h}function rn(s){return 3===s||4===s||6===s}function Qt(s){return 64===s.charCodeAt(0)}function xn(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let h=0;h<a.length;h++){const p=a[h];"number"==typeof p?c=p:0===c||Ii(s,c,p,null,-1===c||2===c?a[++h]:null)}}return s}function Ii(s,a,c,h,p){let v=0,b=s.length;if(-1===a)b=-1;else for(;v<s.length;){const S=s[v++];if("number"==typeof S){if(S===a){b=-1;break}if(S>a){b=v-1;break}}}for(;v<s.length;){const S=s[v];if("number"==typeof S)break;if(S===c){if(null===h)return void(null!==p&&(s[v+1]=p));if(h===s[v+1])return void(s[v+2]=p)}v++,null!==h&&v++,null!==p&&v++}-1!==b&&(s.splice(b,0,a),v=b+1),s.splice(v++,0,c),null!==h&&s.splice(v++,0,h),null!==p&&s.splice(v++,0,p)}const ai="ng-template";function co(s,a,c){let h=0,p=!0;for(;h<s.length;){let v=s[h++];if("string"==typeof v&&p){const b=s[h++];if(c&&"class"===v&&-1!==Xe(b.toLowerCase(),a,0))return!0}else{if(1===v){for(;h<s.length&&"string"==typeof(v=s[h++]);)if(v.toLowerCase()===a)return!0;return!1}"number"==typeof v&&(p=!1)}}return!1}function Ps(s){return 4===s.type&&s.value!==ai}function Fa(s,a,c){return a===(4!==s.type||c?s.value:ai)}function mc(s,a,c){let h=4;const p=s.attrs||[],v=function Pr(s){for(let a=0;a<s.length;a++)if(rn(s[a]))return a;return s.length}(p);let b=!1;for(let S=0;S<a.length;S++){const M=a[S];if("number"!=typeof M){if(!b)if(4&h){if(h=2|1&h,""!==M&&!Fa(s,M,c)||""===M&&1===a.length){if(kr(h))return!1;b=!0}}else{const P=8&h?M:a[++S];if(8&h&&null!==s.attrs){if(!co(s.attrs,P,c)){if(kr(h))return!1;b=!0}continue}const Y=Id(8&h?"class":M,p,Ps(s),c);if(-1===Y){if(kr(h))return!1;b=!0;continue}if(""!==P){let ie;ie=Y>v?"":p[Y+1].toLowerCase();const ce=8&h?ie:null;if(ce&&-1!==Xe(ce,P,0)||2&h&&P!==ie){if(kr(h))return!1;b=!0}}}}else{if(!b&&!kr(h)&&!kr(M))return!1;if(b&&kr(M))continue;b=!1,h=M|1&h}}return kr(h)||b}function kr(s){return 0==(1&s)}function Id(s,a,c,h){if(null===a)return-1;let p=0;if(h||!c){let v=!1;for(;p<a.length;){const b=a[p];if(b===s)return p;if(3===b||6===b)v=!0;else{if(1===b||2===b){let S=a[++p];for(;"string"==typeof S;)S=a[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=v?1:2}return-1}return function La(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const h=s[c];if("number"==typeof h)return-1;if(h===a)return c;c++}return-1}(a,s)}function la(s,a,c=!1){for(let h=0;h<a.length;h++)if(mc(s,a[h],c))return!0;return!1}function $_(s,a){e:for(let c=0;c<a.length;c++){const h=a[c];if(s.length===h.length){for(let p=0;p<s.length;p++)if(s[p]!==h[p])continue e;return!0}}return!1}function Cr(s,a){return s?":not("+a.trim()+")":a}function Og(s){let a=s[0],c=1,h=2,p="",v=!1;for(;c<s.length;){let b=s[c];if("string"==typeof b)if(2&h){const S=s[++c];p+="["+b+(S.length>0?'="'+S+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!kr(b)&&(a+=Cr(v,p),p=""),h=b,v=v||!kr(h);c++}return""!==p&&(a+=Cr(v,p)),a}function ca(s){return Pe(()=>{const a=Fs(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===gt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Vt.Emulated,styles:s.styles||kt,_:null,schemas:s.schemas||null,tView:null,id:""};Ho(c);const h=s.dependencies;return c.directiveDefs=Ha(h,!1),c.pipeDefs=Ha(h,!0),c.id=function Rg(s){let a=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const p of c)a=Math.imul(31,a)+p.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function du(s){return un(s)||nr(s)}function Df(s){return null!==s}function Ua(s){return Pe(()=>({type:s.type,bootstrap:s.bootstrap||kt,declarations:s.declarations||kt,imports:s.imports||kt,exports:s.exports||kt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Al(s,a){if(null==s)return Ht;const c={};for(const h in s)if(s.hasOwnProperty(h)){let p=s[h],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),c[p]=h,a&&(a[p]=v)}return c}function us(s){return Pe(()=>{const a=Fs(s);return Ho(a),a})}function Ef(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function un(s){return s[en]||null}function nr(s){return s[Un]||null}function Jn(s){return s[hn]||null}function Ba(s){const a=un(s)||nr(s)||Jn(s);return null!==a&&a.standalone}function Wr(s,a){const c=s[$i]||null;if(!c&&!0===a)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return c}function Fs(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||Ht,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||kt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Al(s.inputs,a),outputs:Al(s.outputs)}}function Ho(s){s.features?.forEach(a=>a(s))}function Ha(s,a){if(!s)return null;const c=a?Jn:du;return()=>("function"==typeof s?s():s).map(h=>c(h)).filter(Df)}const yn=0,wt=1,dn=2,hi=3,Fr=4,Nl=5,Dr=6,Va=7,Oi=8,Lr=9,Ls=10,ln=11,ja=12,vc=13,Us=14,li=15,Ga=16,ua=17,qr=18,Bs=19,Od=20,Zr=21,ir=22,Ml=23,ds=24,Cn=25,_c=1,Rd=2,Eo=7,Hs=9,ri=11;function lr(s){return Array.isArray(s)&&"object"==typeof s[_c]}function Ci(s){return Array.isArray(s)&&!0===s[_c]}function fu(s){return 0!=(4&s.flags)}function jo(s){return s.componentOffset>-1}function $a(s){return 1==(1&s.flags)}function rr(s){return!!s.template}function xl(s){return 0!=(512&s[dn])}function js(s,a){return s.hasOwnProperty(ar)?s[ar]:null}let Af=Rt.WeakRef??class Wa{constructor(a){this.ref=a}deref(){return this.ref}},qa=0,ho=null,Za=!1;function fi(s){const a=ho;return ho=s,a}class Ur{constructor(){this.id=qa++,this.ref=function Ld(s){return new Af(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[a,c]of this.producers){const h=c.producerNode.deref();if(void 0!==h&&c.atTrackingVersion===this.trackingVersion){if(h.producerPollStatus(c.seenValueVersion))return!0}else this.producers.delete(a),h?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const a=Za;Za=!0;try{for(const[c,h]of this.consumers){const p=h.consumerNode.deref();void 0!==p&&p.trackingVersion===h.atTrackingVersion?p.onConsumerDependencyMayHaveChanged():(this.consumers.delete(c),p?.producers.delete(this.id))}}finally{Za=a}}producerAccessed(){if(Za)throw new Error("");if(null===ho)return;let a=ho.producers.get(this.id);void 0===a?(a={consumerNode:ho.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:ho.trackingVersion},ho.producers.set(this.id,a),this.consumers.set(ho.id,a)):(a.seenValueVersion=this.valueVersion,a.atTrackingVersion=ho.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==ho?.consumerAllowSignalWrites}producerPollStatus(a){return this.valueVersion!==a||(this.onProducerUpdateValueVersion(),this.valueVersion!==a)}}let vu=null;function Bd(s){const a=fi(null);try{return s()}finally{fi(a)}}const fa=()=>{};class yu extends Ur{constructor(a,c,h){super(),this.watch=a,this.schedule=c,this.dirty=!1,this.cleanupFn=fa,this.registerOnCleanup=p=>{this.cleanupFn=p},this.consumerAllowSignalWrites=h}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const a=fi(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=fa,this.watch(this.registerOnCleanup)}finally{fi(a)}}cleanup(){this.cleanupFn()}}class Pl{constructor(a,c,h){this.previousValue=a,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function fs(){return Cc}function Cc(s){return s.type.prototype.ngOnChanges&&(s.setInput=xf),Fl}function Fl(){const s=Of(this),a=s?.current;if(a){const c=s.previous;if(c===Ht)s.previous=a;else for(let h in a)c[h]=a[h];s.current=null,this.ngOnChanges(a)}}function xf(s,a,c,h){const p=this.declaredInputs[c],v=Of(s)||function Dc(s,a){return s[bu]=a}(s,{previous:Ht,current:null}),b=v.current||(v.current={}),S=v.previous,M=S[p];b[p]=new Pl(M&&M.currentValue,a,S===Ht),s[h]=a}fs.ngInherit=!0;const bu="__ngSimpleChanges__";function Of(s){return s[bu]||null}const ps=function(s,a,c){};function zn(s){for(;Array.isArray(s);)s=s[yn];return s}function Ja(s,a){return zn(a[s])}function zi(s,a){return zn(a[s.index])}function Vd(s,a){return s.data[a]}function So(s,a){return s[a]}function Yr(s,a){const c=a[s];return lr(c)?c:c[yn]}function Io(s,a){return null==a?null:s[a]}function Bl(s){s[ua]=0}function Ic(s){1024&s[dn]||(s[dn]|=1024,Ac(s,1))}function pa(s){1024&s[dn]&&(s[dn]&=-1025,Ac(s,-1))}function Ac(s,a){let c=s[hi];if(null===c)return;c[Nl]+=a;let h=c;for(c=c[hi];null!==c&&(1===a&&1===h[Nl]||-1===a&&0===h[Nl]);)c[Nl]+=a,h=c,c=c[hi]}const Yt={lFrame:Au(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function zs(){return Yt.bindingsEnabled}function zo(){return null!==Yt.skipHydrationRootTNode}function Ze(){return Yt.lFrame.lView}function Dn(){return Yt.lFrame.tView}function Zd(s){return Yt.lFrame.contextLView=s,s[Oi]}function Vl(s){return Yt.lFrame.contextLView=null,s}function ur(){let s=jg();for(;null!==s&&64===s.type;)s=s.parent;return s}function jg(){return Yt.lFrame.currentTNode}function Du(){const s=Yt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}function Wo(s,a){const c=Yt.lFrame;c.currentTNode=s,c.isParent=a}function Gg(){return Yt.lFrame.isParent}function jl(){Yt.lFrame.isParent=!1}function Er(){const s=Yt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function pi(){return Yt.lFrame.bindingIndex++}function Zo(s){const a=Yt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function Gl(s){Yt.lFrame.inI18n=s}function Pf(s,a){const c=Yt.lFrame;c.bindingIndex=c.bindingRootIndex=s,Tu(a)}function Tu(s){Yt.lFrame.currentDirectiveIndex=s}function Iu(){return Yt.lFrame.currentQueryIndex}function Xa(s){Yt.lFrame.currentQueryIndex=s}function ga(s){const a=s[wt];return 2===a.type?a.declTNode:1===a.type?s[Dr]:null}function $l(s,a,c){if(c&Ke.SkipSelf){let p=a,v=s;for(;!(p=p.parent,null!==p||c&Ke.Host||(p=ga(v),null===p||(v=v[Us],10&p.type))););if(null===p)return!1;a=p,s=v}const h=Yt.lFrame=el();return h.currentTNode=a,h.lView=s,!0}function Jd(s){const a=el(),c=s[wt];Yt.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function el(){const s=Yt.lFrame,a=null===s?null:s.child;return null===a?Au(s):a}function Au(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Ff(){const s=Yt.lFrame;return Yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const zl=Ff;function Qd(){const s=Ff();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function dr(){return Yt.lFrame.selectedIndex}function Ws(s){Yt.lFrame.selectedIndex=s}function ci(){const s=Yt.lFrame;return Vd(s.tView,s.selectedIndex)}let xc=!0;function ms(){return xc}function Yo(s){xc=s}function ql(s,a){for(let c=a.directiveStart,h=a.directiveEnd;c<h;c++){const v=s.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:S,ngAfterViewInit:M,ngAfterViewChecked:P,ngOnDestroy:B}=v;b&&(s.contentHooks??=[]).push(-c,b),S&&((s.contentHooks??=[]).push(c,S),(s.contentCheckHooks??=[]).push(c,S)),M&&(s.viewHooks??=[]).push(-c,M),P&&((s.viewHooks??=[]).push(c,P),(s.viewCheckHooks??=[]).push(c,P)),null!=B&&(s.destroyHooks??=[]).push(c,B)}}function tl(s,a,c){Ri(s,a,3,c)}function Zl(s,a,c,h){(3&s[dn])===c&&Ri(s,a,c,h)}function Oc(s,a){let c=s[dn];(3&c)===a&&(c&=8191,c+=1,s[dn]=c)}function Ri(s,a,c,h){const v=h??-1,b=a.length-1;let S=0;for(let M=void 0!==h?65535&s[ua]:0;M<b;M++)if("number"==typeof a[M+1]){if(S=a[M],null!=h&&S>=h)break}else a[M]<0&&(s[ua]+=65536),(S<v||-1==v)&&(Uf(s,c,a,M),s[ua]=(4294901760&s[ua])+M+2),M++}function hr(s,a){ps(4,s,a);const c=fi(null);try{a.call(s)}finally{fi(c),ps(5,s,a)}}function Uf(s,a,c,h){const p=c[h]<0,v=c[h+1],S=s[p?-c[h]:c[h]];p?s[dn]>>13<s[ua]>>16&&(3&s[dn])===a&&(s[dn]+=8192,hr(S,v)):hr(S,v)}const Rn=-1;class Ut{constructor(a,c,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function Lt(s){return s!==Rn}function Kr(s){return 32767&s}function ma(s,a){let c=function Pc(s){return s>>16}(s),h=a;for(;c>0;)h=h[Us],c--;return h}let fo=!0;function il(s){const a=fo;return fo=s,a}const Ao=255,va=5;let Wg=0;const No={};function vs(s,a){const c=Fc(s,a);if(-1!==c)return c;const h=a[wt];h.firstCreatePass&&(s.injectorIndex=a.length,_a(h.data,s),_a(a,null),_a(h.blueprint,null));const p=_s(s,a),v=s.injectorIndex;if(Lt(p)){const b=Kr(p),S=ma(p,a),M=S[wt].data;for(let P=0;P<8;P++)a[v+P]=S[b+P]|M[b+P]}return a[v+8]=p,v}function _a(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Fc(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function _s(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,h=null,p=a;for(;null!==p;){if(h=xu(p),null===h)return Rn;if(c++,p=p[Us],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return Rn}function Jr(s,a,c){!function Vf(s,a,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(Ne)&&(h=c[Ne]),null==h&&(h=c[Ne]=Wg++);const p=h&Ao;a.data[s+(p>>va)]|=1<<p}(s,a,c)}function rl(s,a,c){if(c&Ke.Optional||void 0!==s)return s;vt()}function qs(s,a,c,h){if(c&Ke.Optional&&void 0===h&&(h=null),!(c&(Ke.Self|Ke.Host))){const p=s[Lr],v=wn(void 0);try{return p?p.get(a,h,c&Ke.Optional):si(a,h,c&Ke.Optional)}finally{wn(v)}}return rl(h,0,c)}function po(s,a,c,h=Ke.Default,p){if(null!==s){if(2048&a[dn]&&!(h&Ke.Self)){const b=function ih(s,a,c,h,p){let v=s,b=a;for(;null!==v&&null!==b&&2048&b[dn]&&!(512&b[dn]);){const S=nh(v,b,c,h|Ke.Self,No);if(S!==No)return S;let M=v.parent;if(!M){const P=b[Od];if(P){const B=P.get(c,No,h);if(B!==No)return B}M=xu(b),b=b[Us]}v=M}return p}(s,a,c,h,No);if(b!==No)return b}const v=nh(s,a,c,h,No);if(v!==No)return v}return qs(a,c,h,p)}function nh(s,a,c,h,p){const v=function ei(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Ne)?s[Ne]:void 0;return"number"==typeof a?a>=0?a&Ao:Wn:a}(c);if("function"==typeof v){if(!$l(a,s,h))return h&Ke.Host?rl(p,0,h):qs(a,c,h,p);try{const b=v(h);if(null!=b||h&Ke.Optional)return b;vt()}finally{zl()}}else if("number"==typeof v){let b=null,S=Fc(s,a),M=Rn,P=h&Ke.Host?a[li][Dr]:null;for((-1===S||h&Ke.SkipSelf)&&(M=-1===S?_s(s,a):a[S+8],M!==Rn&&ki(h,!1)?(b=a[wt],S=Kr(M),a=ma(M,a)):S=-1);-1!==S;){const B=a[wt];if(ti(v,S,B.data)){const Y=fr(S,a,c,b,h,P);if(Y!==No)return Y}M=a[S+8],M!==Rn&&ki(h,a[wt].data[S+8]===P)&&ti(v,S,a)?(b=B,S=Kr(M),a=ma(M,a)):S=-1}}return p}function fr(s,a,c,h,p,v){const b=a[wt],S=b.data[s+8],B=ol(S,b,c,null==h?jo(S)&&fo:h!=b&&0!=(3&S.type),p&Ke.Host&&v===S);return null!==B?Qr(a,b,B,S):No}function ol(s,a,c,h,p){const v=s.providerIndexes,b=a.data,S=1048575&v,M=s.directiveStart,B=v>>20,ie=p?S+B:s.directiveEnd;for(let ce=h?S:S+B;ce<ie;ce++){const Ue=b[ce];if(ce<M&&c===Ue||ce>=M&&Ue.type===c)return ce}if(p){const ce=b[M];if(ce&&rr(ce)&&ce.type===c)return M}return null}function Qr(s,a,c,h){let p=s[c];const v=a.data;if(function Tr(s){return s instanceof Ut}(p)){const b=p;b.resolving&&function qe(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new _e(-200,`Circular dependency in DI detected for ${s}${c}`)}(function Re(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}(v[c]));const S=il(b.canSeeViewProviders);b.resolving=!0;const M=b.injectImpl?wn(b.injectImpl):null;$l(s,h,Ke.Default);try{p=s[c]=b.factory(void 0,v,s,h),a.firstCreatePass&&c>=h.directiveStart&&function eh(s,a,c){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:v}=a.type.prototype;if(h){const b=Cc(a);(c.preOrderHooks??=[]).push(s,b),(c.preOrderCheckHooks??=[]).push(s,b)}p&&(c.preOrderHooks??=[]).push(0-s,p),v&&((c.preOrderHooks??=[]).push(s,v),(c.preOrderCheckHooks??=[]).push(s,v))}(c,v[c],a)}finally{null!==M&&wn(M),il(S),b.resolving=!1,zl()}}return p}function ti(s,a,c){return!!(c[a+(s>>va)]&1<<s)}function ki(s,a){return!(s&Ke.Self||s&Ke.Host&&a)}class Ko{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,h){return po(this._tNode,this._lView,a,te(h),c)}}function Wn(){return new Ko(ur(),Ze())}function Pi(s){return Pe(()=>{const a=s.prototype.constructor,c=a[ar]||sl(a),h=Object.prototype;let p=Object.getPrototypeOf(s.prototype).constructor;for(;p&&p!==h;){const v=p[ar]||sl(p);if(v&&v!==c)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function sl(s){return pt(s)?()=>{const a=sl(Ye(s));return a&&a()}:js(s)}function xu(s){const a=s[wt],c=a.type;return 2===c?a.declTNode:1===c?s[Dr]:null}function Jo(s){return function jf(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const h=c.length;let p=0;for(;p<h;){const v=c[p];if(rn(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<h&&"string"==typeof c[p];)p++;else{if(v===a)return c[p+1];p+=2}}}return null}(ur(),s)}const gi="__parameters__";function Br(s,a,c){return Pe(()=>{const h=function Zs(s){return function(...c){if(s){const h=s(...c);for(const p in h)this[p]=h[p]}}}(a);function p(...v){if(this instanceof p)return h.apply(this,v),this;const b=new p(...v);return S.annotation=b,S;function S(M,P,B){const Y=M.hasOwnProperty(gi)?M[gi]:Object.defineProperty(M,gi,{value:[]})[gi];for(;Y.length<=B;)Y.push(null);return(Y[B]=Y[B]||[]).push(b),M}}return c&&(p.prototype=Object.create(c.prototype)),p.prototype.ngMetadataName=s,p.annotationCls=p,p})}function Mo(s,a){s.forEach(c=>Array.isArray(c)?Mo(c,a):a(c))}function Bc(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function Ou(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function bs(s,a){const c=[];for(let h=0;h<s;h++)c.push(a);return c}function O(s,a,c){let h=Z(s,a);return h>=0?s[1|h]=c:(h=~h,function cl(s,a,c,h){let p=s.length;if(p==a)s.push(c,h);else if(1===p)s.push(h,s[0]),s[0]=c;else{for(p--,s.push(s[p-1],s[p]);p>a;)s[p]=s[p-2],p--;s[a]=c,s[a+1]=h}}(s,h,a,c)),h}function L(s,a){const c=Z(s,a);if(c>=0)return s[1|c]}function Z(s,a){return function se(s,a,c){let h=0,p=s.length>>c;for(;p!==h;){const v=h+(p-h>>1),b=s[v<<c];if(a===b)return v<<c;b>a?p=v:h=v+1}return~(p<<c)}(s,a,1)}const ya=$(Br("Optional"),8),Vr=$(Br("SkipSelf"),4);function y(s){return 128==(128&s.flags)}var k=(()=>((k=k||{})[k.Important=1]="Important",k[k.DashCase=2]="DashCase",k))();const U=/^>|^->|<!--|-->|--!>|<!-$/g,X=/(<|>)/,fe="\u200b$1\u200b";const Ge=new Map;let Et=0;const $c="__ngContext__";function gr(s,a){lr(a)?(s[$c]=a[Bs],function Gn(s){Ge.set(s[Bs],s)}(a)):s[$c]=a}let sy;function uh(s,a){return sy(s,a)}function Zf(s){const a=s[hi];return Ci(a)?a[hi]:a}function xw(s){return ay(s[ja])}function im(s){return ay(s[Fr])}function ay(s){for(;null!==s&&!Ci(s);)s=s[Fr];return s}function ju(s,a,c,h,p){if(null!=h){let v,b=!1;Ci(h)?v=h:lr(h)&&(b=!0,h=h[yn]);const S=zn(h);0===s&&null!==c?null==p?uy(a,c,S):Gu(a,c,S,p||null,!0):1===s&&null!==c?Gu(a,c,S,p||null,!0):2===s?function lm(s,a,c){const h=nc(s,a);h&&function fS(s,a,c,h){s.removeChild(a,c,h)}(s,h,a,c)}(a,S,b):3===s&&a.destroyNode(S),null!=v&&function gS(s,a,c,h,p){const v=c[Eo];v!==zn(c)&&ju(a,s,h,v,p);for(let S=ri;S<c.length;S++){const M=c[S];hh(M[wt],M,s,a,h,v)}}(a,s,v,c,p)}}function Kf(s,a){return s.createText(a)}function rm(s,a){return s.createComment(function st(s){return s.replace(U,a=>a.replace(X,fe))}(a))}function om(s,a,c){return s.createElement(a,c)}function Ow(s,a){const c=s[Hs],h=c.indexOf(a);pa(a),c.splice(h,1)}function cy(s,a){if(s.length<=ri)return;const c=ri+a,h=s[c];if(h){const p=h[Ga];null!==p&&p!==s&&Ow(p,h),a>0&&(s[c-1][Fr]=h[Fr]);const v=Ou(s,ri+a);!function $R(s,a){hh(s,a,a[ln],2,null,null),a[yn]=null,a[Dr]=null}(h[wt],h);const b=v[qr];null!==b&&b.detachView(v[wt]),h[hi]=null,h[Fr]=null,h[dn]&=-129}return h}function sm(s,a){if(!(256&a[dn])){const c=a[ln];a[Ml]?.destroy(),a[ds]?.destroy(),c.destroyNode&&hh(s,a,c,3,null,null),function qR(s){let a=s[ja];if(!a)return Cs(s[wt],s);for(;a;){let c=null;if(lr(a))c=a[ja];else{const h=a[ri];h&&(c=h)}if(!c){for(;a&&!a[Fr]&&a!==s;)lr(a)&&Cs(a[wt],a),a=a[hi];null===a&&(a=s),lr(a)&&Cs(a[wt],a),c=a&&a[Fr]}a=c}}(a)}}function Cs(s,a){if(!(256&a[dn])){a[dn]&=-129,a[dn]|=256,function Jf(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let h=0;h<c.length;h+=2){const p=a[c[h]];if(!(p instanceof Ut)){const v=c[h+1];if(Array.isArray(v))for(let b=0;b<v.length;b+=2){const S=p[v[b]],M=v[b+1];ps(4,S,M);try{M.call(S)}finally{ps(5,S,M)}}else{ps(4,p,v);try{v.call(p)}finally{ps(5,p,v)}}}}}(s,a),function hS(s,a){const c=s.cleanup,h=a[Va];if(null!==c)for(let v=0;v<c.length-1;v+=2)if("string"==typeof c[v]){const b=c[v+3];b>=0?h[b]():h[-b].unsubscribe(),v+=2}else c[v].call(h[c[v+1]]);null!==h&&(a[Va]=null);const p=a[Zr];if(null!==p){a[Zr]=null;for(let v=0;v<p.length;v++)(0,p[v])()}}(s,a),1===a[wt].type&&a[ln].destroy();const c=a[Ga];if(null!==c&&Ci(a[hi])){c!==a[hi]&&Ow(c,a);const h=a[qr];null!==h&&h.detachView(s)}!function wa(s){Ge.delete(s[Bs])}(a)}}function Rw(s,a,c){return kw(s,a.parent,c)}function kw(s,a,c){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return c[yn];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:v}=s.data[h.directiveStart+p];if(v===Vt.None||v===Vt.Emulated)return null}return zi(h,c)}}function Gu(s,a,c,h,p){s.insertBefore(a,c,h,p)}function uy(s,a,c){s.appendChild(a,c)}function Qf(s,a,c,h,p){null!==h?Gu(s,a,c,h,p):uy(s,a,c)}function nc(s,a){return s.parentNode(a)}function Pw(s,a,c){return dh(s,a,c)}function Fw(s,a,c){return 40&s.type?zi(s,c):null}let $u,um,hm,fm,dh=Fw;function Lw(s,a){dh=s,$u=a}function am(s,a,c,h){const p=Rw(s,h,a),v=a[ln],S=Pw(h.parent||a[Dr],h,a);if(null!=p)if(Array.isArray(c))for(let M=0;M<c.length;M++)Qf(v,p,c[M],S,!1);else Qf(v,p,c,S,!1);void 0!==$u&&$u(v,h,a,c,p)}function ep(s,a){if(null!==a){const c=a.type;if(3&c)return zi(a,s);if(4&c)return dy(-1,s[a.index]);if(8&c){const h=a.child;if(null!==h)return ep(s,h);{const p=s[a.index];return Ci(p)?dy(-1,p):zn(p)}}if(32&c)return uh(a,s)()||zn(s[a.index]);{const h=Uw(s,a);return null!==h?Array.isArray(h)?h[0]:ep(Zf(s[li]),h):ep(s,a.next)}}return null}function Uw(s,a){return null!==a?s[li][Dr].projection[a.projection]:null}function dy(s,a){const c=ri+s+1;if(c<a.length){const h=a[c],p=h[wt].firstChild;if(null!==p)return ep(h,p)}return a[Eo]}function hy(s,a,c,h,p,v,b){for(;null!=c;){const S=h[c.index],M=c.type;if(b&&0===a&&(S&&gr(zn(S),h),c.flags|=2),32!=(32&c.flags))if(8&M)hy(s,a,c.child,h,p,v,!1),ju(a,s,p,S,v);else if(32&M){const P=uh(c,h);let B;for(;B=P();)ju(a,s,p,B,v);ju(a,s,p,S,v)}else 16&M?zu(s,a,h,c,p,v):ju(a,s,p,S,v);c=b?c.projectionNext:c.next}}function hh(s,a,c,h,p,v){hy(c,h,s.firstChild,a,p,v,!1)}function zu(s,a,c,h,p,v){const b=c[li],M=b[Dr].projection[h.projection];if(Array.isArray(M))for(let P=0;P<M.length;P++)ju(a,s,p,M[P],v);else{let P=M;const B=b[hi];y(h)&&(P.flags|=128),hy(s,a,P,B,p,v,!0)}}function Bw(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function Hw(s,a,c){const{mergedAttrs:h,classes:p,styles:v}=c;null!==h&&xt(s,a,h),null!==p&&Bw(s,a,p),null!==v&&function vS(s,a,c){s.setAttribute(a,"style",c)}(s,a,v)}function fh(s){return function fy(){if(void 0===um&&(um=null,Rt.trustedTypes))try{um=Rt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return um}()?.createHTML(s)||s}function ph(s){hm=s}function gh(){if(void 0!==hm)return hm;if(typeof document<"u")return document;throw new _e(210,!1)}function Gw(s){return function py(){if(void 0===fm&&(fm=null,Rt.trustedTypes))try{fm=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return fm}()?.createScriptURL(s)||s}class gm{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mt})`}}function Da(s){return s instanceof gm?s.changingThisBreaksApplicationSecurity:s}function tp(s,a){const c=function DS(s){return s instanceof gm&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${Mt})`)}return c===a}class zw{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(fh(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class Ww{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=fh(a),c}}const IS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gy(s){return(s=String(s)).match(IS)?s:"unsafe:"+s}function ic(s){const a={};for(const c of s.split(","))a[c]=!0;return a}function np(...s){const a={};for(const c of s)for(const h in c)c.hasOwnProperty(h)&&(a[h]=!0);return a}const qw=ic("area,br,col,hr,img,wbr"),my=ic("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mm=ic("rp,rt"),vm=np(qw,np(my,ic("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),np(mm,ic("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),np(mm,my)),mh=ic("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yw=np(mh,ic("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ic("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var mr=(()=>((mr=mr||{})[mr.NONE=0]="NONE",mr[mr.HTML=1]="HTML",mr[mr.STYLE=2]="STYLE",mr[mr.SCRIPT=3]="SCRIPT",mr[mr.URL=4]="URL",mr[mr.RESOURCE_URL=5]="RESOURCE_URL",mr))();function es(s){const a=Wu();return a?a.sanitize(mr.URL,s)||"":tp(s,"URL")?Da(s):gy(me(s))}function Jw(s){const a=Wu();if(a)return Gw(a.sanitize(mr.RESOURCE_URL,s)||"");if(tp(s,"ResourceURL"))return Gw(Da(s));throw new _e(904,!1)}function US(s,a,c){return function Qw(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?Jw:es}(a,c)(s)}function Wu(){const s=Ze();return s&&s[Ls].sanitizer}class qn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Jt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const wm=new qn("ENVIRONMENT_INITIALIZER"),vy=new qn("INJECTOR",-1),fl=new qn("INJECTOR_DEF_TYPES");class Xw{get(a,c=Ln){if(c===Ln){const h=new Error(`NullInjectorError: No provider for ${he(a)}!`);throw h.name="NullInjectorError",h}return c}}function eC(s){return{\u0275providers:s}}function ik(...s){return{\u0275providers:BS(0,s),\u0275fromNgModule:!0}}function BS(s,...a){const c=[],h=new Set;let p;return Mo(a,v=>{const b=v;Cm(b,c,[],h)&&(p||=[],p.push(b))}),void 0!==p&&_y(p,c),c}function _y(s,a){for(let c=0;c<s.length;c++){const{providers:p}=s[c];yy(p,v=>{a.push(v)})}}function Cm(s,a,c,h){if(!(s=Ye(s)))return!1;let p=null,v=Se(s);const b=!v&&un(s);if(v||b){if(b&&!b.standalone)return!1;p=s}else{const M=s.ngModule;if(v=Se(M),!v)return!1;p=M}const S=h.has(p);if(b){if(S)return!1;if(h.add(p),b.dependencies){const M="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const P of M)Cm(P,a,c,h)}}else{if(!v)return!1;{if(null!=v.imports&&!S){let P;h.add(p);try{Mo(v.imports,B=>{Cm(B,a,c,h)&&(P||=[],P.push(B))})}finally{}void 0!==P&&_y(P,a)}if(!S){const P=js(p)||(()=>new p);a.push({provide:p,useFactory:P,deps:kt},{provide:fl,useValue:p,multi:!0},{provide:wm,useValue:()=>jn(p),multi:!0})}const M=v.providers;null==M||S||yy(M,B=>{a.push(B)})}}return p!==s&&void 0!==s.providers}function yy(s,a){for(let c of s)it(c)&&(c=c.\u0275providers),Array.isArray(c)?yy(c,a):a(c)}const HS=Q({provide:String,useValue:Q});function nC(s){return null!==s&&"object"==typeof s&&HS in s}function vh(s){return"function"==typeof s}const rC=new qn("Set Injector scope."),Dm={},ok={};let Em;function Tm(){return void 0===Em&&(Em=new Xw),Em}class qu{}class Sm extends qu{get destroyed(){return this._destroyed}constructor(a,c,h,p){super(),this.parent=c,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,aC(a,b=>this.processProvider(b)),this.records.set(vy,_h(void 0,this)),p.has("environment")&&this.records.set(qu,_h(void 0,this));const v=this.records.get(rC);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(fl.multi,kt,Ke.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=di(this),h=wn(void 0);try{return a()}finally{di(c),wn(h)}}get(a,c=Ln,h=Ke.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(pe))return a[pe](this);h=te(h);const p=di(this),v=wn(void 0);try{if(!(h&Ke.SkipSelf)){let S=this.records.get(a);if(void 0===S){const M=function sk(s){return"function"==typeof s||"object"==typeof s&&s instanceof qn}(a)&&wi(a);S=M&&this.injectableDefInScope(M)?_h(wy(a),Dm):null,this.records.set(a,S)}if(null!=S)return this.hydrate(a,S)}return(h&Ke.Self?Tm():this.parent).get(a,c=h&Ke.Optional&&c===Ln?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[Xn]=b[Xn]||[]).unshift(he(a)),p)throw b;return function H(s,a,c,h){const p=s[Xn];throw a[Si]&&p.unshift(a[Si]),s.message=function le(s,a,c,h=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let p=he(a);if(Array.isArray(a))p=a.map(he).join(" -> ");else if("object"==typeof a){let v=[];for(let b in a)if(a.hasOwnProperty(b)){let S=a[b];v.push(b+":"+("string"==typeof S?JSON.stringify(S):he(S)))}p=`{${v.join(", ")}}`}return`${c}${h?"("+h+")":""}[${p}]: ${s.replace($r,"\n  ")}`}("\n"+s.message,p,c,h),s.ngTokenPath=p,s[Xn]=null,s}(b,a,"R3InjectorError",this.source)}throw b}finally{wn(v),di(p)}}resolveInjectorInitializers(){const a=di(this),c=wn(void 0);try{const h=this.get(wm.multi,kt,Ke.Self);for(const p of h)p()}finally{di(a),wn(c)}}toString(){const a=[],c=this.records;for(const h of c.keys())a.push(he(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(a){let c=vh(a=Ye(a))?a:Ye(a&&a.provide);const h=function jS(s){return nC(s)?_h(void 0,s.useValue):_h(oC(s),Dm)}(a);if(vh(a)||!0!==a.multi)this.records.get(c);else{let p=this.records.get(c);p||(p=_h(void 0,Dm,!0),p.factory=()=>J(p.multi),this.records.set(c,p)),c=a,p.multi.push(a)}this.records.set(c,h)}hydrate(a,c){return c.value===Dm&&(c.value=ok,c.value=c.factory()),"object"==typeof c.value&&c.value&&function GS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Ye(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function wy(s){const a=wi(s),c=null!==a?a.factory:js(s);if(null!==c)return c;if(s instanceof qn)throw new _e(204,!1);if(s instanceof Function)return function VS(s){const a=s.length;if(a>0)throw bs(a,"?"),new _e(204,!1);const c=function oe(s){return s&&(s[He]||s[_t])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new _e(204,!1)}function oC(s,a,c){let h;if(vh(s)){const p=Ye(s);return js(p)||wy(p)}if(nC(s))h=()=>Ye(s.useValue);else if(function iC(s){return!(!s||!s.useFactory)}(s))h=()=>s.useFactory(...J(s.deps||[]));else if(function by(s){return!(!s||!s.useExisting)}(s))h=()=>jn(Ye(s.useExisting));else{const p=Ye(s&&(s.useClass||s.provide));if(!function sC(s){return!!s.deps}(s))return js(p)||wy(p);h=()=>new p(...J(s.deps))}return h}function _h(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function aC(s,a){for(const c of s)Array.isArray(c)?aC(c,a):c&&it(c)?aC(c.\u0275providers,a):a(c)}const $S=new qn("AppId",{providedIn:"root",factory:()=>ak}),ak="ng",zS=new qn("Platform Initializer"),lC=new qn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Zn=new qn("CSP nonce",{providedIn:"root",factory:()=>gh().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let WS=(s,a)=>null;function cC(s,a){return WS(s,a)}class Yi{}class hC{}class YS{resolveComponentFactory(a){throw function km(s){const a=Error(`No component factory found for ${he(s)}.`);return a.ngComponent=s,a}(a)}}let Fm=(()=>{class s{}return s.NULL=new YS,s})();function fC(){return bh(ur(),Ze())}function bh(s,a){return new ap(zi(s,a))}let ap=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=fC,s})();function KS(s){return s instanceof ap?s.nativeElement:s}class pC{}let to=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function Lm(){const s=Ze(),c=Yr(ur().index,s);return(lr(c)?c:s)[ln]}(),s})(),Iy=(()=>{class s{}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:()=>null}),s})();class Um{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const lp=new Um("16.1.2"),wh={};function Ju(s){for(;s;){s[dn]|=64;const a=Zf(s);if(xl(s)&&!a)return s;s=a}return null}function Bm(s){return s.ngOriginalError}class Ch{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Bm(a);for(;c&&Bm(c);)c=Bm(c);return c||null}}const Ay=new qn("",{providedIn:"root",factory:()=>!1});function pl(s){return s instanceof Function?s():s}class $m extends Ur{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(a){this._lView=a}onConsumerDependencyMayHaveChanged(){Ju(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(a,c,h){const p=fi(this);this.trackingVersion++;try{a(c,h)}finally{fi(p)}}destroy(){this.trackingVersion++}}let Eh=null;function zm(){return Eh??=new $m,Eh}function bC(s,a){return s[a]??zm()}function wC(s,a){const c=zm();c.hasReadASignal&&(s[a]=Eh,c.lView=s,Eh=new $m)}const mn={};function up(s){Wm(Dn(),Ze(),dr()+s,!1)}function Wm(s,a,c,h){if(!h)if(3==(3&a[dn])){const v=s.preOrderCheckHooks;null!==v&&tl(a,v,c)}else{const v=s.preOrderHooks;null!==v&&Zl(a,v,0,c)}Ws(c)}function SC(s,a=null,c=null,h){const p=IC(s,a,c,h);return p.resolveInjectorInitializers(),p}function IC(s,a=null,c=null,h,p=new Set){const v=[c||kt,ik(s)];return h=h||("object"==typeof s?void 0:he(s)),new Sm(v,a||Tm(),h||null,p)}let qc=(()=>{class s{static create(c,h){if(Array.isArray(c))return SC({name:""},h,c,"");{const p=c.name??"";return SC({name:p},c.parent,c.providers,p)}}}return s.THROW_IF_NOT_FOUND=Ln,s.NULL=new Xw,s.\u0275prov=Jt({token:s,providedIn:"any",factory:()=>jn(vy)}),s.__NG_ELEMENT_ID__=-1,s})();function Th(s,a=Ke.Default){const c=Ze();return null===c?jn(s,a):po(ur(),c,Ye(s),a)}function AC(){throw new Error("invalid")}function Zm(s,a,c,h,p,v,b,S,M,P,B){const Y=a.blueprint.slice();return Y[yn]=p,Y[dn]=140|h,(null!==P||s&&2048&s[dn])&&(Y[dn]|=2048),Bl(Y),Y[hi]=Y[Us]=s,Y[Oi]=c,Y[Ls]=b||s&&s[Ls],Y[ln]=S||s&&s[ln],Y[Lr]=M||s&&s[Lr]||null,Y[Dr]=v,Y[Bs]=function gn(){return Et++}(),Y[ir]=B,Y[Od]=P,Y[li]=2==a.type?s[li]:Y,Y}function rc(s,a,c,h,p){let v=s.data[a];if(null===v)v=Ym(s,a,c,h,p),function Wi(){return Yt.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=c,v.value=h,v.attrs=p;const b=Du();v.injectorIndex=null===b?-1:b.injectorIndex}return Wo(v,!0),v}function Ym(s,a,c,h,p){const v=jg(),b=Gg(),M=s.data[a]=function Fy(s,a,c,h,p,v){let b=a?a.injectorIndex:-1,S=0;return zo()&&(S|=128),{type:c,index:h,insertBeforeIndex:null,injectorIndex:b,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:S,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?v:v&&v.parent,c,a,h,p);return null===s.firstChild&&(s.firstChild=M),null!==v&&(b?null==v.child&&null!==M.parent&&(v.child=M):null===v.next&&(v.next=M,M.prev=v)),M}function Sh(s,a,c,h){if(0===c)return-1;const p=a.length;for(let v=0;v<c;v++)a.push(h),s.blueprint.push(h),s.data.push(null);return p}function Km(s,a,c,h,p){const v=bC(a,Ml),b=dr(),S=2&h;try{if(Ws(-1),S&&a.length>Cn&&Wm(s,a,Cn,!1),ps(S?2:0,p),S)v.runInContext(c,h,p);else{const P=fi(null);try{c(h,p)}finally{fi(P)}}}finally{S&&null===a[Ml]&&wC(a,Ml),Ws(b),ps(S?3:1,p)}}function Oy(s,a,c){if(fu(a)){const h=fi(null);try{const v=a.directiveEnd;for(let b=a.directiveStart;b<v;b++){const S=s.data[b];S.contentQueries&&S.contentQueries(1,c[b],b)}}finally{fi(h)}}}function Ry(s,a,c){zs()&&(function wk(s,a,c,h){const p=c.directiveStart,v=c.directiveEnd;jo(c)&&function Sk(s,a,c){const h=zi(a,s),p=Py(c);let b=16;c.signals?b=4096:c.onPush&&(b=64);const S=dp(s,Zm(s,p,null,b,h,a,null,s[Ls].rendererFactory.createRenderer(h,c),null,null,null));s[a.index]=S}(a,c,s.data[p+c.componentOffset]),s.firstCreatePass||vs(c,a),gr(h,a);const b=c.initialInputs;for(let S=p;S<v;S++){const M=s.data[S],P=Qr(a,s,S,c);gr(P,a),null!==b&&fI(0,S-p,P,M,0,b),rr(M)&&(Yr(c.index,a)[Oi]=Qr(a,s,S,c))}}(s,a,c,zi(c,a)),64==(64&c.flags)&&FC(s,a,c))}function ky(s,a,c=zi){const h=a.localNames;if(null!==h){let p=a.index+1;for(let v=0;v<h.length;v+=2){const b=h[v+1],S=-1===b?c(a,s):s[b];s[p++]=S}}}function Py(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Jm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function Jm(s,a,c,h,p,v,b,S,M,P,B){const Y=Cn+h,ie=Y+p,ce=function NC(s,a){const c=[];for(let h=0;h<a;h++)c.push(h<s?null:mn);return c}(Y,ie),Ue="function"==typeof P?P():P;return ce[wt]={type:s,blueprint:ce,template:c,queries:null,viewQuery:S,declTNode:a,data:ce.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:M,consts:Ue,incompleteFirstPass:!1,ssrId:B}}let oI=s=>null;function aI(s,a,c,h){for(let p in s)if(s.hasOwnProperty(p)){c=null===c?{}:c;const v=s[p];null===h?lI(c,a,p,v):h.hasOwnProperty(p)&&lI(c,a,h[p],v)}return c}function lI(s,a,c,h){s.hasOwnProperty(c)?s[c].push(a,h):s[c]=[a,h]}function Es(s,a,c,h,p,v,b,S){const M=zi(a,c);let B,P=a.inputs;!S&&null!=P&&(B=P[h])?(ta(s,c,B,h,p),jo(a)&&function RC(s,a){const c=Yr(a,s);16&c[dn]||(c[dn]|=64)}(c,a.index)):3&a.type&&(h=function OC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(h),p=null!=b?b(p,a.value||"",h):p,v.setProperty(M,h,p))}function PC(s,a,c,h){if(zs()){const p=null===h?null:{"":-1},v=function Ck(s,a){const c=s.directiveRegistry;let h=null,p=null;if(c)for(let v=0;v<c.length;v++){const b=c[v];if(la(a,b.selectors,!1))if(h||(h=[]),rr(b))if(null!==b.findHostDirectiveDefs){const S=[];p=p||new Map,b.findHostDirectiveDefs(b,S,p),h.unshift(...S,b),LC(s,a,S.length)}else h.unshift(b),LC(s,a,0);else p=p||new Map,b.findHostDirectiveDefs?.(b,h,p),h.push(b)}return null===h?null:[h,p]}(s,c);let b,S;null===v?b=S=null:[b,S]=v,null!==b&&Qm(s,a,c,b,p,S),p&&function hI(s,a,c){if(a){const h=s.localNames=[];for(let p=0;p<a.length;p+=2){const v=c[a[p+1]];if(null==v)throw new _e(-301,!1);h.push(a[p],v)}}}(c,h,p)}c.mergedAttrs=xn(c.mergedAttrs,c.attrs)}function Qm(s,a,c,h,p,v){for(let P=0;P<h.length;P++)Jr(vs(c,a),s,h[P].type);!function Ek(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,h.length);for(let P=0;P<h.length;P++){const B=h[P];B.providersResolver&&B.providersResolver(B)}let b=!1,S=!1,M=Sh(s,a,h.length,null);for(let P=0;P<h.length;P++){const B=h[P];c.mergedAttrs=xn(c.mergedAttrs,B.hostAttrs),Tk(s,c,a,M,B),Dk(M,B,p),null!==B.contentQueries&&(c.flags|=4),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(c.flags|=64);const Y=B.type.prototype;!b&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),b=!0),!S&&(Y.ngOnChanges||Y.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),S=!0),M++}!function cI(s,a,c){const p=a.directiveEnd,v=s.data,b=a.attrs,S=[];let M=null,P=null;for(let B=a.directiveStart;B<p;B++){const Y=v[B],ie=c?c.get(Y):null,Ue=ie?ie.outputs:null;M=aI(Y.inputs,B,M,ie?ie.inputs:null),P=aI(Y.outputs,B,P,Ue);const at=null===M||null===b||Ps(a)?null:BC(M,B,b);S.push(at)}null!==M&&(M.hasOwnProperty("class")&&(a.flags|=8),M.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=S,a.inputs=M,a.outputs=P}(s,c,v)}function FC(s,a,c){const h=c.directiveStart,p=c.directiveEnd,v=c.index,b=function Mc(){return Yt.lFrame.currentDirectiveIndex}();try{Ws(v);for(let S=h;S<p;S++){const M=s.data[S],P=a[S];Tu(S),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&dI(M,P)}}finally{Ws(-1),Tu(b)}}function dI(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function LC(s,a,c){a.componentOffset=c,(s.components??=[]).push(a.index)}function Dk(s,a,c){if(c){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)c[a.exportAs[h]]=s;rr(a)&&(c[""]=s)}}function Tk(s,a,c,h,p){s.data[h]=p;const v=p.factory||(p.factory=js(p.type)),b=new Ut(v,rr(p),Th);s.blueprint[h]=b,c[h]=b,function bk(s,a,c,h,p){const v=p.hostBindings;if(v){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const S=~a.index;(function uI(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(b)!=S&&b.push(S),b.push(c,h,v)}}(s,a,h,Sh(s,c,p.hostVars,mn),p)}function oc(s,a,c,h,p,v){const b=zi(s,a);!function UC(s,a,c,h,p,v,b){if(null==v)s.removeAttribute(a,p,c);else{const S=null==b?me(v):b(v,h||"",p);s.setAttribute(a,p,S,c)}}(a[ln],b,v,s.value,c,h,p)}function fI(s,a,c,h,p,v){const b=v[a];if(null!==b)for(let S=0;S<b.length;)Uy(h,c,b[S++],b[S++],b[S++])}function Uy(s,a,c,h,p){const v=fi(null);try{const b=s.inputTransforms;null!==b&&b.hasOwnProperty(h)&&(p=b[h].call(a,p)),null!==s.setInput?s.setInput(a,p,c,h):a[h]=p}finally{fi(v)}}function BC(s,a,c){let h=null,p=0;for(;p<c.length;){const v=c[p];if(0!==v)if(5!==v){if("number"==typeof v)break;if(s.hasOwnProperty(v)){null===h&&(h=[]);const b=s[v];for(let S=0;S<b.length;S+=2)if(b[S]===a){h.push(v,b[S+1],c[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function By(s,a,c,h){return[s,!0,!1,a,null,0,h,c,null,null,null]}function Hy(s,a){const c=s.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const v=c[h+1];if(-1!==v){const b=s.data[v];Xa(c[h]),b.contentQueries(2,a[v],v)}}}function dp(s,a){return s[ja]?s[vc][Fr]=a:s[ja]=a,s[vc]=a,a}function Xm(s,a,c){Xa(0);const h=fi(null);try{a(s,c)}finally{fi(h)}}function sc(s){return s[Va]||(s[Va]=[])}function gI(s){return s.cleanup||(s.cleanup=[])}function fp(s,a){const c=s[Lr],h=c?c.get(Ch,null):null;h&&h.handleError(a)}function ta(s,a,c,h,p){for(let v=0;v<c.length;){const b=c[v++],S=c[v++];Uy(s.data[b],a[b],h,S,p)}}function mI(s,a){const c=Yr(a,s),h=c[wt];!function vI(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])}(h,c);const p=c[yn];null!==p&&null===c[ir]&&(c[ir]=cC(p,c[Lr])),Vy(h,c,c[Oi])}function Vy(s,a,c){Jd(a);try{const h=s.viewQuery;null!==h&&Xm(1,h,c);const p=s.template;null!==p&&Km(s,a,p,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Hy(s,a),s.staticViewQueries&&Xm(2,s.viewQuery,c);const v=s.components;null!==v&&function _I(s,a){for(let c=0;c<a.length;c++)mI(s,a[c])}(a,v)}catch(h){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),h}finally{a[dn]&=-5,Qd()}}let yI=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,h,p){const v=typeof Zone>"u"?null:Zone.current,b=new yu(c,P=>{this.all.has(P)&&this.queue.set(P,v)},p);let S;this.all.add(b),b.notify();const M=()=>{b.cleanup(),S?.(),this.all.delete(b),this.queue.delete(b)};return S=h?.onDestroy(M),{destroy:M}}flush(){if(0!==this.queue.size)for(const[c,h]of this.queue)this.queue.delete(c),h?h.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:()=>new s}),s})();function tv(s,a,c){let h=c?s.styles:null,p=c?s.classes:null,v=0;if(null!==a)for(let b=0;b<a.length;b++){const S=a[b];"number"==typeof S?v=S:1==v?p=nt(p,S):2==v&&(h=nt(h,S+": "+a[++b]+";"))}c?s.styles=h:s.stylesWithoutHost=h,c?s.classes=p:s.classesWithoutHost=p}function Ih(s,a,c,h,p=!1){for(;null!==c;){const v=a[c.index];if(null!==v&&h.push(zn(v)),Ci(v)){for(let S=ri;S<v.length;S++){const M=v[S],P=M[wt].firstChild;null!==P&&Ih(M[wt],M,P,h)}v[Eo]!==v[yn]&&h.push(v[Eo])}const b=c.type;if(8&b)Ih(s,a,c.child,h);else if(32&b){const S=uh(c,a);let M;for(;M=S();)h.push(M)}else if(16&b){const S=Uw(a,c);if(Array.isArray(S))h.push(...S);else{const M=Zf(a[li]);Ih(M[wt],M,S,h,!0)}}c=p?c.projectionNext:c.next}return h}function pp(s,a,c,h=!0){const p=a[Ls].rendererFactory;p.begin&&p.begin();try{Ah(s,a,s.template,c)}catch(b){throw h&&fp(a,b),b}finally{p.end&&p.end(),a[Ls].effectManager?.flush()}}function Ah(s,a,c,h){const p=a[dn];if(256!=(256&p)){a[Ls].effectManager?.flush(),Jd(a);try{Bl(a),function Eu(s){return Yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Km(s,a,c,2,h);const b=3==(3&p);if(b){const P=s.preOrderCheckHooks;null!==P&&tl(a,P,null)}else{const P=s.preOrderHooks;null!==P&&Zl(a,P,0,null),Oc(a,0)}if(function jy(s){for(let a=xw(s);null!==a;a=im(a)){if(!a[Rd])continue;const c=a[Hs];for(let h=0;h<c.length;h++){Ic(c[h])}}}(a),or(a,2),null!==s.contentQueries&&Hy(s,a),b){const P=s.contentCheckHooks;null!==P&&tl(a,P)}else{const P=s.contentHooks;null!==P&&Zl(a,P,1),Oc(a,1)}!function rI(s,a){const c=s.hostBindingOpCodes;if(null===c)return;const h=bC(a,ds);try{for(let p=0;p<c.length;p++){const v=c[p];if(v<0)Ws(~v);else{const b=v,S=c[++p],M=c[++p];Pf(S,b),h.runInContext(M,2,a[b])}}}finally{null===a[ds]&&wC(a,ds),Ws(-1)}}(s,a);const S=s.components;null!==S&&$y(a,S,0);const M=s.viewQuery;if(null!==M&&Xm(2,M,h),b){const P=s.viewCheckHooks;null!==P&&tl(a,P)}else{const P=s.viewHooks;null!==P&&Zl(a,P,2),Oc(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[dn]&=-73,pa(a)}finally{Qd()}}}function or(s,a){for(let c=xw(s);null!==c;c=im(c))for(let h=ri;h<c.length;h++)ed(c[h],a)}function Gy(s,a,c){ed(Yr(a,s),c)}function ed(s,a){if(!function jd(s){return 128==(128&s[dn])}(s))return;const c=s[wt];if(80&s[dn]&&0===a||1024&s[dn]||2===a)Ah(c,s,c.template,s[Oi]);else if(s[Nl]>0){or(s,1);const p=s[wt].components;null!==p&&$y(s,p,1)}}function $y(s,a,c){for(let h=0;h<a.length;h++)Gy(s,a[h],c)}class td{get rootNodes(){const a=this._lView,c=a[wt];return Ih(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Oi]}set context(a){this._lView[Oi]=a}get destroyed(){return 256==(256&this._lView[dn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[hi];if(Ci(a)){const c=a[8],h=c?c.indexOf(this):-1;h>-1&&(cy(a,h),Ou(c,h))}this._attachedToViewContainer=!1}sm(this._lView[wt],this._lView)}onDestroy(a){!function $s(s,a){if(256==(256&s[dn]))throw new _e(911,!1);null===s[Zr]&&(s[Zr]=[]),s[Zr].push(a)}(this._lView,a)}markForCheck(){Ju(this._cdRefInjectingView||this._lView)}detach(){this._lView[dn]&=-129}reattach(){this._lView[dn]|=128}detectChanges(){pp(this._lView[wt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function WR(s,a){hh(s,a,a[ln],2,null,null)}(this._lView[wt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=a}}class zy extends td{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;pp(a[wt],a,a[Oi],!1)}checkNoChanges(){}get context(){return null}}class DI extends Fm{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=un(a);return new nv(c,this.ngModule)}}function VC(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class jC{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,h){h=te(h);const p=this.injector.get(a,wh,h);return p!==wh||c===wh?p:this.parentInjector.get(a,c,h)}}class nv extends hC{get inputs(){return VC(this.componentDef.inputs)}get outputs(){return VC(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Nd(s){return s.map(Og).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,h,p){let v=(p=p||this.ngModule)instanceof qu?p:p?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const b=v?new jC(a,v):a,S=b.get(pC,null);if(null===S)throw new _e(407,!1);const B={rendererFactory:S,sanitizer:b.get(Iy,null),effectManager:b.get(yI,null)},Y=S.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",ce=h?function MC(s,a,c,h){const v=h.get(Ay,!1)||c===Vt.ShadowDom,b=s.selectRootElement(a,v);return function xC(s){oI(s)}(b),b}(Y,h,this.componentDef.encapsulation,b):om(Y,ie,function Ik(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(ie)),bt=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Pt=Jm(0,null,null,1,0,null,null,null,null,null,null),ze=Zm(null,Pt,null,bt,null,null,B,Y,b,null,null);let fn,In;Jd(ze);try{const kn=this.componentDef;let vo,o_=null;kn.findHostDirectiveDefs?(vo=[],o_=new Map,kn.findHostDirectiveDefs(kn,vo,o_),vo.push(kn)):vo=[kn];const hc=function $C(s,a){const c=s[wt],h=Cn;return s[h]=a,rc(c,h,2,"#host",null)}(ze,ce),NM=function EI(s,a,c,h,p,v,b){const S=p[wt];!function TI(s,a,c,h){for(const p of s)a.mergedAttrs=xn(a.mergedAttrs,p.hostAttrs);null!==a.mergedAttrs&&(tv(a,a.mergedAttrs,!0),null!==c&&Hw(h,c,a))}(h,s,a,b);let M=null;null!==a&&(M=cC(a,p[Lr]));const P=v.rendererFactory.createRenderer(a,c);let B=16;c.signals?B=4096:c.onPush&&(B=64);const Y=Zm(p,Py(c),null,B,p[s.index],s,v,P,null,null,M);return S.firstCreatePass&&LC(S,s,h.length-1),dp(p,Y),p[s.index]=Y}(hc,ce,kn,vo,ze,B,Y);In=Vd(Pt,Cn),ce&&function gp(s,a,c,h){if(h)xt(s,c,["ng-version",lp.full]);else{const{attrs:p,classes:v}=function uu(s){const a=[],c=[];let h=1,p=2;for(;h<s.length;){let v=s[h];if("string"==typeof v)2===p?""!==v&&a.push(v,s[++h]):8===p&&c.push(v);else{if(!kr(p))break;p=v}h++}return{attrs:a,classes:c}}(a.selectors[0]);p&&xt(s,c,p),v&&v.length>0&&Bw(s,c,v.join(" "))}}(Y,kn,ce,h),void 0!==c&&function WC(s,a,c){const h=s.projection=[];for(let p=0;p<a.length;p++){const v=c[p];h.push(null!=v?Array.from(v):null)}}(In,this.ngContentSelectors,c),fn=function zC(s,a,c,h,p,v){const b=ur(),S=p[wt],M=zi(b,p);Qm(S,p,b,c,null,h);for(let B=0;B<c.length;B++)gr(Qr(p,S,b.directiveStart+B,b),p);FC(S,p,b),M&&gr(M,p);const P=Qr(p,S,b.directiveStart+b.componentOffset,b);if(s[Oi]=p[Oi]=P,null!==v)for(const B of v)B(P,a);return Oy(S,b,s),P}(NM,kn,vo,o_,ze,[SI]),Vy(Pt,ze,null)}finally{Qd()}return new GC(this.componentType,fn,bh(In,ze),ze,In)}}class GC extends Yi{constructor(a,c,h,p,v){super(),this.location=h,this._rootLView=p,this._tNode=v,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new zy(p),this.componentType=a}setInput(a,c){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const v=this._rootLView;ta(v[wt],v,p,a,c),this.previousInputValues.set(a,c),Ju(Yr(this._tNode.index,v))}}get injector(){return new Ko(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function SI(){const s=ur();ql(Ze()[wt],s)}function qC(s){let a=function Wy(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const h=[s];for(;a;){let p;if(rr(s))p=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new _e(903,!1);p=a.\u0275dir}if(p){if(c){h.push(p);const b=s;b.inputs=qy(s.inputs),b.inputTransforms=qy(s.inputTransforms),b.declaredInputs=qy(s.declaredInputs),b.outputs=qy(s.outputs);const S=p.hostBindings;S&&xk(s,S);const M=p.viewQuery,P=p.contentQueries;if(M&&Nk(s,M),P&&Mk(s,P),ee(s.inputs,p.inputs),ee(s.declaredInputs,p.declaredInputs),ee(s.outputs,p.outputs),null!==p.inputTransforms&&(null===b.inputTransforms&&(b.inputTransforms={}),ee(b.inputTransforms,p.inputTransforms)),rr(p)&&p.data.animation){const B=s.data;B.animation=(B.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let b=0;b<v.length;b++){const S=v[b];S&&S.ngInherit&&S(s),S===qC&&(c=!1)}}a=Object.getPrototypeOf(a)}!function Ak(s){let a=0,c=null;for(let h=s.length-1;h>=0;h--){const p=s[h];p.hostVars=a+=p.hostVars,p.hostAttrs=xn(p.hostAttrs,c=xn(c,p.hostAttrs))}}(h)}function qy(s){return s===Ht?{}:s===kt?[]:s}function Nk(s,a){const c=s.viewQuery;s.viewQuery=c?(h,p)=>{a(h,p),c(h,p)}:a}function Mk(s,a){const c=s.contentQueries;s.contentQueries=c?(h,p,v)=>{a(h,p,v),c(h,p,v)}:a}function xk(s,a){const c=s.hostBindings;s.hostBindings=c?(h,p)=>{a(h,p),c(h,p)}:a}function YC(s){return a=>{a.findHostDirectiveDefs=NI,a.hostDirectives=(Array.isArray(s)?s:s()).map(c=>"function"==typeof c?{directive:Ye(c),inputs:Ht,outputs:Ht}:{directive:Ye(c.directive),inputs:KC(c.inputs),outputs:KC(c.outputs)})}}function NI(s,a,c){if(null!==s.hostDirectives)for(const h of s.hostDirectives){const p=nr(h.directive);MI(p.declaredInputs,h.inputs),NI(p,a,c),c.set(p,h),a.push(p)}}function KC(s){if(void 0===s||0===s.length)return Ht;const a={};for(let c=0;c<s.length;c+=2)a[s[c]]=s[c+1];return a}function MI(s,a){for(const c in a)a.hasOwnProperty(c)&&(s[a[c]]=s[c])}function JC(s){const a=s.inputConfig,c={};for(const h in a)if(a.hasOwnProperty(h)){const p=a[h];Array.isArray(p)&&p[2]&&(c[h]=p[2])}s.inputTransforms=c}function rv(s){return!!Zy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Zy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ac(s,a,c){return s[a]=c}function Ki(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function nd(s,a,c,h){const p=Ki(s,a,c);return Ki(s,a+1,h)||p}function Ky(s,a,c,h){const p=Ze();return Ki(p,pi(),a)&&(Dn(),oc(ci(),p,s,a,c,h)),Ky}function vp(s,a,c,h){return Ki(s,pi(),c)?a+me(c)+h:mn}function Xy(s,a,c,h,p,v,b,S){const M=Ze(),P=Dn(),B=s+Cn,Y=P.firstCreatePass?function vD(s,a,c,h,p,v,b,S,M){const P=a.consts,B=rc(a,s,4,b||null,Io(P,S));PC(a,c,B,Io(P,M)),ql(a,B);const Y=B.tView=Jm(2,B,h,p,v,a.directiveRegistry,a.pipeRegistry,null,a.schemas,P,null);return null!==a.queries&&(a.queries.template(a,B),Y.queries=a.queries.embeddedTView(B)),B}(B,P,M,a,c,h,p,v,b):P.data[B];Wo(Y,!1);const ie=cv(P,M,Y,s);ms()&&am(P,M,ie,Y),gr(ie,M),dp(M,M[B]=By(ie,M,ie,Y)),$a(Y)&&Ry(P,M,Y),null!=b&&ky(M,Y,S)}let cv=function Ap(s,a,c,h){return Yo(!0),a[ln].createComment("")};function go(s){return So(function gs(){return Yt.lFrame.contextLView}(),Cn+s)}function ml(s,a,c){const h=Ze();return Ki(h,pi(),a)&&Es(Dn(),ci(),h,s,a,h[ln],c,!1),ml}function uv(s,a,c,h,p){const b=p?"class":"style";ta(s,c,a.inputs[b],b,h)}function e0(s,a,c,h){const p=Ze(),v=Dn(),b=Cn+s,S=p[ln],M=v.firstCreatePass?function Pk(s,a,c,h,p,v){const b=a.consts,M=rc(a,s,2,h,Io(b,p));return PC(a,c,M,Io(b,v)),null!==M.attrs&&tv(M,M.attrs,!1),null!==M.mergedAttrs&&tv(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(b,v,p,a,c,h):v.data[b],P=dv(v,p,M,S,a,s);p[b]=P;const B=$a(M);return Wo(M,!0),Hw(S,P,M),32!=(32&M.flags)&&ms()&&am(v,p,P,M),0===function zd(){return Yt.lFrame.elementDepthCount}()&&gr(P,p),function Hl(){Yt.lFrame.elementDepthCount++}(),B&&(Ry(v,p,M),Oy(v,M,p)),null!==h&&ky(p,M),e0}function Ta(){let s=ur();Gg()?jl():(s=s.parent,Wo(s,!1));const a=s;(function Nc(s){return Yt.skipHydrationRootTNode===s})(a)&&function kf(){Yt.skipHydrationRootTNode=null}(),function Rf(){Yt.lFrame.elementDepthCount--}();const c=Dn();return c.firstCreatePass&&(ql(c,s),fu(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Hf(s){return 0!=(8&s.flags)}(a)&&uv(c,a,Ze(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function kc(s){return 0!=(16&s.flags)}(a)&&uv(c,a,Ze(),a.stylesWithoutHost,!1),Ta}function vl(s,a,c,h){return e0(s,a,c,h),Ta(),vl}let dv=(s,a,c,h,p,v)=>(Yo(!0),om(h,p,function Wl(){return Yt.lFrame.currentNamespace}()));function n0(s,a,c){const h=Ze(),p=Dn(),v=s+Cn,b=p.firstCreatePass?function t0(s,a,c,h,p){const v=a.consts,b=Io(v,h),S=rc(a,s,8,"ng-container",b);return null!==b&&tv(S,b,!0),PC(a,c,S,Io(v,p)),null!==a.queries&&a.queries.elementStart(a,S),S}(v,p,h,a,c):p.data[v];Wo(b,!0);const S=UI(p,h,b,s);return h[v]=S,ms()&&am(p,h,S,b),gr(S,h),$a(b)&&(Ry(p,h,b),Oy(p,b,h)),null!=c&&ky(h,b),n0}function wD(){let s=ur();const a=Dn();return Gg()?jl():(s=s.parent,Wo(s,!1)),a.firstCreatePass&&(ql(a,s),fu(s)&&a.queries.elementEnd(s)),wD}function CD(s,a,c){return n0(s,a,c),wD(),CD}let UI=(s,a,c,h)=>(Yo(!0),rm(a[ln],""));function BI(){return Ze()}function DD(s){return!!s&&"function"==typeof s.then}function ED(s){return!!s&&"function"==typeof s.subscribe}function fv(s,a,c,h){const p=Ze(),v=Dn(),b=ur();return function VI(s,a,c,h,p,v,b){const S=$a(h),P=s.firstCreatePass&&gI(s),B=a[Oi],Y=sc(a);let ie=!0;if(3&h.type||b){const at=zi(h,a),bt=b?b(at):at,Pt=Y.length,ze=b?In=>b(zn(In[h.index])):h.index;let fn=null;if(!b&&S&&(fn=function Uk(s,a,c,h){const p=s.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const b=p[v];if(b===c&&p[v+1]===h){const S=a[Va],M=p[v+2];return S.length>M?S[M]:null}"string"==typeof b&&(v+=2)}return null}(s,a,p,h.index)),null!==fn)(fn.__ngLastListenerFn__||fn).__ngNextListenerFn__=v,fn.__ngLastListenerFn__=v,ie=!1;else{v=Np(h,a,B,v,!1);const In=c.listen(bt,p,v);Y.push(v,In),P&&P.push(p,ze,Pt,Pt+1)}}else v=Np(h,a,B,v,!1);const ce=h.outputs;let Ue;if(ie&&null!==ce&&(Ue=ce[p])){const at=Ue.length;if(at)for(let bt=0;bt<at;bt+=2){const kn=a[Ue[bt]][Ue[bt+1]].subscribe(v),vo=Y.length;Y.push(v,kn),P&&P.push(p,h.index,vo,-(vo+1))}}}(v,p,p[ln],b,s,a,h),fv}function xh(s,a,c,h){try{return ps(6,a,c),!1!==c(h)}catch(p){return fp(s,p),!1}finally{ps(7,a,c)}}function Np(s,a,c,h,p){return function v(b){if(b===Function)return h;Ju(s.componentOffset>-1?Yr(s.index,a):a);let M=xh(a,c,h,b),P=v.__ngNextListenerFn__;for(;P;)M=xh(a,c,P,b)&&M,P=P.__ngNextListenerFn__;return p&&!1===M&&b.preventDefault(),M}}function sd(s=1){return function Ti(s){return(Yt.lFrame.contextLView=function $g(s,a){for(;s>0;)a=a[Us],s--;return a}(s,Yt.lFrame.contextLView))[Oi]}(s)}function Mp(s,a){let c=null;const h=function Ad(s){const a=s.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(s);for(let p=0;p<a.length;p++){const v=a[p];if("*"!==v){if(null===h?la(s,v,!0):$_(h,v))return p}else c=p}return c}function pv(s){const a=Ze()[li][Dr];if(!a.projection){const h=a.projection=bs(s?s.length:1,null),p=h.slice();let v=a.child;for(;null!==v;){const b=s?Mp(v,s):0;null!==b&&(p[b]?p[b].projectionNext=v:h[b]=v,p[b]=v),v=v.next}}}function TD(s,a=0,c){const h=Ze(),p=Dn(),v=rc(p,Cn+s,16,null,c||null);null===v.projection&&(v.projection=a),jl(),(!h[ir]||zo())&&32!=(32&v.flags)&&function cm(s,a,c){zu(a[ln],0,a,c,Rw(s,c,a),Pw(c.parent||a[Dr],c,a))}(p,h,v)}function xp(s,a,c){return gv(s,"",a,"",c),xp}function gv(s,a,c,h,p){const v=Ze(),b=vp(v,a,c,h);return b!==mn&&Es(Dn(),ci(),v,s,b,v[ln],p,!1),gv}function a0(s,a){return s<<17|a<<2}function ts(s){return s>>17&32767}function ad(s){return 2|s}function yl(s){return(131068&s)>>2}function Oh(s,a){return-131069&s|a<<2}function Pp(s){return 1|s}function ID(s,a,c,h,p){const v=s[c+1],b=null===a;let S=h?ts(v):yl(v),M=!1;for(;0!==S&&(!1===M||b);){const B=s[S+1];AD(s[S],a)&&(M=!0,s[S+1]=h?Pp(B):ad(B)),S=h?ts(B):yl(B)}M&&(s[c+1]=h?ad(v):Pp(v))}function AD(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Z(s,a)>=0}const Ar={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function WI(s){return s.substring(Ar.key,Ar.keyEnd)}function ZI(s,a){const c=Ar.textEnd;return c===a?-1:(a=Ar.keyEnd=function u0(s,a,c){for(;a<c&&s.charCodeAt(a)>32;)a++;return a}(s,Ar.key=a,c),ld(s,a,c))}function ld(s,a,c){for(;a<c&&s.charCodeAt(a)<=32;)a++;return a}function _v(s,a){return function bl(s,a,c,h){const p=Ze(),v=Dn(),b=Zo(2);v.firstUpdatePass&&XI(v,s,b,h),a!==mn&&Ki(p,b,a)&&f0(v,v.data[dr()],p,p[ln],s,p[b+1]=function rA(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=he(Da(s)))),s}(a,c),h,b)}(s,a,null,!0),_v}function MD(s){!function wl(s,a,c,h){const p=Dn(),v=Zo(2);p.firstUpdatePass&&XI(p,null,v,h);const b=Ze();if(c!==mn&&Ki(b,v,c)){const S=p.data[dr()];if(p0(S,h)&&!QI(p,v)){let M=h?S.classesWithoutHost:S.stylesWithoutHost;null!==M&&(c=nt(M,c||"")),uv(p,S,b,c,h)}else!function jk(s,a,c,h,p,v,b,S){p===mn&&(p=kt);let M=0,P=0,B=0<p.length?p[0]:null,Y=0<v.length?v[0]:null;for(;null!==B||null!==Y;){const ie=M<p.length?p[M+1]:void 0,ce=P<v.length?v[P+1]:void 0;let at,Ue=null;B===Y?(M+=2,P+=2,ie!==ce&&(Ue=Y,at=ce)):null===Y||null!==B&&B<Y?(M+=2,Ue=B):(P+=2,Ue=Y,at=ce),null!==Ue&&f0(s,a,c,h,Ue,at,b,S),B=M<p.length?p[M]:null,Y=P<v.length?v[P]:null}}(p,S,b,b[ln],b[v+1],b[v+1]=function nA(s,a,c){if(null==c||""===c)return kt;const h=[],p=Da(c);if(Array.isArray(p))for(let v=0;v<p.length;v++)s(h,p[v],!0);else if("object"==typeof p)for(const v in p)p.hasOwnProperty(v)&&s(h,v,p[v]);else"string"==typeof p&&a(h,p);return h}(s,a,c),h,v)}}(iA,Sa,s,!0)}function Sa(s,a){for(let c=function c0(s){return function ND(s){Ar.key=0,Ar.keyEnd=0,Ar.value=0,Ar.valueEnd=0,Ar.textEnd=s.length}(s),ZI(s,ld(s,0,Ar.textEnd))}(a);c>=0;c=ZI(a,c))O(s,WI(a),!0)}function QI(s,a){return a>=s.expandoStartIndex}function XI(s,a,c,h){const p=s.data;if(null===p[c+1]){const v=p[dr()],b=QI(s,c);p0(v,h)&&null===a&&!b&&(a=!1),a=function eA(s,a,c,h){const p=function Su(s){const a=Yt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let v=h?a.residualClasses:a.residualStyles;if(null===p)0===(h?a.classBindings:a.styleBindings)&&(c=na(c=Kc(null,s,a,c,h),a.attrs,h),v=null);else{const b=a.directiveStylingLast;if(-1===b||s[b]!==p)if(c=Kc(p,s,a,c,h),null===v){let M=function xD(s,a,c){const h=c?a.classBindings:a.styleBindings;if(0!==yl(h))return s[ts(h)]}(s,a,h);void 0!==M&&Array.isArray(M)&&(M=Kc(null,s,a,M[1],h),M=na(M,a.attrs,h),function tA(s,a,c,h){s[ts(c?a.classBindings:a.styleBindings)]=h}(s,a,h,M))}else v=function OD(s,a,c){let h;const p=a.directiveEnd;for(let v=1+a.directiveStylingLast;v<p;v++)h=na(h,s[v].hostAttrs,c);return na(h,a.attrs,c)}(s,a,h)}return void 0!==v&&(h?a.residualClasses=v:a.residualStyles=v),c}(p,v,a,h),function zI(s,a,c,h,p,v){let b=v?a.classBindings:a.styleBindings,S=ts(b),M=yl(b);s[h]=c;let B,P=!1;if(Array.isArray(c)?(B=c[1],(null===B||Z(c,B)>0)&&(P=!0)):B=c,p)if(0!==M){const ie=ts(s[S+1]);s[h+1]=a0(ie,S),0!==ie&&(s[ie+1]=Oh(s[ie+1],h)),s[S+1]=function mv(s,a){return 131071&s|a<<17}(s[S+1],h)}else s[h+1]=a0(S,0),0!==S&&(s[S+1]=Oh(s[S+1],h)),S=h;else s[h+1]=a0(M,0),0===S?S=h:s[M+1]=Oh(s[M+1],h),M=h;P&&(s[h+1]=ad(s[h+1])),ID(s,B,h,!0),ID(s,B,h,!1),function SD(s,a,c,h,p){const v=p?s.residualClasses:s.residualStyles;null!=v&&"string"==typeof a&&Z(v,a)>=0&&(c[h+1]=Pp(c[h+1]))}(a,B,s,h,v),b=a0(S,M),v?a.classBindings=b:a.styleBindings=b}(p,v,a,c,b,h)}}function Kc(s,a,c,h,p){let v=null;const b=c.directiveEnd;let S=c.directiveStylingLast;for(-1===S?S=c.directiveStart:S++;S<b&&(v=a[S],h=na(h,v.hostAttrs,p),v!==s);)S++;return null!==s&&(c.directiveStylingLast=S),h}function na(s,a,c){const h=c?1:2;let p=-1;if(null!==a)for(let v=0;v<a.length;v++){const b=a[v];"number"==typeof b?p=b:p===h&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),O(s,b,!!c||a[++v]))}return void 0===s?null:s}function iA(s,a,c){const h=String(a);""!==h&&!h.includes(" ")&&O(s,h,c)}function f0(s,a,c,h,p,v,b,S){if(!(3&a.type))return;const M=s.data,P=M[S+1],B=function $I(s){return 1==(1&s)}(P)?RD(M,a,c,p,yl(P),b):void 0;Lp(B)||(Lp(v)||function kp(s){return 2==(2&s)}(P)&&(v=RD(M,null,c,p,S,b)),function mS(s,a,c,h,p){if(a)p?s.addClass(c,h):s.removeClass(c,h);else{let v=-1===h.indexOf("-")?void 0:k.DashCase;null==p?s.removeStyle(c,h,v):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),v|=k.Important),s.setStyle(c,h,p,v))}}(h,b,Ja(dr(),c),p,v))}function RD(s,a,c,h,p,v){const b=null===a;let S;for(;p>0;){const M=s[p],P=Array.isArray(M),B=P?M[1]:M,Y=null===B;let ie=c[p+1];ie===mn&&(ie=Y?kt:void 0);let ce=Y?L(ie,h):B===h?ie:void 0;if(P&&!Lp(ce)&&(ce=L(M,h)),Lp(ce)&&(S=ce,b))return S;const Ue=s[p+1];p=b?ts(Ue):yl(Ue)}if(null!==a){let M=v?a.residualClasses:a.residualStyles;null!=M&&(S=L(M,h))}return S}function Lp(s){return void 0!==s}function p0(s,a){return 0!=(s.flags&(a?8:16))}function yv(s,a=""){const c=Ze(),h=Dn(),p=s+Cn,v=h.firstCreatePass?rc(h,p,1,a,null):h.data[p],b=kD(h,c,v,a,s);c[p]=b,ms()&&am(h,c,b,v),Wo(v,!1)}let kD=(s,a,c,h,p)=>(Yo(!0),Kf(a[ln],h));function dc(s){return bv("",s,""),dc}function bv(s,a,c){const h=Ze(),p=vp(h,s,a,c);return p!==mn&&function Zc(s,a,c){const h=Ja(a,s);!function ly(s,a,c){s.setValue(a,c)}(s[ln],h,c)}(h,dr(),p),bv}function Ev(s,a,c){const h=Ze();return Ki(h,pi(),a)&&Es(Dn(),ci(),h,s,a,h[ln],c,!0),Ev}const Ph=void 0;var ZD=["en",[["a","p"],["AM","PM"],Ph],[["AM","PM"],Ph,Ph],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ph,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ph,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ph,"{1} 'at' {0}",Ph],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $k(s){const c=Math.floor(Math.abs(s)),h=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let dd={};function YD(s){const a=function JD(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=gA(a);if(c)return c;const h=a.split("-")[0];if(c=gA(h),c)return c;if("en"===h)return ZD;throw new _e(701,!1)}function KD(s){return YD(s)[an.PluralCase]}function gA(s){return s in dd||(dd[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),dd[s]}var an=(()=>((an=an||{})[an.LocaleId=0]="LocaleId",an[an.DayPeriodsFormat=1]="DayPeriodsFormat",an[an.DayPeriodsStandalone=2]="DayPeriodsStandalone",an[an.DaysFormat=3]="DaysFormat",an[an.DaysStandalone=4]="DaysStandalone",an[an.MonthsFormat=5]="MonthsFormat",an[an.MonthsStandalone=6]="MonthsStandalone",an[an.Eras=7]="Eras",an[an.FirstDayOfWeek=8]="FirstDayOfWeek",an[an.WeekendRange=9]="WeekendRange",an[an.DateFormat=10]="DateFormat",an[an.TimeFormat=11]="TimeFormat",an[an.DateTimeFormat=12]="DateTimeFormat",an[an.NumberSymbols=13]="NumberSymbols",an[an.NumberFormats=14]="NumberFormats",an[an.CurrencyCode=15]="CurrencyCode",an[an.CurrencySymbol=16]="CurrencySymbol",an[an.CurrencyName=17]="CurrencyName",an[an.Currencies=18]="Currencies",an[an.Directionality=19]="Directionality",an[an.PluralCase=20]="PluralCase",an[an.ExtraData=21]="ExtraData",an))();const Fh="en-US",Tv={marker:"element"},Sv={marker:"ICU"};var Ji=(()=>((Ji=Ji||{})[Ji.SHIFT=2]="SHIFT",Ji[Ji.APPEND_EAGERLY=1]="APPEND_EAGERLY",Ji[Ji.COMMENT=2]="COMMENT",Ji))();let C0=Fh;function QD(s){(function Dt(s,a){null==s&&Ot(a,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(C0=s.toLowerCase().replace(/_/g,"-"))}function XD(s,a,c){const h=a.insertBeforeIndex,p=Array.isArray(h)?h[0]:h;return null===p?Fw(s,0,c):zn(c[p])}function Iv(s,a,c,h,p){const v=a.insertBeforeIndex;if(Array.isArray(v)){let b=h,S=null;if(3&a.type||(S=b,b=p),null!==b&&-1===a.componentOffset)for(let M=1;M<v.length;M++)Gu(s,b,c[v[M]],S,!1)}}function eE(s,a){if(s.push(a),s.length>1)for(let c=s.length-2;c>=0;c--){const h=s[c];tE(h)||nE(h,a)&&null===bA(h)&&iE(h,a.index)}}function tE(s){return!(64&s.type)}function nE(s,a){return tE(a)||s.index>a.index}function bA(s){const a=s.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function iE(s,a){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=a:(Lw(XD,Iv),s.insertBeforeIndex=a)}function CA(s,a,c){const h=Ym(s,c,64,null,null);return eE(a,h),h}function As(){const s=[];let c,h,a=-1;function v(S,M){a=0;const P=function Uh(s,a){const c=a[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}(S,M);h=null!==P?S.remove[P]:kt}function b(){if(a<h.length){const S=h[a++];return S>0?c[S]:(s.push(a,h),v(c[wt].data[~S],c),b())}return 0===s.length?null:(h=s.pop(),a=s.pop(),b())}return function p(S,M){for(c=M;s.length;)s.pop();return v(S.value,M),b}}const jp=/\ufffd(\d+):?\d*\ufffd/gi,TA=/\ufffd(\d+)\ufffd/,T0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Hh="\ufffd",SA=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,IA=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,AA=/\uE500/g;function cE(s,a,c,h,p,v,b){const S=Sh(s,h,1,null);let M=S<<Ji.SHIFT,P=Du();a===P&&(P=null),null===P&&(M|=Ji.APPEND_EAGERLY),b&&(M|=Ji.COMMENT,function Mw(s){void 0===sy&&(sy=s())}(As)),p.push(M,null===v?"":v);const B=Ym(s,S,b?32:1,null===v?"":v,null);eE(c,B);const Y=B.index;return Wo(B,!1),null!==P&&a!==P&&function D0(s,a){let c=s.insertBeforeIndex;null===c?(Lw(XD,Iv),c=s.insertBeforeIndex=[null,a]):(function Ce(s,a,c){s!=a&&Ot(c,s,a,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(a))}(P,Y),B}function xA(s,a,c,h,p,v,b){const S=b.match(jp),M=cE(s,a,c,v,h,S?null:b,!1);S&&$p(p,b,M.index,null,0,null)}function $p(s,a,c,h,p,v){const b=s.length,S=b+1;s.push(null,null);const M=b+2,P=a.split(jp);let B=0;for(let Y=0;Y<P.length;Y++){const ie=P[Y];if(1&Y){const ce=p+parseInt(ie,10);s.push(-1-ce),B|=Jc(ce)}else""!==ie&&s.push(ie)}return s.push(c<<2|(h?1:0)),h&&s.push(h,v),s[b]=B,s[S]=s.length-M,B}function Jc(s){return 1<<Math.min(s,31)}function Ov(s){let a,v,c="",h=0,p=!1;for(;null!==(a=SA.exec(s));)p?a[0]===`${Hh}/*${v}${Hh}`&&(h=a.index,p=!1):(c+=s.substring(h,a.index+a[0].length),v=a[1],p=!0);return c+=s.slice(h),c}function Xc(s,a,c,h,p,v){let b=0;const S={type:p.type,currentCaseLViewIndex:Sh(s,a,1,null),anchorIdx:v,cases:[],create:[],remove:[],update:[]};(function N0(s,a,c){s.push(Jc(a.mainBinding),2,-1-a.mainBinding,c<<2|2)})(c,p,v),function wA(s,a,c){const h=s.data[a];null===h?s.data[a]=c:h.value=c}(s,v,S);const M=p.values;for(let P=0;P<M.length;P++){const B=M[P],Y=[];for(let ie=0;ie<B.length;ie++){const ce=B[ie];if("string"!=typeof ce){const Ue=Y.push(ce)-1;B[ie]=`\x3c!--\ufffd${Ue}\ufffd--\x3e`}}b=S0(s,S,a,c,h,p.cases[P],B.join(""),Y)|b}b&&function RA(s,a,c){s.push(a,1,c<<2|3)}(c,b,v)}function Rv(s){const a=[],c=[];let h=1,p=0;const v=eu(s=s.replace(T0,function(b,S,M){return h="select"===M?0:1,p=parseInt(S.slice(1),10),""}));for(let b=0;b<v.length;){let S=v[b++].trim();1===h&&(S=S.replace(/\s*(?:=)?(\w+)\s*/,"$1")),S.length&&a.push(S);const M=eu(v[b++]);a.length>c.length&&c.push(M)}return{type:h,mainBinding:p,cases:a,values:c}}function eu(s){if(!s)return[];let a=0;const c=[],h=[],p=/[{}]/g;let v;for(p.lastIndex=0;v=p.exec(s);){const S=v.index;if("}"==v[0]){if(c.pop(),0==c.length){const M=s.substring(a,S);T0.test(M)?h.push(Rv(M)):h.push(M),a=S+1}}else{if(0==c.length){const M=s.substring(a,S);h.push(M),a=S+1}c.push("{")}}const b=s.substring(a);return h.push(b),h}function S0(s,a,c,h,p,v,b,S){const M=[],P=[],B=[];a.cases.push(v),a.create.push(M),a.remove.push(P),a.update.push(B);const ie=function TS(s){const a=new Ww(s);return function SS(){try{return!!(new window.DOMParser).parseFromString(fh(""),"text/html")}catch{return!1}}()?new zw(a):a}(gh()).getInertBodyElement(b),ce=function bm(s){return"content"in s&&function RS(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(ie)||ie;return ce?I0(s,a,c,h,M,P,B,ce,p,S,0):0}function I0(s,a,c,h,p,v,b,S,M,P,B){let Y=0,ie=S.firstChild;for(;ie;){const ce=Sh(s,c,1,null);switch(ie.nodeType){case Node.ELEMENT_NODE:const Ue=ie,at=Ue.tagName.toLowerCase();if(vm.hasOwnProperty(at)){Na(p,Tv,at,M,ce),s.data[ce]=at;const fn=Ue.attributes;for(let In=0;In<fn.length;In++){const kn=fn.item(In),vo=kn.name.toLowerCase();kn.value.match(jp)?Yw.hasOwnProperty(vo)&&$p(b,kn.value,ce,kn.name,0,mh[vo]?gy:null):kA(p,ce,kn)}Y=I0(s,a,c,h,p,v,b,ie,ce,P,B+1)|Y,hd(v,ce,B)}break;case Node.TEXT_NODE:const bt=ie.textContent||"",Pt=bt.match(jp);Na(p,null,Pt?"":bt,M,ce),hd(v,ce,B),Pt&&(Y=$p(b,bt,ce,null,0,null)|Y);break;case Node.COMMENT_NODE:const ze=TA.exec(ie.textContent||"");if(ze){const In=P[parseInt(ze[1],10)];Na(p,Sv,"",M,ce),Xc(s,c,h,M,In,ce),A0(v,ce,B)}}ie=ie.nextSibling}return Y}function hd(s,a,c){0===c&&s.push(a)}function A0(s,a,c){0===c&&(s.push(~a),s.push(a))}function Na(s,a,c,h,p){null!==a&&s.push(a),s.push(c,p,function oE(s,a,c){return s|a<<17|c<<1}(0,h,p))}function kA(s,a,c){s.push(a<<1|1,c.name,c.value)}function x0(s,a,c=-1){const h=Dn(),p=Ze(),v=Cn+s,b=Io(h.consts,a),S=Du();h.firstCreatePass&&function MA(s,a,c,h,p,v){const b=Du(),S=[],M=[],P=[[]];p=function Qc(s,a){if(function ra(s){return-1===s}(a))return Ov(s);{const c=s.indexOf(`:${a}${Hh}`)+2+a.toString().length,h=s.search(new RegExp(`${Hh}\\/\\*\\d+:${a}${Hh}`));return Ov(s.substring(c,h))}}(p,v);const B=function NA(s){return s.replace(AA," ")}(p).split(IA);for(let Y=0;Y<B.length;Y++){let ie=B[Y];if(1&Y){const ce=47===ie.charCodeAt(0),at=(ie.charCodeAt(ce?1:0),Cn+Number.parseInt(ie.substring(ce?2:1)));if(ce)P.shift(),Wo(Du(),!1);else{const bt=CA(s,P[0],at);P.unshift([]),Wo(bt,!0)}}else{const ce=eu(ie);for(let Ue=0;Ue<ce.length;Ue++){let at=ce[Ue];if(1&Ue){const bt=at;if("object"!=typeof bt)throw new Error(`Unable to parse ICU expression in "${p}" message.`);Xc(s,c,M,a,bt,cE(s,b,P[0],c,S,"",!0).index)}else""!==at&&xA(s,b,P[0],S,M,c,at)}}}s.data[h]={create:S,update:M}}(h,null===S?0:S.index,p,v,b,c),2===h.type?p[li][dn]|=32:p[dn]|=32;const M=h.data[v],B=kw(h,S===p[Dr]?null:S,p);(function Nv(s,a,c,h){const p=s[ln];for(let v=0;v<a.length;v++){const b=a[v++],S=a[v],P=(b&Ji.APPEND_EAGERLY)===Ji.APPEND_EAGERLY,B=b>>>Ji.SHIFT;let Y=s[B];null===Y&&(Y=s[B]=(b&Ji.COMMENT)===Ji.COMMENT?p.createComment(S):Kf(p,S)),P&&null!==c&&Gu(p,c,Y,h,!1)}})(p,M.create,B,S&&8&S.type?p[S.index]:null),Gl(!0)}function hE(s,a,c){x0(s,a,c),function Pv(){Gl(!1)}()}function Fv(s,a,c,h,p){if(s=Ye(s),Array.isArray(s))for(let v=0;v<s.length;v++)Fv(s[v],a,c,h,p);else{const v=Dn(),b=Ze();let S=vh(s)?s:Ye(s.provide),M=oC(s);const P=ur(),B=1048575&P.providerIndexes,Y=P.directiveStart,ie=P.providerIndexes>>20;if(vh(s)||!s.multi){const ce=new Ut(M,p,Th),Ue=Uv(S,a,p?B:B+ie,Y);-1===Ue?(Jr(vs(P,b),v,S),Lv(v,s,a.length),a.push(S),P.directiveStart++,P.directiveEnd++,p&&(P.providerIndexes+=1048576),c.push(ce),b.push(ce)):(c[Ue]=ce,b[Ue]=ce)}else{const ce=Uv(S,a,B+ie,Y),Ue=Uv(S,a,B,B+ie),bt=Ue>=0&&c[Ue];if(p&&!bt||!p&&!(ce>=0&&c[ce])){Jr(vs(P,b),v,S);const Pt=function BA(s,a,c,h,p){const v=new Ut(s,c,Th);return v.multi=[],v.index=a,v.componentProviders=0,R0(v,p,h&&!c),v}(p?UA:k0,c.length,p,h,M);!p&&bt&&(c[Ue].providerFactory=Pt),Lv(v,s,a.length,0),a.push(S),P.directiveStart++,P.directiveEnd++,p&&(P.providerIndexes+=1048576),c.push(Pt),b.push(Pt)}else Lv(v,s,ce>-1?ce:Ue,R0(c[p?Ue:ce],M,!p&&h));!p&&h&&bt&&c[Ue].componentProviders++}}}function Lv(s,a,c,h){const p=vh(a),v=function rk(s){return!!s.useClass}(a);if(p||v){const M=(v?Ye(a.useClass):a).prototype.ngOnDestroy;if(M){const P=s.destroyHooks||(s.destroyHooks=[]);if(!p&&a.multi){const B=P.indexOf(c);-1===B?P.push(c,[h,M]):P[B+1].push(h,M)}else P.push(c,M)}}}function R0(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function Uv(s,a,c,h){for(let p=c;p<h;p++)if(a[p]===s)return p;return-1}function k0(s,a,c,h){return P0(this.multi,[])}function UA(s,a,c,h){const p=this.multi;let v;if(this.providerFactory){const b=this.providerFactory.componentProviders,S=Qr(c,c[wt],this.providerFactory.index,h);v=S.slice(0,b),P0(p,v);for(let M=b;M<S.length;M++)v.push(S[M])}else v=[],P0(p,v);return v}function P0(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function gE(s,a=[]){return c=>{c.providersResolver=(h,p)=>function O0(s,a,c){const h=Dn();if(h.firstCreatePass){const p=rr(s);Fv(c,h.data,h.blueprint,p,!0),Fv(a,h.data,h.blueprint,p,!1)}}(h,p?p(s):s,a)}}class jh{}class Gh{}function HA(s,a){return new F0(s,a??null,[])}class F0 extends jh{constructor(a,c,h){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new DI(this);const p=Wr(a);this._bootstrapComponents=pl(p.bootstrap),this._r3Injector=IC(a,c,[{provide:jh,useValue:this},{provide:Fm,useValue:this.componentFactoryResolver},...h],he(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class L0 extends Gh{constructor(a){super(),this.moduleType=a}create(a){return new F0(this.moduleType,a,[])}}class vE extends jh{constructor(a){super(),this.componentFactoryResolver=new DI(this),this.instance=null;const c=new Sm([...a.providers,{provide:jh,useValue:this},{provide:Fm,useValue:this.componentFactoryResolver}],a.parent||Tm(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function _E(s,a,c=null){return new vE({providers:s,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let jA=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const h=BS(0,c.type),p=h.length>0?_E([h],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,p)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Jt({token:s,providedIn:"environment",factory:()=>new s(jn(qu))}),s})();function yE(s){s.getStandaloneInjector=a=>a.get(jA).getOrCreateStandaloneInjector(s)}function B0(s,a,c,h){return NE(Ze(),Er(),s,a,c,h)}function IE(s,a,c,h,p){return function ME(s,a,c,h,p,v,b){const S=a+c;return nd(s,S,p,v)?ac(s,S+2,b?h.call(b,p,v):h(p,v)):Zp(s,S+2)}(Ze(),Er(),s,a,c,h,p)}function AE(s,a,c,h,p,v){return function xE(s,a,c,h,p,v,b,S){const M=a+c;return function Yy(s,a,c,h,p){const v=nd(s,a,c,h);return Ki(s,a+2,p)||v}(s,M,p,v,b)?ac(s,M+3,S?h.call(S,p,v,b):h(p,v,b)):Zp(s,M+3)}(Ze(),Er(),s,a,c,h,p,v)}function Zp(s,a){const c=s[a];return c===mn?void 0:c}function NE(s,a,c,h,p,v){const b=a+c;return Ki(s,b,p)?ac(s,b+1,v?h.call(v,p):h(p)):Zp(s,b+1)}function kE(s,a){const c=Dn();let h;const p=s+Cn;c.firstCreatePass?(h=function tN(s,a){if(a)for(let c=a.length-1;c>=0;c--){const h=a[c];if(s===h.name)return h}}(a,c.pipeRegistry),c.data[p]=h,h.onDestroy&&(c.destroyHooks??=[]).push(p,h.onDestroy)):h=c.data[p];const v=h.factory||(h.factory=js(h.type)),b=wn(Th);try{const S=il(!1),M=v();return il(S),function bD(s,a,c,h){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),a[c]=h}(c,Ze(),p,M),M}finally{wn(b)}}function nN(s,a,c){const h=s+Cn,p=Ze(),v=So(p,h);return function Bv(s,a){return s[wt].data[a].pure}(p,h)?NE(p,Er(),a,v.transform,c,v):v.transform(c)}function H0(s){return a=>{setTimeout(s,void 0,a)}}const Cl=class Jk extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,h){let p=a,v=c||(()=>null),b=h;if(a&&"object"==typeof a){const M=a;p=M.next?.bind(M),v=M.error?.bind(M),b=M.complete?.bind(M)}this.__isAsync&&(v=H0(v),p&&(p=H0(p)),b&&(b=H0(b)));const S=super.subscribe({next:p,error:v,complete:b});return a instanceof K.w0&&a.add(S),S}};function oN(){return this._results[Symbol.iterator]()}class V0{get changes(){return this._changes||(this._changes=new Cl)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=V0.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=oN)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const h=this;h.dirty=!1;const p=function eo(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Qo(s,a,c){if(s.length!==a.length)return!1;for(let h=0;h<s.length;h++){let p=s[h],v=a[h];if(c&&(p=c(p),v=c(v)),v!==p)return!1}return!0}(h._results,p,c))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Yp=(()=>{class s{}return s.__NG_ELEMENT_ID__=lN,s})();const sN=Yp,aN=class extends sN{constructor(a,c,h){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c,null)}createEmbeddedViewImpl(a,c,h){const b=this._declarationTContainer.tView,S=Zm(this._declarationLView,b,a,4096&this._declarationLView[dn]?4096:16,null,b.declTNode,null,null,null,c||null,h||null);S[Ga]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[qr];return null!==P&&(S[qr]=P.createEmbeddedView(b)),Vy(b,S,a),new td(S)}};function lN(){return Hv(ur(),Ze())}function Hv(s,a){return 4&s.type?new aN(a,s,bh(s,a)):null}let Vv=(()=>{class s{}return s.__NG_ELEMENT_ID__=gN,s})();function gN(){return HE(ur(),Ze())}const mN=Vv,UE=class extends mN{constructor(a,c,h){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=h}get element(){return bh(this._hostTNode,this._hostLView)}get injector(){return new Ko(this._hostTNode,this._hostLView)}get parentInjector(){const a=_s(this._hostTNode,this._hostLView);if(Lt(a)){const c=ma(a,this._hostLView),h=Kr(a);return new Ko(c[wt].data[h+8],c)}return new Ko(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=BE(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-ri}createEmbeddedView(a,c,h){let p,v;"number"==typeof h?p=h:null!=h&&(p=h.index,v=h.injector);const S=a.createEmbeddedViewImpl(c||{},v,null);return this.insertImpl(S,p,false),S}createComponent(a,c,h,p,v){const b=a&&!function Kl(s){return"function"==typeof s}(a);let S;if(b)S=c;else{const at=c||{};S=at.index,h=at.injector,p=at.projectableNodes,v=at.environmentInjector||at.ngModuleRef}const M=b?a:new nv(un(a)),P=h||this.parentInjector;if(!v&&null==M.ngModule){const bt=(b?P:this.parentInjector).get(qu,null);bt&&(v=bt)}un(M.componentType??{});const ce=M.create(P,p,null,v);return this.insertImpl(ce.hostView,S,false),ce}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,h){const p=a._lView,v=p[wt];if(function Ul(s){return Ci(s[hi])}(p)){const M=this.indexOf(a);if(-1!==M)this.detach(M);else{const P=p[hi],B=new UE(P,P[Dr],P[hi]);B.detach(B.indexOf(a))}}const b=this._adjustIndex(c),S=this._lContainer;if(function dS(s,a,c,h){const p=ri+h,v=c.length;h>0&&(c[p-1][Fr]=a),h<v-ri?(a[Fr]=c[p],Bc(c,ri+h,a)):(c.push(a),a[Fr]=null),a[hi]=c;const b=a[Ga];null!==b&&c!==b&&function ZR(s,a){const c=s[Hs];a[li]!==a[hi][hi][li]&&(s[Rd]=!0),null===c?s[Hs]=[a]:c.push(a)}(b,a);const S=a[qr];null!==S&&S.insertView(s),a[dn]|=128}(v,p,S,b),!h){const M=dy(b,S),P=p[ln],B=nc(P,S[Eo]);null!==B&&function zR(s,a,c,h,p,v){h[yn]=p,h[Dr]=a,hh(s,h,c,1,p,v)}(v,S[Dr],P,p,B,M)}return a.attachToViewContainerRef(),Bc(G0(S),b,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=BE(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),h=cy(this._lContainer,c);h&&(Ou(G0(this._lContainer),c),sm(h[wt],h))}detach(a){const c=this._adjustIndex(a,-1),h=cy(this._lContainer,c);return h&&null!=Ou(G0(this._lContainer),c)?new td(h):null}_adjustIndex(a,c=0){return a??this.length+c}};function BE(s){return s[8]}function G0(s){return s[8]||(s[8]=[])}function HE(s,a){let c;const h=a[s.index];return Ci(h)?c=h:(c=By(h,a,null,s),a[s.index]=c,dp(a,c)),VE(c,a,s,h),new UE(c,s,a)}let VE=function $0(s,a,c,h){if(s[Eo])return;let p;p=8&c.type?zn(h):function vN(s,a){const c=s[ln],h=c.createComment(""),p=zi(a,s);return Gu(c,nc(c,p),h,function Xf(s,a){return s.nextSibling(a)}(c,p),!1),h}(a,c),s[Eo]=p};class z0{constructor(a){this.queryList=a,this.matches=null}clone(){return new z0(this.queryList)}setDirty(){this.queryList.setDirty()}}class W0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const h=null!==a.contentQueries?a.contentQueries[0]:c.length,p=[];for(let v=0;v<h;v++){const b=c.getByIndex(v);p.push(this.queries[b.indexInDeclarationView].clone())}return new W0(p)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==KE(a,c).matches&&this.queries[c].setDirty()}}class jE{constructor(a,c,h=null){this.predicate=a,this.flags=c,this.read=h}}class q0{constructor(a=[]){this.queries=a}elementStart(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let h=0;h<this.length;h++){const p=null!==c?c.length:0,v=this.getByIndex(h).embeddedTView(a,p);v&&(v.indexInDeclarationView=h,null!==c?c.push(v):c=[v])}return null!==c?new q0(c):null}template(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Z0{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Z0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const v=h[p];this.matchTNodeWithReadOption(a,c,bN(c,v)),this.matchTNodeWithReadOption(a,c,ol(c,a,v,!1,!1))}else h===Yp?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,ol(c,a,h,!1,!1))}matchTNodeWithReadOption(a,c,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===ap||p===Vv||p===Yp&&4&c.type)this.addMatch(c.index,-2);else{const v=ol(c,a,p,!1,!1);null!==v&&this.addMatch(c.index,v)}else this.addMatch(c.index,h)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function bN(s,a){const c=s.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===a)return c[h+1];return null}function CN(s,a,c,h){return-1===c?function wN(s,a){return 11&s.type?bh(s,a):4&s.type?Hv(s,a):null}(a,s):-2===c?function DN(s,a,c){return c===ap?bh(a,s):c===Yp?Hv(a,s):c===Vv?HE(a,s):void 0}(s,a,h):Qr(s,s[wt],c,a)}function GE(s,a,c,h){const p=a[qr].queries[h];if(null===p.matches){const v=s.data,b=c.matches,S=[];for(let M=0;M<b.length;M+=2){const P=b[M];S.push(P<0?null:CN(a,v[P],b[M+1],c.metadata.read))}p.matches=S}return p.matches}function Y0(s,a,c,h){const p=s.queries.getByIndex(c),v=p.matches;if(null!==v){const b=GE(s,a,p,c);for(let S=0;S<v.length;S+=2){const M=v[S];if(M>0)h.push(b[S/2]);else{const P=v[S+1],B=a[-M];for(let Y=ri;Y<B.length;Y++){const ie=B[Y];ie[Ga]===ie[hi]&&Y0(ie[wt],ie,P,h)}if(null!==B[Hs]){const Y=B[Hs];for(let ie=0;ie<Y.length;ie++){const ce=Y[ie];Y0(ce[wt],ce,P,h)}}}}}return h}function $E(s){const a=Ze(),c=Dn(),h=Iu();Xa(h+1);const p=KE(c,h);if(s.dirty&&function wu(s){return 4==(4&s[dn])}(a)===(2==(2&p.metadata.flags))){if(null===p.matches)s.reset([]);else{const v=p.crossesNgTemplate?Y0(c,a,h,[]):GE(c,a,p,h);s.reset(v,KS),s.notifyOnChanges()}return!0}return!1}function zE(s,a,c){const h=Dn();h.firstCreatePass&&(YE(h,new jE(s,a,c),-1),2==(2&a)&&(h.staticViewQueries=!0)),ZE(h,Ze(),a)}function WE(s,a,c,h){const p=Dn();if(p.firstCreatePass){const v=ur();YE(p,new jE(a,c,h),v.index),function K0(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(p,s),2==(2&c)&&(p.staticContentQueries=!0)}ZE(p,Ze(),c)}function qE(){return function EN(s,a){return s[qr].queries[a].queryList}(Ze(),Iu())}function ZE(s,a,c){const h=new V0(4==(4&c));(function yk(s,a,c,h){const p=sc(a);p.push(c),s.firstCreatePass&&gI(s).push(h,p.length-1)})(s,a,h,h.destroy),null===a[qr]&&(a[qr]=new W0),a[qr].queries.push(new z0(h))}function YE(s,a,c){null===s.queries&&(s.queries=new q0),s.queries.track(new Z0(a,c))}function KE(s,a){return s.queries.getByIndex(a)}function JE(s,a){return Hv(s,a)}function J0(s){return!!Wr(s)}const Jp=new qn("Application Initializer");let Gv=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h}),this.appInits=Mn(Jp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const p of this.appInits){const v=p();if(DD(v))c.push(v);else if(ED(v)){const b=new Promise((S,M)=>{v.subscribe({complete:S,error:M})});c.push(b)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{h()}).catch(p=>{this.reject(p)}),0===c.length&&h(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),o1=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Qp=new qn("LocaleId",{providedIn:"root",factory:()=>Mn(Qp,Ke.Optional|Ke.SkipSelf)||function rb(){return typeof $localize<"u"&&$localize.locale||Fh}()}),s1=new qn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let ob=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new G.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class jN{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let l1=(()=>{class s{compileModuleSync(c){return new L0(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),v=pl(Wr(c).declarations).reduce((b,S)=>{const M=un(S);return M&&b.push(new nv(M)),b},[]);return new jN(h,v)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function $v(...s){}class is{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cl(!1),this.onMicrotaskEmpty=new Cl(!1),this.onStable=new Cl(!1),this.onError=new Cl(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&c,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function _P(){let s=Rt.requestAnimationFrame,a=Rt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function zN(s){const a=()=>{!function h1(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,zv(s),s.isCheckStableRunning=!0,d1(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),zv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,p,v,b,S)=>{try{return Zh(s),c.invokeTask(p,v,b,S)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||s.shouldCoalesceRunChangeDetection)&&a(),Xp(s)}},onInvoke:(c,h,p,v,b,S,M)=>{try{return Zh(s),c.invoke(p,v,b,S,M)}finally{s.shouldCoalesceRunChangeDetection&&a(),Xp(s)}},onHasTask:(c,h,p,v)=>{c.hasTask(p,v),h===p&&("microTask"==v.change?(s._hasPendingMicrotasks=v.microTask,zv(s),d1(s)):"macroTask"==v.change&&(s.hasPendingMacrotasks=v.macroTask))},onHandleError:(c,h,p,v)=>(c.handleError(p,v),s.runOutsideAngular(()=>s.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!is.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(is.isInAngularZone())throw new _e(909,!1)}run(a,c,h){return this._inner.run(a,c,h)}runTask(a,c,h,p){const v=this._inner,b=v.scheduleEventTask("NgZoneEvent: "+p,a,yP,$v,$v);try{return v.runTask(b,c,h)}finally{v.cancelTask(b)}}runGuarded(a,c,h){return this._inner.runGuarded(a,c,h)}runOutsideAngular(a){return this._outer.run(a)}}const yP={};function d1(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function zv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Zh(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Xp(s){s._nesting--,d1(s)}class bP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cl,this.onMicrotaskEmpty=new Cl,this.onStable=new Cl,this.onError=new Cl}run(a,c,h){return a.apply(c,h)}runGuarded(a,c,h){return a.apply(c,h)}runOutsideAngular(a){return a()}runTask(a,c,h,p){return a.apply(c,h)}}const WN=new qn("",{providedIn:"root",factory:qN});function qN(){const s=Mn(is);let a=!0;const c=new ae.y(p=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{p.next(a),p.complete()})}),h=new ae.y(p=>{let v;s.runOutsideAngular(()=>{v=s.onStable.subscribe(()=>{is.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,p.next(!0))})})});const b=s.onUnstable.subscribe(()=>{is.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{p.next(!1)}))});return()=>{v.unsubscribe(),b.unsubscribe()}});return(0,ge.T)(c,h.pipe((0,Oe.B)()))}const ZN=new qn(""),YN=new qn("");let Wv,wP=(()=>{class s{constructor(c,h,p){this._ngZone=c,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Wv||(function f1(s){Wv=s}(p),p.addToWindow(h)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{is.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,p){let v=-1;h&&h>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==v),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:v,updateCb:p})}whenStable(c,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,h,p){return[]}}return s.\u0275fac=function(c){return new(c||s)(jn(is),jn(KN),jn(YN))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})(),KN=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return Wv?.findTestabilityInTree(this,c,h)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Ei=null;const pd=new qn("AllowMultipleToken"),qv=new qn("PlatformDestroyListeners"),ab=new qn("appBootstrapListener");class XN{constructor(a,c){this.name=a,this.token=c}}function g1(s,a,c=[]){const h=`Platform: ${a}`,p=new qn(h);return(v=[])=>{let b=Yh();if(!b||b.injector.get(pd,!1)){const S=[...c,...v,{provide:p,useValue:!0}];s?s(S):function eM(s){if(Ei&&!Ei.get(pd,!1))throw new _e(400,!1);(function Zv(){!function _u(s){vu=s}(()=>{throw new _e(600,!1)})})(),Ei=s;const a=s.get(v1);(function p1(s){s.get(zS,null)?.forEach(c=>c())})(s)}(function eg(s=[],a){return qc.create({name:a,providers:[{provide:rC,useValue:"platform"},{provide:qv,useValue:new Set([()=>Ei=null])},...s]})}(S,h))}return function m1(s){const a=Yh();if(!a)throw new _e(401,!1);return a}()}}function Yh(){return Ei?.get(v1)??null}let v1=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const p=function gd(s="zone.js",a){return"noop"===s?new bP:"zone.js"===s?new is(a):s}(h?.ngZone,function _1(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return p.run(()=>{const v=function VA(s,a,c){return new F0(s,a,c)}(c.moduleType,this.injector,function D1(s){return[{provide:is,useFactory:s},{provide:wm,multi:!0,useFactory:()=>{const a=Mn(nM,{optional:!0});return()=>a.initialize()}},{provide:w1,useFactory:tn},{provide:WN,useFactory:qN}]}(()=>p)),b=v.injector.get(Ch,null);return p.runOutsideAngular(()=>{const S=p.onError.subscribe({next:M=>{b.handleError(M)}});v.onDestroy(()=>{Kv(this._modules,v),S.unsubscribe()})}),function y1(s,a,c){try{const h=c();return DD(h)?h.catch(p=>{throw a.runOutsideAngular(()=>s.handleError(p)),p}):h}catch(h){throw a.runOutsideAngular(()=>s.handleError(h)),h}}(b,p,()=>{const S=v.injector.get(Gv);return S.runInitializers(),S.donePromise.then(()=>(QD(v.injector.get(Qp,Fh)||Fh),this._moduleDoBootstrap(v),v))})})}bootstrapModule(c,h=[]){const p=Yv({},h);return function JN(s,a,c){const h=new L0(c);return Promise.resolve(h)}(0,0,c).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(c){const h=c.injector.get(ko);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!c.instance.ngDoBootstrap)throw new _e(-403,!1);c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const c=this._injector.get(qv,null);c&&(c.forEach(h=>h()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(jn(qc))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Yv(s,a){return Array.isArray(a)?a.reduce(Yv,s):{...s,...a}}let ko=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Mn(w1),this.zoneIsStable=Mn(WN),this.componentTypes=[],this.components=[],this.isStable=Mn(ob).hasPendingTasks.pipe((0,We.w)(c=>c?(0,Te.of)(!1):this.zoneIsStable),(0,xe.x)(),(0,Oe.B)()),this._injector=Mn(qu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,h){const p=c instanceof hC;if(!this._injector.get(Gv).done)throw!p&&Ba(c),new _e(405,!1);let b;b=p?c:this._injector.get(Fm).resolveComponentFactory(c),this.componentTypes.push(b.componentType);const S=function QN(s){return s.isBoundToModule}(b)?void 0:this._injector.get(jh),P=b.create(qc.NULL,[],h||b.selector,S),B=P.location.nativeElement,Y=P.injector.get(ZN,null);return Y?.registerApplication(B),P.onDestroy(()=>{this.detachView(P.hostView),Kv(this.components,P),Y?.unregisterApplication(B)}),this._loadComponent(P),P}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;Kv(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const h=this._injector.get(ab,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Kv(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new _e(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Kv(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}const w1=new qn("",{providedIn:"root",factory:()=>Mn(Ch).handleError.bind(void 0)});function tn(){const s=Mn(is),a=Mn(Ch);return c=>s.runOutsideAngular(()=>a.handleError(c))}let nM=(()=>{class s{constructor(){this.zone=Mn(is),this.applicationRef=Mn(ko)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function iM(){return!1}let T1=(()=>{class s{}return s.__NG_ELEMENT_ID__=sM,s})();function sM(s){return function aM(s,a,c){if(jo(s)&&!c){const h=Yr(s.index,a);return new td(h,h)}return 47&s.type?new td(a[li],a):null}(ur(),Ze(),16==(16&s))}class N1{constructor(){}supports(a){return rv(a)}create(a){return new SP(a)}}const vM=(s,a)=>a;class SP{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||vM}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,h=this._removalsHead,p=0,v=null;for(;c||h;){const b=!h||c&&c.currentIndex<yM(h,p,v)?c:h,S=yM(b,p,v),M=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(c=c._next,null==b.previousIndex)p++;else{v||(v=[]);const P=S-p,B=M-p;if(P!=B){for(let ie=0;ie<P;ie++){const ce=ie<v.length?v[ie]:v[ie]=0,Ue=ce+ie;B<=Ue&&Ue<P&&(v[ie]=ce+1)}v[b.previousIndex]=B-P}}S!==M&&a(b,S,M)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!rv(a))throw new _e(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let p,v,b,c=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let S=0;S<this.length;S++)v=a[S],b=this._trackByFn(S,v),null!==c&&Object.is(c.trackById,b)?(h&&(c=this._verifyReinsertion(c,v,b,S)),Object.is(c.item,v)||this._addIdentityChange(c,v)):(c=this._mismatch(c,v,b,S),h=!0),c=c._next}else p=0,function XC(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let h;for(;!(h=c.next()).done;)a(h.value)}}(a,S=>{b=this._trackByFn(p,S),null!==c&&Object.is(c.trackById,b)?(h&&(c=this._verifyReinsertion(c,S,b,p)),Object.is(c.item,S)||this._addIdentityChange(c,S)):(c=this._mismatch(c,S,b,p),h=!0),c=c._next,p++}),this.length=p;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,h,p){let v;return null===a?v=this._itTail:(v=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,v,p)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,v,p)):a=this._addAfter(new IP(c,h),v,p),a}_verifyReinsertion(a,c,h,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==v?a=this._reinsertAfter(v,a._prev,p):a.currentIndex!=p&&(a.currentIndex=p,this._addToMoves(a,p)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const p=a._prevRemoved,v=a._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(a,c,h),this._addToMoves(a,h),a}_moveAfter(a,c,h){return this._unlink(a),this._insertAfter(a,c,h),this._addToMoves(a,h),a}_addAfter(a,c,h){return this._insertAfter(a,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,h){const p=null===c?this._itHead:c._next;return a._next=p,a._prev=c,null===p?this._itTail=a:p._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new _M),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,h=a._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _M),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class IP{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AP{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const c=a._prevDup,h=a._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class _M{constructor(){this.map=new Map}put(a){const c=a.trackById;let h=this.map.get(c);h||(h=new AP,this.map.set(c,h)),h.add(a)}get(a,c){const p=this.map.get(a);return p?p.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yM(s,a,c){const h=s.previousIndex;if(null===h)return h;let p=0;return c&&h<c.length&&(p=c[h]),h+a+p}class bM{constructor(){}supports(a){return a instanceof Map||Zy(a)}create(){return new NP}}class NP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Zy(a)))throw new _e(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,p)=>{if(c&&c.key===p)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const v=this._getOrCreateRecordForKey(p,h);c=this._insertBeforeOrAppend(c,v)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const h=a._prev;return c._next=a,c._prev=h,a._prev=c,h&&(h._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const p=this._records.get(a);this._maybeAddToChanges(p,c);const v=p._prev,b=p._next;return v&&(v._next=b),b&&(b._prev=v),p._next=null,p._prev=null,p}const h=new MP(a);return this._records.set(a,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(h=>c(a[h],h))}}class MP{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wM(){return new M1([new N1])}let M1=(()=>{class s{constructor(c){this.factories=c}static create(c,h){if(null!=h){const p=h.factories.slice();c=c.concat(p)}return new s(c)}static extend(c){return{provide:s,useFactory:h=>s.create(c,h||wM()),deps:[[s,new Vr,new ya]]}}find(c){const h=this.factories.find(p=>p.supports(c));if(null!=h)return h;throw new _e(901,!1)}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:wM}),s})();function CM(){return new x1([new bM])}let x1=(()=>{class s{constructor(c){this.factories=c}static create(c,h){if(h){const p=h.factories.slice();c=c.concat(p)}return new s(c)}static extend(c){return{provide:s,useFactory:h=>s.create(c,h||CM()),deps:[[s,new Vr,new ya]]}}find(c){const h=this.factories.find(p=>p.supports(c));if(h)return h;throw new _e(901,!1)}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:CM}),s})();const OP=g1(null,"core",[]);let RP=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(jn(ko))},s.\u0275mod=Ua({type:s}),s.\u0275inj=$n({}),s})();function r_(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function BP(s,a){const c=un(s),h=a.elementInjector||Tm();return new nv(c).create(h,a.projectableNodes,a.hostElement,a.environmentInjector)}function HP(s){const a=un(s);if(!a)return null;const c=new nv(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},4097:(It,Le,z)=>{z.d(Le,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=z(534);(0,u.registerVersion)("firebase","9.23.0","app")},120:(It,Le,z)=>{z.d(Le,{Z:()=>u.Z});var u=z(3106);u.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(It,Le,z)=>{z.r(Le);var u=z(5861),K=z(3106),G=z(2659),ae=z(9058),Oe=(z(534),z(7879),z(4537));function We(){return window}function ee(){return ee=(0,u.Z)(function*($,q,H){var le;const{BuildInfo:Pe}=We();(0,G.as)(q.sessionId,"AuthEvent did not contain a session ID");const gt=yield function it($){return Bt.apply(this,arguments)}(q.sessionId),Vt={};return(0,G.at)()?Vt.ibi=Pe.packageName:(0,G.au)()?Vt.apn=Pe.packageName:(0,G.av)($,"operation-not-supported-in-this-environment"),Pe.displayName&&(Vt.appDisplayName=Pe.displayName),Vt.sessionId=gt,(0,G.aw)($,H,q.type,void 0,null!==(le=q.eventId)&&void 0!==le?le:void 0,Vt)}),ee.apply(this,arguments)}function nt(){return(nt=(0,u.Z)(function*($){const{BuildInfo:q}=We(),H={};(0,G.at)()?H.iosBundleId=q.packageName:(0,G.au)()?H.androidPackageName=q.packageName:(0,G.av)($,"operation-not-supported-in-this-environment"),yield(0,G.ax)($,H)})).apply(this,arguments)}function Ye(){return(Ye=(0,u.Z)(function*($,q,H){const{cordova:le}=We();let Pe=()=>{};try{yield new Promise((gt,Vt)=>{let Ht=null;function kt(){var hn;gt();const $i=null===(hn=le.plugins.browsertab)||void 0===hn?void 0:hn.close;"function"==typeof $i&&$i(),"function"==typeof H?.close&&H.close()}function en(){Ht||(Ht=window.setTimeout(()=>{Vt((0,G.az)($,"redirect-cancelled-by-user"))},2e3))}function Un(){"visible"===document?.visibilityState&&en()}q.addPassiveListener(kt),document.addEventListener("resume",en,!1),(0,G.au)()&&document.addEventListener("visibilitychange",Un,!1),Pe=()=>{q.removePassiveListener(kt),document.removeEventListener("resume",en,!1),document.removeEventListener("visibilitychange",Un,!1),Ht&&window.clearTimeout(Ht)}})}finally{Pe()}})).apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(function*($){const q=function Mt($){if((0,G.as)(/[0-9a-zA-Z]+/.test($),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode($);const q=new ArrayBuffer($.length),H=new Uint8Array(q);for(let le=0;le<$.length;le++)H[le]=$.charCodeAt(le);return H}($),H=yield crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(H)).map(Pe=>Pe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ve extends G.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(q=>{this.resolveInialized=q})}addPassiveListener(q){this.passiveListeners.add(q)}removePassiveListener(q){this.passiveListeners.delete(q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(q){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(q)),super.onEvent(q)}initialized(){var q=this;return(0,u.Z)(function*(){yield q.initPromise})()}}function qe($){return ot.apply(this,arguments)}function ot(){return(ot=(0,u.Z)(function*($){const q=yield Nn()._get(bi($));return q&&(yield Nn()._remove(bi($))),q})).apply(this,arguments)}function vt(){const $=[];for(let H=0;H<20;H++){const le=Math.floor(62*Math.random());$.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(le))}return $.join("")}function Nn(){return(0,G.aC)(G.b)}function bi($){return(0,G.aD)("authEvent",$.config.apiKey,$.name)}function Ce($){if(!$?.includes("?"))return{};const[q,...H]=$.split("?");return(0,ae.zd)(H.join("?"))}const et=class je{constructor(){this._redirectPersistence=G.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=G.aE,this._overrideRedirectResult=G.aF}_initialize(q){var H=this;return(0,u.Z)(function*(){const le=q._key();let Pe=H.eventManagers.get(le);return Pe||(Pe=new Ve(q),H.eventManagers.set(le,Pe),H.attachCallbackListeners(q,Pe)),Pe})()}_openPopup(q){(0,G.av)(q,"operation-not-supported-in-this-environment")}_openRedirect(q,H,le,Pe){var gt=this;return(0,u.Z)(function*(){!function pt($){var q,H,le,Pe,gt,Vt,Ht,kt,en,Un;const hn=We();(0,G.aA)("function"==typeof(null===(q=hn?.universalLinks)||void 0===q?void 0:q.subscribe),$,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,G.aA)(typeof(null===(H=hn?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,G.aA)("function"==typeof(null===(gt=null===(Pe=null===(le=hn?.cordova)||void 0===le?void 0:le.plugins)||void 0===Pe?void 0:Pe.browsertab)||void 0===gt?void 0:gt.openUrl),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,G.aA)("function"==typeof(null===(kt=null===(Ht=null===(Vt=hn?.cordova)||void 0===Vt?void 0:Vt.plugins)||void 0===Ht?void 0:Ht.browsertab)||void 0===kt?void 0:kt.isAvailable),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,G.aA)("function"==typeof(null===(Un=null===(en=hn?.cordova)||void 0===en?void 0:en.InAppBrowser)||void 0===Un?void 0:Un.open),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(q);const Vt=yield gt._initialize(q);yield Vt.initialized(),Vt.resetRedirect(),(0,G.aG)(),yield gt._originValidation(q);const Ht=function me($,q,H=null){return{type:q,eventId:H,urlResponse:null,sessionId:vt(),postBody:null,tenantId:$.tenantId,error:(0,G.az)($,"no-auth-event")}}(q,le,Pe);yield function Re($,q){return Nn()._set(bi($),q)}(q,Ht);const kt=yield function Q($,q,H){return ee.apply(this,arguments)}(q,Ht,H),en=yield function $e($){const{cordova:q}=We();return new Promise(H=>{q.plugins.browsertab.isAvailable(le=>{let Pe=null;le?q.plugins.browsertab.openUrl($):Pe=q.InAppBrowser.open($,(0,G.ay)()?"_blank":"_system","location=yes"),H(Pe)})})}(kt);return function ht($,q,H){return Ye.apply(this,arguments)}(q,Vt,en)})()}_isIframeWebStorageSupported(q,H){throw new Error("Method not implemented.")}_originValidation(q){const H=q._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function he($){return nt.apply(this,arguments)}(q)),this.originValidationPromises[H]}attachCallbackListeners(q,H){const{universalLinks:le,handleOpenURL:Pe,BuildInfo:gt}=We(),Vt=setTimeout((0,u.Z)(function*(){yield qe(q),H.onEvent(dt())}),500),Ht=function(){var Un=(0,u.Z)(function*(hn){clearTimeout(Vt);const $i=yield qe(q);let ar=null;$i&&hn?.url&&(ar=function At($,q){var H,le;const Pe=function Do($){const q=Ce($),H=q.link?decodeURIComponent(q.link):void 0,le=Ce(H).link,Pe=q.deep_link_id?decodeURIComponent(q.deep_link_id):void 0;return Ce(Pe).link||Pe||le||H||$}(q);if(Pe.includes("/__/auth/callback")){const gt=Ce(Pe),Vt=gt.firebaseError?function er($){try{return JSON.parse($)}catch{return null}}(decodeURIComponent(gt.firebaseError)):null,Ht=null===(le=null===(H=Vt?.code)||void 0===H?void 0:H.split("auth/"))||void 0===le?void 0:le[1],kt=Ht?(0,G.az)(Ht):null;return kt?{type:$.type,eventId:$.eventId,tenantId:$.tenantId,error:kt,urlResponse:null,sessionId:null,postBody:null}:{type:$.type,eventId:$.eventId,tenantId:$.tenantId,sessionId:$.sessionId,urlResponse:Pe,postBody:null}}return null}($i,hn.url)),H.onEvent(ar||dt())});return function($i){return Un.apply(this,arguments)}}();typeof le<"u"&&"function"==typeof le.subscribe&&le.subscribe(null,Ht);const kt=Pe,en=`${gt.packageName.toLowerCase()}://`;We().handleOpenURL=function(){var Un=(0,u.Z)(function*(hn){if(hn.toLowerCase().startsWith(en)&&Ht({url:hn}),"function"==typeof kt)try{kt(hn)}catch($i){console.error($i)}});return function(hn){return Un.apply(this,arguments)}}()}};function dt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,G.az)("no-auth-event")}}function Dt(){var $;return(null===($=self?.location)||void 0===$?void 0:$.protocol)||null}function Vn($=(0,ae.z$)()){return!("file:"!==Dt()&&"ionic:"!==Dt()&&"capacitor:"!==Dt()||!$.toLowerCase().match(/iphone|ipad|ipod|android/))}function $n(){try{const $=self.localStorage,q=G.aL();if($)return $.setItem(q,"1"),$.removeItem(q),!function Gi($=(0,ae.z$)()){return function bn(){return(0,ae.w1)()&&11===document?.documentMode}()||function Jt($=(0,ae.z$)()){return/Edge\/\d+/.test($)}($)}()||(0,ae.hl)()}catch{return wi()&&(0,ae.hl)()}return!1}function wi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Je(){return(function Ot(){return"http:"===Dt()||"https:"===Dt()}()||(0,ae.ru)()||Vn())&&!function Fn(){return(0,ae.b$)()||(0,ae.UG)()}()&&$n()&&!wi()}function de(){return Vn()&&typeof document<"u"}function Se(){return(Se=(0,u.Z)(function*(){return!!de()&&new Promise($=>{const q=setTimeout(()=>{$(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(q),$(!0)})})})).apply(this,arguments)}const rt={LOCAL:"local",NONE:"none",SESSION:"session"},_t=G.aA,Qn="persistence";function ut($){return yt.apply(this,arguments)}function yt(){return(yt=(0,u.Z)(function*($){yield $._initializationPromise;const q=si(),H=G.aD(Qn,$.config.apiKey,$.name);q&&q.setItem(H,$._getPersistence())})).apply(this,arguments)}function si(){var $;try{return(null===($=function He(){return typeof window<"u"?window:null}())||void 0===$?void 0:$.sessionStorage)||null}catch{return null}}const pn=G.aA;class Rt{constructor(){this.browserResolver=G.aC(G.k),this.cordovaResolver=G.aC(et),this.underlyingResolver=null,this._redirectPersistence=G.a,this._completeRedirectFn=G.aE,this._overrideRedirectResult=G.aF}_initialize(q){var H=this;return(0,u.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(q)})()}_openPopup(q,H,le,Pe){var gt=this;return(0,u.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openPopup(q,H,le,Pe)})()}_openRedirect(q,H,le,Pe){var gt=this;return(0,u.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openRedirect(q,H,le,Pe)})()}_isIframeWebStorageSupported(q,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(q,H)}_originValidation(q){return this.assertedUnderlyingResolver._originValidation(q)}get _shouldInitProactively(){return de()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var q=this;return(0,u.Z)(function*(){if(q.underlyingResolver)return;const H=yield function oe(){return Se.apply(this,arguments)}();q.underlyingResolver=H?q.cordovaResolver:q.browserResolver})()}}function An($){return $.unwrap()}function nn($){return on($)}function on($){const{_tokenResponse:q}=$ instanceof ae.ZR?$.customData:$;if(!q)return null;if(!($ instanceof ae.ZR)&&"temporaryProof"in q&&"phoneNumber"in q)return G.P.credentialFromResult($);const H=q.providerId;if(!H||H===G.p.PASSWORD)return null;let le;switch(H){case G.p.GOOGLE:le=G.V;break;case G.p.FACEBOOK:le=G.U;break;case G.p.GITHUB:le=G.W;break;case G.p.TWITTER:le=G.Z;break;default:const{oauthIdToken:Pe,oauthAccessToken:gt,oauthTokenSecret:Vt,pendingToken:Ht,nonce:kt}=q;return gt||Vt||Pe||Ht?Ht?H.startsWith("saml.")?G.aO._create(H,Ht):G.L._fromParams({providerId:H,signInMethod:H,pendingToken:Ht,idToken:Pe,accessToken:gt}):new G.X(H).credential({idToken:Pe,accessToken:gt,rawNonce:kt}):null}return $ instanceof ae.ZR?le.credentialFromError($):le.credentialFromResult($)}function Xn($,q){return q.catch(H=>{throw H instanceof ae.ZR&&function Ln($,q){var H;const le=null===(H=q.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===q?.code)q.resolver=new wr($,G.aq($,q));else if(le){const Pe=on(q),gt=q;Pe&&(gt.credential=Pe,gt.tenantId=le.tenantId||void 0,gt.email=le.email||void 0,gt.phoneNumber=le.phoneNumber||void 0)}}($,H),H}).then(H=>{const Pe=H.user;return{operationType:H.operationType,credential:nn(H),additionalUserInfo:G.ao(H),user:Si.getOrCreate(Pe)}})}function Gr($,q){return $r.apply(this,arguments)}function $r(){return($r=(0,u.Z)(function*($,q){const H=yield q;return{verificationId:H.verificationId,confirm:le=>Xn($,H.confirm(le))}})).apply(this,arguments)}class wr{constructor(q,H){this.resolver=H,this.auth=function ao($){return $.wrapped()}(q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(q){return Xn(An(this.auth),this.resolver.resolveSignIn(q))}}class Si{constructor(q){this._delegate=q,this.multiFactor=G.ar(q)}static getOrCreate(q){return Si.USER_MAP.has(q)||Si.USER_MAP.set(q,new Si(q)),Si.USER_MAP.get(q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(q){return this._delegate.getIdTokenResult(q)}getIdToken(q){return this._delegate.getIdToken(q)}linkAndRetrieveDataWithCredential(q){return this.linkWithCredential(q)}linkWithCredential(q){var H=this;return(0,u.Z)(function*(){return Xn(H.auth,G.a0(H._delegate,q))})()}linkWithPhoneNumber(q,H){var le=this;return(0,u.Z)(function*(){return Gr(le.auth,G.l(le._delegate,q,H))})()}linkWithPopup(q){var H=this;return(0,u.Z)(function*(){return Xn(H.auth,G.d(H._delegate,q,Rt))})()}linkWithRedirect(q){var H=this;return(0,u.Z)(function*(){return yield ut(G.aH(H.auth)),G.g(H._delegate,q,Rt)})()}reauthenticateAndRetrieveDataWithCredential(q){return this.reauthenticateWithCredential(q)}reauthenticateWithCredential(q){var H=this;return(0,u.Z)(function*(){return Xn(H.auth,G.a1(H._delegate,q))})()}reauthenticateWithPhoneNumber(q,H){return Gr(this.auth,G.r(this._delegate,q,H))}reauthenticateWithPopup(q){return Xn(this.auth,G.e(this._delegate,q,Rt))}reauthenticateWithRedirect(q){var H=this;return(0,u.Z)(function*(){return yield ut(G.aH(H.auth)),G.h(H._delegate,q,Rt)})()}sendEmailVerification(q){return G.ae(this._delegate,q)}unlink(q){var H=this;return(0,u.Z)(function*(){return yield G.an(H._delegate,q),H})()}updateEmail(q){return G.aj(this._delegate,q)}updatePassword(q){return G.ak(this._delegate,q)}updatePhoneNumber(q){return G.u(this._delegate,q)}updateProfile(q){return G.ai(this._delegate,q)}verifyBeforeUpdateEmail(q,H){return G.af(this._delegate,q,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Si.USER_MAP=new WeakMap;const xi=G.aA;let tr=(()=>{class ${constructor(H,le){if(this.app=H,le.isInitialized())return this._delegate=le.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Pe}=H.options;xi(Pe,"invalid-api-key",{appName:H.name}),xi(Pe,"invalid-api-key",{appName:H.name});const gt=typeof window<"u"?Rt:void 0;this._delegate=le.initialize({options:{persistence:zr(Pe,H.name),popupRedirectResolver:gt}}),this._delegate._updateErrorMap(G.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Si.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,le){G.I(this._delegate,H,le)}applyActionCode(H){return G.a5(this._delegate,H)}checkActionCode(H){return G.a6(this._delegate,H)}confirmPasswordReset(H,le){return G.a4(this._delegate,H,le)}createUserWithEmailAndPassword(H,le){var Pe=this;return(0,u.Z)(function*(){return Xn(Pe._delegate,G.a8(Pe._delegate,H,le))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return G.ad(this._delegate,H)}isSignInWithEmailLink(H){return G.ab(this._delegate,H)}getRedirectResult(){var H=this;return(0,u.Z)(function*(){xi(Je(),H._delegate,"operation-not-supported-in-this-environment");const le=yield G.j(H._delegate,Rt);return le?Xn(H._delegate,Promise.resolve(le)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function ct($,q){(0,G.aH)($)._logFramework(q)}(this._delegate,H)}onAuthStateChanged(H,le,Pe){const{next:gt,error:Vt,complete:Ht}=di(H,le,Pe);return this._delegate.onAuthStateChanged(gt,Vt,Ht)}onIdTokenChanged(H,le,Pe){const{next:gt,error:Vt,complete:Ht}=di(H,le,Pe);return this._delegate.onIdTokenChanged(gt,Vt,Ht)}sendSignInLinkToEmail(H,le){return G.aa(this._delegate,H,le)}sendPasswordResetEmail(H,le){return G.a3(this._delegate,H,le||void 0)}setPersistence(H){var le=this;return(0,u.Z)(function*(){let Pe;switch(function Ke($,q){_t(Object.values(rt).includes(q),$,"invalid-persistence-type"),(0,ae.b$)()?_t(q!==rt.SESSION,$,"unsupported-persistence-type"):(0,ae.UG)()?_t(q===rt.NONE,$,"unsupported-persistence-type"):wi()?_t(q===rt.NONE||q===rt.LOCAL&&(0,ae.hl)(),$,"unsupported-persistence-type"):_t(q===rt.NONE||$n(),$,"unsupported-persistence-type")}(le._delegate,H),H){case rt.SESSION:Pe=G.a;break;case rt.LOCAL:Pe=(yield G.aC(G.i)._isAvailable())?G.i:G.b;break;case rt.NONE:Pe=G.N;break;default:return G.av("argument-error",{appName:le._delegate.name})}return le._delegate.setPersistence(Pe)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return Xn(this._delegate,G._(this._delegate))}signInWithCredential(H){return Xn(this._delegate,G.$(this._delegate,H))}signInWithCustomToken(H){return Xn(this._delegate,G.a2(this._delegate,H))}signInWithEmailAndPassword(H,le){return Xn(this._delegate,G.a9(this._delegate,H,le))}signInWithEmailLink(H,le){return Xn(this._delegate,G.ac(this._delegate,H,le))}signInWithPhoneNumber(H,le){return Gr(this._delegate,G.s(this._delegate,H,le))}signInWithPopup(H){var le=this;return(0,u.Z)(function*(){return xi(Je(),le._delegate,"operation-not-supported-in-this-environment"),Xn(le._delegate,G.c(le._delegate,H,Rt))})()}signInWithRedirect(H){var le=this;return(0,u.Z)(function*(){return xi(Je(),le._delegate,"operation-not-supported-in-this-environment"),yield ut(le._delegate),G.f(le._delegate,H,Rt)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return G.a7(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return $.Persistence=rt,$})();function di($,q,H){let le=$;"function"!=typeof $&&({next:le,error:q,complete:H}=$);const Pe=le;return{next:Vt=>Pe(Vt&&Si.getOrCreate(Vt)),error:q,complete:H}}function zr($,q){const H=function wn($,q){const H=si();if(!H)return[];const le=G.aD(Qn,$,q);switch(H.getItem(le)){case rt.NONE:return[G.N];case rt.LOCAL:return[G.i,G.a];case rt.SESSION:return[G.a];default:return[]}}($,q);if(typeof self<"u"&&!H.includes(G.i)&&H.push(G.i),typeof window<"u")for(const le of[G.b,G.a])H.includes(le)||H.push(le);return H.includes(G.N)||H.push(G.N),H}class jn{constructor(){this.providerId="phone",this._delegate=new G.P(An(K.Z.auth()))}static credential(q,H){return G.P.credential(q,H)}verifyPhoneNumber(q,H){return this._delegate.verifyPhoneNumber(q,H)}unwrap(){return this._delegate}}jn.PHONE_SIGN_IN_METHOD=G.P.PHONE_SIGN_IN_METHOD,jn.PROVIDER_ID=G.P.PROVIDER_ID;const lo=G.aA;class Mn{constructor(q,H,le=K.Z.app()){var Pe;lo(null===(Pe=le.options)||void 0===Pe?void 0:Pe.apiKey,"invalid-api-key",{appName:le.name}),this._delegate=new G.R(q,H,le.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function J($){$.INTERNAL.registerComponent(new Oe.wA("auth-compat",q=>{const H=q.getProvider("app-compat").getImmediate(),le=q.getProvider("auth");return new tr(H,le)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:G.A.EMAIL_SIGNIN,PASSWORD_RESET:G.A.PASSWORD_RESET,RECOVER_EMAIL:G.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:G.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:G.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:G.A.VERIFY_EMAIL}},EmailAuthProvider:G.Q,FacebookAuthProvider:G.U,GithubAuthProvider:G.W,GoogleAuthProvider:G.V,OAuthProvider:G.X,SAMLAuthProvider:G.Y,PhoneAuthProvider:jn,PhoneMultiFactorGenerator:G.m,RecaptchaVerifier:Mn,TwitterAuthProvider:G.Z,Auth:tr,AuthCredential:G.J,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$.registerVersion("@firebase/auth-compat","0.4.2")}(K.Z)},2614:()=>{const It=":";const $n=function(de,...oe){if($n.translate){const He=$n.translate(de,oe);de=He[0],oe=He[1]}let Se=Je(de[0],de.raw[0]);for(let He=1;He<de.length;He++)Se+=oe[He-1]+Je(de[He],de.raw[He]);return Se},wi=":";function Je(de,oe){return oe.charAt(0)===wi?de.substring(function dt(de,oe){for(let Se=1,He=1;Se<de.length;Se++,He++)if("\\"===oe[He])He++;else if(de[Se]===It)return Se;throw new Error(`Unterminated $localize metadata block in "${oe}".`)}(de,oe)+1):de}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=$n},3106:(It,Le,z)=>{z.d(Le,{Z:()=>ht});var u=z(9058),K=z(4537),G=z(534),ae=z(7879);class ge{constructor(pt,it){this._delegate=pt,this.firebase=it,(0,G._addComponent)(pt,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(pt,it=G._DEFAULT_ENTRY_NAME){var Bt;this._delegate.checkDestroyed();const Mt=this._delegate.container.getProvider(pt);return!Mt.isInitialized()&&"EXPLICIT"===(null===(Bt=Mt.getComponent())||void 0===Bt?void 0:Bt.instantiationMode)&&Mt.initialize(),Mt.getImmediate({identifier:it})}_removeServiceInstance(pt,it=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(it)}_addComponent(pt){(0,G._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,G._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function xe(){const Ye=function We(Ye){const pt={},it={__esModule:!0,initializeApp:function _e(qe,ot={}){const At=G.initializeApp(qe,ot);if((0,u.r3)(pt,At.name))return pt[At.name];const vt=new Ye(At,it);return pt[At.name]=vt,vt},app:Mt,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function me(qe){const ot=qe.name,At=ot.replace("-compat","");if(G._registerComponent(qe)&&"PUBLIC"===qe.type){const vt=(Nn=Mt())=>{if("function"!=typeof Nn[At])throw Oe.create("invalid-app-argument",{appName:ot});return Nn[At]()};void 0!==qe.serviceProps&&(0,u.ZB)(vt,qe.serviceProps),it[At]=vt,Ye.prototype[At]=function(...Nn){return this._getService.bind(this,ot).apply(this,qe.multipleInstances?Nn:[])}}return"PUBLIC"===qe.type?it[At]:null},removeApp:function Bt(qe){delete pt[qe]},useAsService:function Re(qe,ot){return"serverAuth"===ot?null:ot},modularAPIs:G}};function Mt(qe){if(!(0,u.r3)(pt,qe=qe||G._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:qe});return pt[qe]}return it.default=it,Object.defineProperty(it,"apps",{get:function Ve(){return Object.keys(pt).map(qe=>pt[qe])}}),Mt.App=Ye,it}(ge);return Ye.INTERNAL=Object.assign(Object.assign({},Ye.INTERNAL),{createFirebaseNamespace:xe,extendNamespace:function pt(it){(0,u.ZB)(Ye,it)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ye}(),ee=new ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ye=self.firebase.SDK_VERSION;Ye&&Ye.indexOf("LITE")>=0&&ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ht=Q;!function $e(Ye){(0,G.registerVersion)("@firebase/app-compat","0.2.13",Ye)}()},534:(It,Le,z)=>{z.r(Le),z.d(Le,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Gr,_DEFAULT_ENTRY_NAME:()=>Ke,_addComponent:()=>si,_addOrOverwriteComponent:()=>pn,_apps:()=>yt,_clearComponents:()=>nn,_components:()=>wn,_getProvider:()=>An,_registerComponent:()=>Rt,_removeServiceInstance:()=>ao,deleteApp:()=>xi,getApp:()=>wr,getApps:()=>Si,initializeApp:()=>$r,onLog:()=>zr,registerVersion:()=>di,setLogLevel:()=>jn});var u=z(5861),K=z(4537),G=z(7879),ae=z(9058);const ge=(Ne,pe)=>pe.some(Xe=>Ne instanceof Xe);let Te,Oe;const Q=new WeakMap,ee=new WeakMap,he=new WeakMap,nt=new WeakMap,$e=new WeakMap;let pt={get(Ne,pe,Xe){if(Ne instanceof IDBTransaction){if("done"===pe)return ee.get(Ne);if("objectStoreNames"===pe)return Ne.objectStoreNames||he.get(Ne);if("store"===pe)return Xe.objectStoreNames[1]?void 0:Xe.objectStore(Xe.objectStoreNames[0])}return _e(Ne[pe])},set:(Ne,pe,Xe)=>(Ne[pe]=Xe,!0),has:(Ne,pe)=>Ne instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in Ne};function Mt(Ne){return"function"==typeof Ne?function Bt(Ne){return Ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return Oe||(Oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ne)?function(...pe){return Ne.apply(Ve(this),pe),_e(Q.get(this))}:function(...pe){return _e(Ne.apply(Ve(this),pe))}:function(pe,...Xe){const xt=Ne.call(Ve(this),pe,...Xe);return he.set(xt,pe.sort?pe.sort():[pe]),_e(xt)}}(Ne):(Ne instanceof IDBTransaction&&function Ye(Ne){if(ee.has(Ne))return;const pe=new Promise((Xe,xt)=>{const rn=()=>{Ne.removeEventListener("complete",Qt),Ne.removeEventListener("error",xn),Ne.removeEventListener("abort",xn)},Qt=()=>{Xe(),rn()},xn=()=>{xt(Ne.error||new DOMException("AbortError","AbortError")),rn()};Ne.addEventListener("complete",Qt),Ne.addEventListener("error",xn),Ne.addEventListener("abort",xn)});ee.set(Ne,pe)}(Ne),ge(Ne,function We(){return Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ne,pt):Ne)}function _e(Ne){if(Ne instanceof IDBRequest)return function ht(Ne){const pe=new Promise((Xe,xt)=>{const rn=()=>{Ne.removeEventListener("success",Qt),Ne.removeEventListener("error",xn)},Qt=()=>{Xe(_e(Ne.result)),rn()},xn=()=>{xt(Ne.error),rn()};Ne.addEventListener("success",Qt),Ne.addEventListener("error",xn)});return pe.then(Xe=>{Xe instanceof IDBCursor&&Q.set(Xe,Ne)}).catch(()=>{}),$e.set(pe,Ne),pe}(Ne);if(nt.has(Ne))return nt.get(Ne);const pe=Mt(Ne);return pe!==Ne&&(nt.set(Ne,pe),$e.set(pe,Ne)),pe}const Ve=Ne=>$e.get(Ne),qe=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],At=new Map;function vt(Ne,pe){if(!(Ne instanceof IDBDatabase)||pe in Ne||"string"!=typeof pe)return;if(At.get(pe))return At.get(pe);const Xe=pe.replace(/FromIndex$/,""),xt=pe!==Xe,rn=ot.includes(Xe);if(!(Xe in(xt?IDBIndex:IDBObjectStore).prototype)||!rn&&!qe.includes(Xe))return;const Qt=function(){var xn=(0,u.Z)(function*(Ii,...ai){const co=this.transaction(Ii,rn?"readwrite":"readonly");let Ps=co.store;return xt&&(Ps=Ps.index(ai.shift())),(yield Promise.all([Ps[Xe](...ai),rn&&co.done]))[0]});return function(ai){return xn.apply(this,arguments)}}();return At.set(pe,Qt),Qt}!function it(Ne){pt=Ne(pt)}(Ne=>({...Ne,get:(pe,Xe,xt)=>vt(pe,Xe)||Ne.get(pe,Xe,xt),has:(pe,Xe)=>!!vt(pe,Xe)||Ne.has(pe,Xe)}));class Nn{constructor(pe){this.container=pe}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function bi(Ne){const pe=Ne.getComponent();return"VERSION"===pe?.type}(Xe)){const xt=Xe.getImmediate();return`${xt.library}/${xt.version}`}return null}).filter(Xe=>Xe).join(" ")}}const er="@firebase/app",Ce=new G.Yd("@firebase/app"),Ke="[DEFAULT]",ut={[er]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yt=new Map,wn=new Map;function si(Ne,pe){try{Ne.container.addComponent(pe)}catch(Xe){Ce.debug(`Component ${pe.name} failed to register with FirebaseApp ${Ne.name}`,Xe)}}function pn(Ne,pe){Ne.container.addOrOverwriteComponent(pe)}function Rt(Ne){const pe=Ne.name;if(wn.has(pe))return Ce.debug(`There were multiple attempts to register component ${pe}.`),!1;wn.set(pe,Ne);for(const Xe of yt.values())si(Xe,Ne);return!0}function An(Ne,pe){const Xe=Ne.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Ne.container.getProvider(pe)}function ao(Ne,pe,Xe=Ke){An(Ne,pe).clearInstance(Xe)}function nn(){wn.clear()}const on=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xn{constructor(pe,Xe,xt){this._isDeleted=!1,this._options=Object.assign({},pe),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=xt,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(pe){this._isDeleted=pe}checkDestroyed(){if(this.isDeleted)throw on.create("app-deleted",{appName:this._name})}}const Gr="9.23.0";function $r(Ne,pe={}){let Xe=Ne;"object"!=typeof pe&&(pe={name:pe});const xt=Object.assign({name:Ke,automaticDataCollectionEnabled:!1},pe),rn=xt.name;if("string"!=typeof rn||!rn)throw on.create("bad-app-name",{appName:String(rn)});if(Xe||(Xe=(0,ae.aH)()),!Xe)throw on.create("no-options");const Qt=yt.get(rn);if(Qt){if((0,ae.vZ)(Xe,Qt.options)&&(0,ae.vZ)(xt,Qt.config))return Qt;throw on.create("duplicate-app",{appName:rn})}const xn=new K.H0(rn);for(const ai of wn.values())xn.addComponent(ai);const Ii=new Xn(Xe,xt,xn);return yt.set(rn,Ii),Ii}function wr(Ne=Ke){const pe=yt.get(Ne);if(!pe&&Ne===Ke&&(0,ae.aH)())return $r();if(!pe)throw on.create("no-app",{appName:Ne});return pe}function Si(){return Array.from(yt.values())}function xi(Ne){return tr.apply(this,arguments)}function tr(){return(tr=(0,u.Z)(function*(Ne){const pe=Ne.name;yt.has(pe)&&(yt.delete(pe),yield Promise.all(Ne.container.getProviders().map(Xe=>Xe.delete())),Ne.isDeleted=!0)})).apply(this,arguments)}function di(Ne,pe,Xe){var xt;let rn=null!==(xt=ut[Ne])&&void 0!==xt?xt:Ne;Xe&&(rn+=`-${Xe}`);const Qt=rn.match(/\s|\//),xn=pe.match(/\s|\//);if(Qt||xn){const Ii=[`Unable to register library "${rn}" with version "${pe}":`];return Qt&&Ii.push(`library name "${rn}" contains illegal characters (whitespace or "/")`),Qt&&xn&&Ii.push("and"),xn&&Ii.push(`version name "${pe}" contains illegal characters (whitespace or "/")`),void Ce.warn(Ii.join(" "))}Rt(new K.wA(`${rn}-version`,()=>({library:rn,version:pe}),"VERSION"))}function zr(Ne,pe){if(null!==Ne&&"function"!=typeof Ne)throw on.create("invalid-log-argument");(0,G.Am)(Ne,pe)}function jn(Ne){(0,G.Ub)(Ne)}const lo="firebase-heartbeat-database",Mn=1,te="firebase-heartbeat-store";let J=null;function $(){return J||(J=function me(Ne,pe,{blocked:Xe,upgrade:xt,blocking:rn,terminated:Qt}={}){const xn=indexedDB.open(Ne,pe),Ii=_e(xn);return xt&&xn.addEventListener("upgradeneeded",ai=>{xt(_e(xn.result),ai.oldVersion,ai.newVersion,_e(xn.transaction),ai)}),Xe&&xn.addEventListener("blocked",ai=>Xe(ai.oldVersion,ai.newVersion,ai)),Ii.then(ai=>{Qt&&ai.addEventListener("close",()=>Qt()),rn&&ai.addEventListener("versionchange",co=>rn(co.oldVersion,co.newVersion,co))}).catch(()=>{}),Ii}(lo,Mn,{upgrade:(Ne,pe)=>{0===pe&&Ne.createObjectStore(te)}}).catch(Ne=>{throw on.create("idb-open",{originalErrorMessage:Ne.message})})),J}function H(){return(H=(0,u.Z)(function*(Ne){try{return yield(yield $()).transaction(te).objectStore(te).get(gt(Ne))}catch(pe){if(pe instanceof ae.ZR)Ce.warn(pe.message);else{const Xe=on.create("idb-get",{originalErrorMessage:pe?.message});Ce.warn(Xe.message)}}})).apply(this,arguments)}function le(Ne,pe){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,u.Z)(function*(Ne,pe){try{const xt=(yield $()).transaction(te,"readwrite");yield xt.objectStore(te).put(pe,gt(Ne)),yield xt.done}catch(Xe){if(Xe instanceof ae.ZR)Ce.warn(Xe.message);else{const xt=on.create("idb-set",{originalErrorMessage:Xe?.message});Ce.warn(xt.message)}}})).apply(this,arguments)}function gt(Ne){return`${Ne.name}!${Ne.options.appId}`}class kt{constructor(pe){this.container=pe,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new hn(Xe),this._heartbeatsCachePromise=this._storage.read().then(xt=>(this._heartbeatsCache=xt,xt))}triggerHeartbeat(){var pe=this;return(0,u.Z)(function*(){const xt=pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rn=en();if(null===pe._heartbeatsCache&&(pe._heartbeatsCache=yield pe._heartbeatsCachePromise),pe._heartbeatsCache.lastSentHeartbeatDate!==rn&&!pe._heartbeatsCache.heartbeats.some(Qt=>Qt.date===rn))return pe._heartbeatsCache.heartbeats.push({date:rn,agent:xt}),pe._heartbeatsCache.heartbeats=pe._heartbeatsCache.heartbeats.filter(Qt=>{const xn=new Date(Qt.date).valueOf();return Date.now()-xn<=2592e6}),pe._storage.overwrite(pe._heartbeatsCache)})()}getHeartbeatsHeader(){var pe=this;return(0,u.Z)(function*(){if(null===pe._heartbeatsCache&&(yield pe._heartbeatsCachePromise),null===pe._heartbeatsCache||0===pe._heartbeatsCache.heartbeats.length)return"";const Xe=en(),{heartbeatsToSend:xt,unsentEntries:rn}=function Un(Ne,pe=1024){const Xe=[];let xt=Ne.slice();for(const rn of Ne){const Qt=Xe.find(xn=>xn.agent===rn.agent);if(Qt){if(Qt.dates.push(rn.date),$i(Xe)>pe){Qt.dates.pop();break}}else if(Xe.push({agent:rn.agent,dates:[rn.date]}),$i(Xe)>pe){Xe.pop();break}xt=xt.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:xt}}(pe._heartbeatsCache.heartbeats),Qt=(0,ae.L)(JSON.stringify({version:2,heartbeats:xt}));return pe._heartbeatsCache.lastSentHeartbeatDate=Xe,rn.length>0?(pe._heartbeatsCache.heartbeats=rn,yield pe._storage.overwrite(pe._heartbeatsCache)):(pe._heartbeatsCache.heartbeats=[],pe._storage.overwrite(pe._heartbeatsCache)),Qt})()}}function en(){return(new Date).toISOString().substring(0,10)}class hn{constructor(pe){this.app=pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var pe=this;return(0,u.Z)(function*(){return(yield pe._canUseIndexedDBPromise)&&(yield function q(Ne){return H.apply(this,arguments)}(pe.app))||{heartbeats:[]}})()}overwrite(pe){var Xe=this;return(0,u.Z)(function*(){var xt;if(yield Xe._canUseIndexedDBPromise){const Qt=yield Xe.read();return le(Xe.app,{lastSentHeartbeatDate:null!==(xt=pe.lastSentHeartbeatDate)&&void 0!==xt?xt:Qt.lastSentHeartbeatDate,heartbeats:pe.heartbeats})}})()}add(pe){var Xe=this;return(0,u.Z)(function*(){var xt;if(yield Xe._canUseIndexedDBPromise){const Qt=yield Xe.read();return le(Xe.app,{lastSentHeartbeatDate:null!==(xt=pe.lastSentHeartbeatDate)&&void 0!==xt?xt:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...pe.heartbeats]})}})()}}function $i(Ne){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ne})).length}!function ar(Ne){Rt(new K.wA("platform-logger",pe=>new Nn(pe),"PRIVATE")),Rt(new K.wA("heartbeat",pe=>new kt(pe),"PRIVATE")),di(er,"0.9.13",Ne),di(er,"0.9.13","esm2017"),di("fire-js","")}("")},4537:(It,Le,z)=>{z.d(Le,{H0:()=>We,wA:()=>G});var u=z(5861),K=z(9058);class G{constructor(Q,ee,he){this.name=Q,this.instanceFactory=ee,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const ae="[DEFAULT]";class ge{constructor(Q,ee){this.name=Q,this.container=ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const ee=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(ee)){const he=new K.BH;if(this.instancesDeferred.set(ee,he),this.isInitialized(ee)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:ee});nt&&he.resolve(nt)}catch{}}return this.instancesDeferred.get(ee).promise}getImmediate(Q){var ee;const he=this.normalizeInstanceIdentifier(Q?.identifier),nt=null!==(ee=Q?.optional)&&void 0!==ee&&ee;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:he})}catch($e){if(nt)return null;throw $e}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function Oe(xe){return"EAGER"===xe.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[ee,he]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(ee);try{const $e=this.getOrInitializeService({instanceIdentifier:nt});he.resolve($e)}catch{}}}}clearInstance(Q=ae){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,u.Z)(function*(){const ee=Array.from(Q.instances.values());yield Promise.all([...ee.filter(he=>"INTERNAL"in he).map(he=>he.INTERNAL.delete()),...ee.filter(he=>"_delete"in he).map(he=>he._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=ae){return this.instances.has(Q)}getOptions(Q=ae){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:ee={}}=Q,he=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(he))throw Error(`${this.name}(${he}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:he,options:ee});for(const[$e,ht]of this.instancesDeferred.entries())he===this.normalizeInstanceIdentifier($e)&&ht.resolve(nt);return nt}onInit(Q,ee){var he;const nt=this.normalizeInstanceIdentifier(ee),$e=null!==(he=this.onInitCallbacks.get(nt))&&void 0!==he?he:new Set;$e.add(Q),this.onInitCallbacks.set(nt,$e);const ht=this.instances.get(nt);return ht&&Q(ht,nt),()=>{$e.delete(Q)}}invokeOnInitCallbacks(Q,ee){const he=this.onInitCallbacks.get(ee);if(he)for(const nt of he)try{nt(Q,ee)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:ee={}}){let he=this.instances.get(Q);if(!he&&this.component&&(he=this.component.instanceFactory(this.container,{instanceIdentifier:(xe=Q,xe===ae?void 0:xe),options:ee}),this.instances.set(Q,he),this.instancesOptions.set(Q,ee),this.invokeOnInitCallbacks(he,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,he)}catch{}var xe;return he||null}normalizeInstanceIdentifier(Q=ae){return this.component?this.component.multipleInstances?Q:ae:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class We{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const ee=this.getProvider(Q.name);if(ee.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);ee.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const ee=new ge(Q,this);return this.providers.set(Q,ee),ee}getProviders(){return Array.from(this.providers.values())}}},7879:(It,Le,z)=>{z.d(Le,{Am:()=>xe,Ub:()=>We,Yd:()=>Oe,in:()=>K});const u=[];var K=(()=>((K=K||{})[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",K))();const G={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ae=K.INFO,ge={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Te=(Q,ee,...he)=>{if(ee<Q.logLevel)return;const nt=(new Date).toISOString(),$e=ge[ee];if(!$e)throw new Error(`Attempted to log a message with an invalid logType (value: ${ee})`);console[$e](`[${nt}]  ${Q.name}:`,...he)};class Oe{constructor(ee){this.name=ee,this._logLevel=ae,this._logHandler=Te,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(ee){if(!(ee in K))throw new TypeError(`Invalid value "${ee}" assigned to \`logLevel\``);this._logLevel=ee}setLogLevel(ee){this._logLevel="string"==typeof ee?G[ee]:ee}get logHandler(){return this._logHandler}set logHandler(ee){if("function"!=typeof ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(ee){this._userLogHandler=ee}debug(...ee){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...ee),this._logHandler(this,K.DEBUG,...ee)}log(...ee){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...ee),this._logHandler(this,K.VERBOSE,...ee)}info(...ee){this._userLogHandler&&this._userLogHandler(this,K.INFO,...ee),this._logHandler(this,K.INFO,...ee)}warn(...ee){this._userLogHandler&&this._userLogHandler(this,K.WARN,...ee),this._logHandler(this,K.WARN,...ee)}error(...ee){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...ee),this._logHandler(this,K.ERROR,...ee)}}function We(Q){u.forEach(ee=>{ee.setLogLevel(Q)})}function xe(Q,ee){for(const he of u){let nt=null;ee&&ee.level&&(nt=G[ee.level]),he.userLogHandler=null===Q?null:($e,ht,...Ye)=>{const pt=Ye.map(it=>{if(null==it)return null;if("string"==typeof it)return it;if("number"==typeof it||"boolean"==typeof it)return it.toString();if(it instanceof Error)return it.message;try{return JSON.stringify(it)}catch{return null}}).filter(it=>it).join(" ");ht>=(nt??$e.logLevel)&&Q({level:K[ht].toLowerCase(),message:pt,args:Ye,type:$e.name})}}}},5861:(It,Le,z)=>{function u(G,ae,ge,Te,Oe,We,xe){try{var Q=G[We](xe),ee=Q.value}catch(he){return void ge(he)}Q.done?ae(ee):Promise.resolve(ee).then(Te,Oe)}function K(G){return function(){var ae=this,ge=arguments;return new Promise(function(Te,Oe){var We=G.apply(ae,ge);function xe(ee){u(We,Te,Oe,xe,Q,"next",ee)}function Q(ee){u(We,Te,Oe,xe,Q,"throw",ee)}xe(void 0)})}}z.d(Le,{Z:()=>K})},7582:(It,Le,z)=>{function he(Ce,Fe,je,et){return new(je||(je=Promise))(function(ct,zt){function Zt(Ot){try{Dt(et.next(Ot))}catch(Vn){zt(Vn)}}function ii(Ot){try{Dt(et.throw(Ot))}catch(Vn){zt(Vn)}}function Dt(Ot){Ot.done?ct(Ot.value):function dt(ct){return ct instanceof je?ct:new je(function(zt){zt(ct)})}(Ot.value).then(Zt,ii)}Dt((et=et.apply(Ce,Fe||[])).next())})}function _e(Ce){return this instanceof _e?(this.v=Ce,this):new _e(Ce)}function Ve(Ce,Fe,je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,et=je.apply(Ce,Fe||[]),ct=[];return dt={},zt("next"),zt("throw"),zt("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function zt(Fn){et[Fn]&&(dt[Fn]=function(bn){return new Promise(function(Jt,Gi){ct.push([Fn,bn,Jt,Gi])>1||Zt(Fn,bn)})})}function Zt(Fn,bn){try{!function ii(Fn){Fn.value instanceof _e?Promise.resolve(Fn.value.v).then(Dt,Ot):Vn(ct[0][2],Fn)}(et[Fn](bn))}catch(Jt){Vn(ct[0][3],Jt)}}function Dt(Fn){Zt("next",Fn)}function Ot(Fn){Zt("throw",Fn)}function Vn(Fn,bn){Fn(bn),ct.shift(),ct.length&&Zt(ct[0][0],ct[0][1])}}function Re(Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,Fe=Ce[Symbol.asyncIterator];return Fe?Fe.call(Ce):(Ce=function Ye(Ce){var Fe="function"==typeof Symbol&&Symbol.iterator,je=Fe&&Ce[Fe],et=0;if(je)return je.call(Ce);if(Ce&&"number"==typeof Ce.length)return{next:function(){return Ce&&et>=Ce.length&&(Ce=void 0),{value:Ce&&Ce[et++],done:!Ce}}};throw new TypeError(Fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ce),je={},et("next"),et("throw"),et("return"),je[Symbol.asyncIterator]=function(){return this},je);function et(ct){je[ct]=Ce[ct]&&function(zt){return new Promise(function(Zt,ii){!function dt(ct,zt,Zt,ii){Promise.resolve(ii).then(function(Dt){ct({value:Dt,done:Zt})},zt)}(Zt,ii,(zt=Ce[ct](zt)).done,zt.value)})}}}z.d(Le,{FC:()=>Ve,KL:()=>Re,mG:()=>he,qq:()=>_e})}},It=>{var Le=u=>It(It.s=u);Le(2614),Le(7197)}]);